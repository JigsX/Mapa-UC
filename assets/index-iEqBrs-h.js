function Gy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Np={exports:{}},Lu={},Rp={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=Symbol.for("react.element"),Zy=Symbol.for("react.portal"),Yy=Symbol.for("react.fragment"),Xy=Symbol.for("react.strict_mode"),Qy=Symbol.for("react.profiler"),Ky=Symbol.for("react.provider"),qy=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Jy=Symbol.for("react.suspense"),ex=Symbol.for("react.memo"),tx=Symbol.for("react.lazy"),u0=Symbol.iterator;function nx(t){return t===null||typeof t!="object"?null:(t=u0&&t[u0]||t["@@iterator"],typeof t=="function"?t:null)}var Mp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Op=Object.assign,Lp={};function _a(t,e,n){this.props=t,this.context=e,this.refs=Lp,this.updater=n||Mp}_a.prototype.isReactComponent={};_a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dp(){}Dp.prototype=_a.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=Lp,this.updater=n||Mp}var wf=xf.prototype=new Dp;wf.constructor=xf;Op(wf,_a.prototype);wf.isPureReactComponent=!0;var d0=Array.isArray,Pp=Object.prototype.hasOwnProperty,vf={current:null},kp={key:!0,ref:!0,__self:!0,__source:!0};function Bp(t,e,n){var r,l={},u=null,p=null;if(e!=null)for(r in e.ref!==void 0&&(p=e.ref),e.key!==void 0&&(u=""+e.key),e)Pp.call(e,r)&&!kp.hasOwnProperty(r)&&(l[r]=e[r]);var w=arguments.length-2;if(w===1)l.children=n;else if(1<w){for(var E=Array(w),y=0;y<w;y++)E[y]=arguments[y+2];l.children=E}if(t&&t.defaultProps)for(r in w=t.defaultProps,w)l[r]===void 0&&(l[r]=w[r]);return{$$typeof:Wl,type:t,key:u,ref:p,props:l,_owner:vf.current}}function ix(t,e){return{$$typeof:Wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wl}function rx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h0=/\/+/g;function md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rx(""+t.key):e.toString(36)}function Mc(t,e,n,r,l){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var p=!1;if(t===null)p=!0;else switch(u){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case Wl:case Zy:p=!0}}if(p)return p=t,l=l(p),t=r===""?"."+md(p,0):r,d0(l)?(n="",t!=null&&(n=t.replace(h0,"$&/")+"/"),Mc(l,e,n,"",function(y){return y})):l!=null&&(Ef(l)&&(l=ix(l,n+(!l.key||p&&p.key===l.key?"":(""+l.key).replace(h0,"$&/")+"/")+t)),e.push(l)),1;if(p=0,r=r===""?".":r+":",d0(t))for(var w=0;w<t.length;w++){u=t[w];var E=r+md(u,w);p+=Mc(u,e,n,E,l)}else if(E=nx(t),typeof E=="function")for(t=E.call(t),w=0;!(u=t.next()).done;)u=u.value,E=r+md(u,w++),p+=Mc(u,e,n,E,l);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return p}function hc(t,e,n){if(t==null)return t;var r=[],l=0;return Mc(t,r,"","",function(u){return e.call(n,u,l++)}),r}function ox(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var oi={current:null},Oc={transition:null},sx={ReactCurrentDispatcher:oi,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:vf};ct.Children={map:hc,forEach:function(t,e,n){hc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hc(t,function(){e++}),e},toArray:function(t){return hc(t,function(e){return e})||[]},only:function(t){if(!Ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=_a;ct.Fragment=Yy;ct.Profiler=Qy;ct.PureComponent=xf;ct.StrictMode=Xy;ct.Suspense=Jy;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sx;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Op({},t.props),l=t.key,u=t.ref,p=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,p=vf.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var w=t.type.defaultProps;for(E in e)Pp.call(e,E)&&!kp.hasOwnProperty(E)&&(r[E]=e[E]===void 0&&w!==void 0?w[E]:e[E])}var E=arguments.length-2;if(E===1)r.children=n;else if(1<E){w=Array(E);for(var y=0;y<E;y++)w[y]=arguments[y+2];r.children=w}return{$$typeof:Wl,type:t.type,key:l,ref:u,props:r,_owner:p}};ct.createContext=function(t){return t={$$typeof:qy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ky,_context:t},t.Consumer=t};ct.createElement=Bp;ct.createFactory=function(t){var e=Bp.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:$y,render:t}};ct.isValidElement=Ef;ct.lazy=function(t){return{$$typeof:tx,_payload:{_status:-1,_result:t},_init:ox}};ct.memo=function(t,e){return{$$typeof:ex,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Oc.transition;Oc.transition={};try{t()}finally{Oc.transition=e}};ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ct.useCallback=function(t,e){return oi.current.useCallback(t,e)};ct.useContext=function(t){return oi.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return oi.current.useDeferredValue(t)};ct.useEffect=function(t,e){return oi.current.useEffect(t,e)};ct.useId=function(){return oi.current.useId()};ct.useImperativeHandle=function(t,e,n){return oi.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return oi.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return oi.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return oi.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return oi.current.useReducer(t,e,n)};ct.useRef=function(t){return oi.current.useRef(t)};ct.useState=function(t){return oi.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return oi.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return oi.current.useTransition()};ct.version="18.2.0";Rp.exports=ct;var pn=Rp.exports;const ax=Ou(pn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx=pn,cx=Symbol.for("react.element"),ux=Symbol.for("react.fragment"),dx=Object.prototype.hasOwnProperty,hx=lx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fx={key:!0,ref:!0,__self:!0,__source:!0};function Fp(t,e,n){var r,l={},u=null,p=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(p=e.ref);for(r in e)dx.call(e,r)&&!fx.hasOwnProperty(r)&&(l[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)l[r]===void 0&&(l[r]=e[r]);return{$$typeof:cx,type:t,key:u,ref:p,props:l,_owner:hx.current}}Lu.Fragment=ux;Lu.jsx=Fp;Lu.jsxs=Fp;Np.exports=Lu;var Pe=Np.exports,nh={},zp={exports:{}},Ni={},Up={exports:{}},Hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,Se){var le=ne.length;ne.push(Se);e:for(;0<le;){var De=le-1>>>1,Re=ne[De];if(0<l(Re,Se))ne[De]=Se,ne[le]=Re,le=De;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Se=ne[0],le=ne.pop();if(le!==Se){ne[0]=le;e:for(var De=0,Re=ne.length,At=Re>>>1;De<At;){var Ue=2*(De+1)-1,Je=ne[Ue],ae=Ue+1,nn=ne[ae];if(0>l(Je,le))ae<Re&&0>l(nn,Je)?(ne[De]=nn,ne[ae]=le,De=ae):(ne[De]=Je,ne[Ue]=le,De=Ue);else if(ae<Re&&0>l(nn,le))ne[De]=nn,ne[ae]=le,De=ae;else break e}}return Se}function l(ne,Se){var le=ne.sortIndex-Se.sortIndex;return le!==0?le:ne.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var p=Date,w=p.now();t.unstable_now=function(){return p.now()-w}}var E=[],y=[],N=1,I=null,D=3,W=!1,Y=!1,V=!1,me=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ne){for(var Se=n(y);Se!==null;){if(Se.callback===null)r(y);else if(Se.startTime<=ne)r(y),Se.sortIndex=Se.expirationTime,e(E,Se);else break;Se=n(y)}}function $(ne){if(V=!1,B(ne),!Y)if(n(E)!==null)Y=!0,Le(pe);else{var Se=n(y);Se!==null&&Te($,Se.startTime-ne)}}function pe(ne,Se){Y=!1,V&&(V=!1,H(fe),fe=-1),W=!0;var le=D;try{for(B(Se),I=n(E);I!==null&&(!(I.expirationTime>Se)||ne&&!je());){var De=I.callback;if(typeof De=="function"){I.callback=null,D=I.priorityLevel;var Re=De(I.expirationTime<=Se);Se=t.unstable_now(),typeof Re=="function"?I.callback=Re:I===n(E)&&r(E),B(Se)}else r(E);I=n(E)}if(I!==null)var At=!0;else{var Ue=n(y);Ue!==null&&Te($,Ue.startTime-Se),At=!1}return At}finally{I=null,D=le,W=!1}}var ce=!1,K=null,fe=-1,te=5,ze=-1;function je(){return!(t.unstable_now()-ze<te)}function ve(){if(K!==null){var ne=t.unstable_now();ze=ne;var Se=!0;try{Se=K(!0,ne)}finally{Se?$e():(ce=!1,K=null)}}else ce=!1}var $e;if(typeof k=="function")$e=function(){k(ve)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,J=Ye.port2;Ye.port1.onmessage=ve,$e=function(){J.postMessage(null)}}else $e=function(){me(ve,0)};function Le(ne){K=ne,ce||(ce=!0,$e())}function Te(ne,Se){fe=me(function(){ne(t.unstable_now())},Se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){Y||W||(Y=!0,Le(pe))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return n(E)},t.unstable_next=function(ne){switch(D){case 1:case 2:case 3:var Se=3;break;default:Se=D}var le=D;D=Se;try{return ne()}finally{D=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Se){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var le=D;D=ne;try{return Se()}finally{D=le}},t.unstable_scheduleCallback=function(ne,Se,le){var De=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?De+le:De):le=De,ne){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=le+Re,ne={id:N++,callback:Se,priorityLevel:ne,startTime:le,expirationTime:Re,sortIndex:-1},le>De?(ne.sortIndex=le,e(y,ne),n(E)===null&&ne===n(y)&&(V?(H(fe),fe=-1):V=!0,Te($,le-De))):(ne.sortIndex=Re,e(E,ne),Y||W||(Y=!0,Le(pe))),ne},t.unstable_shouldYield=je,t.unstable_wrapCallback=function(ne){var Se=D;return function(){var le=D;D=Se;try{return ne.apply(this,arguments)}finally{D=le}}}})(Hp);Up.exports=Hp;var gx=Up.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=pn,bi=gx;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vp=new Set,pl={};function xs(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(pl[t]=e,t=0;t<e.length;t++)Vp.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ih=Object.prototype.hasOwnProperty,px=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f0={},g0={};function mx(t){return ih.call(g0,t)?!0:ih.call(f0,t)?!1:px.test(t)?g0[t]=!0:(f0[t]=!0,!1)}function _x(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yx(t,e,n,r){if(e===null||typeof e>"u"||_x(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function si(t,e,n,r,l,u,p){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=p}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fn[t]=new si(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fn[e]=new si(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fn[t]=new si(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fn[t]=new si(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fn[t]=new si(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fn[t]=new si(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fn[t]=new si(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fn[t]=new si(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fn[t]=new si(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cf=/[\-:]([a-z])/g;function Sf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cf,Sf);Fn[e]=new si(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cf,Sf);Fn[e]=new si(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cf,Sf);Fn[e]=new si(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fn[t]=new si(t,1,!1,t.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fn[t]=new si(t,1,!1,t.toLowerCase(),null,!0,!0)});function Af(t,e,n,r){var l=Fn.hasOwnProperty(e)?Fn[e]:null;(l!==null?l.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yx(e,n,l,r)&&(n=null),r||l===null?mx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(e=l.attributeName,r=l.attributeNamespace,n===null?t.removeAttribute(e):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=Wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),jp=Symbol.for("react.provider"),Gp=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),oh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),bf=Symbol.for("react.memo"),mo=Symbol.for("react.lazy"),Zp=Symbol.for("react.offscreen"),p0=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,_d;function $a(t){if(_d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_d=e&&e[1]||""}return`
`+_d+t}var yd=!1;function xd(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(y){var r=y}Reflect.construct(t,[],e)}else{try{e.call()}catch(y){r=y}t.call(e.prototype)}else{try{throw Error()}catch(y){r=y}t()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var l=y.stack.split(`
`),u=r.stack.split(`
`),p=l.length-1,w=u.length-1;1<=p&&0<=w&&l[p]!==u[w];)w--;for(;1<=p&&0<=w;p--,w--)if(l[p]!==u[w]){if(p!==1||w!==1)do if(p--,w--,0>w||l[p]!==u[w]){var E=`
`+l[p].replace(" at new "," at ");return t.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",t.displayName)),E}while(1<=p&&0<=w);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$a(t):""}function xx(t){switch(t.tag){case 5:return $a(t.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return t=xd(t.type,!1),t;case 11:return t=xd(t.type.render,!1),t;case 1:return t=xd(t.type,!0),t;default:return""}}function ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case Ds:return"Portal";case rh:return"Profiler";case If:return"StrictMode";case oh:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gp:return(t.displayName||"Context")+".Consumer";case jp:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bf:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case mo:e=t._payload,t=t._init;try{return ah(t(e))}catch{}}return null}function wx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(e);case 8:return e===If?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vx(t){var e=Yp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(p){r=""+p,u.call(this,p)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(p){r=""+p},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gc(t){t._valueTracker||(t._valueTracker=vx(t))}function Xp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qp(t,e){e=e.checked,e!=null&&Af(t,"checked",e,!1)}function ch(t,e){Qp(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&uh(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uh(t,e,n){(e!=="number"||Vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ja=Array.isArray;function Qs(t,e,n,r){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,r&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function y0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Ja(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function Kp(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function x0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pc,$p=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,l){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pc=pc||document.createElement("div"),pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ex=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){Ex.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function Jp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function em(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Jp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,l):t[n]=l}}var Cx=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(Cx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function gh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mh=null,Ks=null,qs=null;function w0(t){if(t=Gl(t)){if(typeof mh!="function")throw Error(he(280));var e=t.stateNode;e&&(e=Fu(e),mh(t.stateNode,t.type,e))}}function tm(t){Ks?qs?qs.push(t):qs=[t]:Ks=t}function nm(){if(Ks){var t=Ks,e=qs;if(qs=Ks=null,w0(t),e)for(t=0;t<e.length;t++)w0(e[t])}}function im(t,e){return t(e)}function rm(){}var wd=!1;function om(t,e,n){if(wd)return t(e,n);wd=!0;try{return im(t,e,n)}finally{wd=!1,(Ks!==null||qs!==null)&&(rm(),nm())}}function _l(t,e){var n=t.stateNode;if(n===null)return null;var r=Fu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var _h=!1;if(Xr)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){_h=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{_h=!1}function Sx(t,e,n,r,l,u,p,w,E){var y=Array.prototype.slice.call(arguments,3);try{e.apply(n,y)}catch(N){this.onError(N)}}var il=!1,jc=null,Gc=!1,yh=null,Ax={onError:function(t){il=!0,jc=t}};function Ix(t,e,n,r,l,u,p,w,E){il=!1,jc=null,Sx.apply(Ax,arguments)}function Tx(t,e,n,r,l,u,p,w,E){if(Ix.apply(this,arguments),il){if(il){var y=jc;il=!1,jc=null}else throw Error(he(198));Gc||(Gc=!0,yh=y)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v0(t){if(ws(t)!==t)throw Error(he(188))}function bx(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return v0(l),t;if(u===r)return v0(l),e;u=u.sibling}throw Error(he(188))}if(n.return!==r.return)n=l,r=u;else{for(var p=!1,w=l.child;w;){if(w===n){p=!0,n=l,r=u;break}if(w===r){p=!0,r=l,n=u;break}w=w.sibling}if(!p){for(w=u.child;w;){if(w===n){p=!0,n=u,r=l;break}if(w===r){p=!0,r=u,n=l;break}w=w.sibling}if(!p)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function am(t){return t=bx(t),t!==null?lm(t):null}function lm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lm(t);if(e!==null)return e;t=t.sibling}return null}var cm=bi.unstable_scheduleCallback,E0=bi.unstable_cancelCallback,Nx=bi.unstable_shouldYield,Rx=bi.unstable_requestPaint,un=bi.unstable_now,Mx=bi.unstable_getCurrentPriorityLevel,Rf=bi.unstable_ImmediatePriority,um=bi.unstable_UserBlockingPriority,Zc=bi.unstable_NormalPriority,Ox=bi.unstable_LowPriority,dm=bi.unstable_IdlePriority,Du=null,Tr=null;function Lx(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Du,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:kx,Dx=Math.log,Px=Math.LN2;function kx(t){return t>>>=0,t===0?32:31-(Dx(t)/Px|0)|0}var mc=64,_c=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,l=t.suspendedLanes,u=t.pingedLanes,p=n&268435455;if(p!==0){var w=p&~l;w!==0?r=el(w):(u&=p,u!==0&&(r=el(u)))}else p=n&~l,p!==0?r=el(p):u!==0&&(r=el(u));if(r===0)return 0;if(e!==0&&e!==r&&!(e&l)&&(l=r&-r,u=e&-e,l>=u||l===16&&(u&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),l=1<<n,r|=t[n],e&=~l;return r}function Bx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,l=t.expirationTimes,u=t.pendingLanes;0<u;){var p=31-ur(u),w=1<<p,E=l[p];E===-1?(!(w&n)||w&r)&&(l[p]=Bx(w,e)):E<=e&&(t.expiredLanes|=w),u&=~w}}function xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hm(){var t=mc;return mc<<=1,!(mc&4194240)&&(mc=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function zx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-ur(n),u=1<<l;e[l]=0,r[l]=-1,t[l]=-1,n&=~u}}function Mf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),l=1<<r;l&e|t[r]&e&&(t[r]|=e),n&=~l}}var Nt=0;function fm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gm,Of,pm,mm,_m,wh=!1,yc=[],Eo=null,Co=null,So=null,yl=new Map,xl=new Map,yo=[],Ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(t,e){switch(t){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(e.pointerId)}}function Wa(t,e,n,r,l,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[l]},e!==null&&(e=Gl(e),e!==null&&Of(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function Hx(t,e,n,r,l){switch(e){case"focusin":return Eo=Wa(Eo,t,e,n,r,l),!0;case"dragenter":return Co=Wa(Co,t,e,n,r,l),!0;case"mouseover":return So=Wa(So,t,e,n,r,l),!0;case"pointerover":var u=l.pointerId;return yl.set(u,Wa(yl.get(u)||null,t,e,n,r,l)),!0;case"gotpointercapture":return u=l.pointerId,xl.set(u,Wa(xl.get(u)||null,t,e,n,r,l)),!0}return!1}function ym(t){var e=ns(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=sm(n),e!==null){t.blockedOn=e,_m(t.priority,function(){pm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return e=Gl(n),e!==null&&Of(e),t.blockedOn=n,!1;e.shift()}return!0}function S0(t,e,n){Lc(t)&&n.delete(e)}function Wx(){wh=!1,Eo!==null&&Lc(Eo)&&(Eo=null),Co!==null&&Lc(Co)&&(Co=null),So!==null&&Lc(So)&&(So=null),yl.forEach(S0),xl.forEach(S0)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,wh||(wh=!0,bi.unstable_scheduleCallback(bi.unstable_NormalPriority,Wx)))}function wl(t){function e(l){return Va(l,t)}if(0<yc.length){Va(yc[0],t);for(var n=1;n<yc.length;n++){var r=yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Eo!==null&&Va(Eo,t),Co!==null&&Va(Co,t),So!==null&&Va(So,t),yl.forEach(e),xl.forEach(e),n=0;n<yo.length;n++)r=yo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yo.length&&(n=yo[0],n.blockedOn===null);)ym(n),n.blockedOn===null&&yo.shift()}var $s=Jr.ReactCurrentBatchConfig,Xc=!0;function Vx(t,e,n,r){var l=Nt,u=$s.transition;$s.transition=null;try{Nt=1,Lf(t,e,n,r)}finally{Nt=l,$s.transition=u}}function jx(t,e,n,r){var l=Nt,u=$s.transition;$s.transition=null;try{Nt=4,Lf(t,e,n,r)}finally{Nt=l,$s.transition=u}}function Lf(t,e,n,r){if(Xc){var l=vh(t,e,n,r);if(l===null)Md(t,e,r,Qc,n),C0(t,r);else if(Hx(l,t,e,n,r))r.stopPropagation();else if(C0(t,r),e&4&&-1<Ux.indexOf(t)){for(;l!==null;){var u=Gl(l);if(u!==null&&gm(u),u=vh(t,e,n,r),u===null&&Md(t,e,r,Qc,n),u===l)break;l=u}l!==null&&r.stopPropagation()}else Md(t,e,r,null,n)}}var Qc=null;function vh(t,e,n,r){if(Qc=null,t=Nf(r),t=ns(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qc=t,null}function xm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mx()){case Rf:return 1;case um:return 4;case Zc:case Ox:return 16;case dm:return 536870912;default:return 16}default:return 16}}var wo=null,Df=null,Dc=null;function wm(){if(Dc)return Dc;var t,e=Df,n=e.length,r,l="value"in wo?wo.value:wo.textContent,u=l.length;for(t=0;t<n&&e[t]===l[t];t++);var p=n-t;for(r=1;r<=p&&e[n-r]===l[u-r];r++);return Dc=l.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xc(){return!0}function A0(){return!1}function Ri(t){function e(n,r,l,u,p){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(n=t[w],this[w]=n?n(u):u[w]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?xc:A0,this.isPropagationStopped=A0,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Ri(ya),jl=tn({},ya,{view:0,detail:0}),Gx=Ri(jl),Ed,Cd,ja,Pu=tn({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ja&&(ja&&t.type==="mousemove"?(Ed=t.screenX-ja.screenX,Cd=t.screenY-ja.screenY):Cd=Ed=0,ja=t),Ed)},movementY:function(t){return"movementY"in t?t.movementY:Cd}}),I0=Ri(Pu),Zx=tn({},Pu,{dataTransfer:0}),Yx=Ri(Zx),Xx=tn({},jl,{relatedTarget:0}),Sd=Ri(Xx),Qx=tn({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),Kx=Ri(Qx),qx=tn({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$x=Ri(qx),Jx=tn({},ya,{data:0}),T0=Ri(Jx),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nw[t])?!!e[t]:!1}function kf(){return iw}var rw=tn({},jl,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kf,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ow=Ri(rw),sw=tn({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b0=Ri(sw),aw=tn({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kf}),lw=Ri(aw),cw=tn({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),uw=Ri(cw),dw=tn({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hw=Ri(dw),fw=[9,13,27,32],Bf=Xr&&"CompositionEvent"in window,rl=null;Xr&&"documentMode"in document&&(rl=document.documentMode);var gw=Xr&&"TextEvent"in window&&!rl,vm=Xr&&(!Bf||rl&&8<rl&&11>=rl),N0=" ",R0=!1;function Em(t,e){switch(t){case"keyup":return fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function pw(t,e){switch(t){case"compositionend":return Cm(e);case"keypress":return e.which!==32?null:(R0=!0,N0);case"textInput":return t=e.data,t===N0&&R0?null:t;default:return null}}function mw(t,e){if(ks)return t==="compositionend"||!Bf&&Em(t,e)?(t=wm(),Dc=Df=wo=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vm&&e.locale!=="ko"?null:e.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_w[t.type]:e==="textarea"}function Sm(t,e,n,r){tm(r),e=Kc(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ol=null,vl=null;function yw(t){Pm(t,0)}function ku(t){var e=zs(t);if(Xp(e))return t}function xw(t,e){if(t==="change")return e}var Am=!1;if(Xr){var Ad;if(Xr){var Id="oninput"in document;if(!Id){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),Id=typeof O0.oninput=="function"}Ad=Id}else Ad=!1;Am=Ad&&(!document.documentMode||9<document.documentMode)}function L0(){ol&&(ol.detachEvent("onpropertychange",Im),vl=ol=null)}function Im(t){if(t.propertyName==="value"&&ku(vl)){var e=[];Sm(e,vl,t,Nf(t)),om(yw,e)}}function ww(t,e,n){t==="focusin"?(L0(),ol=e,vl=n,ol.attachEvent("onpropertychange",Im)):t==="focusout"&&L0()}function vw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(vl)}function Ew(t,e){if(t==="click")return ku(e)}function Cw(t,e){if(t==="input"||t==="change")return ku(e)}function Sw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:Sw;function El(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ih.call(e,l)||!fr(t[l],e[l]))return!1}return!0}function D0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function P0(t,e){var n=D0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D0(n)}}function Tm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bm(){for(var t=window,e=Vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vc(t.document)}return e}function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aw(t){var e=bm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tm(n.ownerDocument.documentElement,n)){if(r!==null&&Ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,u=Math.min(r.start,l);r=r.end===void 0?u:Math.min(r.end,l),!t.extend&&u>r&&(l=r,r=u,u=l),l=P0(n,u);var p=P0(n,r);l&&p&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),u>r?(t.addRange(e),t.extend(p.node,p.offset)):(e.setEnd(p.node,p.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Iw=Xr&&"documentMode"in document&&11>=document.documentMode,Bs=null,Eh=null,sl=null,Ch=!1;function k0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ch||Bs==null||Bs!==Vc(r)||(r=Bs,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&El(sl,r)||(sl=r,r=Kc(Eh,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bs)))}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fs={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},Td={},Nm={};Xr&&(Nm=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Bu(t){if(Td[t])return Td[t];if(!Fs[t])return t;var e=Fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nm)return Td[t]=e[n];return t}var Rm=Bu("animationend"),Mm=Bu("animationiteration"),Om=Bu("animationstart"),Lm=Bu("transitionend"),Dm=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fo(t,e){Dm.set(t,e),xs(e,[t])}for(var bd=0;bd<B0.length;bd++){var Nd=B0[bd],Tw=Nd.toLowerCase(),bw=Nd[0].toUpperCase()+Nd.slice(1);Fo(Tw,"on"+bw)}Fo(Rm,"onAnimationEnd");Fo(Mm,"onAnimationIteration");Fo(Om,"onAnimationStart");Fo("dblclick","onDoubleClick");Fo("focusin","onFocus");Fo("focusout","onBlur");Fo(Lm,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function F0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tx(r,e,void 0,t),t.currentTarget=null}function Pm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],l=r.event;r=r.listeners;e:{var u=void 0;if(e)for(var p=r.length-1;0<=p;p--){var w=r[p],E=w.instance,y=w.currentTarget;if(w=w.listener,E!==u&&l.isPropagationStopped())break e;F0(l,w,y),u=E}else for(p=0;p<r.length;p++){if(w=r[p],E=w.instance,y=w.currentTarget,w=w.listener,E!==u&&l.isPropagationStopped())break e;F0(l,w,y),u=E}}}if(Gc)throw t=yh,Gc=!1,yh=null,t}function jt(t,e){var n=e[bh];n===void 0&&(n=e[bh]=new Set);var r=t+"__bubble";n.has(r)||(km(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),km(n,t,r,e)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Cl(t){if(!t[vc]){t[vc]=!0,Vp.forEach(function(n){n!=="selectionchange"&&(Nw.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vc]||(e[vc]=!0,Rd("selectionchange",!1,e))}}function km(t,e,n,r){switch(xm(e)){case 1:var l=Vx;break;case 4:l=jx;break;default:l=Lf}n=l.bind(null,e,n,t),l=void 0,!_h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),r?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function Md(t,e,n,r,l){var u=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var w=r.stateNode.containerInfo;if(w===l||w.nodeType===8&&w.parentNode===l)break;if(p===4)for(p=r.return;p!==null;){var E=p.tag;if((E===3||E===4)&&(E=p.stateNode.containerInfo,E===l||E.nodeType===8&&E.parentNode===l))return;p=p.return}for(;w!==null;){if(p=ns(w),p===null)return;if(E=p.tag,E===5||E===6){r=u=p;continue e}w=w.parentNode}}r=r.return}om(function(){var y=u,N=Nf(n),I=[];e:{var D=Dm.get(t);if(D!==void 0){var W=Pf,Y=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":W=ow;break;case"focusin":Y="focus",W=Sd;break;case"focusout":Y="blur",W=Sd;break;case"beforeblur":case"afterblur":W=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=I0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=lw;break;case Rm:case Mm:case Om:W=Kx;break;case Lm:W=uw;break;case"scroll":W=Gx;break;case"wheel":W=hw;break;case"copy":case"cut":case"paste":W=$x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=b0}var V=(e&4)!==0,me=!V&&t==="scroll",H=V?D!==null?D+"Capture":null:D;V=[];for(var k=y,B;k!==null;){B=k;var $=B.stateNode;if(B.tag===5&&$!==null&&(B=$,H!==null&&($=_l(k,H),$!=null&&V.push(Sl(k,$,B)))),me)break;k=k.return}0<V.length&&(D=new W(D,Y,null,n,N),I.push({event:D,listeners:V}))}}if(!(e&7)){e:{if(D=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",D&&n!==ph&&(Y=n.relatedTarget||n.fromElement)&&(ns(Y)||Y[Qr]))break e;if((W||D)&&(D=N.window===N?N:(D=N.ownerDocument)?D.defaultView||D.parentWindow:window,W?(Y=n.relatedTarget||n.toElement,W=y,Y=Y?ns(Y):null,Y!==null&&(me=ws(Y),Y!==me||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(W=null,Y=y),W!==Y)){if(V=I0,$="onMouseLeave",H="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(V=b0,$="onPointerLeave",H="onPointerEnter",k="pointer"),me=W==null?D:zs(W),B=Y==null?D:zs(Y),D=new V($,k+"leave",W,n,N),D.target=me,D.relatedTarget=B,$=null,ns(N)===y&&(V=new V(H,k+"enter",Y,n,N),V.target=B,V.relatedTarget=me,$=V),me=$,W&&Y)t:{for(V=W,H=Y,k=0,B=V;B;B=Ms(B))k++;for(B=0,$=H;$;$=Ms($))B++;for(;0<k-B;)V=Ms(V),k--;for(;0<B-k;)H=Ms(H),B--;for(;k--;){if(V===H||H!==null&&V===H.alternate)break t;V=Ms(V),H=Ms(H)}V=null}else V=null;W!==null&&z0(I,D,W,V,!1),Y!==null&&me!==null&&z0(I,me,Y,V,!0)}}e:{if(D=y?zs(y):window,W=D.nodeName&&D.nodeName.toLowerCase(),W==="select"||W==="input"&&D.type==="file")var pe=xw;else if(M0(D))if(Am)pe=Cw;else{pe=vw;var ce=ww}else(W=D.nodeName)&&W.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(pe=Ew);if(pe&&(pe=pe(t,y))){Sm(I,pe,n,N);break e}ce&&ce(t,D,y),t==="focusout"&&(ce=D._wrapperState)&&ce.controlled&&D.type==="number"&&uh(D,"number",D.value)}switch(ce=y?zs(y):window,t){case"focusin":(M0(ce)||ce.contentEditable==="true")&&(Bs=ce,Eh=y,sl=null);break;case"focusout":sl=Eh=Bs=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,k0(I,n,N);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":k0(I,n,N)}var K;if(Bf)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else ks?Em(t,n)&&(fe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(fe="onCompositionStart");fe&&(vm&&n.locale!=="ko"&&(ks||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&ks&&(K=wm()):(wo=N,Df="value"in wo?wo.value:wo.textContent,ks=!0)),ce=Kc(y,fe),0<ce.length&&(fe=new T0(fe,t,null,n,N),I.push({event:fe,listeners:ce}),K?fe.data=K:(K=Cm(n),K!==null&&(fe.data=K)))),(K=gw?pw(t,n):mw(t,n))&&(y=Kc(y,"onBeforeInput"),0<y.length&&(N=new T0("onBeforeInput","beforeinput",null,n,N),I.push({event:N,listeners:y}),N.data=K))}Pm(I,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kc(t,e){for(var n=e+"Capture",r=[];t!==null;){var l=t,u=l.stateNode;l.tag===5&&u!==null&&(l=u,u=_l(t,n),u!=null&&r.unshift(Sl(t,u,l)),u=_l(t,e),u!=null&&r.push(Sl(t,u,l))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z0(t,e,n,r,l){for(var u=e._reactName,p=[];n!==null&&n!==r;){var w=n,E=w.alternate,y=w.stateNode;if(E!==null&&E===r)break;w.tag===5&&y!==null&&(w=y,l?(E=_l(n,u),E!=null&&p.unshift(Sl(n,E,w))):l||(E=_l(n,u),E!=null&&p.push(Sl(n,E,w)))),n=n.return}p.length!==0&&t.push({event:e,listeners:p})}var Rw=/\r\n?/g,Mw=/\u0000|\uFFFD/g;function U0(t){return(typeof t=="string"?t:""+t).replace(Rw,`
`).replace(Mw,"")}function Ec(t,e,n){if(e=U0(e),U0(t)!==e&&n)throw Error(he(425))}function qc(){}var Sh=null,Ah=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Th=typeof setTimeout=="function"?setTimeout:void 0,Ow=typeof clearTimeout=="function"?clearTimeout:void 0,H0=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof H0<"u"?function(t){return H0.resolve(null).then(t).catch(Dw)}:Th;function Dw(t){setTimeout(function(){throw t})}function Od(t,e){var n=e,r=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){t.removeChild(l),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);wl(e)}function Ao(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xa=Math.random().toString(36).slice(2),Ir="__reactFiber$"+xa,Al="__reactProps$"+xa,Qr="__reactContainer$"+xa,bh="__reactEvents$"+xa,Pw="__reactListeners$"+xa,kw="__reactHandles$"+xa;function ns(t){var e=t[Ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[Ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W0(t);t!==null;){if(n=t[Ir])return n;t=W0(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[Ir]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function Fu(t){return t[Al]||null}var Nh=[],Us=-1;function zo(t){return{current:t}}function Yt(t){0>Us||(t.current=Nh[Us],Nh[Us]=null,Us--)}function zt(t,e){Us++,Nh[Us]=t.current,t.current=e}var Do={},Qn=zo(Do),fi=zo(!1),cs=Do;function aa(t,e){var n=t.type.contextTypes;if(!n)return Do;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var l={},u;for(u in n)l[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function gi(t){return t=t.childContextTypes,t!=null}function $c(){Yt(fi),Yt(Qn)}function V0(t,e,n){if(Qn.current!==Do)throw Error(he(168));zt(Qn,e),zt(fi,n)}function Bm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in e))throw Error(he(108,wx(t)||"Unknown",l));return tn({},n,r)}function Jc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Do,cs=Qn.current,zt(Qn,t),zt(fi,fi.current),!0}function j0(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=Bm(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Yt(fi),Yt(Qn),zt(Qn,t)):Yt(fi),zt(fi,n)}var Hr=null,zu=!1,Ld=!1;function Fm(t){Hr===null?Hr=[t]:Hr.push(t)}function Bw(t){zu=!0,Fm(t)}function Uo(){if(!Ld&&Hr!==null){Ld=!0;var t=0,e=Nt;try{var n=Hr;for(Nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,zu=!1}catch(l){throw Hr!==null&&(Hr=Hr.slice(t+1)),cm(Rf,Uo),l}finally{Nt=e,Ld=!1}}return null}var Hs=[],Ws=0,eu=null,tu=0,Hi=[],Wi=0,us=null,Wr=1,Vr="";function $o(t,e){Hs[Ws++]=tu,Hs[Ws++]=eu,eu=t,tu=e}function zm(t,e,n){Hi[Wi++]=Wr,Hi[Wi++]=Vr,Hi[Wi++]=us,us=t;var r=Wr;t=Vr;var l=32-ur(r)-1;r&=~(1<<l),n+=1;var u=32-ur(e)+l;if(30<u){var p=l-l%5;u=(r&(1<<p)-1).toString(32),r>>=p,l-=p,Wr=1<<32-ur(e)+l|n<<l|r,Vr=u+t}else Wr=1<<u|n<<l|r,Vr=t}function zf(t){t.return!==null&&($o(t,1),zm(t,1,0))}function Uf(t){for(;t===eu;)eu=Hs[--Ws],Hs[Ws]=null,tu=Hs[--Ws],Hs[Ws]=null;for(;t===us;)us=Hi[--Wi],Hi[Wi]=null,Vr=Hi[--Wi],Hi[Wi]=null,Wr=Hi[--Wi],Hi[Wi]=null}var Ii=null,Ai=null,Qt=!1,sr=null;function Um(t,e){var n=Vi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ii=t,Ai=Ao(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ii=t,Ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:Wr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ii=t,Ai=null,!0):!1;default:return!1}}function Rh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mh(t){if(Qt){var e=Ai;if(e){var n=e;if(!G0(t,e)){if(Rh(t))throw Error(he(418));e=Ao(n.nextSibling);var r=Ii;e&&G0(t,e)?Um(r,n):(t.flags=t.flags&-4097|2,Qt=!1,Ii=t)}}else{if(Rh(t))throw Error(he(418));t.flags=t.flags&-4097|2,Qt=!1,Ii=t}}}function Z0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ii=t}function Cc(t){if(t!==Ii)return!1;if(!Qt)return Z0(t),Qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=Ai)){if(Rh(t))throw Hm(),Error(he(418));for(;e;)Um(t,e),e=Ao(e.nextSibling)}if(Z0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ai=Ao(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ai=null}}else Ai=Ii?Ao(t.stateNode.nextSibling):null;return!0}function Hm(){for(var t=Ai;t;)t=Ao(t.nextSibling)}function la(){Ai=Ii=null,Qt=!1}function Hf(t){sr===null?sr=[t]:sr.push(t)}var Fw=Jr.ReactCurrentBatchConfig;function ir(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var nu=zo(null),iu=null,Vs=null,Wf=null;function Vf(){Wf=Vs=iu=null}function jf(t){var e=nu.current;Yt(nu),t._currentValue=e}function Oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Js(t,e){iu=t,Wf=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ui=!0),t.firstContext=null)}function Gi(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(iu===null)throw Error(he(308));Vs=t,iu.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var is=null;function Gf(t){is===null?is=[t]:is.push(t)}function Wm(t,e,n,r){var l=e.interleaved;return l===null?(n.next=n,Gf(e)):(n.next=l.next,l.next=n),e.interleaved=n,Kr(t,r)}function Kr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _o=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var l=r.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),r.pending=e,Kr(t,n)}return l=r.interleaved,l===null?(e.next=e,Gf(r)):(e.next=l.next,l.next=e),r.interleaved=e,Kr(t,n)}function kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mf(t,n)}}function Y0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?l=u=p:u=u.next=p,n=n.next}while(n!==null);u===null?l=u=e:u=u.next=e}else l=u=e;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ru(t,e,n,r){var l=t.updateQueue;_o=!1;var u=l.firstBaseUpdate,p=l.lastBaseUpdate,w=l.shared.pending;if(w!==null){l.shared.pending=null;var E=w,y=E.next;E.next=null,p===null?u=y:p.next=y,p=E;var N=t.alternate;N!==null&&(N=N.updateQueue,w=N.lastBaseUpdate,w!==p&&(w===null?N.firstBaseUpdate=y:w.next=y,N.lastBaseUpdate=E))}if(u!==null){var I=l.baseState;p=0,N=y=E=null,w=u;do{var D=w.lane,W=w.eventTime;if((r&D)===D){N!==null&&(N=N.next={eventTime:W,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var Y=t,V=w;switch(D=e,W=n,V.tag){case 1:if(Y=V.payload,typeof Y=="function"){I=Y.call(W,I,D);break e}I=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=V.payload,D=typeof Y=="function"?Y.call(W,I,D):Y,D==null)break e;I=tn({},I,D);break e;case 2:_o=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,D=l.effects,D===null?l.effects=[w]:D.push(w))}else W={eventTime:W,lane:D,tag:w.tag,payload:w.payload,callback:w.callback,next:null},N===null?(y=N=W,E=I):N=N.next=W,p|=D;if(w=w.next,w===null){if(w=l.shared.pending,w===null)break;D=w,w=D.next,D.next=null,l.lastBaseUpdate=D,l.shared.pending=null}}while(!0);if(N===null&&(E=I),l.baseState=E,l.firstBaseUpdate=y,l.lastBaseUpdate=N,e=l.shared.interleaved,e!==null){l=e;do p|=l.lane,l=l.next;while(l!==e)}else u===null&&(l.shared.lanes=0);hs|=p,t.lanes=p,t.memoizedState=I}}function X0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(he(191,l));l.call(r)}}}var jm=new Wp.Component().refs;function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uu={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ri(),l=bo(t),u=Zr(r,l);u.payload=e,n!=null&&(u.callback=n),e=Io(t,u,l),e!==null&&(dr(e,t,l,r),kc(e,t,l))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ri(),l=bo(t),u=Zr(r,l);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Io(t,u,l),e!==null&&(dr(e,t,l,r),kc(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ri(),r=bo(t),l=Zr(n,r);l.tag=2,e!=null&&(l.callback=e),e=Io(t,l,r),e!==null&&(dr(e,t,r,n),kc(e,t,r))}};function Q0(t,e,n,r,l,u,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,p):e.prototype&&e.prototype.isPureReactComponent?!El(n,r)||!El(l,u):!0}function Gm(t,e,n){var r=!1,l=Do,u=e.contextType;return typeof u=="object"&&u!==null?u=Gi(u):(l=gi(e)?cs:Qn.current,r=e.contextTypes,u=(r=r!=null)?aa(t,l):Do),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=u),e}function K0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uu.enqueueReplaceState(e,e.state,null)}function Dh(t,e,n,r){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs=jm,Zf(t);var u=e.contextType;typeof u=="object"&&u!==null?l.context=Gi(u):(u=gi(e)?cs:Qn.current,l.context=aa(t,u)),l.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(Lh(t,e,u,n),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&Uu.enqueueReplaceState(l,l.state,null),ru(t,n,l,r),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var l=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(p){var w=l.refs;w===jm&&(w=l.refs={}),p===null?delete w[u]:w[u]=p},e._stringRef=u,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function Sc(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q0(t){var e=t._init;return e(t._payload)}function Zm(t){function e(H,k){if(t){var B=H.deletions;B===null?(H.deletions=[k],H.flags|=16):B.push(k)}}function n(H,k){if(!t)return null;for(;k!==null;)e(H,k),k=k.sibling;return null}function r(H,k){for(H=new Map;k!==null;)k.key!==null?H.set(k.key,k):H.set(k.index,k),k=k.sibling;return H}function l(H,k){return H=No(H,k),H.index=0,H.sibling=null,H}function u(H,k,B){return H.index=B,t?(B=H.alternate,B!==null?(B=B.index,B<k?(H.flags|=2,k):B):(H.flags|=2,k)):(H.flags|=1048576,k)}function p(H){return t&&H.alternate===null&&(H.flags|=2),H}function w(H,k,B,$){return k===null||k.tag!==6?(k=Ud(B,H.mode,$),k.return=H,k):(k=l(k,B),k.return=H,k)}function E(H,k,B,$){var pe=B.type;return pe===Ps?N(H,k,B.props.children,$,B.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===mo&&q0(pe)===k.type)?($=l(k,B.props),$.ref=Ga(H,k,B),$.return=H,$):($=Wc(B.type,B.key,B.props,null,H.mode,$),$.ref=Ga(H,k,B),$.return=H,$)}function y(H,k,B,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=Hd(B,H.mode,$),k.return=H,k):(k=l(k,B.children||[]),k.return=H,k)}function N(H,k,B,$,pe){return k===null||k.tag!==7?(k=as(B,H.mode,$,pe),k.return=H,k):(k=l(k,B),k.return=H,k)}function I(H,k,B){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ud(""+k,H.mode,B),k.return=H,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fc:return B=Wc(k.type,k.key,k.props,null,H.mode,B),B.ref=Ga(H,null,k),B.return=H,B;case Ds:return k=Hd(k,H.mode,B),k.return=H,k;case mo:var $=k._init;return I(H,$(k._payload),B)}if(Ja(k)||Ua(k))return k=as(k,H.mode,B,null),k.return=H,k;Sc(H,k)}return null}function D(H,k,B,$){var pe=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return pe!==null?null:w(H,k,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case fc:return B.key===pe?E(H,k,B,$):null;case Ds:return B.key===pe?y(H,k,B,$):null;case mo:return pe=B._init,D(H,k,pe(B._payload),$)}if(Ja(B)||Ua(B))return pe!==null?null:N(H,k,B,$,null);Sc(H,B)}return null}function W(H,k,B,$,pe){if(typeof $=="string"&&$!==""||typeof $=="number")return H=H.get(B)||null,w(k,H,""+$,pe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case fc:return H=H.get($.key===null?B:$.key)||null,E(k,H,$,pe);case Ds:return H=H.get($.key===null?B:$.key)||null,y(k,H,$,pe);case mo:var ce=$._init;return W(H,k,B,ce($._payload),pe)}if(Ja($)||Ua($))return H=H.get(B)||null,N(k,H,$,pe,null);Sc(k,$)}return null}function Y(H,k,B,$){for(var pe=null,ce=null,K=k,fe=k=0,te=null;K!==null&&fe<B.length;fe++){K.index>fe?(te=K,K=null):te=K.sibling;var ze=D(H,K,B[fe],$);if(ze===null){K===null&&(K=te);break}t&&K&&ze.alternate===null&&e(H,K),k=u(ze,k,fe),ce===null?pe=ze:ce.sibling=ze,ce=ze,K=te}if(fe===B.length)return n(H,K),Qt&&$o(H,fe),pe;if(K===null){for(;fe<B.length;fe++)K=I(H,B[fe],$),K!==null&&(k=u(K,k,fe),ce===null?pe=K:ce.sibling=K,ce=K);return Qt&&$o(H,fe),pe}for(K=r(H,K);fe<B.length;fe++)te=W(K,H,fe,B[fe],$),te!==null&&(t&&te.alternate!==null&&K.delete(te.key===null?fe:te.key),k=u(te,k,fe),ce===null?pe=te:ce.sibling=te,ce=te);return t&&K.forEach(function(je){return e(H,je)}),Qt&&$o(H,fe),pe}function V(H,k,B,$){var pe=Ua(B);if(typeof pe!="function")throw Error(he(150));if(B=pe.call(B),B==null)throw Error(he(151));for(var ce=pe=null,K=k,fe=k=0,te=null,ze=B.next();K!==null&&!ze.done;fe++,ze=B.next()){K.index>fe?(te=K,K=null):te=K.sibling;var je=D(H,K,ze.value,$);if(je===null){K===null&&(K=te);break}t&&K&&je.alternate===null&&e(H,K),k=u(je,k,fe),ce===null?pe=je:ce.sibling=je,ce=je,K=te}if(ze.done)return n(H,K),Qt&&$o(H,fe),pe;if(K===null){for(;!ze.done;fe++,ze=B.next())ze=I(H,ze.value,$),ze!==null&&(k=u(ze,k,fe),ce===null?pe=ze:ce.sibling=ze,ce=ze);return Qt&&$o(H,fe),pe}for(K=r(H,K);!ze.done;fe++,ze=B.next())ze=W(K,H,fe,ze.value,$),ze!==null&&(t&&ze.alternate!==null&&K.delete(ze.key===null?fe:ze.key),k=u(ze,k,fe),ce===null?pe=ze:ce.sibling=ze,ce=ze);return t&&K.forEach(function(ve){return e(H,ve)}),Qt&&$o(H,fe),pe}function me(H,k,B,$){if(typeof B=="object"&&B!==null&&B.type===Ps&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case fc:e:{for(var pe=B.key,ce=k;ce!==null;){if(ce.key===pe){if(pe=B.type,pe===Ps){if(ce.tag===7){n(H,ce.sibling),k=l(ce,B.props.children),k.return=H,H=k;break e}}else if(ce.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===mo&&q0(pe)===ce.type){n(H,ce.sibling),k=l(ce,B.props),k.ref=Ga(H,ce,B),k.return=H,H=k;break e}n(H,ce);break}else e(H,ce);ce=ce.sibling}B.type===Ps?(k=as(B.props.children,H.mode,$,B.key),k.return=H,H=k):($=Wc(B.type,B.key,B.props,null,H.mode,$),$.ref=Ga(H,k,B),$.return=H,H=$)}return p(H);case Ds:e:{for(ce=B.key;k!==null;){if(k.key===ce)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){n(H,k.sibling),k=l(k,B.children||[]),k.return=H,H=k;break e}else{n(H,k);break}else e(H,k);k=k.sibling}k=Hd(B,H.mode,$),k.return=H,H=k}return p(H);case mo:return ce=B._init,me(H,k,ce(B._payload),$)}if(Ja(B))return Y(H,k,B,$);if(Ua(B))return V(H,k,B,$);Sc(H,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,k!==null&&k.tag===6?(n(H,k.sibling),k=l(k,B),k.return=H,H=k):(n(H,k),k=Ud(B,H.mode,$),k.return=H,H=k),p(H)):n(H,k)}return me}var ca=Zm(!0),Ym=Zm(!1),Zl={},br=zo(Zl),Il=zo(Zl),Tl=zo(Zl);function rs(t){if(t===Zl)throw Error(he(174));return t}function Yf(t,e){switch(zt(Tl,e),zt(Il,t),zt(br,Zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hh(e,t)}Yt(br),zt(br,e)}function ua(){Yt(br),Yt(Il),Yt(Tl)}function Xm(t){rs(Tl.current);var e=rs(br.current),n=hh(e,t.type);e!==n&&(zt(Il,t),zt(br,n))}function Xf(t){Il.current===t&&(Yt(br),Yt(Il))}var Jt=zo(0);function ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function Qf(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var Bc=Jr.ReactCurrentDispatcher,Pd=Jr.ReactCurrentBatchConfig,ds=0,en=null,vn=null,On=null,su=!1,al=!1,bl=0,zw=0;function Vn(){throw Error(he(321))}function Kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function qf(t,e,n,r,l,u){if(ds=u,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bc.current=t===null||t.memoizedState===null?Vw:jw,t=n(r,l),al){u=0;do{if(al=!1,bl=0,25<=u)throw Error(he(301));u+=1,On=vn=null,e.updateQueue=null,Bc.current=Gw,t=n(r,l)}while(al)}if(Bc.current=au,e=vn!==null&&vn.next!==null,ds=0,On=vn=en=null,su=!1,e)throw Error(he(300));return t}function $f(){var t=bl!==0;return bl=0,t}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?en.memoizedState=On=t:On=On.next=t,On}function Zi(){if(vn===null){var t=en.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=On===null?en.memoizedState:On.next;if(e!==null)On=e,vn=t;else{if(t===null)throw Error(he(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},On===null?en.memoizedState=On=t:On=On.next=t}return On}function Nl(t,e){return typeof e=="function"?e(t):e}function kd(t){var e=Zi(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=vn,l=r.baseQueue,u=n.pending;if(u!==null){if(l!==null){var p=l.next;l.next=u.next,u.next=p}r.baseQueue=l=u,n.pending=null}if(l!==null){u=l.next,r=r.baseState;var w=p=null,E=null,y=u;do{var N=y.lane;if((ds&N)===N)E!==null&&(E=E.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:t(r,y.action);else{var I={lane:N,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};E===null?(w=E=I,p=r):E=E.next=I,en.lanes|=N,hs|=N}y=y.next}while(y!==null&&y!==u);E===null?p=r:E.next=w,fr(r,e.memoizedState)||(ui=!0),e.memoizedState=r,e.baseState=p,e.baseQueue=E,n.lastRenderedState=r}if(t=n.interleaved,t!==null){l=t;do u=l.lane,en.lanes|=u,hs|=u,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bd(t){var e=Zi(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,l=n.pending,u=e.memoizedState;if(l!==null){n.pending=null;var p=l=l.next;do u=t(u,p.action),p=p.next;while(p!==l);fr(u,e.memoizedState)||(ui=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function Qm(){}function Km(t,e){var n=en,r=Zi(),l=e(),u=!fr(r.memoizedState,l);if(u&&(r.memoizedState=l,ui=!0),r=r.queue,Jf(Jm.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||On!==null&&On.memoizedState.tag&1){if(n.flags|=2048,Rl(9,$m.bind(null,n,r,l,e),void 0,null),Pn===null)throw Error(he(349));ds&30||qm(n,e,l)}return l}function qm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $m(t,e,n,r){e.value=n,e.getSnapshot=r,e_(e)&&t_(t)}function Jm(t,e,n){return n(function(){e_(e)&&t_(t)})}function e_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function t_(t){var e=Kr(t,1);e!==null&&dr(e,t,1,-1)}function $0(t){var e=Sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:t},e.queue=t,t=t.dispatch=Ww.bind(null,en,t),[e.memoizedState,t]}function Rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function n_(){return Zi().memoizedState}function Fc(t,e,n,r){var l=Sr();en.flags|=t,l.memoizedState=Rl(1|e,n,void 0,r===void 0?null:r)}function Hu(t,e,n,r){var l=Zi();r=r===void 0?null:r;var u=void 0;if(vn!==null){var p=vn.memoizedState;if(u=p.destroy,r!==null&&Kf(r,p.deps)){l.memoizedState=Rl(e,n,u,r);return}}en.flags|=t,l.memoizedState=Rl(1|e,n,u,r)}function J0(t,e){return Fc(8390656,8,t,e)}function Jf(t,e){return Hu(2048,8,t,e)}function i_(t,e){return Hu(4,2,t,e)}function r_(t,e){return Hu(4,4,t,e)}function o_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s_(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4,4,o_.bind(null,e,t),n)}function e1(){}function a_(t,e){var n=Zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l_(t,e){var n=Zi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function c_(t,e,n){return ds&21?(fr(n,e)||(n=hm(),en.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ui=!0),t.memoizedState=n)}function Uw(t,e){var n=Nt;Nt=n!==0&&4>n?n:4,t(!0);var r=Pd.transition;Pd.transition={};try{t(!1),e()}finally{Nt=n,Pd.transition=r}}function u_(){return Zi().memoizedState}function Hw(t,e,n){var r=bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d_(t))h_(e,n);else if(n=Wm(t,e,n,r),n!==null){var l=ri();dr(n,t,r,l),f_(n,e,r)}}function Ww(t,e,n){var r=bo(t),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d_(t))h_(e,l);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var p=e.lastRenderedState,w=u(p,n);if(l.hasEagerState=!0,l.eagerState=w,fr(w,p)){var E=e.interleaved;E===null?(l.next=l,Gf(e)):(l.next=E.next,E.next=l),e.interleaved=l;return}}catch{}finally{}n=Wm(t,e,l,r),n!==null&&(l=ri(),dr(n,t,r,l),f_(n,e,r))}}function d_(t){var e=t.alternate;return t===en||e!==null&&e===en}function h_(t,e){al=su=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mf(t,n)}}var au={readContext:Gi,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},Vw={readContext:Gi,useCallback:function(t,e){return Sr().memoizedState=[t,e===void 0?null:e],t},useContext:Gi,useEffect:J0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,o_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=Sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Hw.bind(null,en,t),[r.memoizedState,t]},useRef:function(t){var e=Sr();return t={current:t},e.memoizedState=t},useState:$0,useDebugValue:e1,useDeferredValue:function(t){return Sr().memoizedState=t},useTransition:function(){var t=$0(!1),e=t[0];return t=Uw.bind(null,t[1]),Sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=en,l=Sr();if(Qt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),Pn===null)throw Error(he(349));ds&30||qm(r,e,n)}l.memoizedState=n;var u={value:n,getSnapshot:e};return l.queue=u,J0(Jm.bind(null,r,u,t),[t]),r.flags|=2048,Rl(9,$m.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=Sr(),e=Pn.identifierPrefix;if(Qt){var n=Vr,r=Wr;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jw={readContext:Gi,useCallback:a_,useContext:Gi,useEffect:Jf,useImperativeHandle:s_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:kd,useRef:n_,useState:function(){return kd(Nl)},useDebugValue:e1,useDeferredValue:function(t){var e=Zi();return c_(e,vn.memoizedState,t)},useTransition:function(){var t=kd(Nl)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:Qm,useSyncExternalStore:Km,useId:u_,unstable_isNewReconciler:!1},Gw={readContext:Gi,useCallback:a_,useContext:Gi,useEffect:Jf,useImperativeHandle:s_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:Bd,useRef:n_,useState:function(){return Bd(Nl)},useDebugValue:e1,useDeferredValue:function(t){var e=Zi();return vn===null?e.memoizedState=t:c_(e,vn.memoizedState,t)},useTransition:function(){var t=Bd(Nl)[0],e=Zi().memoizedState;return[t,e]},useMutableSource:Qm,useSyncExternalStore:Km,useId:u_,unstable_isNewReconciler:!1};function da(t,e){try{var n="",r=e;do n+=xx(r),r=r.return;while(r);var l=n}catch(u){l=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:l,digest:null}}function Fd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ph(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zw=typeof WeakMap=="function"?WeakMap:Map;function g_(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cu||(cu=!0,Gh=r),Ph(t,e)},n}function p_(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var l=e.value;n.payload=function(){return r(l)},n.callback=function(){Ph(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Ph(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var p=e.stack;this.componentDidCatch(e.value,{componentStack:p!==null?p:""})}),n}function eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zw;var l=new Set;r.set(e,l)}else l=r.get(e),l===void 0&&(l=new Set,r.set(e,l));l.has(n)||(l.add(n),t=sv.bind(null,t,e,n),e.then(t,t))}function tg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ng(t,e,n,r,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Io(n,e,1))),n.lanes|=1),t)}var Yw=Jr.ReactCurrentOwner,ui=!1;function ii(t,e,n,r){e.child=t===null?Ym(e,null,n,r):ca(e,t.child,n,r)}function ig(t,e,n,r,l){n=n.render;var u=e.ref;return Js(e,l),r=qf(t,e,n,r,u,l),n=$f(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,qr(t,e,l)):(Qt&&n&&zf(e),e.flags|=1,ii(t,e,r,l),e.child)}function rg(t,e,n,r,l){if(t===null){var u=n.type;return typeof u=="function"&&!l1(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,m_(t,e,u,r,l)):(t=Wc(n.type,null,r,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&l)){var p=u.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(p,r)&&t.ref===e.ref)return qr(t,e,l)}return e.flags|=1,t=No(u,r),t.ref=e.ref,t.return=e,e.child=t}function m_(t,e,n,r,l){if(t!==null){var u=t.memoizedProps;if(El(u,r)&&t.ref===e.ref)if(ui=!1,e.pendingProps=r=u,(t.lanes&l)!==0)t.flags&131072&&(ui=!0);else return e.lanes=t.lanes,qr(t,e,l)}return kh(t,e,n,r,l)}function __(t,e,n){var r=e.pendingProps,l=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(Gs,Ci),Ci|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,zt(Gs,Ci),Ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,zt(Gs,Ci),Ci|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,zt(Gs,Ci),Ci|=r;return ii(t,e,l,n),e.child}function y_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kh(t,e,n,r,l){var u=gi(n)?cs:Qn.current;return u=aa(e,u),Js(e,l),n=qf(t,e,n,r,u,l),r=$f(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,qr(t,e,l)):(Qt&&r&&zf(e),e.flags|=1,ii(t,e,n,l),e.child)}function og(t,e,n,r,l){if(gi(n)){var u=!0;Jc(e)}else u=!1;if(Js(e,l),e.stateNode===null)zc(t,e),Gm(e,n,r),Dh(e,n,r,l),r=!0;else if(t===null){var p=e.stateNode,w=e.memoizedProps;p.props=w;var E=p.context,y=n.contextType;typeof y=="object"&&y!==null?y=Gi(y):(y=gi(n)?cs:Qn.current,y=aa(e,y));var N=n.getDerivedStateFromProps,I=typeof N=="function"||typeof p.getSnapshotBeforeUpdate=="function";I||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==r||E!==y)&&K0(e,p,r,y),_o=!1;var D=e.memoizedState;p.state=D,ru(e,r,p,l),E=e.memoizedState,w!==r||D!==E||fi.current||_o?(typeof N=="function"&&(Lh(e,n,N,r),E=e.memoizedState),(w=_o||Q0(e,n,w,r,D,E,y))?(I||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(e.flags|=4194308)):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=E),p.props=r,p.state=E,p.context=y,r=w):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{p=e.stateNode,Vm(t,e),w=e.memoizedProps,y=e.type===e.elementType?w:ir(e.type,w),p.props=y,I=e.pendingProps,D=p.context,E=n.contextType,typeof E=="object"&&E!==null?E=Gi(E):(E=gi(n)?cs:Qn.current,E=aa(e,E));var W=n.getDerivedStateFromProps;(N=typeof W=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==I||D!==E)&&K0(e,p,r,E),_o=!1,D=e.memoizedState,p.state=D,ru(e,r,p,l);var Y=e.memoizedState;w!==I||D!==Y||fi.current||_o?(typeof W=="function"&&(Lh(e,n,W,r),Y=e.memoizedState),(y=_o||Q0(e,n,y,r,D,Y,E)||!1)?(N||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(r,Y,E),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(r,Y,E)),typeof p.componentDidUpdate=="function"&&(e.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===t.memoizedProps&&D===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&D===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Y),p.props=r,p.state=Y,p.context=E,r=y):(typeof p.componentDidUpdate!="function"||w===t.memoizedProps&&D===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&D===t.memoizedState||(e.flags|=1024),r=!1)}return Bh(t,e,n,r,u,l)}function Bh(t,e,n,r,l,u){y_(t,e);var p=(e.flags&128)!==0;if(!r&&!p)return l&&j0(e,n,!1),qr(t,e,u);r=e.stateNode,Yw.current=e;var w=p&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&p?(e.child=ca(e,t.child,null,u),e.child=ca(e,null,w,u)):ii(t,e,w,u),e.memoizedState=r.state,l&&j0(e,n,!0),e.child}function x_(t){var e=t.stateNode;e.pendingContext?V0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&V0(t,e.context,!1),Yf(t,e.containerInfo)}function sg(t,e,n,r,l){return la(),Hf(l),e.flags|=256,ii(t,e,n,r),e.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function w_(t,e,n){var r=e.pendingProps,l=Jt.current,u=!1,p=(e.flags&128)!==0,w;if((w=p)||(w=t!==null&&t.memoizedState===null?!1:(l&2)!==0),w?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),zt(Jt,l&1),t===null)return Mh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(p=r.children,t=r.fallback,u?(r=e.mode,u=e.child,p={mode:"hidden",children:p},!(r&1)&&u!==null?(u.childLanes=0,u.pendingProps=p):u=ju(p,r,0,null),t=as(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=zh(n),e.memoizedState=Fh,t):t1(e,p));if(l=t.memoizedState,l!==null&&(w=l.dehydrated,w!==null))return Xw(t,e,p,r,w,l,n);if(u){u=r.fallback,p=e.mode,l=t.child,w=l.sibling;var E={mode:"hidden",children:r.children};return!(p&1)&&e.child!==l?(r=e.child,r.childLanes=0,r.pendingProps=E,e.deletions=null):(r=No(l,E),r.subtreeFlags=l.subtreeFlags&14680064),w!==null?u=No(w,u):(u=as(u,p,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,p=t.child.memoizedState,p=p===null?zh(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=t.childLanes&~n,e.memoizedState=Fh,r}return u=t.child,t=u.sibling,r=No(u,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function t1(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ac(t,e,n,r){return r!==null&&Hf(r),ca(e,t.child,null,n),t=t1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xw(t,e,n,r,l,u,p){if(n)return e.flags&256?(e.flags&=-257,r=Fd(Error(he(422))),Ac(t,e,p,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,l=e.mode,r=ju({mode:"visible",children:r.children},l,0,null),u=as(u,l,p,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,e.mode&1&&ca(e,t.child,null,p),e.child.memoizedState=zh(p),e.memoizedState=Fh,u);if(!(e.mode&1))return Ac(t,e,p,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var w=r.dgst;return r=w,u=Error(he(419)),r=Fd(u,r,void 0),Ac(t,e,p,r)}if(w=(p&t.childLanes)!==0,ui||w){if(r=Pn,r!==null){switch(p&-p){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|p)?0:l,l!==0&&l!==u.retryLane&&(u.retryLane=l,Kr(t,l),dr(r,t,l,-1))}return a1(),r=Fd(Error(he(421))),Ac(t,e,p,r)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=av.bind(null,t),l._reactRetry=e,null):(t=u.treeContext,Ai=Ao(l.nextSibling),Ii=e,Qt=!0,sr=null,t!==null&&(Hi[Wi++]=Wr,Hi[Wi++]=Vr,Hi[Wi++]=us,Wr=t.id,Vr=t.overflow,us=e),e=t1(e,r.children),e.flags|=4096,e)}function ag(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oh(t.return,e,n)}function zd(t,e,n,r,l){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=l)}function v_(t,e,n){var r=e.pendingProps,l=r.revealOrder,u=r.tail;if(ii(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ag(t,n,e);else if(t.tag===19)ag(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zt(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&ou(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),zd(e,!1,l,n,u);break;case"backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&ou(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}zd(e,!0,n,null,u);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=No(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=No(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qw(t,e,n){switch(e.tag){case 3:x_(e),la();break;case 5:Xm(e);break;case 1:gi(e.type)&&Jc(e);break;case 4:Yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,l=e.memoizedProps.value;zt(nu,r._currentValue),r._currentValue=l;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(zt(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?w_(t,e,n):(zt(Jt,Jt.current&1),t=qr(t,e,n),t!==null?t.sibling:null);zt(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v_(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),zt(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,__(t,e,n)}return qr(t,e,n)}var E_,Uh,C_,S_;E_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uh=function(){};C_=function(t,e,n,r){var l=t.memoizedProps;if(l!==r){t=e.stateNode,rs(br.current);var u=null;switch(n){case"input":l=lh(t,l),r=lh(t,r),u=[];break;case"select":l=tn({},l,{value:void 0}),r=tn({},r,{value:void 0}),u=[];break;case"textarea":l=dh(t,l),r=dh(t,r),u=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qc)}fh(n,r);var p;n=null;for(y in l)if(!r.hasOwnProperty(y)&&l.hasOwnProperty(y)&&l[y]!=null)if(y==="style"){var w=l[y];for(p in w)w.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(pl.hasOwnProperty(y)?u||(u=[]):(u=u||[]).push(y,null));for(y in r){var E=r[y];if(w=l!=null?l[y]:void 0,r.hasOwnProperty(y)&&E!==w&&(E!=null||w!=null))if(y==="style")if(w){for(p in w)!w.hasOwnProperty(p)||E&&E.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in E)E.hasOwnProperty(p)&&w[p]!==E[p]&&(n||(n={}),n[p]=E[p])}else n||(u||(u=[]),u.push(y,n)),n=E;else y==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,w=w?w.__html:void 0,E!=null&&w!==E&&(u=u||[]).push(y,E)):y==="children"?typeof E!="string"&&typeof E!="number"||(u=u||[]).push(y,""+E):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(pl.hasOwnProperty(y)?(E!=null&&y==="onScroll"&&jt("scroll",t),u||w===E||(u=[])):(u=u||[]).push(y,E))}n&&(u=u||[]).push("style",n);var y=u;(e.updateQueue=y)&&(e.flags|=4)}};S_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Za(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kw(t,e,n){var r=e.pendingProps;switch(Uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(e),null;case 1:return gi(e.type)&&$c(),jn(e),null;case 3:return r=e.stateNode,ua(),Yt(fi),Yt(Qn),Qf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(Xh(sr),sr=null))),Uh(t,e),jn(e),null;case 5:Xf(e);var l=rs(Tl.current);if(n=e.type,t!==null&&e.stateNode!=null)C_(t,e,n,r,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return jn(e),null}if(t=rs(br.current),Cc(e)){r=e.stateNode,n=e.type;var u=e.memoizedProps;switch(r[Ir]=e,r[Al]=u,t=(e.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(l=0;l<tl.length;l++)jt(tl[l],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":m0(r,u),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},jt("invalid",r);break;case"textarea":y0(r,u),jt("invalid",r)}fh(n,u),l=null;for(var p in u)if(u.hasOwnProperty(p)){var w=u[p];p==="children"?typeof w=="string"?r.textContent!==w&&(u.suppressHydrationWarning!==!0&&Ec(r.textContent,w,t),l=["children",w]):typeof w=="number"&&r.textContent!==""+w&&(u.suppressHydrationWarning!==!0&&Ec(r.textContent,w,t),l=["children",""+w]):pl.hasOwnProperty(p)&&w!=null&&p==="onScroll"&&jt("scroll",r)}switch(n){case"input":gc(r),_0(r,u,!0);break;case"textarea":gc(r),x0(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=qc)}r=l,e.updateQueue=r,r!==null&&(e.flags|=4)}else{p=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=p.createElement(n,{is:r.is}):(t=p.createElement(n),n==="select"&&(p=t,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):t=p.createElementNS(t,n),t[Ir]=e,t[Al]=r,E_(t,e,!1,!1),e.stateNode=t;e:{switch(p=gh(n,r),n){case"dialog":jt("cancel",t),jt("close",t),l=r;break;case"iframe":case"object":case"embed":jt("load",t),l=r;break;case"video":case"audio":for(l=0;l<tl.length;l++)jt(tl[l],t);l=r;break;case"source":jt("error",t),l=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),l=r;break;case"details":jt("toggle",t),l=r;break;case"input":m0(t,r),l=lh(t,r),jt("invalid",t);break;case"option":l=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=tn({},r,{value:void 0}),jt("invalid",t);break;case"textarea":y0(t,r),l=dh(t,r),jt("invalid",t);break;default:l=r}fh(n,l),w=l;for(u in w)if(w.hasOwnProperty(u)){var E=w[u];u==="style"?em(t,E):u==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&$p(t,E)):u==="children"?typeof E=="string"?(n!=="textarea"||E!=="")&&ml(t,E):typeof E=="number"&&ml(t,""+E):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pl.hasOwnProperty(u)?E!=null&&u==="onScroll"&&jt("scroll",t):E!=null&&Af(t,u,E,p))}switch(n){case"input":gc(t),_0(t,r,!1);break;case"textarea":gc(t),x0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,u=r.value,u!=null?Qs(t,!!r.multiple,u,!1):r.defaultValue!=null&&Qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jn(e),null;case 6:if(t&&e.stateNode!=null)S_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=rs(Tl.current),rs(br.current),Cc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ir]=e,(u=r.nodeValue!==n)&&(t=Ii,t!==null))switch(t.tag){case 3:Ec(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ec(r.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ir]=e,e.stateNode=r}return jn(e),null;case 13:if(Yt(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qt&&Ai!==null&&e.mode&1&&!(e.flags&128))Hm(),la(),e.flags|=98560,u=!1;else if(u=Cc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(he(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(he(317));u[Ir]=e}else la(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jn(e),u=!1}else sr!==null&&(Xh(sr),sr=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?Cn===0&&(Cn=3):a1())),e.updateQueue!==null&&(e.flags|=4),jn(e),null);case 4:return ua(),Uh(t,e),t===null&&Cl(e.stateNode.containerInfo),jn(e),null;case 10:return jf(e.type._context),jn(e),null;case 17:return gi(e.type)&&$c(),jn(e),null;case 19:if(Yt(Jt),u=e.memoizedState,u===null)return jn(e),null;if(r=(e.flags&128)!==0,p=u.rendering,p===null)if(r)Za(u,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(p=ou(t),p!==null){for(e.flags|=128,Za(u,!1),r=p.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)u=n,t=r,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,t=p.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return zt(Jt,Jt.current&1|2),e.child}t=t.sibling}u.tail!==null&&un()>ha&&(e.flags|=128,r=!0,Za(u,!1),e.lanes=4194304)}else{if(!r)if(t=ou(p),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Za(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Qt)return jn(e),null}else 2*un()-u.renderingStartTime>ha&&n!==1073741824&&(e.flags|=128,r=!0,Za(u,!1),e.lanes=4194304);u.isBackwards?(p.sibling=e.child,e.child=p):(n=u.last,n!==null?n.sibling=p:e.child=p,u.last=p)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=un(),e.sibling=null,n=Jt.current,zt(Jt,r?n&1|2:n&1),e):(jn(e),null);case 22:case 23:return s1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(jn(e),e.subtreeFlags&6&&(e.flags|=8192)):jn(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function qw(t,e){switch(Uf(e),e.tag){case 1:return gi(e.type)&&$c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(),Yt(fi),Yt(Qn),Qf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xf(e),null;case 13:if(Yt(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));la()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Yt(Jt),null;case 4:return ua(),null;case 10:return jf(e.type._context),null;case 22:case 23:return s1(),null;case 24:return null;default:return null}}var Ic=!1,Zn=!1,$w=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function Hh(t,e,n){try{n()}catch(r){on(t,e,r)}}var lg=!1;function Jw(t,e){if(Sh=Xc,t=bm(),Ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var p=0,w=-1,E=-1,y=0,N=0,I=t,D=null;t:for(;;){for(var W;I!==n||l!==0&&I.nodeType!==3||(w=p+l),I!==u||r!==0&&I.nodeType!==3||(E=p+r),I.nodeType===3&&(p+=I.nodeValue.length),(W=I.firstChild)!==null;)D=I,I=W;for(;;){if(I===t)break t;if(D===n&&++y===l&&(w=p),D===u&&++N===r&&(E=p),(W=I.nextSibling)!==null)break;I=D,D=I.parentNode}I=W}n=w===-1||E===-1?null:{start:w,end:E}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Xc=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var Y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var V=Y.memoizedProps,me=Y.memoizedState,H=e.stateNode,k=H.getSnapshotBeforeUpdate(e.elementType===e.type?V:ir(e.type,V),me);H.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch($){on(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return Y=lg,lg=!1,Y}function ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&t)===t){var u=l.destroy;l.destroy=void 0,u!==void 0&&Hh(e,n,u)}l=l.next}while(l!==r)}}function Wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A_(t){var e=t.alternate;e!==null&&(t.alternate=null,A_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ir],delete e[Al],delete e[bh],delete e[Pw],delete e[kw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I_(t){return t.tag===5||t.tag===3||t.tag===4}function cg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qc));else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}var kn=null,rr=!1;function go(t,e,n){for(n=n.child;n!==null;)T_(t,e,n),n=n.sibling}function T_(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Du,n)}catch{}switch(n.tag){case 5:Zn||js(n,e);case 6:var r=kn,l=rr;kn=null,go(t,e,n),kn=r,rr=l,kn!==null&&(rr?(t=kn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kn.removeChild(n.stateNode));break;case 18:kn!==null&&(rr?(t=kn,n=n.stateNode,t.nodeType===8?Od(t.parentNode,n):t.nodeType===1&&Od(t,n),wl(t)):Od(kn,n.stateNode));break;case 4:r=kn,l=rr,kn=n.stateNode.containerInfo,rr=!0,go(t,e,n),kn=r,rr=l;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var u=l,p=u.destroy;u=u.tag,p!==void 0&&(u&2||u&4)&&Hh(n,e,p),l=l.next}while(l!==r)}go(t,e,n);break;case 1:if(!Zn&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(w){on(n,e,w)}go(t,e,n);break;case 21:go(t,e,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,go(t,e,n),Zn=r):go(t,e,n);break;default:go(t,e,n)}}function ug(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $w),e.forEach(function(r){var l=lv.bind(null,t,r);n.has(r)||(n.add(r),r.then(l,l))})}}function nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var u=t,p=e,w=p;e:for(;w!==null;){switch(w.tag){case 5:kn=w.stateNode,rr=!1;break e;case 3:kn=w.stateNode.containerInfo,rr=!0;break e;case 4:kn=w.stateNode.containerInfo,rr=!0;break e}w=w.return}if(kn===null)throw Error(he(160));T_(u,p,l),kn=null,rr=!1;var E=l.alternate;E!==null&&(E.return=null),l.return=null}catch(y){on(l,e,y)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b_(e,t),e=e.sibling}function b_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),Cr(t),r&4){try{ll(3,t,t.return),Wu(3,t)}catch(V){on(t,t.return,V)}try{ll(5,t,t.return)}catch(V){on(t,t.return,V)}}break;case 1:nr(e,t),Cr(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(nr(e,t),Cr(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var l=t.stateNode;try{ml(l,"")}catch(V){on(t,t.return,V)}}if(r&4&&(l=t.stateNode,l!=null)){var u=t.memoizedProps,p=n!==null?n.memoizedProps:u,w=t.type,E=t.updateQueue;if(t.updateQueue=null,E!==null)try{w==="input"&&u.type==="radio"&&u.name!=null&&Qp(l,u),gh(w,p);var y=gh(w,u);for(p=0;p<E.length;p+=2){var N=E[p],I=E[p+1];N==="style"?em(l,I):N==="dangerouslySetInnerHTML"?$p(l,I):N==="children"?ml(l,I):Af(l,N,I,y)}switch(w){case"input":ch(l,u);break;case"textarea":Kp(l,u);break;case"select":var D=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!u.multiple;var W=u.value;W!=null?Qs(l,!!u.multiple,W,!1):D!==!!u.multiple&&(u.defaultValue!=null?Qs(l,!!u.multiple,u.defaultValue,!0):Qs(l,!!u.multiple,u.multiple?[]:"",!1))}l[Al]=u}catch(V){on(t,t.return,V)}}break;case 6:if(nr(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(he(162));l=t.stateNode,u=t.memoizedProps;try{l.nodeValue=u}catch(V){on(t,t.return,V)}}break;case 3:if(nr(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(V){on(t,t.return,V)}break;case 4:nr(e,t),Cr(t);break;case 13:nr(e,t),Cr(t),l=t.child,l.flags&8192&&(u=l.memoizedState!==null,l.stateNode.isHidden=u,!u||l.alternate!==null&&l.alternate.memoizedState!==null||(r1=un())),r&4&&ug(t);break;case 22:if(N=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(y=Zn)||N,nr(e,t),Zn=y):nr(e,t),Cr(t),r&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!N&&t.mode&1)for(Ae=t,N=t.child;N!==null;){for(I=Ae=N;Ae!==null;){switch(D=Ae,W=D.child,D.tag){case 0:case 11:case 14:case 15:ll(4,D,D.return);break;case 1:js(D,D.return);var Y=D.stateNode;if(typeof Y.componentWillUnmount=="function"){r=D,n=D.return;try{e=r,Y.props=e.memoizedProps,Y.state=e.memoizedState,Y.componentWillUnmount()}catch(V){on(r,n,V)}}break;case 5:js(D,D.return);break;case 22:if(D.memoizedState!==null){hg(I);continue}}W!==null?(W.return=D,Ae=W):hg(I)}N=N.sibling}e:for(N=null,I=t;;){if(I.tag===5){if(N===null){N=I;try{l=I.stateNode,y?(u=l.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(w=I.stateNode,E=I.memoizedProps.style,p=E!=null&&E.hasOwnProperty("display")?E.display:null,w.style.display=Jp("display",p))}catch(V){on(t,t.return,V)}}}else if(I.tag===6){if(N===null)try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(V){on(t,t.return,V)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===t)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===t)break e;for(;I.sibling===null;){if(I.return===null||I.return===t)break e;N===I&&(N=null),I=I.return}N===I&&(N=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:nr(e,t),Cr(t),r&4&&ug(t);break;case 21:break;default:nr(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I_(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ml(l,""),r.flags&=-33);var u=cg(t);jh(t,u,l);break;case 3:case 4:var p=r.stateNode.containerInfo,w=cg(t);Vh(t,w,p);break;default:throw Error(he(161))}}catch(E){on(t,t.return,E)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ev(t,e,n){Ae=t,N_(t)}function N_(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var l=Ae,u=l.child;if(l.tag===22&&r){var p=l.memoizedState!==null||Ic;if(!p){var w=l.alternate,E=w!==null&&w.memoizedState!==null||Zn;w=Ic;var y=Zn;if(Ic=p,(Zn=E)&&!y)for(Ae=l;Ae!==null;)p=Ae,E=p.child,p.tag===22&&p.memoizedState!==null?fg(l):E!==null?(E.return=p,Ae=E):fg(l);for(;u!==null;)Ae=u,N_(u),u=u.sibling;Ae=l,Ic=w,Zn=y}dg(t)}else l.subtreeFlags&8772&&u!==null?(u.return=l,Ae=u):dg(t)}}function dg(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||Wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var l=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&X0(e,u,r);break;case 3:var p=e.updateQueue;if(p!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}X0(e,p,n)}break;case 5:var w=e.stateNode;if(n===null&&e.flags&4){n=w;var E=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&n.focus();break;case"img":E.src&&(n.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var y=e.alternate;if(y!==null){var N=y.memoizedState;if(N!==null){var I=N.dehydrated;I!==null&&wl(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}Zn||e.flags&512&&Wh(e)}catch(D){on(e,e.return,D)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function hg(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function fg(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wu(4,e)}catch(E){on(e,n,E)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var l=e.return;try{r.componentDidMount()}catch(E){on(e,l,E)}}var u=e.return;try{Wh(e)}catch(E){on(e,u,E)}break;case 5:var p=e.return;try{Wh(e)}catch(E){on(e,p,E)}}}catch(E){on(e,e.return,E)}if(e===t){Ae=null;break}var w=e.sibling;if(w!==null){w.return=e.return,Ae=w;break}Ae=e.return}}var tv=Math.ceil,lu=Jr.ReactCurrentDispatcher,n1=Jr.ReactCurrentOwner,ji=Jr.ReactCurrentBatchConfig,xt=0,Pn=null,mn=null,Bn=0,Ci=0,Gs=zo(0),Cn=0,Ml=null,hs=0,Vu=0,i1=0,cl=null,ci=null,r1=0,ha=1/0,Ur=null,cu=!1,Gh=null,To=null,Tc=!1,vo=null,uu=0,ul=0,Zh=null,Uc=-1,Hc=0;function ri(){return xt&6?un():Uc!==-1?Uc:Uc=un()}function bo(t){return t.mode&1?xt&2&&Bn!==0?Bn&-Bn:Fw.transition!==null?(Hc===0&&(Hc=hm()),Hc):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:xm(t.type)),t):1}function dr(t,e,n,r){if(50<ul)throw ul=0,Zh=null,Error(he(185));Vl(t,n,r),(!(xt&2)||t!==Pn)&&(t===Pn&&(!(xt&2)&&(Vu|=n),Cn===4&&xo(t,Bn)),pi(t,r),n===1&&xt===0&&!(e.mode&1)&&(ha=un()+500,zu&&Uo()))}function pi(t,e){var n=t.callbackNode;Fx(t,e);var r=Yc(t,t===Pn?Bn:0);if(r===0)n!==null&&E0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&E0(n),e===1)t.tag===0?Bw(gg.bind(null,t)):Fm(gg.bind(null,t)),Lw(function(){!(xt&6)&&Uo()}),n=null;else{switch(fm(r)){case 1:n=Rf;break;case 4:n=um;break;case 16:n=Zc;break;case 536870912:n=dm;break;default:n=Zc}n=B_(n,R_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R_(t,e){if(Uc=-1,Hc=0,xt&6)throw Error(he(327));var n=t.callbackNode;if(ea()&&t.callbackNode!==n)return null;var r=Yc(t,t===Pn?Bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=du(t,r);else{e=r;var l=xt;xt|=2;var u=O_();(Pn!==t||Bn!==e)&&(Ur=null,ha=un()+500,ss(t,e));do try{rv();break}catch(w){M_(t,w)}while(!0);Vf(),lu.current=u,xt=l,mn!==null?e=0:(Pn=null,Bn=0,e=Cn)}if(e!==0){if(e===2&&(l=xh(t),l!==0&&(r=l,e=Yh(t,l))),e===1)throw n=Ml,ss(t,0),xo(t,r),pi(t,un()),n;if(e===6)xo(t,r);else{if(l=t.current.alternate,!(r&30)&&!nv(l)&&(e=du(t,r),e===2&&(u=xh(t),u!==0&&(r=u,e=Yh(t,u))),e===1))throw n=Ml,ss(t,0),xo(t,r),pi(t,un()),n;switch(t.finishedWork=l,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Jo(t,ci,Ur);break;case 3:if(xo(t,r),(r&130023424)===r&&(e=r1+500-un(),10<e)){if(Yc(t,0)!==0)break;if(l=t.suspendedLanes,(l&r)!==r){ri(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Th(Jo.bind(null,t,ci,Ur),e);break}Jo(t,ci,Ur);break;case 4:if(xo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,l=-1;0<r;){var p=31-ur(r);u=1<<p,p=e[p],p>l&&(l=p),r&=~u}if(r=l,r=un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tv(r/1960))-r,10<r){t.timeoutHandle=Th(Jo.bind(null,t,ci,Ur),r);break}Jo(t,ci,Ur);break;case 5:Jo(t,ci,Ur);break;default:throw Error(he(329))}}}return pi(t,un()),t.callbackNode===n?R_.bind(null,t):null}function Yh(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=du(t,e),t!==2&&(e=ci,ci=n,e!==null&&Xh(e)),t}function Xh(t){ci===null?ci=t:ci.push.apply(ci,t)}function nv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],u=l.getSnapshot;l=l.value;try{if(!fr(u(),l))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xo(t,e){for(e&=~i1,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function gg(t){if(xt&6)throw Error(he(327));ea();var e=Yc(t,0);if(!(e&1))return pi(t,un()),null;var n=du(t,e);if(t.tag!==0&&n===2){var r=xh(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=Ml,ss(t,0),xo(t,e),pi(t,un()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jo(t,ci,Ur),pi(t,un()),null}function o1(t,e){var n=xt;xt|=1;try{return t(e)}finally{xt=n,xt===0&&(ha=un()+500,zu&&Uo())}}function fs(t){vo!==null&&vo.tag===0&&!(xt&6)&&ea();var e=xt;xt|=1;var n=ji.transition,r=Nt;try{if(ji.transition=null,Nt=1,t)return t()}finally{Nt=r,ji.transition=n,xt=e,!(xt&6)&&Uo()}}function s1(){Ci=Gs.current,Yt(Gs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ow(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(Uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$c();break;case 3:ua(),Yt(fi),Yt(Qn),Qf();break;case 5:Xf(r);break;case 4:ua();break;case 13:Yt(Jt);break;case 19:Yt(Jt);break;case 10:jf(r.type._context);break;case 22:case 23:s1()}n=n.return}if(Pn=t,mn=t=No(t.current,null),Bn=Ci=e,Cn=0,Ml=null,i1=Vu=hs=0,ci=cl=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,u=n.pending;if(u!==null){var p=u.next;u.next=l,r.next=p}n.pending=r}is=null}return t}function M_(t,e){do{var n=mn;try{if(Vf(),Bc.current=au,su){for(var r=en.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}su=!1}if(ds=0,On=vn=en=null,al=!1,bl=0,n1.current=null,n===null||n.return===null){Cn=1,Ml=e,mn=null;break}e:{var u=t,p=n.return,w=n,E=e;if(e=Bn,w.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var y=E,N=w,I=N.tag;if(!(N.mode&1)&&(I===0||I===11||I===15)){var D=N.alternate;D?(N.updateQueue=D.updateQueue,N.memoizedState=D.memoizedState,N.lanes=D.lanes):(N.updateQueue=null,N.memoizedState=null)}var W=tg(p);if(W!==null){W.flags&=-257,ng(W,p,w,u,e),W.mode&1&&eg(u,y,e),e=W,E=y;var Y=e.updateQueue;if(Y===null){var V=new Set;V.add(E),e.updateQueue=V}else Y.add(E);break e}else{if(!(e&1)){eg(u,y,e),a1();break e}E=Error(he(426))}}else if(Qt&&w.mode&1){var me=tg(p);if(me!==null){!(me.flags&65536)&&(me.flags|=256),ng(me,p,w,u,e),Hf(da(E,w));break e}}u=E=da(E,w),Cn!==4&&(Cn=2),cl===null?cl=[u]:cl.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var H=g_(u,E,e);Y0(u,H);break e;case 1:w=E;var k=u.type,B=u.stateNode;if(!(u.flags&128)&&(typeof k.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(To===null||!To.has(B)))){u.flags|=65536,e&=-e,u.lanes|=e;var $=p_(u,w,e);Y0(u,$);break e}}u=u.return}while(u!==null)}D_(n)}catch(pe){e=pe,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(!0)}function O_(){var t=lu.current;return lu.current=au,t===null?au:t}function a1(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Pn===null||!(hs&268435455)&&!(Vu&268435455)||xo(Pn,Bn)}function du(t,e){var n=xt;xt|=2;var r=O_();(Pn!==t||Bn!==e)&&(Ur=null,ss(t,e));do try{iv();break}catch(l){M_(t,l)}while(!0);if(Vf(),xt=n,lu.current=r,mn!==null)throw Error(he(261));return Pn=null,Bn=0,Cn}function iv(){for(;mn!==null;)L_(mn)}function rv(){for(;mn!==null&&!Nx();)L_(mn)}function L_(t){var e=k_(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?D_(t):mn=e,n1.current=null}function D_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qw(n,e),n!==null){n.flags&=32767,mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,mn=null;return}}else if(n=Kw(n,e,Ci),n!==null){mn=n;return}if(e=e.sibling,e!==null){mn=e;return}mn=e=t}while(e!==null);Cn===0&&(Cn=5)}function Jo(t,e,n){var r=Nt,l=ji.transition;try{ji.transition=null,Nt=1,ov(t,e,n,r)}finally{ji.transition=l,Nt=r}return null}function ov(t,e,n,r){do ea();while(vo!==null);if(xt&6)throw Error(he(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(zx(t,u),t===Pn&&(mn=Pn=null,Bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tc||(Tc=!0,B_(Zc,function(){return ea(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=ji.transition,ji.transition=null;var p=Nt;Nt=1;var w=xt;xt|=4,n1.current=null,Jw(t,n),b_(n,t),Aw(Ah),Xc=!!Sh,Ah=Sh=null,t.current=n,ev(n),Rx(),xt=w,Nt=p,ji.transition=u}else t.current=n;if(Tc&&(Tc=!1,vo=t,uu=l),u=t.pendingLanes,u===0&&(To=null),Lx(n.stateNode),pi(t,un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)l=e[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(cu)throw cu=!1,t=Gh,Gh=null,t;return uu&1&&t.tag!==0&&ea(),u=t.pendingLanes,u&1?t===Zh?ul++:(ul=0,Zh=t):ul=0,Uo(),null}function ea(){if(vo!==null){var t=fm(uu),e=ji.transition,n=Nt;try{if(ji.transition=null,Nt=16>t?16:t,vo===null)var r=!1;else{if(t=vo,vo=null,uu=0,xt&6)throw Error(he(331));var l=xt;for(xt|=4,Ae=t.current;Ae!==null;){var u=Ae,p=u.child;if(Ae.flags&16){var w=u.deletions;if(w!==null){for(var E=0;E<w.length;E++){var y=w[E];for(Ae=y;Ae!==null;){var N=Ae;switch(N.tag){case 0:case 11:case 15:ll(8,N,u)}var I=N.child;if(I!==null)I.return=N,Ae=I;else for(;Ae!==null;){N=Ae;var D=N.sibling,W=N.return;if(A_(N),N===y){Ae=null;break}if(D!==null){D.return=W,Ae=D;break}Ae=W}}}var Y=u.alternate;if(Y!==null){var V=Y.child;if(V!==null){Y.child=null;do{var me=V.sibling;V.sibling=null,V=me}while(V!==null)}}Ae=u}}if(u.subtreeFlags&2064&&p!==null)p.return=u,Ae=p;else e:for(;Ae!==null;){if(u=Ae,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ll(9,u,u.return)}var H=u.sibling;if(H!==null){H.return=u.return,Ae=H;break e}Ae=u.return}}var k=t.current;for(Ae=k;Ae!==null;){p=Ae;var B=p.child;if(p.subtreeFlags&2064&&B!==null)B.return=p,Ae=B;else e:for(p=k;Ae!==null;){if(w=Ae,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Wu(9,w)}}catch(pe){on(w,w.return,pe)}if(w===p){Ae=null;break e}var $=w.sibling;if($!==null){$.return=w.return,Ae=$;break e}Ae=w.return}}if(xt=l,Uo(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Du,t)}catch{}r=!0}return r}finally{Nt=n,ji.transition=e}}return!1}function pg(t,e,n){e=da(n,e),e=g_(t,e,1),t=Io(t,e,1),e=ri(),t!==null&&(Vl(t,1,e),pi(t,e))}function on(t,e,n){if(t.tag===3)pg(t,t,n);else for(;e!==null;){if(e.tag===3){pg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=da(n,t),t=p_(e,t,1),e=Io(e,t,1),t=ri(),e!==null&&(Vl(e,1,t),pi(e,t));break}}e=e.return}}function sv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ri(),t.pingedLanes|=t.suspendedLanes&n,Pn===t&&(Bn&n)===n&&(Cn===4||Cn===3&&(Bn&130023424)===Bn&&500>un()-r1?ss(t,0):i1|=n),pi(t,e)}function P_(t,e){e===0&&(t.mode&1?(e=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):e=1);var n=ri();t=Kr(t,e),t!==null&&(Vl(t,e,n),pi(t,n))}function av(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P_(t,n)}function lv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),P_(t,n)}var k_;k_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fi.current)ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ui=!1,Qw(t,e,n);ui=!!(t.flags&131072)}else ui=!1,Qt&&e.flags&1048576&&zm(e,tu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zc(t,e),t=e.pendingProps;var l=aa(e,Qn.current);Js(e,n),l=qf(null,e,r,t,l,n);var u=$f();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)?(u=!0,Jc(e)):u=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Zf(e),l.updater=Uu,e.stateNode=l,l._reactInternals=e,Dh(e,r,t,n),e=Bh(null,e,r,!0,u,n)):(e.tag=0,Qt&&u&&zf(e),ii(null,e,l,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zc(t,e),t=e.pendingProps,l=r._init,r=l(r._payload),e.type=r,l=e.tag=uv(r),t=ir(r,t),l){case 0:e=kh(null,e,r,t,n);break e;case 1:e=og(null,e,r,t,n);break e;case 11:e=ig(null,e,r,t,n);break e;case 14:e=rg(null,e,r,ir(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ir(r,l),kh(t,e,r,l,n);case 1:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ir(r,l),og(t,e,r,l,n);case 3:e:{if(x_(e),t===null)throw Error(he(387));r=e.pendingProps,u=e.memoizedState,l=u.element,Vm(t,e),ru(e,r,null,n);var p=e.memoizedState;if(r=p.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){l=da(Error(he(423)),e),e=sg(t,e,r,n,l);break e}else if(r!==l){l=da(Error(he(424)),e),e=sg(t,e,r,n,l);break e}else for(Ai=Ao(e.stateNode.containerInfo.firstChild),Ii=e,Qt=!0,sr=null,n=Ym(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(la(),r===l){e=qr(t,e,n);break e}ii(t,e,r,n)}e=e.child}return e;case 5:return Xm(e),t===null&&Mh(e),r=e.type,l=e.pendingProps,u=t!==null?t.memoizedProps:null,p=l.children,Ih(r,l)?p=null:u!==null&&Ih(r,u)&&(e.flags|=32),y_(t,e),ii(t,e,p,n),e.child;case 6:return t===null&&Mh(e),null;case 13:return w_(t,e,n);case 4:return Yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ca(e,null,r,n):ii(t,e,r,n),e.child;case 11:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ir(r,l),ig(t,e,r,l,n);case 7:return ii(t,e,e.pendingProps,n),e.child;case 8:return ii(t,e,e.pendingProps.children,n),e.child;case 12:return ii(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,l=e.pendingProps,u=e.memoizedProps,p=l.value,zt(nu,r._currentValue),r._currentValue=p,u!==null)if(fr(u.value,p)){if(u.children===l.children&&!fi.current){e=qr(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var w=u.dependencies;if(w!==null){p=u.child;for(var E=w.firstContext;E!==null;){if(E.context===r){if(u.tag===1){E=Zr(-1,n&-n),E.tag=2;var y=u.updateQueue;if(y!==null){y=y.shared;var N=y.pending;N===null?E.next=E:(E.next=N.next,N.next=E),y.pending=E}}u.lanes|=n,E=u.alternate,E!==null&&(E.lanes|=n),Oh(u.return,n,e),w.lanes|=n;break}E=E.next}}else if(u.tag===10)p=u.type===e.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(he(341));p.lanes|=n,w=p.alternate,w!==null&&(w.lanes|=n),Oh(p,n,e),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===e){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}ii(t,e,l.children,n),e=e.child}return e;case 9:return l=e.type,r=e.pendingProps.children,Js(e,n),l=Gi(l),r=r(l),e.flags|=1,ii(t,e,r,n),e.child;case 14:return r=e.type,l=ir(r,e.pendingProps),l=ir(r.type,l),rg(t,e,r,l,n);case 15:return m_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:ir(r,l),zc(t,e),e.tag=1,gi(r)?(t=!0,Jc(e)):t=!1,Js(e,n),Gm(e,r,l),Dh(e,r,l,n),Bh(null,e,r,!0,t,n);case 19:return v_(t,e,n);case 22:return __(t,e,n)}throw Error(he(156,e.tag))};function B_(t,e){return cm(t,e)}function cv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(t,e,n,r){return new cv(t,e,n,r)}function l1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uv(t){if(typeof t=="function")return l1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===bf)return 14}return 2}function No(t,e){var n=t.alternate;return n===null?(n=Vi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,l,u){var p=2;if(r=t,typeof t=="function")l1(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case Ps:return as(n.children,l,u,e);case If:p=8,l|=8;break;case rh:return t=Vi(12,n,e,l|2),t.elementType=rh,t.lanes=u,t;case oh:return t=Vi(13,n,e,l),t.elementType=oh,t.lanes=u,t;case sh:return t=Vi(19,n,e,l),t.elementType=sh,t.lanes=u,t;case Zp:return ju(n,l,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jp:p=10;break e;case Gp:p=9;break e;case Tf:p=11;break e;case bf:p=14;break e;case mo:p=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Vi(p,n,e,l),e.elementType=t,e.type=r,e.lanes=u,e}function as(t,e,n,r){return t=Vi(7,t,r,e),t.lanes=n,t}function ju(t,e,n,r){return t=Vi(22,t,r,e),t.elementType=Zp,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,e,n){return t=Vi(6,t,null,e),t.lanes=n,t}function Hd(t,e,n){return e=Vi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dv(t,e,n,r,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function c1(t,e,n,r,l,u,p,w,E){return t=new dv(t,e,n,w,E),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Vi(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(u),t}function hv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function F_(t){if(!t)return Do;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(gi(n))return Bm(t,n,e)}return e}function z_(t,e,n,r,l,u,p,w,E){return t=c1(n,r,!0,t,l,u,p,w,E),t.context=F_(null),n=t.current,r=ri(),l=bo(n),u=Zr(r,l),u.callback=e??null,Io(n,u,l),t.current.lanes=l,Vl(t,l,r),pi(t,r),t}function Gu(t,e,n,r){var l=e.current,u=ri(),p=bo(l);return n=F_(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(u,p),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Io(l,e,p),t!==null&&(dr(t,l,p,u),kc(t,l,p)),p}function hu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function u1(t,e){mg(t,e),(t=t.alternate)&&mg(t,e)}function fv(){return null}var U_=typeof reportError=="function"?reportError:function(t){console.error(t)};function d1(t){this._internalRoot=t}Zu.prototype.render=d1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Gu(t,e,null,null)};Zu.prototype.unmount=d1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Gu(null,t,null,null)}),e[Qr]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var e=mm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yo.length&&e!==0&&e<yo[n].priority;n++);yo.splice(n,0,t),n===0&&ym(t)}};function h1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _g(){}function gv(t,e,n,r,l){if(l){if(typeof r=="function"){var u=r;r=function(){var y=hu(p);u.call(y)}}var p=z_(e,r,t,0,null,!1,!1,"",_g);return t._reactRootContainer=p,t[Qr]=p.current,Cl(t.nodeType===8?t.parentNode:t),fs(),p}for(;l=t.lastChild;)t.removeChild(l);if(typeof r=="function"){var w=r;r=function(){var y=hu(E);w.call(y)}}var E=c1(t,0,!1,null,null,!1,!1,"",_g);return t._reactRootContainer=E,t[Qr]=E.current,Cl(t.nodeType===8?t.parentNode:t),fs(function(){Gu(e,E,n,r)}),E}function Xu(t,e,n,r,l){var u=n._reactRootContainer;if(u){var p=u;if(typeof l=="function"){var w=l;l=function(){var E=hu(p);w.call(E)}}Gu(e,p,t,l)}else p=gv(n,e,t,l,r);return hu(p)}gm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(Mf(e,n|1),pi(e,un()),!(xt&6)&&(ha=un()+500,Uo()))}break;case 13:fs(function(){var r=Kr(t,1);if(r!==null){var l=ri();dr(r,t,1,l)}}),u1(t,1)}};Of=function(t){if(t.tag===13){var e=Kr(t,134217728);if(e!==null){var n=ri();dr(e,t,134217728,n)}u1(t,134217728)}};pm=function(t){if(t.tag===13){var e=bo(t),n=Kr(t,e);if(n!==null){var r=ri();dr(n,t,e,r)}u1(t,e)}};mm=function(){return Nt};_m=function(t,e){var n=Nt;try{return Nt=t,e()}finally{Nt=n}};mh=function(t,e,n){switch(e){case"input":if(ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var l=Fu(r);if(!l)throw Error(he(90));Xp(r),ch(r,l)}}}break;case"textarea":Kp(t,n);break;case"select":e=n.value,e!=null&&Qs(t,!!n.multiple,e,!1)}};im=o1;rm=fs;var pv={usingClientEntryPoint:!1,Events:[Gl,zs,Fu,tm,nm,o1]},Ya={findFiberByHostInstance:ns,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mv={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=am(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{Du=bc.inject(mv),Tr=bc}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pv;Ni.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h1(e))throw Error(he(200));return hv(t,e,null,n)};Ni.createRoot=function(t,e){if(!h1(t))throw Error(he(299));var n=!1,r="",l=U_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=c1(t,1,!1,null,null,n,!1,r,l),t[Qr]=e.current,Cl(t.nodeType===8?t.parentNode:t),new d1(e)};Ni.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=am(e),t=t===null?null:t.stateNode,t};Ni.flushSync=function(t){return fs(t)};Ni.hydrate=function(t,e,n){if(!Yu(e))throw Error(he(200));return Xu(null,t,e,!0,n)};Ni.hydrateRoot=function(t,e,n){if(!h1(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,l=!1,u="",p=U_;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),e=z_(e,null,t,1,n??null,l,!1,u,p),t[Qr]=e.current,Cl(t),r)for(t=0;t<r.length;t++)n=r[t],l=n._getVersion,l=l(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,l]:e.mutableSourceEagerHydrationData.push(n,l);return new Zu(e)};Ni.render=function(t,e,n){if(!Yu(e))throw Error(he(200));return Xu(null,t,e,!1,n)};Ni.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(he(40));return t._reactRootContainer?(fs(function(){Xu(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};Ni.unstable_batchedUpdates=o1;Ni.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yu(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return Xu(t,e,n,!1,r)};Ni.version="18.2.0-next-9e3b772b8-20220608";function H_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H_)}catch(t){console.error(t)}}H_(),zp.exports=Ni;var _v=zp.exports,yg=_v;nh.createRoot=yg.createRoot,nh.hydrateRoot=yg.hydrateRoot;var W_={exports:{}},yv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xv=yv,wv=xv;function V_(){}function j_(){}j_.resetWarningCache=V_;var vv=function(){function t(r,l,u,p,w,E){if(E!==wv){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:j_,resetWarningCache:V_};return n.PropTypes=n,n};W_.exports=vv();var Ev=W_.exports;const Cv=Ou(Ev),xg="/Mapa-UC/assets/elevatorLogo-30_jZ6Gw.png",Sv="/Mapa-UC/assets/emergencyExit-bK8ZRk4K.png";var Qh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ls,function(n){var r="1.9.4";function l(s){var h,m,v,S;for(m=1,v=arguments.length;m<v;m++){S=arguments[m];for(h in S)s[h]=S[h]}return s}var u=Object.create||function(){function s(){}return function(h){return s.prototype=h,new s}}();function p(s,h){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var v=m.call(arguments,2);return function(){return s.apply(h,v.length?v.concat(m.call(arguments)):arguments)}}var w=0;function E(s){return"_leaflet_id"in s||(s._leaflet_id=++w),s._leaflet_id}function y(s,h,m){var v,S,M,F;return F=function(){v=!1,S&&(M.apply(m,S),S=!1)},M=function(){v?S=arguments:(s.apply(m,arguments),setTimeout(F,h),v=!0)},M}function N(s,h,m){var v=h[1],S=h[0],M=v-S;return s===v&&m?s:((s-S)%M+M)%M+S}function I(){return!1}function D(s,h){if(h===!1)return s;var m=Math.pow(10,h===void 0?6:h);return Math.round(s*m)/m}function W(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function Y(s){return W(s).split(/\s+/)}function V(s,h){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?u(s.options):{});for(var m in h)s.options[m]=h[m];return s.options}function me(s,h,m){var v=[];for(var S in s)v.push(encodeURIComponent(m?S.toUpperCase():S)+"="+encodeURIComponent(s[S]));return(!h||h.indexOf("?")===-1?"?":"&")+v.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function k(s,h){return s.replace(H,function(m,v){var S=h[v];if(S===void 0)throw new Error("No value provided for variable "+m);return typeof S=="function"&&(S=S(h)),S})}var B=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function $(s,h){for(var m=0;m<s.length;m++)if(s[m]===h)return m;return-1}var pe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ce(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var K=0;function fe(s){var h=+new Date,m=Math.max(0,16-(h-K));return K=h+m,window.setTimeout(s,m)}var te=window.requestAnimationFrame||ce("RequestAnimationFrame")||fe,ze=window.cancelAnimationFrame||ce("CancelAnimationFrame")||ce("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function je(s,h,m){if(m&&te===fe)s.call(h);else return te.call(window,p(s,h))}function ve(s){s&&ze.call(window,s)}var $e={__proto__:null,extend:l,create:u,bind:p,get lastId(){return w},stamp:E,throttle:y,wrapNum:N,falseFn:I,formatNum:D,trim:W,splitWords:Y,setOptions:V,getParamString:me,template:k,isArray:B,indexOf:$,emptyImageUrl:pe,requestFn:te,cancelFn:ze,requestAnimFrame:je,cancelAnimFrame:ve};function Ye(){}Ye.extend=function(s){var h=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=h.__super__=this.prototype,v=u(m);v.constructor=h,h.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(h[S]=this[S]);return s.statics&&l(h,s.statics),s.includes&&(J(s.includes),l.apply(null,[v].concat(s.includes))),l(v,s),delete v.statics,delete v.includes,v.options&&(v.options=m.options?u(m.options):{},l(v.options,s.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,F=v._initHooks.length;M<F;M++)v._initHooks[M].call(this)}},h},Ye.include=function(s){var h=this.prototype.options;return l(this.prototype,s),s.options&&(this.prototype.options=h,this.mergeOptions(s.options)),this},Ye.mergeOptions=function(s){return l(this.prototype.options,s),this},Ye.addInitHook=function(s){var h=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function J(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=B(s)?s:[s];for(var h=0;h<s.length;h++)s[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Le={on:function(s,h,m){if(typeof s=="object")for(var v in s)this._on(v,s[v],h);else{s=Y(s);for(var S=0,M=s.length;S<M;S++)this._on(s[S],h,m)}return this},off:function(s,h,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var v in s)this._off(v,s[v],h);else{s=Y(s);for(var S=arguments.length===1,M=0,F=s.length;M<F;M++)S?this._off(s[M]):this._off(s[M],h,m)}return this},_on:function(s,h,m,v){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(s,h,m)===!1){m===this&&(m=void 0);var S={fn:h,ctx:m};v&&(S.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(S)}},_off:function(s,h,m){var v,S,M;if(this._events&&(v=this._events[s],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,M=v.length;S<M;S++)v[S].fn=I;delete this._events[s];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var F=this._listens(s,h,m);if(F!==!1){var Z=v[F];this._firingCount&&(Z.fn=I,this._events[s]=v=v.slice()),v.splice(F,1)}}},fire:function(s,h,m){if(!this.listens(s,m))return this;var v=l({},h,{type:s,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var S=this._events[s];if(S){this._firingCount=this._firingCount+1||1;for(var M=0,F=S.length;M<F;M++){var Z=S[M],q=Z.fn;Z.once&&this.off(s,q,Z.ctx),q.call(Z.ctx||this,v)}this._firingCount--}}return m&&this._propagateEvent(v),this},listens:function(s,h,m,v){typeof s!="string"&&console.warn('"string" type argument expected');var S=h;typeof h!="function"&&(v=!!h,S=void 0,m=void 0);var M=this._events&&this._events[s];if(M&&M.length&&this._listens(s,S,m)!==!1)return!0;if(v){for(var F in this._eventParents)if(this._eventParents[F].listens(s,h,m,v))return!0}return!1},_listens:function(s,h,m){if(!this._events)return!1;var v=this._events[s]||[];if(!h)return!!v.length;m===this&&(m=void 0);for(var S=0,M=v.length;S<M;S++)if(v[S].fn===h&&v[S].ctx===m)return S;return!1},once:function(s,h,m){if(typeof s=="object")for(var v in s)this._on(v,s[v],h,!0);else{s=Y(s);for(var S=0,M=s.length;S<M;S++)this._on(s[S],h,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[E(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[E(s)],this},_propagateEvent:function(s){for(var h in this._eventParents)this._eventParents[h].fire(s.type,l({layer:s.target,propagatedFrom:s.target},s),!0)}};Le.addEventListener=Le.on,Le.removeEventListener=Le.clearAllEventListeners=Le.off,Le.addOneTimeEventListener=Le.once,Le.fireEvent=Le.fire,Le.hasEventListeners=Le.listens;var Te=Ye.extend(Le);function ne(s,h,m){this.x=m?Math.round(s):s,this.y=m?Math.round(h):h}var Se=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(s){return this.clone()._add(le(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(le(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ne(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ne(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Se(this.x),this.y=Se(this.y),this},distanceTo:function(s){s=le(s);var h=s.x-this.x,m=s.y-this.y;return Math.sqrt(h*h+m*m)},equals:function(s){return s=le(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=le(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+D(this.x)+", "+D(this.y)+")"}};function le(s,h,m){return s instanceof ne?s:B(s)?new ne(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ne(s.x,s.y):new ne(s,h,m)}function De(s,h){if(s)for(var m=h?[s,h]:s,v=0,S=m.length;v<S;v++)this.extend(m[v])}De.prototype={extend:function(s){var h,m;if(!s)return this;if(s instanceof ne||typeof s[0]=="number"||"x"in s)h=m=le(s);else if(s=Re(s),h=s.min,m=s.max,!h||!m)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=m.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return le((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return le(this.min.x,this.max.y)},getTopRight:function(){return le(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var h,m;return typeof s[0]=="number"||s instanceof ne?s=le(s):s=Re(s),s instanceof De?(h=s.min,m=s.max):h=m=s,h.x>=this.min.x&&m.x<=this.max.x&&h.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=Re(s);var h=this.min,m=this.max,v=s.min,S=s.max,M=S.x>=h.x&&v.x<=m.x,F=S.y>=h.y&&v.y<=m.y;return M&&F},overlaps:function(s){s=Re(s);var h=this.min,m=this.max,v=s.min,S=s.max,M=S.x>h.x&&v.x<m.x,F=S.y>h.y&&v.y<m.y;return M&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var h=this.min,m=this.max,v=Math.abs(h.x-m.x)*s,S=Math.abs(h.y-m.y)*s;return Re(le(h.x-v,h.y-S),le(m.x+v,m.y+S))},equals:function(s){return s?(s=Re(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Re(s,h){return!s||s instanceof De?s:new De(s,h)}function At(s,h){if(s)for(var m=h?[s,h]:s,v=0,S=m.length;v<S;v++)this.extend(m[v])}At.prototype={extend:function(s){var h=this._southWest,m=this._northEast,v,S;if(s instanceof Je)v=s,S=s;else if(s instanceof At){if(v=s._southWest,S=s._northEast,!v||!S)return this}else return s?this.extend(ae(s)||Ue(s)):this;return!h&&!m?(this._southWest=new Je(v.lat,v.lng),this._northEast=new Je(S.lat,S.lng)):(h.lat=Math.min(v.lat,h.lat),h.lng=Math.min(v.lng,h.lng),m.lat=Math.max(S.lat,m.lat),m.lng=Math.max(S.lng,m.lng)),this},pad:function(s){var h=this._southWest,m=this._northEast,v=Math.abs(h.lat-m.lat)*s,S=Math.abs(h.lng-m.lng)*s;return new At(new Je(h.lat-v,h.lng-S),new Je(m.lat+v,m.lng+S))},getCenter:function(){return new Je((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Je(this.getNorth(),this.getWest())},getSouthEast:function(){return new Je(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Je||"lat"in s?s=ae(s):s=Ue(s);var h=this._southWest,m=this._northEast,v,S;return s instanceof At?(v=s.getSouthWest(),S=s.getNorthEast()):v=S=s,v.lat>=h.lat&&S.lat<=m.lat&&v.lng>=h.lng&&S.lng<=m.lng},intersects:function(s){s=Ue(s);var h=this._southWest,m=this._northEast,v=s.getSouthWest(),S=s.getNorthEast(),M=S.lat>=h.lat&&v.lat<=m.lat,F=S.lng>=h.lng&&v.lng<=m.lng;return M&&F},overlaps:function(s){s=Ue(s);var h=this._southWest,m=this._northEast,v=s.getSouthWest(),S=s.getNorthEast(),M=S.lat>h.lat&&v.lat<m.lat,F=S.lng>h.lng&&v.lng<m.lng;return M&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,h){return s?(s=Ue(s),this._southWest.equals(s.getSouthWest(),h)&&this._northEast.equals(s.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ue(s,h){return s instanceof At?s:new At(s,h)}function Je(s,h,m){if(isNaN(s)||isNaN(h))throw new Error("Invalid LatLng object: ("+s+", "+h+")");this.lat=+s,this.lng=+h,m!==void 0&&(this.alt=+m)}Je.prototype={equals:function(s,h){if(!s)return!1;s=ae(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(h===void 0?1e-9:h)},toString:function(s){return"LatLng("+D(this.lat,s)+", "+D(this.lng,s)+")"},distanceTo:function(s){return Et.distance(this,ae(s))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(s){var h=180*s/40075017,m=h/Math.cos(Math.PI/180*this.lat);return Ue([this.lat-h,this.lng-m],[this.lat+h,this.lng+m])},clone:function(){return new Je(this.lat,this.lng,this.alt)}};function ae(s,h,m){return s instanceof Je?s:B(s)&&typeof s[0]!="object"?s.length===3?new Je(s[0],s[1],s[2]):s.length===2?new Je(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Je(s.lat,"lng"in s?s.lng:s.lon,s.alt):h===void 0?null:new Je(s,h,m)}var nn={latLngToPoint:function(s,h){var m=this.projection.project(s),v=this.scale(h);return this.transformation._transform(m,v)},pointToLatLng:function(s,h){var m=this.scale(h),v=this.transformation.untransform(s,m);return this.projection.unproject(v)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var h=this.projection.bounds,m=this.scale(s),v=this.transformation.transform(h.min,m),S=this.transformation.transform(h.max,m);return new De(v,S)},infinite:!1,wrapLatLng:function(s){var h=this.wrapLng?N(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?N(s.lat,this.wrapLat,!0):s.lat,v=s.alt;return new Je(m,h,v)},wrapLatLngBounds:function(s){var h=s.getCenter(),m=this.wrapLatLng(h),v=h.lat-m.lat,S=h.lng-m.lng;if(v===0&&S===0)return s;var M=s.getSouthWest(),F=s.getNorthEast(),Z=new Je(M.lat-v,M.lng-S),q=new Je(F.lat-v,F.lng-S);return new At(Z,q)}},Et=l({},nn,{wrapLng:[-180,180],R:6371e3,distance:function(s,h){var m=Math.PI/180,v=s.lat*m,S=h.lat*m,M=Math.sin((h.lat-s.lat)*m/2),F=Math.sin((h.lng-s.lng)*m/2),Z=M*M+Math.cos(v)*Math.cos(S)*F*F,q=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*q}}),gr=6378137,Yi={R:gr,MAX_LATITUDE:85.0511287798,project:function(s){var h=Math.PI/180,m=this.MAX_LATITUDE,v=Math.max(Math.min(m,s.lat),-m),S=Math.sin(v*h);return new ne(this.R*s.lng*h,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(s){var h=180/Math.PI;return new Je((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*h,s.x*h/this.R)},bounds:function(){var s=gr*Math.PI;return new De([-s,-s],[s,s])}()};function an(s,h,m,v){if(B(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=h,this._c=m,this._d=v}an.prototype={transform:function(s,h){return this._transform(s.clone(),h)},_transform:function(s,h){return h=h||1,s.x=h*(this._a*s.x+this._b),s.y=h*(this._c*s.y+this._d),s},untransform:function(s,h){return h=h||1,new ne((s.x/h-this._b)/this._a,(s.y/h-this._d)/this._c)}};function Mi(s,h,m,v){return new an(s,h,m,v)}var it=l({},Et,{code:"EPSG:3857",projection:Yi,transformation:function(){var s=.5/(Math.PI*Yi.R);return Mi(s,.5,-s,.5)}()}),Xi=l({},it,{code:"EPSG:900913"});function Kn(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function pr(s,h){var m="",v,S,M,F,Z,q;for(v=0,M=s.length;v<M;v++){for(Z=s[v],S=0,F=Z.length;S<F;S++)q=Z[S],m+=(S?"L":"M")+q.x+" "+q.y;m+=h?Ie.svg?"z":"x":""}return m||"M0 0"}var Kt=document.documentElement.style,gt="ActiveXObject"in window,rt=gt&&!document.addEventListener,Nr="msLaunchUri"in navigator&&!("documentMode"in document),Ee=Ht("webkit"),dn=Ht("android"),Ho=Ht("android 2")||Ht("android 3"),ee=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Oe=dn&&Ht("Google")&&ee<537&&!("AudioNode"in window),He=!!window.opera,dt=!Nr&&Ht("chrome"),ln=Ht("gecko")&&!Ee&&!He&&!gt,qt=!dt&&Ht("safari"),pt=Ht("phantom"),mt="OTransition"in Kt,Qi=navigator.platform.indexOf("Win")===0,_t=gt&&"transition"in Kt,se="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ho,Qe="MozPerspective"in Kt,Ge=!window.L_DISABLE_3D&&(_t||se||Qe)&&!mt&&!pt,et=typeof orientation<"u"||Ht("mobile"),It=et&&Ee,Ut=et&&se,Rr=!window.PointerEvent&&window.MSPointerEvent,ht=!!(window.PointerEvent||Rr),mr="ontouchstart"in window||!!window.TouchEvent,ec=!window.L_NO_TOUCH&&(mr||ht),tc=et&&He,_i=et&&ln,Ca=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Sn=function(){var s=!1;try{var h=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",I,h),window.removeEventListener("testPassiveEventSupport",I,h)}catch{}return s}(),no=function(){return!!document.createElement("canvas").getContext}(),io=!!(document.createElementNS&&Kn("svg").createSVGRect),Oi=!!io&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),od=!io&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var h=s.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Mr=navigator.platform.indexOf("Mac")===0,Sa=navigator.platform.indexOf("Linux")===0;function Ht(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Ie={ie:gt,ielt9:rt,edge:Nr,webkit:Ee,android:dn,android23:Ho,androidStock:Oe,opera:He,chrome:dt,gecko:ln,safari:qt,phantom:pt,opera12:mt,win:Qi,ie3d:_t,webkit3d:se,gecko3d:Qe,any3d:Ge,mobile:et,mobileWebkit:It,mobileWebkit3d:Ut,msPointer:Rr,pointer:ht,touch:ec,touchNative:mr,mobileOpera:tc,mobileGecko:_i,retina:Ca,passiveEvents:Sn,canvas:no,svg:io,vml:od,inlineSvg:Oi,mac:Mr,linux:Sa},qn=Ie.msPointer?"MSPointerDown":"pointerdown",xe=Ie.msPointer?"MSPointerMove":"pointermove",Or=Ie.msPointer?"MSPointerUp":"pointerup",Cs=Ie.msPointer?"MSPointerCancel":"pointercancel",An={touchstart:qn,touchmove:xe,touchend:Or,touchcancel:Cs},Lr={touchstart:_r,touchmove:Vo,touchend:Vo,touchcancel:Vo},Ki={},Wo=!1;function Li(s,h,m){return h==="touchstart"&&Dt(),Lr[h]?(m=Lr[h].bind(this,m),s.addEventListener(An[h],m,!1),m):(console.warn("wrong event specified:",h),I)}function sd(s,h,m){if(!An[h]){console.warn("wrong event specified:",h);return}s.removeEventListener(An[h],m,!1)}function ad(s){Ki[s.pointerId]=s}function Di(s){Ki[s.pointerId]&&(Ki[s.pointerId]=s)}function In(s){delete Ki[s.pointerId]}function Dt(){Wo||(document.addEventListener(qn,ad,!0),document.addEventListener(xe,Di,!0),document.addEventListener(Or,In,!0),document.addEventListener(Cs,In,!0),Wo=!0)}function Vo(s,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var m in Ki)h.touches.push(Ki[m]);h.changedTouches=[h],s(h)}}function _r(s,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&yn(h),Vo(s,h)}function Aa(s){var h={},m,v;for(v in s)m=s[v],h[v]=m&&m.bind?m.bind(s):m;return s=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var ie=200;function ld(s,h){s.addEventListener("dblclick",h);var m=0,v;function S(M){if(M.detail!==1){v=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var F=oo(M);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var Z=Date.now();Z-m<=ie?(v++,v===2&&h(Aa(M))):v=1,m=Z}}}return s.addEventListener("click",S),{dblclick:h,simDblclick:S}}function Xt(s,h){s.removeEventListener("dblclick",h.dblclick),s.removeEventListener("click",h.simDblclick)}var yr=G(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jo=G(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yt=jo==="webkitTransition"||jo==="OTransition"?jo+"End":"transitionend";function ft(s){return typeof s=="string"?document.getElementById(s):s}function Xe(s,h){var m=s.style[h]||s.currentStyle&&s.currentStyle[h];if((!m||m==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(s,null);m=v?v[h]:null}return m==="auto"?null:m}function lt(s,h,m){var v=document.createElement(s);return v.className=h||"",m&&m.appendChild(v),v}function Mt(s){var h=s.parentNode;h&&h.removeChild(s)}function ro(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Pt(s){var h=s.parentNode;h&&h.lastChild!==s&&h.appendChild(s)}function $n(s){var h=s.parentNode;h&&h.firstChild!==s&&h.insertBefore(s,h.firstChild)}function Ia(s,h){if(s.classList!==void 0)return s.classList.contains(h);var m=qi(s);return m.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(m)}function be(s,h){if(s.classList!==void 0)for(var m=Y(h),v=0,S=m.length;v<S;v++)s.classList.add(m[v]);else if(!Ia(s,h)){var M=qi(s);Ta(s,(M?M+" ":"")+h)}}function Ct(s,h){s.classList!==void 0?s.classList.remove(h):Ta(s,W((" "+qi(s)+" ").replace(" "+h+" "," ")))}function Ta(s,h){s.className.baseVal===void 0?s.className=h:s.className.baseVal=h}function qi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Ke(s,h){"opacity"in s.style?s.style.opacity=h:"filter"in s.style&&Tn(s,h)}function Tn(s,h){var m=!1,v="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(v)}catch{if(h===1)return}h=Math.round(h*100),m?(m.Enabled=h!==100,m.Opacity=h):s.style.filter+=" progid:"+v+"(opacity="+h+")"}function G(s){for(var h=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in h)return s[m];return!1}function O(s,h,m){var v=h||new ne(0,0);s.style[yr]=(Ie.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(m?" scale("+m+")":"")}function _e(s,h){s._leaflet_pos=h,Ie.any3d?O(s,h):(s.style.left=h.x+"px",s.style.top=h.y+"px")}function kt(s){return s._leaflet_pos||new ne(0,0)}var bn,Go,Zo;if("onselectstart"in document)bn=function(){Be(window,"selectstart",yn)},Go=function(){ye(window,"selectstart",yn)};else{var Nn=G(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(Nn){var s=document.documentElement.style;Zo=s[Nn],s[Nn]="none"}},Go=function(){Nn&&(document.documentElement.style[Nn]=Zo,Zo=void 0)}}function Ne(){Be(window,"dragstart",yn)}function Ot(){ye(window,"dragstart",yn)}var Yo,ba;function Xo(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Dr(),Yo=s,ba=s.style.outlineStyle,s.style.outlineStyle="none",Be(window,"keydown",Dr))}function Dr(){Yo&&(Yo.style.outlineStyle=ba,Yo=void 0,ba=void 0,ye(window,"keydown",Dr))}function Ss(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Na(s){var h=s.getBoundingClientRect();return{x:h.width/s.offsetWidth||1,y:h.height/s.offsetHeight||1,boundingClientRect:h}}var hn={__proto__:null,TRANSFORM:yr,TRANSITION:jo,TRANSITION_END:yt,get:ft,getStyle:Xe,create:lt,remove:Mt,empty:ro,toFront:Pt,toBack:$n,hasClass:Ia,addClass:be,removeClass:Ct,setClass:Ta,getClass:qi,setOpacity:Ke,testProp:G,setTransform:O,setPosition:_e,getPosition:kt,get disableTextSelection(){return bn},get enableTextSelection(){return Go},disableImageDrag:Ne,enableImageDrag:Ot,preventOutline:Xo,restoreOutline:Dr,getSizedParentNode:Ss,getScale:Na};function Be(s,h,m,v){if(h&&typeof h=="object")for(var S in h)cn(s,S,h[S],m);else{h=Y(h);for(var M=0,F=h.length;M<F;M++)cn(s,h[M],m,v)}return this}var _n="_leaflet_events";function ye(s,h,m,v){if(arguments.length===1)nc(s),delete s[_n];else if(h&&typeof h=="object")for(var S in h)Ra(s,S,h[S],m);else if(h=Y(h),arguments.length===2)nc(s,function(Z){return $(h,Z)!==-1});else for(var M=0,F=h.length;M<F;M++)Ra(s,h[M],m,v);return this}function nc(s,h){for(var m in s[_n]){var v=m.split(/\d/)[0];(!h||h(v))&&Ra(s,v,null,null,m)}}var We={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cn(s,h,m,v){var S=h+E(m)+(v?"_"+E(v):"");if(s[_n]&&s[_n][S])return this;var M=function(Z){return m.call(v||s,Z||window.event)},F=M;!Ie.touchNative&&Ie.pointer&&h.indexOf("touch")===0?M=Li(s,h,M):Ie.touch&&h==="dblclick"?M=ld(s,M):"addEventListener"in s?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?s.addEventListener(We[h]||h,M,Ie.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(M=function(Z){Z=Z||window.event,Pr(s,Z)&&F(Z)},s.addEventListener(We[h],M,!1)):s.addEventListener(h,F,!1):s.attachEvent("on"+h,M),s[_n]=s[_n]||{},s[_n][S]=M}function Ra(s,h,m,v,S){S=S||h+E(m)+(v?"_"+E(v):"");var M=s[_n]&&s[_n][S];if(!M)return this;!Ie.touchNative&&Ie.pointer&&h.indexOf("touch")===0?sd(s,h,M):Ie.touch&&h==="dblclick"?Xt(s,M):"removeEventListener"in s?s.removeEventListener(We[h]||h,M,!1):s.detachEvent("on"+h,M),s[_n][S]=null}function $i(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function As(s){return cn(s,"wheel",$i),this}function yi(s){return Be(s,"mousedown touchstart dblclick contextmenu",$i),s._leaflet_disable_click=!0,this}function yn(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function xi(s){return yn(s),$i(s),this}function oo(s){if(s.composedPath)return s.composedPath();for(var h=[],m=s.target;m;)h.push(m),m=m.parentNode;return h}function so(s,h){if(!h)return new ne(s.clientX,s.clientY);var m=Na(h),v=m.boundingClientRect;return new ne((s.clientX-v.left)/m.x-h.clientLeft,(s.clientY-v.top)/m.y-h.clientTop)}var ic=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ao(s){return Ie.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ic:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Pr(s,h){var m=h.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var zn={__proto__:null,on:Be,off:ye,stopPropagation:$i,disableScrollPropagation:As,disableClickPropagation:yi,preventDefault:yn,stop:xi,getPropagationPath:oo,getMousePosition:so,getWheelDelta:ao,isExternalTarget:Pr,addListener:Be,removeListener:ye},Ma=Te.extend({run:function(s,h,m,v){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=kt(s),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=je(this._animate,this),this._step()},_step:function(s){var h=+new Date-this._startTime,m=this._duration*1e3;h<m?this._runFrame(this._easeOut(h/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,h){var m=this._startPos.add(this._offset.multiplyBy(s));h&&m._round(),_e(this._el,m),this.fire("step")},_complete:function(){ve(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ot=Te.extend({options:{crs:it,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,h){h=V(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ae(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jo&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Be(this._proxy,yt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,h,m){if(h=h===void 0?this._zoom:this._limitZoom(h),s=this._limitCenter(ae(s),h,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=l({animate:m.animate},m.zoom),m.pan=l({animate:m.animate,duration:m.duration},m.pan));var v=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,h,m.zoom):this._tryAnimatedPan(s,m.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(s,h,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,h){return this._loaded?this.setView(this.getCenter(),s,{zoom:h}):(this._zoom=s,this)},zoomIn:function(s,h){return s=s||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,h)},zoomOut:function(s,h){return s=s||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,h)},setZoomAround:function(s,h,m){var v=this.getZoomScale(h),S=this.getSize().divideBy(2),M=s instanceof ne?s:this.latLngToContainerPoint(s),F=M.subtract(S).multiplyBy(1-1/v),Z=this.containerPointToLatLng(S.add(F));return this.setView(Z,h,{zoom:m})},_getBoundsCenterZoom:function(s,h){h=h||{},s=s.getBounds?s.getBounds():Ue(s);var m=le(h.paddingTopLeft||h.padding||[0,0]),v=le(h.paddingBottomRight||h.padding||[0,0]),S=this.getBoundsZoom(s,!1,m.add(v));if(S=typeof h.maxZoom=="number"?Math.min(h.maxZoom,S):S,S===1/0)return{center:s.getCenter(),zoom:S};var M=v.subtract(m).divideBy(2),F=this.project(s.getSouthWest(),S),Z=this.project(s.getNorthEast(),S),q=this.unproject(F.add(Z).divideBy(2).add(M),S);return{center:q,zoom:S}},fitBounds:function(s,h){if(s=Ue(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,h);return this.setView(m.center,m.zoom,h)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,h){return this.setView(s,this._zoom,{pan:h})},panBy:function(s,h){if(s=le(s).round(),h=h||{},!s.x&&!s.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ma,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,h.duration||.25,h.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,h,m){if(m=m||{},m.animate===!1||!Ie.any3d)return this.setView(s,h,m);this._stop();var v=this.project(this.getCenter()),S=this.project(s),M=this.getSize(),F=this._zoom;s=ae(s),h=h===void 0?F:h;var Z=Math.max(M.x,M.y),q=Z*this.getZoomScale(F,h),re=S.distanceTo(v)||1,we=1.42,ke=we*we;function tt(gn){var dc=gn?-1:1,Hy=gn?q:Z,Wy=q*q-Z*Z+dc*ke*ke*re*re,Vy=2*Hy*ke*re,pd=Wy/Vy,c0=Math.sqrt(pd*pd+1)-pd,jy=c0<1e-9?-18:Math.log(c0);return jy}function ni(gn){return(Math.exp(gn)-Math.exp(-gn))/2}function Rn(gn){return(Math.exp(gn)+Math.exp(-gn))/2}function Ui(gn){return ni(gn)/Rn(gn)}var li=tt(0);function Rs(gn){return Z*(Rn(li)/Rn(li+we*gn))}function By(gn){return Z*(Rn(li)*Ui(li+we*gn)-ni(li))/ke}function Fy(gn){return 1-Math.pow(1-gn,1.5)}var zy=Date.now(),a0=(tt(1)-li)/we,Uy=m.duration?1e3*m.duration:1e3*a0*.8;function l0(){var gn=(Date.now()-zy)/Uy,dc=Fy(gn)*a0;gn<=1?(this._flyToFrame=je(l0,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(By(dc)/re)),F),this.getScaleZoom(Z/Rs(dc),F),{flyTo:!0})):this._move(s,h)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),l0.call(this),this},flyToBounds:function(s,h){var m=this._getBoundsCenterZoom(s,h);return this.flyTo(m.center,m.zoom,h)},setMaxBounds:function(s){return s=Ue(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var h=this.options.minZoom;return this.options.minZoom=s,this._loaded&&h!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var h=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&h!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,h){this._enforcingBounds=!0;var m=this.getCenter(),v=this._limitCenter(m,this._zoom,Ue(s));return m.equals(v)||this.panTo(v,h),this._enforcingBounds=!1,this},panInside:function(s,h){h=h||{};var m=le(h.paddingTopLeft||h.padding||[0,0]),v=le(h.paddingBottomRight||h.padding||[0,0]),S=this.project(this.getCenter()),M=this.project(s),F=this.getPixelBounds(),Z=Re([F.min.add(m),F.max.subtract(v)]),q=Z.getSize();if(!Z.contains(M)){this._enforcingBounds=!0;var re=M.subtract(Z.getCenter()),we=Z.extend(M).getSize().subtract(q);S.x+=re.x<0?-we.x:we.x,S.y+=re.y<0?-we.y:we.y,this.panTo(this.unproject(S),h),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=l({animate:!1,pan:!0},s===!0?{animate:!0}:s);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),v=h.divideBy(2).round(),S=m.divideBy(2).round(),M=v.subtract(S);return!M.x&&!M.y?this:(s.animate&&s.pan?this.panBy(M):(s.pan&&this._rawPanBy(M),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=l({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=p(this._handleGeolocationResponse,this),m=p(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,m,s):navigator.geolocation.getCurrentPosition(h,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var h=s.code,m=s.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var h=s.coords.latitude,m=s.coords.longitude,v=new Je(h,m),S=v.toBounds(s.coords.accuracy*2),M=this._locateOptions;if(M.setView){var F=this.getBoundsZoom(S);this.setView(v,M.maxZoom?Math.min(F,M.maxZoom):F)}var Z={latlng:v,bounds:S,timestamp:s.timestamp};for(var q in s.coords)typeof s.coords[q]=="number"&&(Z[q]=s.coords[q]);this.fire("locationfound",Z)}},addHandler:function(s,h){if(!h)return this;var m=this[s]=new h(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ve(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Mt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,h){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),v=lt("div",m,h||this._mapPane);return s&&(this._panes[s]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),h=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new At(h,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,h,m){s=Ue(s),m=le(m||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),M=this.getMaxZoom(),F=s.getNorthWest(),Z=s.getSouthEast(),q=this.getSize().subtract(m),re=Re(this.project(Z,v),this.project(F,v)).getSize(),we=Ie.any3d?this.options.zoomSnap:1,ke=q.x/re.x,tt=q.y/re.y,ni=h?Math.max(ke,tt):Math.min(ke,tt);return v=this.getScaleZoom(ni,v),we&&(v=Math.round(v/(we/100))*(we/100),v=h?Math.ceil(v/we)*we:Math.floor(v/we)*we),Math.max(S,Math.min(M,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,h){var m=this._getTopLeftPoint(s,h);return new De(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,h){var m=this.options.crs;return h=h===void 0?this._zoom:h,m.scale(s)/m.scale(h)},getScaleZoom:function(s,h){var m=this.options.crs;h=h===void 0?this._zoom:h;var v=m.zoom(s*m.scale(h));return isNaN(v)?1/0:v},project:function(s,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ae(s),h)},unproject:function(s,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(le(s),h)},layerPointToLatLng:function(s){var h=le(s).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(s){var h=this.project(ae(s))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ae(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ue(s))},distance:function(s,h){return this.options.crs.distance(ae(s),ae(h))},containerPointToLayerPoint:function(s){return le(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return le(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var h=this.containerPointToLayerPoint(le(s));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(s)))},mouseEventToContainerPoint:function(s){return so(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var h=this._container=ft(s);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Be(h,"scroll",this._onScroll,this),this._containerId=E(h)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,be(s,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Xe(s,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(s.markerPane,"leaflet-zoom-hide"),be(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,h,m){_e(this._mapPane,new ne(0,0));var v=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var S=this._zoom!==h;this._moveStart(S,m)._move(s,h)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(s,h){return s&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(s,h,m,v){h===void 0&&(h=this._zoom);var S=this._zoom!==h;return this._zoom=h,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),v?m&&m.pinch&&this.fire("zoom",m):((S||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ve(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){_e(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[E(this._container)]=this;var h=s?ye:Be;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ve(this._resizeRequest),this._resizeRequest=je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,h){for(var m=[],v,S=h==="mouseout"||h==="mouseover",M=s.target||s.srcElement,F=!1;M;){if(v=this._targets[E(M)],v&&(h==="click"||h==="preclick")&&this._draggableMoved(v)){F=!0;break}if(v&&v.listens(h,!0)&&(S&&!Pr(M,s)||(m.push(v),S))||M===this._container)break;M=M.parentNode}return!m.length&&!F&&!S&&this.listens(h,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var h=s.target||s.srcElement;if(!(!this._loaded||h._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(h))){var m=s.type;m==="mousedown"&&Xo(h),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,h,m){if(s.type==="click"){var v=l({},s);v.type="preclick",this._fireDOMEvent(v,v.type,m)}var S=this._findEventTargets(s,h);if(m){for(var M=[],F=0;F<m.length;F++)m[F].listens(h,!0)&&M.push(m[F]);S=M.concat(S)}if(S.length){h==="contextmenu"&&yn(s);var Z=S[0],q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var re=Z.getLatLng&&(!Z._radius||Z._radius<=10);q.containerPoint=re?this.latLngToContainerPoint(Z.getLatLng()):this.mouseEventToContainerPoint(s),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=re?Z.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<S.length;F++)if(S[F].fire(h,q,!0),q.originalEvent._stopped||S[F].options.bubblingMouseEvents===!1&&$(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,h=this._handlers.length;s<h;s++)this._handlers[s].disable()},whenReady:function(s,h){return this._loaded?s.call(h||this,{target:this}):this.on("load",s,h),this},_getMapPanePos:function(){return kt(this._mapPane)||new ne(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,h){var m=s&&h!==void 0?this._getNewPixelOrigin(s,h):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,h){var m=this.getSize()._divideBy(2);return this.project(s,h)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,h,m){var v=this._getNewPixelOrigin(m,h);return this.project(s,h)._subtract(v)},_latLngBoundsToNewLayerBounds:function(s,h,m){var v=this._getNewPixelOrigin(m,h);return Re([this.project(s.getSouthWest(),h)._subtract(v),this.project(s.getNorthWest(),h)._subtract(v),this.project(s.getSouthEast(),h)._subtract(v),this.project(s.getNorthEast(),h)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,h,m){if(!m)return s;var v=this.project(s,h),S=this.getSize().divideBy(2),M=new De(v.subtract(S),v.add(S)),F=this._getBoundsOffset(M,m,h);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?s:this.unproject(v.add(F),h)},_limitOffset:function(s,h){if(!h)return s;var m=this.getPixelBounds(),v=new De(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(v,h))},_getBoundsOffset:function(s,h,m){var v=Re(this.project(h.getNorthEast(),m),this.project(h.getSouthWest(),m)),S=v.min.subtract(s.min),M=v.max.subtract(s.max),F=this._rebound(S.x,-M.x),Z=this._rebound(S.y,-M.y);return new ne(F,Z)},_rebound:function(s,h){return s+h>0?Math.round(s-h)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(h))},_limitZoom:function(s){var h=this.getMinZoom(),m=this.getMaxZoom(),v=Ie.any3d?this.options.zoomSnap:1;return v&&(s=Math.round(s/v)*v),Math.max(h,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,h){var m=this._getCenterOffset(s)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,h),!0)},_createAnimProxy:function(){var s=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(h){var m=yr,v=this._proxy.style[m];O(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),v===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),h=this.getZoom();O(this._proxy,this.project(s,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,h,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(h),S=this._getCenterOffset(s)._divideBy(1-1/v);return m.animate!==!0&&!this.getSize().contains(S)?!1:(je(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,h,!0)},this),!0)},_animateZoom:function(s,h,m,v){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=h,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:h,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rc(s,h){return new ot(s,h)}var wi=Ye.extend({options:{position:"topright"},initialize:function(s){V(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var h=this._map;return h&&h.removeControl(this),this.options.position=s,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var h=this._container=this.onAdd(s),m=this.getPosition(),v=s._controlCorners[m];return be(h,"leaflet-control"),m.indexOf("bottom")!==-1?v.insertBefore(h,v.firstChild):v.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Qo=function(s){return new wi(s)};ot.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},h="leaflet-",m=this._controlContainer=lt("div",h+"control-container",this._container);function v(S,M){var F=h+S+" "+h+M;s[S+M]=lt("div",F,m)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Mt(this._controlCorners[s]);Mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var oc=wi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,h,m,v){return m<v?-1:v<m?1:0}},initialize:function(s,h,m){V(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in s)this._addLayer(s[v],v);for(v in h)this._addLayer(h[v],v,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return wi.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,h){return this._addLayer(s,h),this._map?this._update():this},addOverlay:function(s,h){return this._addLayer(s,h,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var h=this._getLayer(E(s));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",h=this._container=lt("div",s),m=this.options.collapsed;h.setAttribute("aria-haspopup",!0),yi(h),As(h);var v=this._section=lt("section",s+"-list");m&&(this._map.on("click",this.collapse,this),Be(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=lt("a",s+"-toggle",h);S.href="#",S.title="Layers",S.setAttribute("role","button"),Be(S,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){yn(M),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=lt("div",s+"-base",v),this._separator=lt("div",s+"-separator",v),this._overlaysList=lt("div",s+"-overlays",v),h.appendChild(v)},_getLayer:function(s){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&E(this._layers[h].layer)===s)return this._layers[h]},_addLayer:function(s,h,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:h,overlay:m}),this.options.sortLayers&&this._layers.sort(p(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ro(this._baseLayersList),ro(this._overlaysList),this._layerControlInputs=[];var s,h,m,v,S=0;for(m=0;m<this._layers.length;m++)v=this._layers[m],this._addItem(v),h=h||v.overlay,s=s||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(s=s&&S>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=h&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var h=this._getLayer(E(s.target)),m=h.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,h)},_createRadioElement:function(s,h){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(h?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=m,v.firstChild},_addItem:function(s){var h=document.createElement("label"),m=this._map.hasLayer(s.layer),v;s.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=m):v=this._createRadioElement("leaflet-base-layers_"+E(this),m),this._layerControlInputs.push(v),v.layerId=E(s.layer),Be(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+s.name;var M=document.createElement("span");h.appendChild(M),M.appendChild(v),M.appendChild(S);var F=s.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,h,m,v=[],S=[];this._handlingClick=!0;for(var M=s.length-1;M>=0;M--)h=s[M],m=this._getLayer(h.layerId).layer,h.checked?v.push(m):h.checked||S.push(m);for(M=0;M<S.length;M++)this._map.hasLayer(S[M])&&this._map.removeLayer(S[M]);for(M=0;M<v.length;M++)this._map.hasLayer(v[M])||this._map.addLayer(v[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,h,m,v=this._map.getZoom(),S=s.length-1;S>=0;S--)h=s[S],m=this._getLayer(h.layerId).layer,h.disabled=m.options.minZoom!==void 0&&v<m.options.minZoom||m.options.maxZoom!==void 0&&v>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Be(s,"click",yn),this.expand();var h=this;setTimeout(function(){ye(s,"click",yn),h._preventClick=!1})}}),St=function(s,h,m){return new oc(s,h,m)},Is=wi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var h="leaflet-control-zoom",m=lt("div",h+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,h+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,h+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,h,m,v,S){var M=lt("a",m,v);return M.innerHTML=s,M.href="#",M.title=h,M.setAttribute("role","button"),M.setAttribute("aria-label",h),yi(M),Be(M,"click",xi),Be(M,"click",S,this),Be(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var s=this._map,h="leaflet-disabled";Ct(this._zoomInButton,h),Ct(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(be(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(be(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});ot.mergeOptions({zoomControl:!0}),ot.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Is,this.addControl(this.zoomControl))});var Ts=function(s){return new Is(s)},Ji=wi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var h="leaflet-control-scale",m=lt("div",h),v=this.options;return this._addScales(v,h+"-line",m),s.on(v.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,h,m){s.metric&&(this._mScale=lt("div",h,m)),s.imperial&&(this._iScale=lt("div",h,m))},_update:function(){var s=this._map,h=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,h]),s.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var h=this._getRoundNum(s),m=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,m,h/s)},_updateImperial:function(s){var h=s*3.2808399,m,v,S;h>5280?(m=h/5280,v=this._getRoundNum(m),this._updateScale(this._iScale,v+" mi",v/m)):(S=this._getRoundNum(h),this._updateScale(this._iScale,S+" ft",S/h))},_updateScale:function(s,h,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=h},_getRoundNum:function(s){var h=Math.pow(10,(Math.floor(s)+"").length-1),m=s/h;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,h*m}}),cd=function(s){return new Ji(s)},Q='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ze=wi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?Q+" ":"")+"Leaflet</a>"},initialize:function(s){V(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),yi(this._container);for(var h in s._layers)s._layers[h].getAttribution&&this.addAttribution(s._layers[h].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var h in this._attributions)this._attributions[h]&&s.push(h);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});ot.mergeOptions({attributionControl:!0}),ot.addInitHook(function(){this.options.attributionControl&&new Ze().addTo(this)});var xn=function(s){return new Ze(s)};wi.Layers=oc,wi.Zoom=Is,wi.Scale=Ji,wi.Attribution=Ze,Qo.layers=St,Qo.zoom=Ts,Qo.scale=cd,Qo.attribution=xn;var Jn=Ye.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jn.addTo=function(s,h){return s.addHandler(h,this),this};var sc={Events:Le},ac=Ie.touch?"touchstart mousedown":"mousedown",xr=Te.extend({options:{clickTolerance:3},initialize:function(s,h,m,v){V(this,v),this._element=s,this._dragStartTarget=h||s,this._preventOutline=m},enable:function(){this._enabled||(Be(this._dragStartTarget,ac,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xr._dragging===this&&this.finishDrag(!0),ye(this._dragStartTarget,ac,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){xr._dragging===this&&this.finishDrag();return}if(!(xr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(xr._dragging=this,this._preventOutline&&Xo(this._element),Ne(),bn(),!this._moving)){this.fire("down");var h=s.touches?s.touches[0]:s,m=Ss(this._element);this._startPoint=new ne(h.clientX,h.clientY),this._startPos=kt(this._element),this._parentScale=Na(m);var v=s.type==="mousedown";Be(document,v?"mousemove":"touchmove",this._onMove,this),Be(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var h=s.touches&&s.touches.length===1?s.touches[0]:s,m=new ne(h.clientX,h.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,yn(s),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),_e(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ct(document.body,"leaflet-dragging"),this._lastTarget&&(Ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ye(document,"mousemove touchmove",this._onMove,this),ye(document,"mouseup touchend touchcancel",this._onUp,this),Ot(),Go();var h=this._moved&&this._moving;this._moving=!1,xr._dragging=!1,h&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function lc(s,h,m){var v,S=[1,4,2,8],M,F,Z,q,re,we,ke,tt;for(M=0,we=s.length;M<we;M++)s[M]._code=Br(s[M],h);for(Z=0;Z<4;Z++){for(ke=S[Z],v=[],M=0,we=s.length,F=we-1;M<we;F=M++)q=s[M],re=s[F],q._code&ke?re._code&ke||(tt=er(re,q,ke,h,m),tt._code=Br(tt,h),v.push(tt)):(re._code&ke&&(tt=er(re,q,ke,h,m),tt._code=Br(tt,h),v.push(tt)),v.push(q));s=v}return s}function bs(s,h){var m,v,S,M,F,Z,q,re,we;if(!s||s.length===0)throw new Error("latlngs not passed");ei(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ke=ae([0,0]),tt=Ue(s),ni=tt.getNorthWest().distanceTo(tt.getSouthWest())*tt.getNorthEast().distanceTo(tt.getNorthWest());ni<1700&&(ke=$t(s));var Rn=s.length,Ui=[];for(m=0;m<Rn;m++){var li=ae(s[m]);Ui.push(h.project(ae([li.lat-ke.lat,li.lng-ke.lng])))}for(Z=q=re=0,m=0,v=Rn-1;m<Rn;v=m++)S=Ui[m],M=Ui[v],F=S.y*M.x-M.y*S.x,q+=(S.x+M.x)*F,re+=(S.y+M.y)*F,Z+=F*3;Z===0?we=Ui[0]:we=[q/Z,re/Z];var Rs=h.unproject(le(we));return ae([Rs.lat+ke.lat,Rs.lng+ke.lng])}function $t(s){for(var h=0,m=0,v=0,S=0;S<s.length;S++){var M=ae(s[S]);h+=M.lat,m+=M.lng,v++}return ae([h/v,m/v])}var Oa={__proto__:null,clipPolygon:lc,polygonCenter:bs,centroid:$t};function Wt(s,h){if(!h||!s.length)return s.slice();var m=h*h;return s=ud(s,m),s=Tt(s,m),s}function Ko(s,h,m){return Math.sqrt(Fr(s,h,m,!0))}function kr(s,h,m){return Fr(s,h,m)}function Tt(s,h){var m=s.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(m);S[0]=S[m-1]=1,Me(s,S,h,0,m-1);var M,F=[];for(M=0;M<m;M++)S[M]&&F.push(s[M]);return F}function Me(s,h,m,v,S){var M=0,F,Z,q;for(Z=v+1;Z<=S-1;Z++)q=Fr(s[Z],s[v],s[S],!0),q>M&&(F=Z,M=q);M>m&&(h[F]=1,Me(s,h,m,v,F),Me(s,h,m,F,S))}function ud(s,h){for(var m=[s[0]],v=1,S=0,M=s.length;v<M;v++)Pi(s[v],s[S])>h&&(m.push(s[v]),S=v);return S<M-1&&m.push(s[M-1]),m}var Rt;function wr(s,h,m,v,S){var M=v?Rt:Br(s,m),F=Br(h,m),Z,q,re;for(Rt=F;;){if(!(M|F))return[s,h];if(M&F)return!1;Z=M||F,q=er(s,h,Z,m,S),re=Br(q,m),Z===M?(s=q,M=re):(h=q,F=re)}}function er(s,h,m,v,S){var M=h.x-s.x,F=h.y-s.y,Z=v.min,q=v.max,re,we;return m&8?(re=s.x+M*(q.y-s.y)/F,we=q.y):m&4?(re=s.x+M*(Z.y-s.y)/F,we=Z.y):m&2?(re=q.x,we=s.y+F*(q.x-s.x)/M):m&1&&(re=Z.x,we=s.y+F*(Z.x-s.x)/M),new ne(re,we,S)}function Br(s,h){var m=0;return s.x<h.min.x?m|=1:s.x>h.max.x&&(m|=2),s.y<h.min.y?m|=4:s.y>h.max.y&&(m|=8),m}function Pi(s,h){var m=h.x-s.x,v=h.y-s.y;return m*m+v*v}function Fr(s,h,m,v){var S=h.x,M=h.y,F=m.x-S,Z=m.y-M,q=F*F+Z*Z,re;return q>0&&(re=((s.x-S)*F+(s.y-M)*Z)/q,re>1?(S=m.x,M=m.y):re>0&&(S+=F*re,M+=Z*re)),F=s.x-S,Z=s.y-M,v?F*F+Z*Z:new ne(S,M)}function ei(s){return!B(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Ns(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ei(s)}function La(s,h){var m,v,S,M,F,Z,q,re;if(!s||s.length===0)throw new Error("latlngs not passed");ei(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var we=ae([0,0]),ke=Ue(s),tt=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());tt<1700&&(we=$t(s));var ni=s.length,Rn=[];for(m=0;m<ni;m++){var Ui=ae(s[m]);Rn.push(h.project(ae([Ui.lat-we.lat,Ui.lng-we.lng])))}for(m=0,v=0;m<ni-1;m++)v+=Rn[m].distanceTo(Rn[m+1])/2;if(v===0)re=Rn[0];else for(m=0,M=0;m<ni-1;m++)if(F=Rn[m],Z=Rn[m+1],S=F.distanceTo(Z),M+=S,M>v){q=(M-v)/S,re=[Z.x-q*(Z.x-F.x),Z.y-q*(Z.y-F.y)];break}var li=h.unproject(le(re));return ae([li.lat+we.lat,li.lng+we.lng])}var cc={__proto__:null,simplify:Wt,pointToSegmentDistance:Ko,closestPointOnSegment:kr,clipSegment:wr,_getEdgeIntersection:er,_getBitCode:Br,_sqClosestPointOnSegment:Fr,isFlat:ei,_flat:Ns,polylineCenter:La},Da={project:function(s){return new ne(s.lng,s.lat)},unproject:function(s){return new Je(s.y,s.x)},bounds:new De([-180,-90],[180,90])},vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new De([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var h=Math.PI/180,m=this.R,v=s.lat*h,S=this.R_MINOR/m,M=Math.sqrt(1-S*S),F=M*Math.sin(v),Z=Math.tan(Math.PI/4-v/2)/Math.pow((1-F)/(1+F),M/2);return v=-m*Math.log(Math.max(Z,1e-10)),new ne(s.lng*h*m,v)},unproject:function(s){for(var h=180/Math.PI,m=this.R,v=this.R_MINOR/m,S=Math.sqrt(1-v*v),M=Math.exp(-s.y/m),F=Math.PI/2-2*Math.atan(M),Z=0,q=.1,re;Z<15&&Math.abs(q)>1e-7;Z++)re=S*Math.sin(F),re=Math.pow((1-re)/(1+re),S/2),q=Math.PI/2-2*Math.atan(M*re)-F,F+=q;return new Je(F*h,s.x*h/m)}},Pa={__proto__:null,LonLat:Da,Mercator:vr,SphericalMercator:Yi},dd=l({},Et,{code:"EPSG:3395",projection:vr,transformation:function(){var s=.5/(Math.PI*vr.R);return Mi(s,.5,-s,.5)}()}),lo=l({},Et,{code:"EPSG:4326",projection:Da,transformation:Mi(1/180,1,-1/180,.5)}),hd=l({},nn,{projection:Da,transformation:Mi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,h){var m=h.lng-s.lng,v=h.lat-s.lat;return Math.sqrt(m*m+v*v)},infinite:!0});nn.Earth=Et,nn.EPSG3395=dd,nn.EPSG3857=it,nn.EPSG900913=Xi,nn.EPSG4326=lo,nn.Simple=hd;var fn=Te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[E(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[E(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var h=s.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var m=this.getEvents();h.on(m,this),this.once("remove",function(){h.off(m,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});ot.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var h=E(s);return this._layers[h]?this:(this._layers[h]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var h=E(s);return this._layers[h]?(this._loaded&&s.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return E(s)in this._layers},eachLayer:function(s,h){for(var m in this._layers)s.call(h,this._layers[m]);return this},_addLayers:function(s){s=s?B(s)?s:[s]:[];for(var h=0,m=s.length;h<m;h++)this.addLayer(s[h])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[E(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var h=E(s);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,h=-1/0,m=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;s=S.minZoom===void 0?s:Math.min(s,S.minZoom),h=S.maxZoom===void 0?h:Math.max(h,S.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tr=fn.extend({initialize:function(s,h){V(this,h),this._layers={};var m,v;if(s)for(m=0,v=s.length;m<v;m++)this.addLayer(s[m])},addLayer:function(s){var h=this.getLayerId(s);return this._layers[h]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var h=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(s){var h=typeof s=="number"?s:this.getLayerId(s);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var h=Array.prototype.slice.call(arguments,1),m,v;for(m in this._layers)v=this._layers[m],v[s]&&v[s].apply(v,h);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,h){for(var m in this._layers)s.call(h,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return E(s)}}),ai=function(s,h){return new tr(s,h)},ki=tr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),tr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),tr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new At;for(var h in this._layers){var m=this._layers[h];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),Bi=function(s,h){return new ki(s,h)},co=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){V(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,h){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(m,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(v,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(s,h){var m=this.options,v=m[h+"Size"];typeof v=="number"&&(v=[v,v]);var S=le(v),M=le(h==="shadow"&&m.shadowAnchor||m.iconAnchor||S&&S.divideBy(2,!0));s.className="leaflet-marker-"+h+" "+(m.className||""),M&&(s.style.marginLeft=-M.x+"px",s.style.marginTop=-M.y+"px"),S&&(s.style.width=S.x+"px",s.style.height=S.y+"px")},_createImg:function(s,h){return h=h||document.createElement("img"),h.src=s,h},_getIconUrl:function(s){return Ie.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function ka(s){return new co(s)}var qo=co.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof qo.imagePath!="string"&&(qo.imagePath=this._detectIconPath()),(this.options.imagePath||qo.imagePath)+co.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var h=function(m,v,S){var M=v.exec(m);return M&&M[S]};return s=h(s,/^url\((['"])?(.+)\1\)$/,2),s&&h(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=lt("div","leaflet-default-icon-path",document.body),h=Xe(s,"background-image")||Xe(s,"backgroundImage");if(document.body.removeChild(s),h=this._stripUrl(h),h)return h;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Ba=Jn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new xr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var h=this._marker,m=h._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,M=kt(h._icon),F=m.getPixelBounds(),Z=m.getPixelOrigin(),q=Re(F.min._subtract(Z).add(S),F.max._subtract(Z).subtract(S));if(!q.contains(M)){var re=le((Math.max(q.max.x,M.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,M.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,M.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,M.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(v);m.panBy(re,{animate:!1}),this._draggable._newPos._add(re),this._draggable._startPos._add(re),_e(h._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=je(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ve(this._panRequest),this._panRequest=je(this._adjustPan.bind(this,s)))},_onDrag:function(s){var h=this._marker,m=h._shadow,v=kt(h._icon),S=h._map.layerPointToLatLng(v);m&&_e(m,v),h._latlng=S,s.latlng=S,s.oldLatLng=this._oldLatLng,h.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ve(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ti=fn.extend({options:{icon:new qo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,h){V(this,h),this._latlng=ae(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var h=this._latlng;return this._latlng=ae(s),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),v=!1;m!==this._icon&&(this._icon&&this._removeIcon(),v=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),be(m,h),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(m,"focus",this._panOnFocus,this);var S=s.icon.createShadow(this._shadow),M=!1;S!==this._shadow&&(this._removeShadow(),M=!0),S&&(be(S,h),S.alt=""),this._shadow=S,s.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&M&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(this._icon,"focus",this._panOnFocus,this),Mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&_e(this._icon,s),this._shadow&&_e(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var h=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ba)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ba(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Ke(this._icon,s),this._shadow&&Ke(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var h=this.options.icon.options,m=h.iconSize?le(h.iconSize):le(0,0),v=h.iconAnchor?le(h.iconAnchor):le(0,0);s.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:m.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fd(s,h){return new ti(s,h)}var Fi=fn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return V(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Er=Fi.extend({options:{fill:!0,radius:10},initialize:function(s,h){V(this,h),this._latlng=ae(s),this._radius=this.options.radius},setLatLng:function(s){var h=this._latlng;return this._latlng=ae(s),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var h=s&&s.radius||this._radius;return Fi.prototype.setStyle.call(this,s),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,h=this._radiusY||s,m=this._clickTolerance(),v=[s+m,h+m];this._pxBounds=new De(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ut(s,h){return new Er(s,h)}var uo=Er.extend({initialize:function(s,h,m){if(typeof h=="number"&&(h=l({},m,{radius:h})),V(this,h),this._latlng=ae(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new At(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Fi.prototype.setStyle,_project:function(){var s=this._latlng.lng,h=this._latlng.lat,m=this._map,v=m.options.crs;if(v.distance===Et.distance){var S=Math.PI/180,M=this._mRadius/Et.R/S,F=m.project([h+M,s]),Z=m.project([h-M,s]),q=F.add(Z).divideBy(2),re=m.unproject(q).lat,we=Math.acos((Math.cos(M*S)-Math.sin(h*S)*Math.sin(re*S))/(Math.cos(h*S)*Math.cos(re*S)))/S;(isNaN(we)||we===0)&&(we=M/Math.cos(Math.PI/180*h)),this._point=q.subtract(m.getPixelOrigin()),this._radius=isNaN(we)?0:q.x-m.project([re,s-we]).x,this._radiusY=q.y-F.y}else{var ke=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(ke).x}this._updateBounds()}});function T(s,h,m){return new uo(s,h,m)}var i=Fi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,h){V(this,h),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var h=1/0,m=null,v=Fr,S,M,F=0,Z=this._parts.length;F<Z;F++)for(var q=this._parts[F],re=1,we=q.length;re<we;re++){S=q[re-1],M=q[re];var ke=v(s,S,M,!0);ke<h&&(h=ke,m=v(s,S,M))}return m&&(m.distance=Math.sqrt(h)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return La(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,h){return h=h||this._defaultShape(),s=ae(s),h.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new At,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return ei(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var h=[],m=ei(s),v=0,S=s.length;v<S;v++)m?(h[v]=ae(s[v]),this._bounds.extend(h[v])):h[v]=this._convertLatLngs(s[v]);return h},_project:function(){var s=new De;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),h=new ne(s,s);this._rawPxBounds&&(this._pxBounds=new De([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(s,h,m){var v=s[0]instanceof Je,S=s.length,M,F;if(v){for(F=[],M=0;M<S;M++)F[M]=this._map.latLngToLayerPoint(s[M]),m.extend(F[M]);h.push(F)}else for(M=0;M<S;M++)this._projectLatlngs(s[M],h,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,m,v,S,M,F,Z,q;for(m=0,S=0,M=this._rings.length;m<M;m++)for(q=this._rings[m],v=0,F=q.length;v<F-1;v++)Z=wr(q[v],q[v+1],s,v,!0),Z&&(h[S]=h[S]||[],h[S].push(Z[0]),(Z[1]!==q[v+1]||v===F-2)&&(h[S].push(Z[1]),S++))}},_simplifyPoints:function(){for(var s=this._parts,h=this.options.smoothFactor,m=0,v=s.length;m<v;m++)s[m]=Wt(s[m],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,h){var m,v,S,M,F,Z,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,M=this._parts.length;m<M;m++)for(Z=this._parts[m],v=0,F=Z.length,S=F-1;v<F;S=v++)if(!(!h&&v===0)&&Ko(s,Z[S],Z[v])<=q)return!0;return!1}});function o(s,h){return new i(s,h)}i._flat=Ns;var a=i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var h=i.prototype._convertLatLngs.call(this,s),m=h.length;return m>=2&&h[0]instanceof Je&&h[0].equals(h[m-1])&&h.pop(),h},_setLatLngs:function(s){i.prototype._setLatLngs.call(this,s),ei(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ei(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,h=this.options.weight,m=new ne(h,h);if(s=new De(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,M;v<S;v++)M=lc(this._rings[v],s,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var h=!1,m,v,S,M,F,Z,q,re;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(M=0,q=this._parts.length;M<q;M++)for(m=this._parts[M],F=0,re=m.length,Z=re-1;F<re;Z=F++)v=m[F],S=m[Z],v.y>s.y!=S.y>s.y&&s.x<(S.x-v.x)*(s.y-v.y)/(S.y-v.y)+v.x&&(h=!h);return h||i.prototype._containsPoint.call(this,s,!0)}});function c(s,h){return new a(s,h)}var d=ki.extend({initialize:function(s,h){V(this,h),this._layers={},s&&this.addData(s)},addData:function(s){var h=B(s)?s:s.features,m,v,S;if(h){for(m=0,v=h.length;m<v;m++)S=h[m],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var M=this.options;if(M.filter&&!M.filter(s))return this;var F=f(s,M);return F?(F.feature=P(s),F.defaultOptions=F.options,this.resetStyle(F),M.onEachFeature&&M.onEachFeature(s,F),this.addLayer(F)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=l({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(h){this._setLayerStyle(h,s)},this)},_setLayerStyle:function(s,h){s.setStyle&&(typeof h=="function"&&(h=h(s.feature)),s.setStyle(h))}});function f(s,h){var m=s.type==="Feature"?s.geometry:s,v=m?m.coordinates:null,S=[],M=h&&h.pointToLayer,F=h&&h.coordsToLatLng||_,Z,q,re,we;if(!v&&!m)return null;switch(m.type){case"Point":return Z=F(v),g(M,s,Z,h);case"MultiPoint":for(re=0,we=v.length;re<we;re++)Z=F(v[re]),S.push(g(M,s,Z,h));return new ki(S);case"LineString":case"MultiLineString":return q=x(v,m.type==="LineString"?0:1,F),new i(q,h);case"Polygon":case"MultiPolygon":return q=x(v,m.type==="Polygon"?1:2,F),new a(q,h);case"GeometryCollection":for(re=0,we=m.geometries.length;re<we;re++){var ke=f({geometry:m.geometries[re],type:"Feature",properties:s.properties},h);ke&&S.push(ke)}return new ki(S);case"FeatureCollection":for(re=0,we=m.features.length;re<we;re++){var tt=f(m.features[re],h);tt&&S.push(tt)}return new ki(S);default:throw new Error("Invalid GeoJSON object.")}}function g(s,h,m,v){return s?s(h,m):new ti(m,v&&v.markersInheritOptions&&v)}function _(s){return new Je(s[1],s[0],s[2])}function x(s,h,m){for(var v=[],S=0,M=s.length,F;S<M;S++)F=h?x(s[S],h-1,m):(m||_)(s[S]),v.push(F);return v}function C(s,h){return s=ae(s),s.alt!==void 0?[D(s.lng,h),D(s.lat,h),D(s.alt,h)]:[D(s.lng,h),D(s.lat,h)]}function b(s,h,m,v){for(var S=[],M=0,F=s.length;M<F;M++)S.push(h?b(s[M],ei(s[M])?0:h-1,m,v):C(s[M],v));return!h&&m&&S.length>0&&S.push(S[0].slice()),S}function R(s,h){return s.feature?l({},s.feature,{geometry:h}):P(h)}function P(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var z={toGeoJSON:function(s){return R(this,{type:"Point",coordinates:C(this.getLatLng(),s)})}};ti.include(z),uo.include(z),Er.include(z),i.include({toGeoJSON:function(s){var h=!ei(this._latlngs),m=b(this._latlngs,h?1:0,!1,s);return R(this,{type:(h?"Multi":"")+"LineString",coordinates:m})}}),a.include({toGeoJSON:function(s){var h=!ei(this._latlngs),m=h&&!ei(this._latlngs[0]),v=b(this._latlngs,m?2:h?1:0,!0,s);return h||(v=[v]),R(this,{type:(m?"Multi":"")+"Polygon",coordinates:v})}}),tr.include({toMultiPoint:function(s){var h=[];return this.eachLayer(function(m){h.push(m.toGeoJSON(s).geometry.coordinates)}),R(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(s){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(s);var m=h==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var M=S.toGeoJSON(s);if(m)v.push(M.geometry);else{var F=P(M);F.type==="FeatureCollection"?v.push.apply(v,F.features):v.push(F)}}}),m?R(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function U(s,h){return new d(s,h)}var j=U,X=fn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,h,m){this._url=s,this._bounds=Ue(h),V(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Pt(this._image),this},bringToBack:function(){return this._map&&$n(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ue(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",h=this._image=s?this._url:lt("img");if(be(h,"leaflet-image-layer"),this._zoomAnimated&&be(h,"leaflet-zoom-animated"),this.options.className&&be(h,this.options.className),h.onselectstart=I,h.onmousemove=I,h.onload=p(this.fire,this,"load"),h.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(s){var h=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;O(this._image,m,h)},_reset:function(){var s=this._image,h=new De(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=h.getSize();_e(s,h.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){Ke(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),ue=function(s,h,m){return new X(s,h,m)},de=X.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",h=this._image=s?this._url:lt("video");if(be(h,"leaflet-image-layer"),this._zoomAnimated&&be(h,"leaflet-zoom-animated"),this.options.className&&be(h,this.options.className),h.onselectstart=I,h.onmousemove=I,h.onloadeddata=p(this.fire,this,"load"),s){for(var m=h.getElementsByTagName("source"),v=[],S=0;S<m.length;S++)v.push(m[S].src);this._url=m.length>0?v:[h.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var F=lt("source");F.src=this._url[M],h.appendChild(F)}}});function oe(s,h,m){return new de(s,h,m)}var qe=X.extend({_initImage:function(){var s=this._image=this._url;be(s,"leaflet-image-layer"),this._zoomAnimated&&be(s,"leaflet-zoom-animated"),this.options.className&&be(s,this.options.className),s.onselectstart=I,s.onmousemove=I}});function Ve(s,h,m){return new qe(s,h,m)}var Vt=fn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,h){s&&(s instanceof Je||B(s))?(this._latlng=ae(s),V(this,h)):(V(this,s),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Ke(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Ke(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Ke(this._container,0),this._removeTimeout=setTimeout(p(Mt,void 0,this._container),200)):Mt(this._container),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ae(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pt(this._container),this},bringToBack:function(){return this._map&&$n(this._container),this},_prepareOpen:function(s){var h=this._source;if(!h._map)return!1;if(h instanceof ki){h=null;var m=this._source._layers;for(var v in m)if(m[v]._map){h=m[v];break}if(!h)return!1;this._source=h}if(!s)if(h.getCenter)s=h.getCenter();else if(h.getLatLng)s=h.getLatLng();else if(h.getBounds)s=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")s.innerHTML=h;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),h=le(this.options.offset),m=this._getAnchor();this._zoomAnimated?_e(this._container,s.add(m)):h=h.add(s).add(m);var v=this._containerBottom=-h.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});ot.include({_initOverlay:function(s,h,m,v){var S=h;return S instanceof s||(S=new s(v).setContent(h)),m&&S.setLatLng(m),S}}),fn.include({_initOverlay:function(s,h,m,v){var S=m;return S instanceof s?(V(S,v),S._source=this):(S=h&&!v?h:new s(v,this),S.setContent(m)),S}});var Un=Vt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Vt.prototype.openOn.call(this,s)},onAdd:function(s){Vt.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fi||this._source.on("preclick",$i))},onRemove:function(s){Vt.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fi||this._source.off("preclick",$i))},getEvents:function(){var s=Vt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",h=this._container=lt("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=lt("div",s+"-content-wrapper",h);if(this._contentNode=lt("div",s+"-content",m),yi(h),As(this._contentNode),Be(h,"contextmenu",$i),this._tipContainer=lt("div",s+"-tip-container",h),this._tip=lt("div",s+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=lt("a",s+"-close-button",h);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Be(v,"click",function(S){yn(S),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,h=s.style;h.width="",h.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),h.width=m+1+"px",h.whiteSpace="",h.height="";var v=s.offsetHeight,S=this.options.maxHeight,M="leaflet-popup-scrolled";S&&v>S?(h.height=S+"px",be(s,M)):Ct(s,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var h=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();_e(this._container,h.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,h=parseInt(Xe(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+h,v=this._containerWidth,S=new ne(this._containerLeft,-m-this._containerBottom);S._add(kt(this._container));var M=s.layerPointToContainerPoint(S),F=le(this.options.autoPanPadding),Z=le(this.options.autoPanPaddingTopLeft||F),q=le(this.options.autoPanPaddingBottomRight||F),re=s.getSize(),we=0,ke=0;M.x+v+q.x>re.x&&(we=M.x+v-re.x+q.x),M.x-we-Z.x<0&&(we=M.x-Z.x),M.y+m+q.y>re.y&&(ke=M.y+m-re.y+q.y),M.y-ke-Z.y<0&&(ke=M.y-Z.y),(we||ke)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([we,ke]))}},_getAnchor:function(){return le(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hn=function(s,h){return new Un(s,h)};ot.mergeOptions({closePopupOnClick:!0}),ot.include({openPopup:function(s,h,m){return this._initOverlay(Un,s,h,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),fn.include({bindPopup:function(s,h){return this._popup=this._initOverlay(Un,this._popup,s,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ki||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){xi(s);var h=s.layer||s.target;if(this._popup._source===h&&!(h instanceof Fi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=h,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var wt=Vt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Vt.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Vt.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Vt.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",h=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var h,m,v=this._map,S=this._container,M=v.latLngToContainerPoint(v.getCenter()),F=v.layerPointToContainerPoint(s),Z=this.options.direction,q=S.offsetWidth,re=S.offsetHeight,we=le(this.options.offset),ke=this._getAnchor();Z==="top"?(h=q/2,m=re):Z==="bottom"?(h=q/2,m=0):Z==="center"?(h=q/2,m=re/2):Z==="right"?(h=0,m=re/2):Z==="left"?(h=q,m=re/2):F.x<M.x?(Z="right",h=0,m=re/2):(Z="left",h=q+(we.x+ke.x)*2,m=re/2),s=s.subtract(le(h,m,!0)).add(we).add(ke),Ct(S,"leaflet-tooltip-right"),Ct(S,"leaflet-tooltip-left"),Ct(S,"leaflet-tooltip-top"),Ct(S,"leaflet-tooltip-bottom"),be(S,"leaflet-tooltip-"+Z),_e(S,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Ke(this._container,s)},_animateZoom:function(s){var h=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(h)},_getAnchor:function(){return le(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wn=function(s,h){return new wt(s,h)};ot.include({openTooltip:function(s,h,m){return this._initOverlay(wt,s,h,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),fn.include({bindTooltip:function(s,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wt,this._tooltip,s,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var h=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[h](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ki||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var h=typeof s.getElement=="function"&&s.getElement();h&&(Be(h,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Be(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var h=typeof s.getElement=="function"&&s.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var h=s.latlng,m,v;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),v=this._map.containerPointToLayerPoint(m),h=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(h)}});var Wn=co.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var h=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ro(h),h.appendChild(m.html)):h.innerHTML=m.html!==!1?m.html:"",m.bgPos){var v=le(m.bgPos);h.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function ho(s){return new Wn(s)}co.Default=qo;var zi=fn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){V(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Mt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ne?s:new ne(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var h=this.getPane().children,m=-s(-1/0,1/0),v=0,S=h.length,M;v<S;v++)M=h[v].style.zIndex,h[v]!==this._container&&M&&(m=s(m,+M));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){Ke(this._container,this.options.opacity);var s=+new Date,h=!1,m=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var M=Math.min(1,(s-S.loaded)/200);Ke(S.el,M),M<1?h=!0:(S.active?m=!0:this._onOpaqueTile(S),S.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),h&&(ve(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,h=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=h-Math.abs(s-m),this._onUpdateLevel(m)):(Mt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var v=this._levels[s],S=this._map;return v||(v=this._levels[s]={},v.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=h,v.origin=S.project(S.unproject(S.getPixelOrigin()),s).round(),v.zoom=s,this._setZoomTransform(v,S.getCenter(),S.getZoom()),I(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var s,h,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)h=this._tiles[s],h.retain=h.current;for(s in this._tiles)if(h=this._tiles[s],h.current&&!h.active){var v=h.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var h in this._tiles)this._tiles[h].coords.z===s&&this._removeTile(h)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Mt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,h,m,v){var S=Math.floor(s/2),M=Math.floor(h/2),F=m-1,Z=new ne(+S,+M);Z.z=+F;var q=this._tileCoordsToKey(Z),re=this._tiles[q];return re&&re.active?(re.retain=!0,!0):(re&&re.loaded&&(re.retain=!0),F>v?this._retainParent(S,M,F,v):!1)},_retainChildren:function(s,h,m,v){for(var S=2*s;S<2*s+2;S++)for(var M=2*h;M<2*h+2;M++){var F=new ne(S,M);F.z=m+1;var Z=this._tileCoordsToKey(F),q=this._tiles[Z];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);m+1<v&&this._retainChildren(S,M,m+1,v)}},_resetView:function(s){var h=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var h=this.options;return h.minNativeZoom!==void 0&&s<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<s?h.maxNativeZoom:s},_setView:function(s,h,m,v){var S=Math.round(h);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var M=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||M)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,h)},_setZoomTransforms:function(s,h){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,h)},_setZoomTransform:function(s,h,m){var v=this._map.getZoomScale(m,s.zoom),S=s.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(h,m)).round();Ie.any3d?O(s.el,S,v):_e(s.el,S)},_resetGrid:function(){var s=this._map,h=s.options.crs,m=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,h.wrapLng[0]],v).x/m.x),Math.ceil(s.project([0,h.wrapLng[1]],v).x/m.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([h.wrapLat[0],0],v).y/m.x),Math.ceil(s.project([h.wrapLat[1],0],v).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var h=this._map,m=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),v=h.getZoomScale(m,this._tileZoom),S=h.project(s,this._tileZoom).floor(),M=h.getSize().divideBy(v*2);return new De(S.subtract(M),S.add(M))},_update:function(s){var h=this._map;if(h){var m=this._clampZoom(h.getZoom());if(s===void 0&&(s=h.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(s),S=this._pxBoundsToTileRange(v),M=S.getCenter(),F=[],Z=this.options.keepBuffer,q=new De(S.getBottomLeft().subtract([Z,-Z]),S.getTopRight().add([Z,-Z]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var re in this._tiles){var we=this._tiles[re].coords;(we.z!==this._tileZoom||!q.contains(new ne(we.x,we.y)))&&(this._tiles[re].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var ke=S.min.y;ke<=S.max.y;ke++)for(var tt=S.min.x;tt<=S.max.x;tt++){var ni=new ne(tt,ke);if(ni.z=this._tileZoom,!!this._isValidTile(ni)){var Rn=this._tiles[this._tileCoordsToKey(ni)];Rn?Rn.current=!0:F.push(ni)}}if(F.sort(function(li,Rs){return li.distanceTo(M)-Rs.distanceTo(M)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ui=document.createDocumentFragment();for(tt=0;tt<F.length;tt++)this._addTile(F[tt],Ui);this._level.el.appendChild(Ui)}}}},_isValidTile:function(s){var h=this._map.options.crs;if(!h.infinite){var m=this._globalTileRange;if(!h.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!h.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(s);return Ue(this.options.bounds).overlaps(v)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var h=this._map,m=this.getTileSize(),v=s.scaleBy(m),S=v.add(m),M=h.unproject(v,s.z),F=h.unproject(S,s.z);return[M,F]},_tileCoordsToBounds:function(s){var h=this._tileCoordsToNwSe(s),m=new At(h[0],h[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var h=s.split(":"),m=new ne(+h[0],+h[1]);return m.z=+h[2],m},_removeTile:function(s){var h=this._tiles[s];h&&(Mt(h.el),delete this._tiles[s],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){be(s,"leaflet-tile");var h=this.getTileSize();s.style.width=h.x+"px",s.style.height=h.y+"px",s.onselectstart=I,s.onmousemove=I,Ie.ielt9&&this.options.opacity<1&&Ke(s,this.options.opacity)},_addTile:function(s,h){var m=this._getTilePos(s),v=this._tileCoordsToKey(s),S=this.createTile(this._wrapCoords(s),p(this._tileReady,this,s));this._initTile(S),this.createTile.length<2&&je(p(this._tileReady,this,s,null,S)),_e(S,m),this._tiles[v]={el:S,coords:s,current:!0},h.appendChild(S),this.fire("tileloadstart",{tile:S,coords:s})},_tileReady:function(s,h,m){h&&this.fire("tileerror",{error:h,tile:m,coords:s});var v=this._tileCoordsToKey(s);m=this._tiles[v],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Ke(m.el,0),ve(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),h||(be(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?je(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var h=new ne(this._wrapX?N(s.x,this._wrapX):s.x,this._wrapY?N(s.y,this._wrapY):s.y);return h.z=s.z,h},_pxBoundsToTileRange:function(s){var h=this.getTileSize();return new De(s.min.unscaleBy(h).floor(),s.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function gd(s){return new zi(s)}var fo=zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,h){this._url=s,h=V(this,h),h.detectRetina&&Ie.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,h){return this._url===s&&h===void 0&&(h=!0),this._url=s,h||this.redraw(),this},createTile:function(s,h){var m=document.createElement("img");return Be(m,"load",p(this._tileOnLoad,this,h,m)),Be(m,"error",p(this._tileOnError,this,h,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var h={r:Ie.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(h.y=m),h["-y"]=m}return k(this._url,l(h,this.options))},_tileOnLoad:function(s,h){Ie.ielt9?setTimeout(p(s,this,null,h),0):s(null,h)},_tileOnError:function(s,h,m){var v=this.options.errorTileUrl;v&&h.getAttribute("src")!==v&&(h.src=v),s(m,h)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,h=this.options.maxZoom,m=this.options.zoomReverse,v=this.options.zoomOffset;return m&&(s=h-s),s+v},_getSubdomain:function(s){var h=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var s,h;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(h=this._tiles[s].el,h.onload=I,h.onerror=I,!h.complete)){h.src=pe;var m=this._tiles[s].coords;Mt(h),delete this._tiles[s],this.fire("tileabort",{tile:h,coords:m})}},_removeTile:function(s){var h=this._tiles[s];if(h)return h.el.setAttribute("src",pe),zi.prototype._removeTile.call(this,s)},_tileReady:function(s,h,m){if(!(!this._map||m&&m.getAttribute("src")===pe))return zi.prototype._tileReady.call(this,s,h,m)}});function X1(s,h){return new fo(s,h)}var Q1=fo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,h){this._url=s;var m=l({},this.defaultWmsParams);for(var v in h)v in this.options||(m[v]=h[v]);h=V(this,h);var S=h.detectRetina&&Ie.retina?2:1,M=this.getTileSize();m.width=M.x*S,m.height=M.y*S,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,fo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var h=this._tileCoordsToNwSe(s),m=this._crs,v=Re(m.project(h[0]),m.project(h[1])),S=v.min,M=v.max,F=(this._wmsVersion>=1.3&&this._crs===lo?[S.y,S.x,M.y,M.x]:[S.x,S.y,M.x,M.y]).join(","),Z=fo.prototype.getTileUrl.call(this,s);return Z+me(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(s,h){return l(this.wmsParams,s),h||this.redraw(),this}});function Oy(s,h){return new Q1(s,h)}fo.WMS=Q1,X1.wms=Oy;var zr=fn.extend({options:{padding:.1},initialize:function(s){V(this,s),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,h){var m=this._map.getZoomScale(h,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,h),M=v.multiplyBy(-m).add(S).subtract(this._map._getNewPixelOrigin(s,h));Ie.any3d?O(this._container,M,m):_e(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,h=this._map.getSize(),m=this._map.containerPointToLayerPoint(h.multiplyBy(-s)).round();this._bounds=new De(m,m.add(h.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),K1=zr.extend({options:{tolerance:0},getEvents:function(){var s=zr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Be(s,"mousemove",this._onMouseMove,this),Be(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Be(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ve(this._redrawRequest),delete this._ctx,Mt(this._container),ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var h in this._layers)s=this._layers[h],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var s=this._bounds,h=this._container,m=s.getSize(),v=Ie.retina?2:1;_e(h,s.min),h.width=v*m.x,h.height=v*m.y,h.style.width=m.x+"px",h.style.height=m.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[E(s)]=s;var h=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var h=s._order,m=h.next,v=h.prev;m?m.prev=v:this._drawLast=v,v?v.next=m:this._drawFirst=m,delete s._order,delete this._layers[E(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var h=s.options.dashArray.split(/[, ]+/),m=[],v,S;for(S=0;S<h.length;S++){if(v=Number(h[S]),isNaN(v))return;m.push(v)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||je(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var h=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new De,this._redrawBounds.extend(s._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(s._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var h=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,h=this._redrawBounds;if(this._ctx.save(),h){var m=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)s=v.layer,(!h||s._pxBounds&&s._pxBounds.intersects(h))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,h){if(this._drawing){var m,v,S,M,F=s._parts,Z=F.length,q=this._ctx;if(Z){for(q.beginPath(),m=0;m<Z;m++){for(v=0,S=F[m].length;v<S;v++)M=F[m][v],q[v?"lineTo":"moveTo"](M.x,M.y);h&&q.closePath()}this._fillStroke(q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var h=s._point,m=this._ctx,v=Math.max(Math.round(s._radius),1),S=(Math.max(Math.round(s._radiusY),1)||v)/v;S!==1&&(m.save(),m.scale(1,S)),m.beginPath(),m.arc(h.x,h.y/S,v,0,Math.PI*2,!1),S!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,h){var m=h.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(h.options&&h.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var h=this._map.mouseEventToLayerPoint(s),m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(h)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(v=m);this._fireEvent(v?[v]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,h)}},_handleMouseOut:function(s){var h=this._hoveredLayer;h&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([h],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,h){if(!this._mouseHoverThrottled){for(var m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(h)&&(v=m);v!==this._hoveredLayer&&(this._handleMouseOut(s),v&&(be(this._container,"leaflet-interactive"),this._fireEvent([v],s,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,h,m){this._map._fireDOMEvent(h,m||h.type,s)},_bringToFront:function(s){var h=s._order;if(h){var m=h.next,v=h.prev;if(m)m.prev=v;else return;v?v.next=m:m&&(this._drawFirst=m),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(s)}},_bringToBack:function(s){var h=s._order;if(h){var m=h.next,v=h.prev;if(v)v.next=m;else return;m?m.prev=v:v&&(this._drawLast=v),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(s)}}});function q1(s){return Ie.canvas?new K1(s):null}var Fa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ly={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var h=s._container=Fa("shape");be(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",s._path=Fa("path"),h.appendChild(s._path),this._updateStyle(s),this._layers[E(s)]=s},_addPath:function(s){var h=s._container;this._container.appendChild(h),s.options.interactive&&s.addInteractiveTarget(h)},_removePath:function(s){var h=s._container;Mt(h),s.removeInteractiveTarget(h),delete this._layers[E(s)]},_updateStyle:function(s){var h=s._stroke,m=s._fill,v=s.options,S=s._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(h||(h=s._stroke=Fa("stroke")),S.appendChild(h),h.weight=v.weight+"px",h.color=v.color,h.opacity=v.opacity,v.dashArray?h.dashStyle=B(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=v.lineCap.replace("butt","flat"),h.joinstyle=v.lineJoin):h&&(S.removeChild(h),s._stroke=null),v.fill?(m||(m=s._fill=Fa("fill")),S.appendChild(m),m.color=v.fillColor||v.color,m.opacity=v.fillOpacity):m&&(S.removeChild(m),s._fill=null)},_updateCircle:function(s){var h=s._point.round(),m=Math.round(s._radius),v=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+h.x+","+h.y+" "+m+","+v+" 0,"+65535*360)},_setPath:function(s,h){s._path.v=h},_bringToFront:function(s){Pt(s._container)},_bringToBack:function(s){$n(s._container)}},uc=Ie.vml?Fa:Kn,za=zr.extend({_initContainer:function(){this._container=uc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=uc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mt(this._container),ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zr.prototype._update.call(this);var s=this._bounds,h=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,m.setAttribute("width",h.x),m.setAttribute("height",h.y)),_e(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(s){var h=s._path=uc("path");s.options.className&&be(h,s.options.className),s.options.interactive&&be(h,"leaflet-interactive"),this._updateStyle(s),this._layers[E(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Mt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[E(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var h=s._path,m=s.options;h&&(m.stroke?(h.setAttribute("stroke",m.color),h.setAttribute("stroke-opacity",m.opacity),h.setAttribute("stroke-width",m.weight),h.setAttribute("stroke-linecap",m.lineCap),h.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?h.setAttribute("stroke-dasharray",m.dashArray):h.removeAttribute("stroke-dasharray"),m.dashOffset?h.setAttribute("stroke-dashoffset",m.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),m.fill?(h.setAttribute("fill",m.fillColor||m.color),h.setAttribute("fill-opacity",m.fillOpacity),h.setAttribute("fill-rule",m.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(s,h){this._setPath(s,pr(s._parts,h))},_updateCircle:function(s){var h=s._point,m=Math.max(Math.round(s._radius),1),v=Math.max(Math.round(s._radiusY),1)||m,S="a"+m+","+v+" 0 1,0 ",M=s._empty()?"M0 0":"M"+(h.x-m)+","+h.y+S+m*2+",0 "+S+-m*2+",0 ";this._setPath(s,M)},_setPath:function(s,h){s._path.setAttribute("d",h)},_bringToFront:function(s){Pt(s._path)},_bringToBack:function(s){$n(s._path)}});Ie.vml&&za.include(Ly);function $1(s){return Ie.svg||Ie.vml?new za(s):null}ot.include({getRenderer:function(s){var h=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var h=this._paneRenderers[s];return h===void 0&&(h=this._createRenderer({pane:s}),this._paneRenderers[s]=h),h},_createRenderer:function(s){return this.options.preferCanvas&&q1(s)||$1(s)}});var J1=a.extend({initialize:function(s,h){a.prototype.initialize.call(this,this._boundsToLatLngs(s),h)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ue(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Dy(s,h){return new J1(s,h)}za.create=uc,za.pointsToPath=pr,d.geometryToLayer=f,d.coordsToLatLng=_,d.coordsToLatLngs=x,d.latLngToCoords=C,d.latLngsToCoords=b,d.getFeature=R,d.asFeature=P,ot.mergeOptions({boxZoom:!0});var e0=Jn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),Ne(),this._startPoint=this._map.mouseEventToContainerPoint(s),Be(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var h=new De(this._point,this._startPoint),m=h.getSize();_e(this._box,h.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Mt(this._box),Ct(this._container,"leaflet-crosshair")),Go(),Ot(),ye(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var h=new At(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ot.addInitHook("addHandler","boxZoom",e0),ot.mergeOptions({doubleClickZoom:!0});var t0=Jn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var h=this._map,m=h.getZoom(),v=h.options.zoomDelta,S=s.originalEvent.shiftKey?m-v:m+v;h.options.doubleClickZoom==="center"?h.setZoom(S):h.setZoomAround(s.containerPoint,S)}});ot.addInitHook("addHandler","doubleClickZoom",t0),ot.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var n0=Jn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new xr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ct(this._map._container,"leaflet-grab"),Ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Ue(this._map.options.maxBounds);this._offsetLimit=Re(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var h=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(h),this._prunePositions(h)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,h){return s-(s-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;s.x<h.min.x&&(s.x=this._viscousLimit(s.x,h.min.x)),s.y<h.min.y&&(s.y=this._viscousLimit(s.y,h.min.y)),s.x>h.max.x&&(s.x=this._viscousLimit(s.x,h.max.x)),s.y>h.max.y&&(s.y=this._viscousLimit(s.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,h=Math.round(s/2),m=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-h+m)%s+h-m,M=(v+h+m)%s-h-m,F=Math.abs(S+m)<Math.abs(M+m)?S:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(s){var h=this._map,m=h.options,v=!m.inertia||s.noInertia||this._times.length<2;if(h.fire("dragend",s),v)h.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,F=m.easeLinearity,Z=S.multiplyBy(F/M),q=Z.distanceTo([0,0]),re=Math.min(m.inertiaMaxSpeed,q),we=Z.multiplyBy(re/q),ke=re/(m.inertiaDeceleration*F),tt=we.multiplyBy(-ke/2).round();!tt.x&&!tt.y?h.fire("moveend"):(tt=h._limitOffset(tt,h.options.maxBounds),je(function(){h.panBy(tt,{duration:ke,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});ot.addInitHook("addHandler","dragging",n0),ot.mergeOptions({keyboard:!0,keyboardPanDelta:80});var i0=Jn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Be(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,h=document.documentElement,m=s.scrollTop||h.scrollTop,v=s.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(v,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var h=this._panKeys={},m=this.keyCodes,v,S;for(v=0,S=m.left.length;v<S;v++)h[m.left[v]]=[-1*s,0];for(v=0,S=m.right.length;v<S;v++)h[m.right[v]]=[s,0];for(v=0,S=m.down.length;v<S;v++)h[m.down[v]]=[0,s];for(v=0,S=m.up.length;v<S;v++)h[m.up[v]]=[0,-1*s]},_setZoomDelta:function(s){var h=this._zoomKeys={},m=this.keyCodes,v,S;for(v=0,S=m.zoomIn.length;v<S;v++)h[m.zoomIn[v]]=s;for(v=0,S=m.zoomOut.length;v<S;v++)h[m.zoomOut[v]]=-s},_addHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var h=s.keyCode,m=this._map,v;if(h in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(v=this._panKeys[h],s.shiftKey&&(v=le(v).multiplyBy(3)),m.options.maxBounds&&(v=m._limitOffset(le(v),m.options.maxBounds)),m.options.worldCopyJump){var S=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(v)));m.panTo(S)}else m.panBy(v)}else if(h in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;xi(s)}}});ot.addInitHook("addHandler","keyboard",i0),ot.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var r0=Jn.extend({addHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var h=ao(s),m=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var v=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),v),xi(s)},_performZoom:function(){var s=this._map,h=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,M=m?Math.ceil(S/m)*m:S,F=s._limitZoom(h+(this._delta>0?M:-M))-h;this._delta=0,this._startTime=null,F&&(s.options.scrollWheelZoom==="center"?s.setZoom(h+F):s.setZoomAround(this._lastMousePos,h+F))}});ot.addInitHook("addHandler","scrollWheelZoom",r0);var Py=600;ot.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var o0=Jn.extend({addHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var h=s.touches[0];this._startPos=this._newPos=new ne(h.clientX,h.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Be(document,"touchend",yn),Be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Py),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ye(document,"touchend",yn),ye(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)},_onMove:function(s){var h=s.touches[0];this._newPos=new ne(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,h){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});m._simulated=!0,h.target.dispatchEvent(m)}});ot.addInitHook("addHandler","tapHold",o0),ot.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var s0=Jn.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var h=this._map;if(!(!s.touches||s.touches.length!==2||h._animatingZoom||this._zooming)){var m=h.mouseEventToContainerPoint(s.touches[0]),v=h.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(m.add(v)._divideBy(2))),this._startDist=m.distanceTo(v),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),yn(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var h=this._map,m=h.mouseEventToContainerPoint(s.touches[0]),v=h.mouseEventToContainerPoint(s.touches[1]),S=m.distanceTo(v)/this._startDist;if(this._zoom=h.getScaleZoom(S,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&S<1||this._zoom>h.getMaxZoom()&&S>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var M=m._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&M.x===0&&M.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),ve(this._animRequest);var F=p(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=je(F,this,!0),yn(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ve(this._animRequest),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ot.addInitHook("addHandler","touchZoom",s0),ot.BoxZoom=e0,ot.DoubleClickZoom=t0,ot.Drag=n0,ot.Keyboard=i0,ot.ScrollWheelZoom=r0,ot.TapHold=o0,ot.TouchZoom=s0,n.Bounds=De,n.Browser=Ie,n.CRS=nn,n.Canvas=K1,n.Circle=uo,n.CircleMarker=Er,n.Class=Ye,n.Control=wi,n.DivIcon=Wn,n.DivOverlay=Vt,n.DomEvent=zn,n.DomUtil=hn,n.Draggable=xr,n.Evented=Te,n.FeatureGroup=ki,n.GeoJSON=d,n.GridLayer=zi,n.Handler=Jn,n.Icon=co,n.ImageOverlay=X,n.LatLng=Je,n.LatLngBounds=At,n.Layer=fn,n.LayerGroup=tr,n.LineUtil=cc,n.Map=ot,n.Marker=ti,n.Mixin=sc,n.Path=Fi,n.Point=ne,n.PolyUtil=Oa,n.Polygon=a,n.Polyline=i,n.Popup=Un,n.PosAnimation=Ma,n.Projection=Pa,n.Rectangle=J1,n.Renderer=zr,n.SVG=za,n.SVGOverlay=qe,n.TileLayer=fo,n.Tooltip=wt,n.Transformation=an,n.Util=$e,n.VideoOverlay=de,n.bind=p,n.bounds=Re,n.canvas=q1,n.circle=T,n.circleMarker=ut,n.control=Qo,n.divIcon=ho,n.extend=l,n.featureGroup=Bi,n.geoJSON=U,n.geoJson=j,n.gridLayer=gd,n.icon=ka,n.imageOverlay=ue,n.latLng=ae,n.latLngBounds=Ue,n.layerGroup=ai,n.map=rc,n.marker=fd,n.point=le,n.polygon=c,n.polyline=o,n.popup=Hn,n.rectangle=Dy,n.setOptions=V,n.stamp=E,n.svg=$1,n.svgOverlay=Ve,n.tileLayer=X1,n.tooltip=wn,n.transformation=Mi,n.version=r,n.videoOverlay=oe;var ky=window.L;n.noConflict=function(){return window.L=ky,this},window.L=n})})(Qh,Qh.exports);var Av=Qh.exports;const Gn=Ou(Av);class Iv{constructor(e){this.V=e,this.adj=new Array(e).fill().map(()=>[]),this.parent=new Array(e).fill(-1),this.nodeCategories=new Array(e).fill("default"),this.nodeBuilding=new Array(e).fill(""),this.arrayPath=[]}addEdge(e,n,r){this.adj[e].push([n,r]),this.adj[n].push([e,r])}setNodeCategory(e,n){this.nodeCategories[e]=n}setNodeBuilding(e,n){this.nodeBuilding[e]=n}findClosestCategory(e,n,r,l){const u=new Array(this.V).fill(Number.POSITIVE_INFINITY),p=new Set;for(p.add([0,e]),u[e]=0;p.size>0;){const y=[...p].reduce((I,D)=>I[0]<D[0]?I:D);p.delete(y);const N=y[1];for(const[I,D]of this.adj[N])!r&&this.nodeCategories[I]==="elevator"||!l&&this.nodeCategories[Qu]==="emergencyExit"||u[I]>u[N]+D&&(u[I]!==Number.POSITIVE_INFINITY&&p.delete([u[I],I]),u[I]=u[N]+D,p.add([u[I],I]),this.parent[I]=N)}let w=-1,E=Number.POSITIVE_INFINITY;for(let y=0;y<this.V;y++)u[y]<E&&this.nodeCategories[y]===n&&(E=u[y],w=y);return E!==Number.POSITIVE_INFINITY?(console.log(`Closest Node of Category ${n} from Room ${e} is Room ${w} at a distance of ${E}.`),console.log("Path: "),this.printPath(w),console.log("Array Path:",this.arrayPath)):console.log(`No node of Category ${n} found from Room ${e}`),[E,w]}printPath(e){if(this.arrayPath=[],console.log(`Current Node: ${e}`),e===-1){console.log("Terminating recursion");return}this.printPath(this.parent[e]),console.log(`${e} -> `),this.arrayPath.push(Number(e))}shortestPath(e,n,r,l){const u=new Array(this.V).fill(Number.POSITIVE_INFINITY),p=new Set;for(p.add([0,e]),u[e]=0;p.size>0;){const w=[...p].reduce((y,N)=>y[0]<N[0]?y:N);p.delete(w);const E=w[1];for(const[y,N]of this.adj[E])!l&&this.nodeCategories[y]==="emergencyExit"||!r&&this.nodeCategories[y]==="elevator"||u[y]>u[E]+N&&(u[y]!==Number.POSITIVE_INFINITY&&p.delete([u[y],y]),u[y]=u[E]+N,p.add([u[y],y]),this.parent[y]=E)}u[n]===Number.POSITIVE_INFINITY?console.log(`No node found at Room ${n} from Room ${e}`):(console.log(`Room ${n} from Room ${e} is ${u[n]} units away.`),console.log("Path: "),this.printPath(n))}}function wg(t,e,n,r,l){if(console.log("Wlaa: ",e,n),A.parent=new Array(Qu).fill(-1),A.arrayPath=[],t==="enterDestination")return A.shortestPath(e,n,r,l),A.arrayPath;if(t==="enterFindFacility")return A.findClosestCategory(e,n,r,l),A.arrayPath}function vg(t,e,n,r,l){if(A.parent=new Array(Qu).fill(-1),A.arrayPath=[],t==="enterDestination")return A.shortestPath(e,n,r,l),A.nodeBuilding[A.arrayPath[0]];if(t==="enterFindFacility")return A.findClosestCategory(e,n,r,l),A.nodeBuilding[A.arrayPath[0]]}const Qu=1e4,A=new Iv(Qu);A.setNodeCategory(46,"CR(MEN)");A.setNodeCategory(241,"CR(MEN)");A.setNodeCategory(111,"CR(MEN)");A.setNodeCategory(191,"CR(MEN)");A.setNodeCategory(56,"CR(WOMEN)");A.setNodeCategory(141,"CR(WOMEN)");A.setNodeCategory(164,"CR(WOMEN)");A.setNodeCategory(226,"CR(WOMEN)");A.setNodeCategory(47,"CR(WOMEN)");A.setNodeCategory(1,"CEA: Faculty Office");A.addEdge(393,466,1);A.addEdge(420,347,1);A.addEdge(420,421,1);A.addEdge(422,421,1);A.addEdge(422,425,1);A.addEdge(424,425,1);A.addEdge(426,425,1);A.addEdge(426,427,1);A.addEdge(426,428,1);A.addEdge(429,428,1);A.addEdge(430,428,1);A.addEdge(430,431,1);A.addEdge(430,432,1);A.addEdge(430,433,1);A.addEdge(434,433,1);A.addEdge(435,433,1);A.addEdge(436,433,1);A.addEdge(436,437,1);A.addEdge(436,438,1);A.addEdge(439,438,1);A.addEdge(440,438,1);A.addEdge(440,441,1);A.addEdge(440,442,1);A.addEdge(443,442,1);A.addEdge(442,444,1);A.addEdge(445,444,1);A.addEdge(446,444,1);A.addEdge(446,447,1);A.addEdge(446,448,1);A.addEdge(446,449,1);A.addEdge(450,449,1);A.addEdge(451,449,1);A.addEdge(452,449,1);A.addEdge(452,453,1);A.addEdge(452,454,1);A.addEdge(452,455,1);A.addEdge(456,455,1);A.addEdge(456,457,1);A.addEdge(458,457,1);A.addEdge(459,457,1);A.addEdge(459,460,1);A.addEdge(459,461,1);A.addEdge(462,461,1);A.addEdge(463,461,1);A.addEdge(463,464,1);A.addEdge(465,464,1);A.addEdge(466,464,1);A.addEdge(340,14,1);A.addEdge(340,341,1);A.addEdge(342,341,1);A.addEdge(342,343,1);A.addEdge(344,343,1);A.addEdge(344,345,1);A.addEdge(344,346,1);A.addEdge(347,346,1);A.addEdge(348,346,1);A.addEdge(348,349,1);A.addEdge(348,350,1);A.addEdge(351,350,1);A.addEdge(352,350,1);A.addEdge(353,350,1);A.addEdge(353,354,1);A.addEdge(353,355,1);A.addEdge(356,355,1);A.addEdge(357,355,1);A.addEdge(357,358,1);A.addEdge(357,359,1);A.addEdge(360,359,1);A.addEdge(361,359,1);A.addEdge(361,362,1);A.addEdge(363,362,1);A.addEdge(364,362,1);A.addEdge(364,365,1);A.addEdge(364,366,1);A.addEdge(367,366,1);A.addEdge(368,366,1);A.addEdge(368,369,1);A.addEdge(368,370,1);A.addEdge(371,370,1);A.addEdge(372,370,1);A.addEdge(372,373,1);A.addEdge(372,374,1);A.addEdge(375,374,1);A.addEdge(376,374,1);A.addEdge(376,377,1);A.addEdge(378,377,1);A.addEdge(379,377,1);A.addEdge(376,405,1);A.addEdge(406,405,1);A.addEdge(380,405,1);A.addEdge(380,407,1);A.addEdge(381,407,1);A.addEdge(382,407,1);A.addEdge(382,383,1);A.addEdge(382,384,1);A.addEdge(380,385,1);A.addEdge(386,385,1);A.addEdge(386,387,1);A.addEdge(383,402,1);A.addEdge(390,402,1);A.addEdge(390,391,1);A.addEdge(392,391,1);A.addEdge(392,393,1);A.addEdge(394,361,1);A.addEdge(394,395,1);A.addEdge(394,396,1);A.addEdge(397,396,1);A.addEdge(398,396,1);A.addEdge(398,399,1);A.addEdge(398,400,1);A.addEdge(401,400,1);A.addEdge(403,400,1);A.addEdge(403,404,1);A.addEdge(130,404,1);A.addEdge(0,85,1);A.addEdge(0,87,1);A.addEdge(88,87,1);A.addEdge(1,85,1);A.addEdge(86,85,1);A.addEdge(0,3,1);A.addEdge(3,2,1);A.addEdge(3,6,1);A.addEdge(4,6,1);A.addEdge(5,6,1);A.addEdge(7,6,1);A.addEdge(7,11,1);A.addEdge(12,11,1);A.addEdge(12,13,1);A.addEdge(7,8,1);A.addEdge(9,8,1);A.addEdge(10,8,1);A.addEdge(10,14,1);A.addEdge(10,16,1);A.addEdge(15,16,1);A.addEdge(19,16,1);A.addEdge(19,18,1);A.addEdge(19,20,1);A.addEdge(19,22,1);A.addEdge(21,22,1);A.addEdge(23,22,1);A.addEdge(24,22,1);A.addEdge(24,25,1);A.addEdge(26,25,1);A.addEdge(27,25,1);A.addEdge(24,28,1);A.addEdge(29,28,1);A.addEdge(30,28,1);A.addEdge(31,28,1);A.addEdge(31,33,1);A.addEdge(32,33,1);A.addEdge(34,33,1);A.addEdge(34,35,1);A.addEdge(34,37,1);A.addEdge(36,37,1);A.addEdge(38,37,1);A.addEdge(38,46,1);A.addEdge(38,47,1);A.addEdge(38,48,1);A.addEdge(38,39,1);A.addEdge(40,39,1);A.addEdge(41,39,1);A.addEdge(41,45,1);A.addEdge(41,42,1);A.addEdge(43,42,1);A.addEdge(44,43,1);A.addEdge(31,49,1);A.addEdge(50,49,1);A.addEdge(51,49,1);A.addEdge(51,52,1);A.addEdge(51,53,1);A.addEdge(54,53,1);A.addEdge(55,53,1);A.addEdge(55,56,1);A.addEdge(55,57,1);A.addEdge(58,57,1);A.addEdge(58,59,1);A.addEdge(60,53,1);A.addEdge(60,61,1);A.addEdge(60,82,1);A.addEdge(63,82,1);A.addEdge(62,82,1);A.addEdge(63,65,.5);A.addEdge(66,65,1);A.addEdge(64,63,1);A.addEdge(67,65,.5);A.addEdge(67,68,1);A.addEdge(67,69,.5);A.addEdge(70,69,1);A.addEdge(71,69,1);A.addEdge(72,69,.5);A.addEdge(72,73,1);A.addEdge(72,74,.5);A.addEdge(75,74,1);A.addEdge(76,74,.5);A.addEdge(77,76,1);A.addEdge(78,76,1);A.addEdge(78,79,1);A.addEdge(78,80,1);A.addEdge(81,80,1);A.addEdge(16,80,2);A.addEdge(59,94,2);A.addEdge(59,93,2);A.addEdge(401,94,2);A.addEdge(98,89,2);A.addEdge(387,89,2);A.addEdge(98,90,2);A.addEdge(98,91,2);A.addEdge(92,91,2);A.addEdge(83,90,2);A.addEdge(83,43,2);A.addEdge(143,113,1);A.addEdge(166,113,1);A.addEdge(166,195,1);A.addEdge(224,195,1);A.addEdge(224,239,1);A.addEdge(264,239,1);A.addEdge(289,264,1);A.addEdge(289,314,1);A.setNodeCategory(143,"elevator");A.addEdge(115,149,1);A.addEdge(130,131,1);A.addEdge(132,131,1);A.addEdge(132,133,1);A.addEdge(132,134,1);A.addEdge(135,134,1);A.addEdge(136,134,1);A.addEdge(136,137,1);A.addEdge(136,138,1);A.addEdge(139,138,1);A.addEdge(140,138,1);A.addEdge(140,141,1);A.addEdge(140,142,1);A.addEdge(143,142,1);A.addEdge(144,142,1);A.addEdge(144,145,1);A.addEdge(144,146,1);A.addEdge(147,146,1);A.addEdge(147,148,1);A.addEdge(149,148,1);A.addEdge(143,113,1);A.setNodeCategory(113,"elevator");A.addEdge(77,100,1);A.addEdge(101,100,1);A.addEdge(101,102,1);A.addEdge(103,102,1);A.addEdge(104,102,1);A.addEdge(104,105,1);A.addEdge(104,106,1);A.addEdge(107,106,1);A.addEdge(108,106,1);A.addEdge(108,109,1);A.addEdge(108,110,1);A.addEdge(111,110,1);A.addEdge(112,110,1);A.addEdge(112,113,1);A.addEdge(112,114,1);A.addEdge(115,114,1);A.addEdge(116,114,1);A.addEdge(116,117,1);A.addEdge(116,118,1);A.addEdge(119,118,1);A.addEdge(119,120,1);A.addEdge(121,120,1);A.setNodeCategory(166,"elevator");A.addEdge(168,121,1);A.addEdge(155,156,1);A.addEdge(157,156,1);A.addEdge(157,158,1);A.addEdge(157,159,1);A.addEdge(160,159,1);A.addEdge(161,159,1);A.addEdge(161,162,1);A.addEdge(161,163,1);A.addEdge(164,163,1);A.addEdge(165,163,1);A.addEdge(165,166,1);A.addEdge(165,167,1);A.addEdge(168,167,1);A.addEdge(167,169,1);A.addEdge(170,169,1);A.addEdge(171,169,1);A.addEdge(171,172,1);A.addEdge(173,172,1);A.addEdge(173,174,1);A.setNodeCategory(195,"elevator");A.addEdge(197,174,1);A.addEdge(202,201,1);A.addEdge(200,201,1);A.addEdge(200,199,1);A.addEdge(200,199,1);A.addEdge(198,199,1);A.addEdge(198,203,1);A.addEdge(204,203,1);A.addEdge(208,203,1);A.addEdge(204,199,1);A.addEdge(204,205,1);A.addEdge(206,205,1);A.addEdge(207,205,1);A.addEdge(198,196,1);A.addEdge(197,196,1);A.addEdge(194,196,1);A.addEdge(194,195,1);A.addEdge(194,192,1);A.addEdge(193,192,1);A.addEdge(190,192,1);A.addEdge(190,191,1);A.addEdge(190,188,1);A.addEdge(189,188,1);A.addEdge(186,188,1);A.addEdge(186,187,1);A.addEdge(186,184,1);A.addEdge(185,184,1);A.addEdge(182,184,1);A.addEdge(182,183,1);A.addEdge(182,181,1);A.addEdge(181,180,1);A.setNodeCategory(224,"elevator");A.addEdge(202,222,1);A.addEdge(215,216,1);A.addEdge(217,216,1);A.addEdge(217,218,1);A.addEdge(219,218,1);A.addEdge(219,220,1);A.addEdge(219,221,1);A.addEdge(222,221,1);A.addEdge(223,221,1);A.addEdge(223,224,1);A.addEdge(223,225,1);A.addEdge(226,225,1);A.setNodeCategory(239,"elevator");A.addEdge(215,237,1);A.addEdge(230,231,1);A.addEdge(232,231,1);A.addEdge(232,233,1);A.addEdge(234,233,1);A.addEdge(234,235,1);A.addEdge(234,236,1);A.addEdge(237,236,1);A.addEdge(238,236,1);A.addEdge(238,239,1);A.addEdge(238,240,1);A.addEdge(241,240,1);A.addEdge(242,240,1);A.addEdge(243,240,1);A.addEdge(243,244,1);A.addEdge(243,245,1);A.addEdge(243,246,1);A.addEdge(247,246,1);A.setNodeCategory(264,"elevator");A.addEdge(262,230,1);A.addEdge(255,256,1);A.addEdge(257,256,1);A.addEdge(257,258,1);A.addEdge(259,258,1);A.addEdge(259,260,1);A.addEdge(259,261,1);A.addEdge(262,261,1);A.addEdge(263,261,1);A.addEdge(263,264,1);A.addEdge(263,265,1);A.addEdge(266,265,1);A.addEdge(267,265,1);A.addEdge(267,268,1);A.addEdge(267,269,1);A.addEdge(270,269,1);A.addEdge(271,269,1);A.addEdge(272,269,1);A.addEdge(272,273,1);A.addEdge(272,274,1);A.addEdge(275,274,1);A.setNodeCategory(289,"elevator");A.addEdge(287,255,1);A.addEdge(280,281,1);A.addEdge(282,281,1);A.addEdge(282,283,1);A.addEdge(284,283,1);A.addEdge(284,285,1);A.addEdge(284,286,1);A.addEdge(287,286,1);A.addEdge(288,286,1);A.addEdge(288,289,1);A.addEdge(288,290,1);A.addEdge(290,291,1);A.addEdge(290,292,1);A.addEdge(293,292,1);A.addEdge(294,292,1);A.addEdge(294,295,1);A.addEdge(294,296,1);A.addEdge(294,297,1);A.addEdge(298,297,1);A.addEdge(299,297,1);A.addEdge(299,300,1);A.setNodeCategory(314,"elevator");A.addEdge(312,280,1);A.addEdge(306,305,1);A.addEdge(306,307,1);A.addEdge(308,307,1);A.addEdge(308,309,1);A.addEdge(310,309,1);A.addEdge(311,309,1);A.addEdge(311,312,1);A.addEdge(311,313,1);A.addEdge(314,313,1);A.addEdge(315,313,1);A.addEdge(315,316,1);A.addEdge(315,317,1);A.addEdge(318,317,1);A.addEdge(319,317,1);A.addEdge(319,320,1);A.addEdge(319,321,1);A.addEdge(322,321,1);A.addEdge(323,321,1);A.addEdge(323,324,1);A.addEdge(323,325,1);A.addEdge(326,325,1);A.addEdge(327,325,1);A.addEdge(327,328,1);for(let t=0;t<=99;t++)A.setNodeBuilding(t,"science2ndFloor");for(let t=340;t<=419;t++)A.setNodeBuilding(t,"science1stFloor");for(let t=420;t<=480;t++)A.setNodeBuilding(t,"scienceGroundFloor");for(let t=126;t<=150;t++)A.setNodeBuilding(t,"BRS1stFloor");for(let t=100;t<=125;t++)A.setNodeBuilding(t,"BRS2ndFloor");for(let t=155;t<=175;t++)A.setNodeBuilding(t,"BRS3rdFloor");for(let t=175;t<=210;t++)A.setNodeBuilding(t,"BRS4thFloor");for(let t=215;t<=229;t++)A.setNodeBuilding(t,"BRS5thFloor");for(let t=230;t<=250;t++)A.setNodeBuilding(t,"BRS6thFloor");for(let t=255;t<=279;t++)A.setNodeBuilding(t,"BRS7thFloor");for(let t=280;t<=300;t++)A.setNodeBuilding(t,"BRS8thFloor");for(let t=305;t<=330;t++)A.setNodeBuilding(t,"BRS9thFloor");var Ce;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ce||(Ce={}));var Eg=new Map([[Ce.QR_CODE,"QR_CODE"],[Ce.AZTEC,"AZTEC"],[Ce.CODABAR,"CODABAR"],[Ce.CODE_39,"CODE_39"],[Ce.CODE_93,"CODE_93"],[Ce.CODE_128,"CODE_128"],[Ce.DATA_MATRIX,"DATA_MATRIX"],[Ce.MAXICODE,"MAXICODE"],[Ce.ITF,"ITF"],[Ce.EAN_13,"EAN_13"],[Ce.EAN_8,"EAN_8"],[Ce.PDF_417,"PDF_417"],[Ce.RSS_14,"RSS_14"],[Ce.RSS_EXPANDED,"RSS_EXPANDED"],[Ce.UPC_A,"UPC_A"],[Ce.UPC_E,"UPC_E"],[Ce.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Cg;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Cg||(Cg={}));function Tv(t){return Object.values(Ce).includes(t)}var Po;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Po||(Po={}));var or=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Po.SCAN_TYPE_CAMERA,Po.SCAN_TYPE_FILE],t}(),G_=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Eg.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Eg.get(e))},t}(),Sg=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Kh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Kh||(Kh={}));var Z_=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Kh.UNKWOWN_ERROR}},t}(),Y_=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Ar(t){return typeof t>"u"||t===null}function bv(t,e,n){return t>n?n:t<e?e:t}var Zs=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),bt=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Ag=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),X_=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),p=Object.keys(e),w=0,E=p;w<E.length;w++){var y=E[w];if(u.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t}(),qh={exports:{}};(function(t,e){(function(n,r){r(e)})(Ls,function(n){function r(T){return T==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,i){T.__proto__=i}||function(T,i){for(var o in i)i.hasOwnProperty(o)&&(T[o]=i[o])};function u(T,i){l(T,i);function o(){this.constructor=T}T.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function p(T,i){var o=Object.setPrototypeOf;o?o(T,i):T.__proto__=i}function w(T,i){i===void 0&&(i=T.constructor);var o=Error.captureStackTrace;o&&o(T,i)}var E=function(T){u(i,T);function i(o){var a=this.constructor,c=T.call(this,o)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),p(c,a.prototype),w(c),c}return i}(Error);class y extends E{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}y.kind="Exception";class N extends y{}N.kind="ArgumentException";class I extends y{}I.kind="IllegalArgumentException";class D{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,a,c){const d=this.binarizer.getLuminanceSource().crop(i,o,a,c);return new D(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class W extends y{static getChecksumInstance(){return new W}}W.kind="ChecksumException";class Y{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class V{static arraycopy(i,o,a,c,d){for(;d--;)a[c++]=i[o++]}static currentTimeMillis(){return Date.now()}}class me extends y{}me.kind="IndexOutOfBoundsException";class H extends me{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}H.kind="ArrayIndexOutOfBoundsException";class k{static fill(i,o){for(let a=0,c=i.length;a<c;a++)i[a]=o}static fillWithin(i,o,a,c){k.rangeCheck(i.length,o,a);for(let d=o;d<a;d++)i[d]=c}static rangeCheck(i,o,a){if(o>a)throw new I("fromIndex("+o+") > toIndex("+a+")");if(o<0)throw new H(o);if(a>i)throw new H(a)}static asList(...i){return i}static create(i,o,a){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(a))}static createInt32Array(i,o,a){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(a))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let a=0,c=i.length;a<c;a++)if(i[a]!==o[a])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const a of i)o=31*o+a;return o}static fillUint8Array(i,o){for(let a=0;a!==i.length;a++)i[a]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const a=new Uint8Array(o);return a.set(i),a}return i.slice(0,o)}static copyOfRange(i,o,a){const c=a-o,d=new Int32Array(c);return V.arraycopy(i,o,d,0,c),d}static binarySearch(i,o,a){a===void 0&&(a=k.numberComparator);let c=0,d=i.length-1;for(;c<=d;){const f=d+c>>1,g=a(o,i[f]);if(g>0)c=f+1;else if(g<0)d=f-1;else return f}return-c-1}static numberComparator(i,o){return i-o}}class B{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let a=31;return o=i<<16,o!==0&&(a-=16,i=o),o=i<<8,o!==0&&(a-=8,i=o),o=i<<4,o!==0&&(a-=4,i=o),o=i<<2,o!==0&&(a-=2,i=o),a-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=$.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=$.makeArray(i);V.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const a=this.bits;let c=Math.floor(i/32),d=a[c];d&=~((1<<(i&31))-1);const f=a.length;for(;d===0;){if(++c===f)return o;d=a[c]}const g=c*32+B.numberOfTrailingZeros(d);return g>o?o:g}getNextUnset(i){const o=this.size;if(i>=o)return o;const a=this.bits;let c=Math.floor(i/32),d=~a[c];d&=~((1<<(i&31))-1);const f=a.length;for(;d===0;){if(++c===f)return o;d=~a[c]}const g=c*32+B.numberOfTrailingZeros(d);return g>o?o:g}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const a=Math.floor(i/32),c=Math.floor(o/32),d=this.bits;for(let f=a;f<=c;f++){const g=f>a?0:i&31,x=(2<<(f<c?31:o&31))-(1<<g);d[f]|=x}}clear(){const i=this.bits.length,o=this.bits;for(let a=0;a<i;a++)o[a]=0}isRange(i,o,a){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const c=Math.floor(i/32),d=Math.floor(o/32),f=this.bits;for(let g=c;g<=d;g++){const _=g>c?0:i&31,C=(2<<(g<d?31:o&31))-(1<<_)&4294967295;if((f[g]&C)!==(a?C:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let a=o;a>0;a--)this.appendBit((i>>a-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let a=0;a<o;a++)this.appendBit(i.get(a))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let a=0,c=o.length;a<c;a++)o[a]^=i.bits[a]}toBytes(i,o,a,c){for(let d=0;d<c;d++){let f=0;for(let g=0;g<8;g++)this.get(i)&&(f|=1<<7-g),i++;o[a+d]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),a=o+1,c=this.bits;for(let d=0;d<a;d++){let f=c[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,i[o-d]=f}if(this.size!==a*32){const d=a*32-this.size;let f=i[0]>>>d;for(let g=1;g<a;g++){const _=i[g];f|=_<<32-d,i[g-1]=f,f=_>>>d}i[a-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof $))return!1;const o=i;return this.size===o.size&&k.equals(this.bits,o.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let i="";for(let o=0,a=this.size;o<a;o++)o&7||(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new $(this.size,this.bits.slice())}}var pe;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(pe||(pe={}));var ce=pe;class K extends y{static getFormatInstance(){return new K}}K.kind="FormatException";var fe;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(fe||(fe={}));class te{constructor(i,o,a,...c){this.valueIdentifier=i,this.name=a,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=c,te.VALUE_IDENTIFIER_TO_ECI.set(i,this),te.NAME_TO_ECI.set(a,this);const d=this.values;for(let f=0,g=d.length;f!==g;f++){const _=d[f];te.VALUES_TO_ECI.set(_,this)}for(const f of c)te.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new K("incorect value");const o=te.VALUES_TO_ECI.get(i);if(o===void 0)throw new K("incorect value");return o}static getCharacterSetECIByName(i){const o=te.NAME_TO_ECI.get(i);if(o===void 0)throw new K("incorect value");return o}equals(i){if(!(i instanceof te))return!1;const o=i;return this.getName()===o.getName()}}te.VALUE_IDENTIFIER_TO_ECI=new Map,te.VALUES_TO_ECI=new Map,te.NAME_TO_ECI=new Map,te.Cp437=new te(fe.Cp437,Int32Array.from([0,2]),"Cp437"),te.ISO8859_1=new te(fe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),te.ISO8859_2=new te(fe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),te.ISO8859_3=new te(fe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),te.ISO8859_4=new te(fe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),te.ISO8859_5=new te(fe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),te.ISO8859_6=new te(fe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),te.ISO8859_7=new te(fe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),te.ISO8859_8=new te(fe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),te.ISO8859_9=new te(fe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),te.ISO8859_10=new te(fe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),te.ISO8859_11=new te(fe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),te.ISO8859_13=new te(fe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),te.ISO8859_14=new te(fe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),te.ISO8859_15=new te(fe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),te.ISO8859_16=new te(fe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),te.SJIS=new te(fe.SJIS,20,"SJIS","Shift_JIS"),te.Cp1250=new te(fe.Cp1250,21,"Cp1250","windows-1250"),te.Cp1251=new te(fe.Cp1251,22,"Cp1251","windows-1251"),te.Cp1252=new te(fe.Cp1252,23,"Cp1252","windows-1252"),te.Cp1256=new te(fe.Cp1256,24,"Cp1256","windows-1256"),te.UnicodeBigUnmarked=new te(fe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),te.UTF8=new te(fe.UTF8,26,"UTF8","UTF-8"),te.ASCII=new te(fe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),te.Big5=new te(fe.Big5,28,"Big5"),te.GB18030=new te(fe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),te.EUC_KR=new te(fe.EUC_KR,30,"EUC_KR","EUC-KR");class ze extends y{}ze.kind="UnsupportedOperationException";class je{static decode(i,o){const a=this.encodingName(o);return this.customDecoder?this.customDecoder(i,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(i,a):new TextDecoder(a).decode(i)}static shouldDecodeOnFallback(i){return!je.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const a=this.encodingName(o);return this.customEncoder?this.customEncoder(i,a):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof te?i:te.getCharacterSetECIByName(i)}static decodeFallback(i,o){const a=this.encodingCharacterSet(o);if(je.isDecodeFallbackSupported(a)){let c="";for(let d=0,f=i.length;d<f;d++){let g=i[d].toString(16);g.length<2&&(g="0"+g),c+="%"+g}return decodeURIComponent(c)}if(a.equals(te.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ze(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(te.UTF8)||i.equals(te.ISO8859_1)||i.equals(te.ASCII)}static encodeFallback(i){const a=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let d=0;d<a.length;d++)c.push(a[d].charCodeAt(0));return new Uint8Array(c)}}class ve{static castAsNonUtf8Char(i,o=null){const a=o?o.getName():this.ISO88591;return je.decode(new Uint8Array([i]),a)}static guessEncoding(i,o){if(o!=null&&o.get(ce.CHARACTER_SET)!==void 0)return o.get(ce.CHARACTER_SET).toString();const a=i.length;let c=!0,d=!0,f=!0,g=0,_=0,x=0,C=0,b=0,R=0,P=0,z=0,U=0,j=0,X=0;const ue=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let de=0;de<a&&(c||d||f);de++){const oe=i[de]&255;f&&(g>0?oe&128?g--:f=!1:oe&128&&(oe&64?(g++,oe&32?(g++,oe&16?(g++,oe&8?f=!1:C++):x++):_++):f=!1)),c&&(oe>127&&oe<160?c=!1:oe>159&&(oe<192||oe===215||oe===247)&&X++),d&&(b>0?oe<64||oe===127||oe>252?d=!1:b--:oe===128||oe===160||oe>239?d=!1:oe>160&&oe<224?(R++,z=0,P++,P>U&&(U=P)):oe>127?(b++,P=0,z++,z>j&&(j=z)):(P=0,z=0))}return f&&g>0&&(f=!1),d&&b>0&&(d=!1),f&&(ue||_+x+C>0)?ve.UTF8:d&&(ve.ASSUME_SHIFT_JIS||U>=3||j>=3)?ve.SHIFT_JIS:c&&d?U===2&&R===2||X*10>=a?ve.SHIFT_JIS:ve.ISO88591:c?ve.ISO88591:d?ve.SHIFT_JIS:f?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let a=-1;function c(f,g,_,x,C,b){if(f==="%%")return"%";if(o[++a]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let R=C?parseInt(C.substr(1)):void 0,P;switch(b){case"s":P=o[a];break;case"c":P=o[a][0];break;case"f":P=parseFloat(o[a]).toFixed(f);break;case"p":P=parseFloat(o[a]).toPrecision(f);break;case"e":P=parseFloat(o[a]).toExponential(f);break;case"x":P=parseInt(o[a]).toString(R||16);break;case"d":P=parseFloat(parseInt(o[a],R||10).toPrecision(f)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(R);let z=parseInt(_),U=_&&_[0]+""=="0"?"0":" ";for(;P.length<z;)P=g!==void 0?P+U:U+P;return P}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,c)}static getBytes(i,o){return je.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}ve.SHIFT_JIS=te.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=te.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=te.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class $e{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,a){for(let c=o;o<o+a;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class Ye{constructor(i,o,a,c){if(this.width=i,this.height=o,this.rowSize=a,this.bits=c,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");a==null&&(a=Math.floor((i+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,a=i[0].length,c=new Ye(a,o);for(let d=0;d<o;d++){const f=i[d];for(let g=0;g<a;g++)f[g]&&c.set(g,d)}return c}static parseFromString(i,o,a){if(i===null)throw new I("stringRepresentation cannot be null");const c=new Array(i.length);let d=0,f=0,g=-1,_=0,x=0;for(;x<i.length;)if(i.charAt(x)===`
`||i.charAt(x)==="\r"){if(d>f){if(g===-1)g=d-f;else if(d-f!==g)throw new I("row lengths do not match");f=d,_++}x++}else if(i.substring(x,x+o.length)===o)x+=o.length,c[d]=!0,d++;else if(i.substring(x,x+a.length)===a)x+=a.length,c[d]=!1,d++;else throw new I("illegal character encountered: "+i.substring(x));if(d>f){if(g===-1)g=d-f;else if(d-f!==g)throw new I("row lengths do not match");_++}const C=new Ye(g,_);for(let b=0;b<d;b++)c[b]&&C.set(Math.floor(b%g),Math.floor(b/g));return C}get(i,o){const a=o*this.rowSize+Math.floor(i/32);return(this.bits[a]>>>(i&31)&1)!==0}set(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]|=1<<(i&31)&4294967295}unset(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]&=~(1<<(i&31)&4294967295)}flip(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new $(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let d=0,f=this.height;d<f;d++){const g=d*a,_=i.getRow(d,o).getBitArray();for(let x=0;x<a;x++)c[g+x]^=_[x]}}clear(){const i=this.bits,o=i.length;for(let a=0;a<o;a++)i[a]=0}setRegion(i,o,a,c){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(c<1||a<1)throw new I("Height and width must be at least 1");const d=i+a,f=o+c;if(f>this.height||d>this.width)throw new I("The region must fit inside the matrix");const g=this.rowSize,_=this.bits;for(let x=o;x<f;x++){const C=x*g;for(let b=i;b<d;b++)_[C+Math.floor(b/32)]|=1<<(b&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new $(this.width):o.clear();const a=this.rowSize,c=this.bits,d=i*a;for(let f=0;f<a;f++)o.setBulk(f*32,c[d+f]);return o}setRow(i,o){V.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let a=new $(i),c=new $(i);for(let d=0,f=Math.floor((o+1)/2);d<f;d++)a=this.getRow(d,a),c=this.getRow(o-1-d,c),a.reverse(),c.reverse(),this.setRow(d,c),this.setRow(o-1-d,a)}getEnclosingRectangle(){const i=this.width,o=this.height,a=this.rowSize,c=this.bits;let d=i,f=o,g=-1,_=-1;for(let x=0;x<o;x++)for(let C=0;C<a;C++){const b=c[x*a+C];if(b!==0){if(x<f&&(f=x),x>_&&(_=x),C*32<d){let R=0;for(;!(b<<31-R&4294967295);)R++;C*32+R<d&&(d=C*32+R)}if(C*32+31>g){let R=31;for(;!(b>>>R);)R--;C*32+R>g&&(g=C*32+R)}}}return g<d||_<f?null:Int32Array.from([d,f,g-d+1,_-f+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let a=0;for(;a<o.length&&o[a]===0;)a++;if(a===o.length)return null;const c=a/i;let d=a%i*32;const f=o[a];let g=0;for(;!(f<<31-g&4294967295);)g++;return d+=g,Int32Array.from([d,c])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let a=o.length-1;for(;a>=0&&o[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/i);let d=Math.floor(a%i)*32;const f=o[a];let g=31;for(;!(f>>>g);)g--;return d+=g,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Ye))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&k.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+k.hashCode(this.bits),i}toString(i="X ",o="  ",a=`
`){return this.buildToString(i,o,a)}buildToString(i,o,a){let c=new $e;for(let d=0,f=this.height;d<f;d++){for(let g=0,_=this.width;g<_;g++)c.append(this.get(g,d)?i:o);c.append(a)}return c.toString()}clone(){return new Ye(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends y{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class Le extends Y{constructor(i){super(i),this.luminances=Le.EMPTY,this.buckets=new Int32Array(Le.LUMINANCE_BUCKETS)}getBlackRow(i,o){const a=this.getLuminanceSource(),c=a.getWidth();o==null||o.getSize()<c?o=new $(c):o.clear(),this.initArrays(c);const d=a.getRow(i,this.luminances),f=this.buckets;for(let _=0;_<c;_++)f[(d[_]&255)>>Le.LUMINANCE_SHIFT]++;const g=Le.estimateBlackPoint(f);if(c<3)for(let _=0;_<c;_++)(d[_]&255)<g&&o.set(_);else{let _=d[0]&255,x=d[1]&255;for(let C=1;C<c-1;C++){const b=d[C+1]&255;(x*4-_-b)/2<g&&o.set(C),_=x,x=b}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),a=i.getHeight(),c=new Ye(o,a);this.initArrays(o);const d=this.buckets;for(let _=1;_<5;_++){const x=Math.floor(a*_/5),C=i.getRow(x,this.luminances),b=Math.floor(o*4/5);for(let R=Math.floor(o/5);R<b;R++){const P=C[R]&255;d[P>>Le.LUMINANCE_SHIFT]++}}const f=Le.estimateBlackPoint(d),g=i.getMatrix();for(let _=0;_<a;_++){const x=_*o;for(let C=0;C<o;C++)(g[x+C]&255)<f&&c.set(C,_)}return c}createBinarizer(i){return new Le(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let a=0;a<Le.LUMINANCE_BUCKETS;a++)o[a]=0}static estimateBlackPoint(i){const o=i.length;let a=0,c=0,d=0;for(let C=0;C<o;C++)i[C]>d&&(c=C,d=i[C]),i[C]>a&&(a=i[C]);let f=0,g=0;for(let C=0;C<o;C++){const b=C-c,R=i[C]*b*b;R>g&&(f=C,g=R)}if(c>f){const C=c;c=f,f=C}if(f-c<=o/16)throw new J;let _=f-1,x=-1;for(let C=f-1;C>c;C--){const b=C-c,R=b*b*(f-C)*(a-i[C]);R>x&&(_=C,x=R)}return _<<Le.LUMINANCE_SHIFT}}Le.LUMINANCE_BITS=5,Le.LUMINANCE_SHIFT=8-Le.LUMINANCE_BITS,Le.LUMINANCE_BUCKETS=1<<Le.LUMINANCE_BITS,Le.EMPTY=Uint8ClampedArray.from([0]);class Te extends Le{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),a=i.getHeight();if(o>=Te.MINIMUM_DIMENSION&&a>=Te.MINIMUM_DIMENSION){const c=i.getMatrix();let d=o>>Te.BLOCK_SIZE_POWER;o&Te.BLOCK_SIZE_MASK&&d++;let f=a>>Te.BLOCK_SIZE_POWER;a&Te.BLOCK_SIZE_MASK&&f++;const g=Te.calculateBlackPoints(c,d,f,o,a),_=new Ye(o,a);Te.calculateThresholdForBlock(c,d,f,o,a,g,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new Te(i)}static calculateThresholdForBlock(i,o,a,c,d,f,g){const _=d-Te.BLOCK_SIZE,x=c-Te.BLOCK_SIZE;for(let C=0;C<a;C++){let b=C<<Te.BLOCK_SIZE_POWER;b>_&&(b=_);const R=Te.cap(C,2,a-3);for(let P=0;P<o;P++){let z=P<<Te.BLOCK_SIZE_POWER;z>x&&(z=x);const U=Te.cap(P,2,o-3);let j=0;for(let ue=-2;ue<=2;ue++){const de=f[R+ue];j+=de[U-2]+de[U-1]+de[U]+de[U+1]+de[U+2]}const X=j/25;Te.thresholdBlock(i,z,b,X,c,g)}}}static cap(i,o,a){return i<o?o:i>a?a:i}static thresholdBlock(i,o,a,c,d,f){for(let g=0,_=a*d+o;g<Te.BLOCK_SIZE;g++,_+=d)for(let x=0;x<Te.BLOCK_SIZE;x++)(i[_+x]&255)<=c&&f.set(o+x,a+g)}static calculateBlackPoints(i,o,a,c,d){const f=d-Te.BLOCK_SIZE,g=c-Te.BLOCK_SIZE,_=new Array(a);for(let x=0;x<a;x++){_[x]=new Int32Array(o);let C=x<<Te.BLOCK_SIZE_POWER;C>f&&(C=f);for(let b=0;b<o;b++){let R=b<<Te.BLOCK_SIZE_POWER;R>g&&(R=g);let P=0,z=255,U=0;for(let X=0,ue=C*c+R;X<Te.BLOCK_SIZE;X++,ue+=c){for(let de=0;de<Te.BLOCK_SIZE;de++){const oe=i[ue+de]&255;P+=oe,oe<z&&(z=oe),oe>U&&(U=oe)}if(U-z>Te.MIN_DYNAMIC_RANGE)for(X++,ue+=c;X<Te.BLOCK_SIZE;X++,ue+=c)for(let de=0;de<Te.BLOCK_SIZE;de++)P+=i[ue+de]&255}let j=P>>Te.BLOCK_SIZE_POWER*2;if(U-z<=Te.MIN_DYNAMIC_RANGE&&(j=z/2,x>0&&b>0)){const X=(_[x-1][b]+2*_[x][b-1]+_[x-1][b-1])/4;z<X&&(j=X)}_[x][b]=j}}return _}}Te.BLOCK_SIZE_POWER=3,Te.BLOCK_SIZE=1<<Te.BLOCK_SIZE_POWER,Te.BLOCK_SIZE_MASK=Te.BLOCK_SIZE-1,Te.MINIMUM_DIMENSION=Te.BLOCK_SIZE*5,Te.MIN_DYNAMIC_RANGE=24;class ne{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,a,c){throw new ze("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ze("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ze("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new $e;for(let a=0;a<this.height;a++){const c=this.getRow(a,i);for(let d=0;d<this.width;d++){const f=c[d]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",o.append(g)}o.append(`
`)}return o.toString()}}class Se extends ne{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const a=this.delegate.getRow(i,o),c=this.getWidth();for(let d=0;d<c;d++)a[d]=255-(a[d]&255);return a}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(o);for(let c=0;c<o;c++)a[c]=255-(i[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,a,c){return new Se(this.delegate.crop(i,o,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Se(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Se(this.delegate.rotateCounterClockwise45())}}class le extends ne{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=le.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return le.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,a){const c=new Uint8ClampedArray(o*a);for(let d=0,f=0,g=i.length;d<g;d+=4,f++){let _;if(i[d+3]===0)_=255;else{const C=i[d],b=i[d+1],R=i[d+2];_=306*C+601*b+117*R+512>>10}c[f]=_}return c}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const a=this.getWidth(),c=i*a;return o===null?o=this.buffer.slice(c,c+a):(o.length<a&&(o=new Uint8ClampedArray(a)),o.set(this.buffer.slice(c,c+a))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,a,c){return super.crop(i,o,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),a=o.getContext("2d"),c=i*le.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),_=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return o.width=g,o.height=_,a.translate(g/2,_/2),a.rotate(c),a.drawImage(this.canvas,d/-2,f/-2),this.buffer=le.makeBufferFromCanvasImageData(o),this}invert(){return new Se(this)}}le.DEGREE_TO_RADIANS=Math.PI/180;class De{constructor(i,o,a){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Re=(globalThis||Ls||self||window||void 0)&&(globalThis||Ls||self||window||void 0).__awaiter||function(T,i,o,a){function c(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function g(C){try{x(a.next(C))}catch(b){f(b)}}function _(C){try{x(a.throw(C))}catch(b){f(b)}}function x(C){C.done?d(C.value):c(C.value).then(g,_)}x((a=a.apply(T,i||[])).next())})};class At{constructor(i,o=500,a){this.reader=i,this.timeBetweenScansMillis=o,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const a of i){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const d=a.deviceId||a.id,f=a.label||`Video device ${o.length+1}`,g=a.groupId,_={deviceId:d,label:f,kind:c,groupId:g};o.push(_)}return o})}getVideoInputDevices(){return Re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new De(o.deviceId,o.label))})}findDeviceById(i){return Re(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(a=>a.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Re(this,void 0,void 0,function*(){this.reset();let a;i?a={deviceId:{exact:i}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(i,o){return Re(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(a,o)})}decodeOnceFromStream(i,o){return Re(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(i,o,a){return Re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,a)})}decodeFromVideoDevice(i,o,a){return Re(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,o,a)})}decodeFromConstraints(i,o,a){return Re(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,o,a)})}decodeFromStream(i,o,a){return Re(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Re(this,void 0,void 0,function*(){const a=this.prepareVideoElement(o);return this.addVideoSource(a,i),this.videoElement=a,this.stream=i,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(i){return new Promise((o,a)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Re(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const a=document.getElementById(i);if(!a)throw new N(`element with id '${i}' not found`);if(a.nodeName.toLowerCase()!==o.toLowerCase())throw new N(`element with id '${i}' must be an ${o} element`);return a}decodeFromImage(i,o){if(!i&&!o)throw new N("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new N("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,a){if(i===void 0&&o===void 0)throw new N("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,a):this.decodeFromVideoElementContinuously(i,a)}decodeFromImageElement(i){if(!i)throw new N("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let a;return this.isImageLoaded(o)?a=this.decodeOnce(o,!1,!0):a=this._decodeOnLoadImage(o),a}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(a,o)}_decodeFromVideoElementSetup(i){if(!i)throw new N("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new N("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const a=this._decodeOnLoadImage(o);return o.src=i,a}decodeFromVideoUrl(i){if(!i)throw new N("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElement(o);return o.src=i,a}decodeFromVideoUrlContinuously(i,o){if(!i)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,o);return a.src=i,c}_decodeOnLoadImage(i){return new Promise((o,a)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,a),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,a=!0){this._stopAsyncDecode=!1;const c=(d,f)=>{if(this._stopAsyncDecode){f(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(i);d(g)}catch(g){const _=o&&g instanceof J,C=(g instanceof W||g instanceof K)&&a;if(_||C)return setTimeout(c,this._timeBetweenDecodingAttempts,d,f);f(g)}};return new Promise((d,f)=>c(d,f))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);o(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){o(null,c);const d=c instanceof W||c instanceof K,f=c instanceof J;(d||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,a){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,a=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),a=new le(o),c=new Te(a);return new D(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let a,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(a=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(a=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),o.style.width=a+"px",o.style.height=c+"px",o.width=a,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(i,o,a=o==null?0:8*o.length,c,d,f=V.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=a,this.resultPoints=c,this.format=d,this.timestamp=f,this.text=i,this.rawBytes=o,a==null?this.numBits=o==null?0:8*o.length:this.numBits=a,this.resultPoints=c,this.format=d,this.resultMetadata=null,f==null?this.timestamp=V.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const a=new Array(o.length+i.length);V.arraycopy(o,0,a,0,o.length),V.arraycopy(i,0,a,o.length,i.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Je;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Je||(Je={}));var ae=Je,nn;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nn||(nn={}));var Et=nn;class gr{constructor(i,o,a,c,d=-1,f=-1){this.rawBytes=i,this.text=o,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Yi{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class an{constructor(i,o){if(o.length===0)throw new I;this.field=i;const a=o.length;if(a>1&&o[0]===0){let c=1;for(;c<a&&o[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),V.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let a;if(i===1){a=0;for(let f=0,g=o.length;f!==g;f++){const _=o[f];a=Yi.addOrSubtract(a,_)}return a}a=o[0];const c=o.length,d=this.field;for(let f=1;f<c;f++)a=Yi.addOrSubtract(d.multiply(i,a),o[f]);return a}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,a=i.coefficients;if(o.length>a.length){const f=o;o=a,a=f}let c=new Int32Array(a.length);const d=a.length-o.length;V.arraycopy(a,0,c,0,d);for(let f=d;f<a.length;f++)c[f]=Yi.addOrSubtract(o[f-d],a[f]);return new an(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,a=o.length,c=i.coefficients,d=c.length,f=new Int32Array(a+d-1),g=this.field;for(let _=0;_<a;_++){const x=o[_];for(let C=0;C<d;C++)f[_+C]=Yi.addOrSubtract(f[_+C],g.multiply(x,c[C]))}return new an(g,f)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,a=this.field,c=new Int32Array(o),d=this.coefficients;for(let f=0;f<o;f++)c[f]=a.multiply(d[f],i);return new an(a,c)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const a=this.coefficients,c=a.length,d=new Int32Array(c+i),f=this.field;for(let g=0;g<c;g++)d[g]=f.multiply(a[g],o);return new an(f,d)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let a=o.getZero(),c=this;const d=i.getCoefficient(i.getDegree()),f=o.inverse(d);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const g=c.getDegree()-i.getDegree(),_=o.multiply(c.getCoefficient(c.getDegree()),f),x=i.multiplyByMonomial(g,_),C=o.buildMonomial(g,_);a=a.addOrSubtract(C),c=c.addOrSubtract(x)}return[a,c]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let a=this.getCoefficient(o);if(a!==0){if(a<0?(i+=" - ",a=-a):i.length>0&&(i+=" + "),o===0||a!==1){const c=this.field.log(a);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class Mi extends y{}Mi.kind="ArithmeticException";class it extends Yi{constructor(i,o,a){super(),this.primitive=i,this.size=o,this.generatorBase=a;const c=new Int32Array(o);let d=1;for(let g=0;g<o;g++)c[g]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=c;const f=new Int32Array(o);for(let g=0;g<o-1;g++)f[c[g]]=g;this.logTable=f,this.zero=new an(this,Int32Array.from([0])),this.one=new an(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const a=new Int32Array(i+1);return a[0]=o,new an(this,a)}inverse(i){if(i===0)throw new Mi;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}it.AZTEC_DATA_12=new it(4201,4096,1),it.AZTEC_DATA_10=new it(1033,1024,1),it.AZTEC_DATA_6=new it(67,64,1),it.AZTEC_PARAM=new it(19,16,1),it.QR_CODE_FIELD_256=new it(285,256,0),it.DATA_MATRIX_FIELD_256=new it(301,256,1),it.AZTEC_DATA_8=it.DATA_MATRIX_FIELD_256,it.MAXICODE_FIELD_64=it.AZTEC_DATA_6;class Xi extends y{}Xi.kind="ReedSolomonException";class Kn extends y{}Kn.kind="IllegalStateException";class pr{constructor(i){this.field=i}decode(i,o){const a=this.field,c=new an(a,i),d=new Int32Array(o);let f=!0;for(let P=0;P<o;P++){const z=c.evaluateAt(a.exp(P+a.getGeneratorBase()));d[d.length-1-P]=z,z!==0&&(f=!1)}if(f)return;const g=new an(a,d),_=this.runEuclideanAlgorithm(a.buildMonomial(o,1),g,o),x=_[0],C=_[1],b=this.findErrorLocations(x),R=this.findErrorMagnitudes(C,b);for(let P=0;P<b.length;P++){const z=i.length-1-a.log(b[P]);if(z<0)throw new Xi("Bad error location");i[z]=it.addOrSubtract(i[z],R[P])}}runEuclideanAlgorithm(i,o,a){if(i.getDegree()<o.getDegree()){const P=i;i=o,o=P}const c=this.field;let d=i,f=o,g=c.getZero(),_=c.getOne();for(;f.getDegree()>=(a/2|0);){let P=d,z=g;if(d=f,g=_,d.isZero())throw new Xi("r_{i-1} was zero");f=P;let U=c.getZero();const j=d.getCoefficient(d.getDegree()),X=c.inverse(j);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const ue=f.getDegree()-d.getDegree(),de=c.multiply(f.getCoefficient(f.getDegree()),X);U=U.addOrSubtract(c.buildMonomial(ue,de)),f=f.addOrSubtract(d.multiplyByMonomial(ue,de))}if(_=U.multiply(g).addOrSubtract(z),f.getDegree()>=d.getDegree())throw new Kn("Division algorithm failed to reduce polynomial?")}const x=_.getCoefficient(0);if(x===0)throw new Xi("sigmaTilde(0) was zero");const C=c.inverse(x),b=_.multiplyScalar(C),R=f.multiplyScalar(C);return[b,R]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const a=new Int32Array(o);let c=0;const d=this.field;for(let f=1;f<d.getSize()&&c<o;f++)i.evaluateAt(f)===0&&(a[c]=d.inverse(f),c++);if(c!==o)throw new Xi("Error locator degree does not match number of roots");return a}findErrorMagnitudes(i,o){const a=o.length,c=new Int32Array(a),d=this.field;for(let f=0;f<a;f++){const g=d.inverse(o[f]);let _=1;for(let x=0;x<a;x++)if(f!==x){const C=d.multiply(o[x],g),b=C&1?C&-2:C|1;_=d.multiply(_,b)}c[f]=d.multiply(i.evaluateAt(g),d.inverse(_)),d.getGeneratorBase()!==0&&(c[f]=d.multiply(c[f],g))}return c}}var Kt;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(Kt||(Kt={}));class gt{decode(i){this.ddata=i;let o=i.getBits(),a=this.extractBits(o),c=this.correctBits(a),d=gt.convertBoolArrayToByteArray(c),f=gt.getEncodedData(c),g=new gr(d,f,null,null);return g.setNumBits(c.length),g}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,a=Kt.UPPER,c=Kt.UPPER,d="",f=0;for(;f<o;)if(c===Kt.BINARY){if(o-f<5)break;let g=gt.readCode(i,f,5);if(f+=5,g===0){if(o-f<11)break;g=gt.readCode(i,f,11)+31,f+=11}for(let _=0;_<g;_++){if(o-f<8){f=o;break}const x=gt.readCode(i,f,8);d+=ve.castAsNonUtf8Char(x),f+=8}c=a}else{let g=c===Kt.DIGIT?4:5;if(o-f<g)break;let _=gt.readCode(i,f,g);f+=g;let x=gt.getCharacter(c,_);x.startsWith("CTRL_")?(a=c,c=gt.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=c)):(d+=x,c=a)}return d}static getTable(i){switch(i){case"L":return Kt.LOWER;case"P":return Kt.PUNCT;case"M":return Kt.MIXED;case"D":return Kt.DIGIT;case"B":return Kt.BINARY;case"U":default:return Kt.UPPER}}static getCharacter(i,o){switch(i){case Kt.UPPER:return gt.UPPER_TABLE[o];case Kt.LOWER:return gt.LOWER_TABLE[o];case Kt.MIXED:return gt.MIXED_TABLE[o];case Kt.PUNCT:return gt.PUNCT_TABLE[o];case Kt.DIGIT:return gt.DIGIT_TABLE[o];default:throw new Kn("Bad table")}}correctBits(i){let o,a;this.ddata.getNbLayers()<=2?(a=6,o=it.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,o=it.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,o=it.AZTEC_DATA_10):(a=12,o=it.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),d=i.length/a;if(d<c)throw new K;let f=i.length%a,g=new Int32Array(d);for(let R=0;R<d;R++,f+=a)g[R]=gt.readCode(i,f,a);try{new pr(o).decode(g,d-c)}catch(R){throw new K(R)}let _=(1<<a)-1,x=0;for(let R=0;R<c;R++){let P=g[R];if(P===0||P===_)throw new K;(P===1||P===_-1)&&x++}let C=new Array(c*a-x),b=0;for(let R=0;R<c;R++){let P=g[R];if(P===1||P===_-1)C.fill(P>1,b,b+a-1),b+=a-1;else for(let z=a-1;z>=0;--z)C[b++]=(P&1<<z)!==0}return C}extractBits(i){let o=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(o?11:14)+a*4,d=new Int32Array(c),f=new Array(this.totalBitsInLayer(a,o));if(o)for(let g=0;g<d.length;g++)d[g]=g;else{let g=c+1+2*B.truncDivision(B.truncDivision(c,2)-1,15),_=c/2,x=B.truncDivision(g,2);for(let C=0;C<_;C++){let b=C+B.truncDivision(C,15);d[_-C-1]=x-b-1,d[_+C]=x+b+1}}for(let g=0,_=0;g<a;g++){let x=(a-g)*4+(o?9:12),C=g*2,b=c-1-C;for(let R=0;R<x;R++){let P=R*2;for(let z=0;z<2;z++)f[_+P+z]=i.get(d[C+z],d[C+R]),f[_+2*x+P+z]=i.get(d[C+R],d[b-z]),f[_+4*x+P+z]=i.get(d[b-z],d[b-R]),f[_+6*x+P+z]=i.get(d[b-R],d[C+z])}_+=x*8}return f}static readCode(i,o,a){let c=0;for(let d=o;d<o+a;d++)c<<=1,i[d]&&(c|=1);return c}static readByte(i,o){let a=i.length-o;return a>=8?gt.readCode(i,o,8):gt.readCode(i,o,a)<<8-a}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let a=0;a<o.length;a++)o[a]=gt.readByte(i,8*a);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class rt{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,a,c){const d=i-a,f=o-c;return Math.sqrt(d*d+f*f)}static sum(i){let o=0;for(let a=0,c=i.length;a!==c;a++){const d=i[a];o+=d}return o}}class Nr{static floatToIntBits(i){return i}}Nr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ee){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Nr.floatToIntBits(this.x)+Nr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),a=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let d,f,g;if(a>=o&&a>=c?(f=i[0],d=i[1],g=i[2]):c>=a&&c>=o?(f=i[1],d=i[0],g=i[2]):(f=i[2],d=i[0],g=i[1]),this.crossProductZ(d,f,g)<0){const _=d;d=g,g=_}i[0]=d,i[1]=f,i[2]=g}static distance(i,o){return rt.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,a){const c=o.x,d=o.y;return(a.x-c)*(i.y-d)-(a.y-d)*(i.x-c)}}class dn{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Ho extends dn{constructor(i,o,a,c,d){super(i,o),this.compact=a,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ee{constructor(i,o,a,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=ee.INIT_SIZE),a==null&&(a=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=a-d,this.rightInit=a+d,this.upInit=c-d,this.downInit=c+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let i=this.leftInit,o=this.rightInit,a=this.upInit,c=this.downInit,d=!1,f=!0,g=!1,_=!1,x=!1,C=!1,b=!1;const R=this.width,P=this.height;for(;f;){f=!1;let z=!0;for(;(z||!_)&&o<R;)z=this.containsBlackPoint(a,c,o,!1),z?(o++,f=!0,_=!0):_||o++;if(o>=R){d=!0;break}let U=!0;for(;(U||!x)&&c<P;)U=this.containsBlackPoint(i,o,c,!0),U?(c++,f=!0,x=!0):x||c++;if(c>=P){d=!0;break}let j=!0;for(;(j||!C)&&i>=0;)j=this.containsBlackPoint(a,c,i,!1),j?(i--,f=!0,C=!0):C||i--;if(i<0){d=!0;break}let X=!0;for(;(X||!b)&&a>=0;)X=this.containsBlackPoint(i,o,a,!0),X?(a--,f=!0,b=!0):b||a--;if(a<0){d=!0;break}f&&(g=!0)}if(!d&&g){const z=o-i;let U=null;for(let de=1;U===null&&de<z;de++)U=this.getBlackPointOnSegment(i,c-de,i+de,c);if(U==null)throw new J;let j=null;for(let de=1;j===null&&de<z;de++)j=this.getBlackPointOnSegment(i,a+de,i+de,a);if(j==null)throw new J;let X=null;for(let de=1;X===null&&de<z;de++)X=this.getBlackPointOnSegment(o,a+de,o-de,a);if(X==null)throw new J;let ue=null;for(let de=1;ue===null&&de<z;de++)ue=this.getBlackPointOnSegment(o,c-de,o-de,c);if(ue==null)throw new J;return this.centerEdges(ue,U,X,j)}else throw new J}getBlackPointOnSegment(i,o,a,c){const d=rt.round(rt.distance(i,o,a,c)),f=(a-i)/d,g=(c-o)/d,_=this.image;for(let x=0;x<d;x++){const C=rt.round(i+x*f),b=rt.round(o+x*g);if(_.get(C,b))return new Ee(C,b)}return null}centerEdges(i,o,a,c){const d=i.getX(),f=i.getY(),g=o.getX(),_=o.getY(),x=a.getX(),C=a.getY(),b=c.getX(),R=c.getY(),P=ee.CORR;return d<this.width/2?[new Ee(b-P,R+P),new Ee(g+P,_+P),new Ee(x-P,C-P),new Ee(d+P,f-P)]:[new Ee(b+P,R+P),new Ee(g+P,_-P),new Ee(x-P,C+P),new Ee(d-P,f-P)]}containsBlackPoint(i,o,a,c){const d=this.image;if(c){for(let f=i;f<=o;f++)if(d.get(f,a))return!0}else for(let f=i;f<=o;f++)if(d.get(a,f))return!0;return!1}}ee.INIT_SIZE=10,ee.CORR=1;class Oe{static checkAndNudgePoints(i,o){const a=i.getWidth(),c=i.getHeight();let d=!0;for(let f=0;f<o.length&&d;f+=2){const g=Math.floor(o[f]),_=Math.floor(o[f+1]);if(g<-1||g>a||_<-1||_>c)throw new J;d=!1,g===-1?(o[f]=0,d=!0):g===a&&(o[f]=a-1,d=!0),_===-1?(o[f+1]=0,d=!0):_===c&&(o[f+1]=c-1,d=!0)}d=!0;for(let f=o.length-2;f>=0&&d;f-=2){const g=Math.floor(o[f]),_=Math.floor(o[f+1]);if(g<-1||g>a||_<-1||_>c)throw new J;d=!1,g===-1?(o[f]=0,d=!0):g===a&&(o[f]=a-1,d=!0),_===-1?(o[f+1]=0,d=!0):_===c&&(o[f+1]=c-1,d=!0)}}}class He{constructor(i,o,a,c,d,f,g,_,x){this.a11=i,this.a21=o,this.a31=a,this.a12=c,this.a22=d,this.a32=f,this.a13=g,this.a23=_,this.a33=x}static quadrilateralToQuadrilateral(i,o,a,c,d,f,g,_,x,C,b,R,P,z,U,j){const X=He.quadrilateralToSquare(i,o,a,c,d,f,g,_);return He.squareToQuadrilateral(x,C,b,R,P,z,U,j).times(X)}transformPoints(i){const o=i.length,a=this.a11,c=this.a12,d=this.a13,f=this.a21,g=this.a22,_=this.a23,x=this.a31,C=this.a32,b=this.a33;for(let R=0;R<o;R+=2){const P=i[R],z=i[R+1],U=d*P+_*z+b;i[R]=(a*P+f*z+x)/U,i[R+1]=(c*P+g*z+C)/U}}transformPointsWithValues(i,o){const a=this.a11,c=this.a12,d=this.a13,f=this.a21,g=this.a22,_=this.a23,x=this.a31,C=this.a32,b=this.a33,R=i.length;for(let P=0;P<R;P++){const z=i[P],U=o[P],j=d*z+_*U+b;i[P]=(a*z+f*U+x)/j,o[P]=(c*z+g*U+C)/j}}static squareToQuadrilateral(i,o,a,c,d,f,g,_){const x=i-a+d-g,C=o-c+f-_;if(x===0&&C===0)return new He(a-i,d-a,i,c-o,f-c,o,0,0,1);{const b=a-d,R=g-d,P=c-f,z=_-f,U=b*z-R*P,j=(x*z-R*C)/U,X=(b*C-x*P)/U;return new He(a-i+j*a,g-i+X*g,i,c-o+j*c,_-o+X*_,o,j,X,1)}}static quadrilateralToSquare(i,o,a,c,d,f,g,_){return He.squareToQuadrilateral(i,o,a,c,d,f,g,_).buildAdjoint()}buildAdjoint(){return new He(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new He(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class dt extends Oe{sampleGrid(i,o,a,c,d,f,g,_,x,C,b,R,P,z,U,j,X,ue,de){const oe=He.quadrilateralToQuadrilateral(c,d,f,g,_,x,C,b,R,P,z,U,j,X,ue,de);return this.sampleGridWithTransform(i,o,a,oe)}sampleGridWithTransform(i,o,a,c){if(o<=0||a<=0)throw new J;const d=new Ye(o,a),f=new Float32Array(2*o);for(let g=0;g<a;g++){const _=f.length,x=g+.5;for(let C=0;C<_;C+=2)f[C]=C/2+.5,f[C+1]=x;c.transformPoints(f),Oe.checkAndNudgePoints(i,f);try{for(let C=0;C<_;C+=2)i.get(Math.floor(f[C]),Math.floor(f[C+1]))&&d.set(C/2,g)}catch{throw new J}}return d}}class ln{static setGridSampler(i){ln.gridSampler=i}static getInstance(){return ln.gridSampler}}ln.gridSampler=new dt;class qt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class pt{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),a=this.getBullsEyeCorners(o);if(i){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),d=this.getMatrixCornerPoints(a);return new Ho(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new J;let o=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(a,o);let c=0;for(let f=0;f<4;f++){let g=a[(this.shift+f)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let a=0;i.forEach((c,d,f)=>{let g=(c>>o-2<<1)+(c&1);a=(a<<3)+g}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(B.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new J}getCorrectedParameterData(i,o){let a,c;o?(a=7,c=2):(a=10,c=4);let d=a-c,f=new Int32Array(a);for(let _=a-1;_>=0;--_)f[_]=i&15,i>>=4;try{new pr(it.AZTEC_PARAM).decode(f,d)}catch{throw new J}let g=0;for(let _=0;_<c;_++)g=(g<<4)+f[_];return g}getBullsEyeCorners(i){let o=i,a=i,c=i,d=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let b=this.getFirstDifferent(o,f,1,-1),R=this.getFirstDifferent(a,f,1,1),P=this.getFirstDifferent(c,f,-1,1),z=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let U=this.distancePoint(z,b)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(U<.75||U>1.25||!this.isWhiteOrBlackRectangle(b,R,P,z))break}o=b,a=R,c=P,d=z,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let g=new Ee(o.getX()+.5,o.getY()-.5),_=new Ee(a.getX()+.5,a.getY()+.5),x=new Ee(c.getX()-.5,c.getY()+.5),C=new Ee(d.getX()-.5,d.getY()-.5);return this.expandSquare([g,_,x,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,a,c;try{let g=new ee(this.image).detect();i=g[0],o=g[1],a=g[2],c=g[3]}catch{let _=this.image.getWidth()/2,x=this.image.getHeight()/2;i=this.getFirstDifferent(new qt(_+7,x-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new qt(_+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new qt(_-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new qt(_-7,x-7),!1,-1,-1).toResultPoint()}let d=rt.round((i.getX()+c.getX()+o.getX()+a.getX())/4),f=rt.round((i.getY()+c.getY()+o.getY()+a.getY())/4);try{let g=new ee(this.image,15,d,f).detect();i=g[0],o=g[1],a=g[2],c=g[3]}catch{i=this.getFirstDifferent(new qt(d+7,f-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new qt(d+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new qt(d-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new qt(d-7,f-7),!1,-1,-1).toResultPoint()}return d=rt.round((i.getX()+c.getX()+o.getX()+a.getX())/4),f=rt.round((i.getY()+c.getY()+o.getY()+a.getY())/4),new qt(d,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,a,c,d){let f=ln.getInstance(),g=this.getDimension(),_=g/2-this.nbCenterLayers,x=g/2+this.nbCenterLayers;return f.sampleGrid(i,g,g,_,_,x,_,x,x,_,x,o.getX(),o.getY(),a.getX(),a.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(i,o,a){let c=0,d=this.distanceResultPoint(i,o),f=d/a,g=i.getX(),_=i.getY(),x=f*(o.getX()-i.getX())/d,C=f*(o.getY()-i.getY())/d;for(let b=0;b<a;b++)this.image.get(rt.round(g+b*x),rt.round(_+b*C))&&(c|=1<<a-b-1);return c}isWhiteOrBlackRectangle(i,o,a,c){let d=3;i=new qt(i.getX()-d,i.getY()+d),o=new qt(o.getX()-d,o.getY()-d),a=new qt(a.getX()+d,a.getY()-d),c=new qt(c.getX()+d,c.getY()+d);let f=this.getColor(c,i);if(f===0)return!1;let g=this.getColor(i,o);return g!==f||(g=this.getColor(o,a),g!==f)?!1:(g=this.getColor(a,c),g===f)}getColor(i,o){let a=this.distancePoint(i,o),c=(o.getX()-i.getX())/a,d=(o.getY()-i.getY())/a,f=0,g=i.getX(),_=i.getY(),x=this.image.get(i.getX(),i.getY()),C=Math.ceil(a);for(let R=0;R<C;R++)g+=c,_+=d,this.image.get(rt.round(g),rt.round(_))!==x&&f++;let b=f/a;return b>.1&&b<.9?0:b<=.1===x?1:-1}getFirstDifferent(i,o,a,c){let d=i.getX()+a,f=i.getY()+c;for(;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=a,f+=c;for(d-=a,f-=c;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=a;for(d-=a;this.isValid(d,f)&&this.image.get(d,f)===o;)f+=c;return f-=c,new qt(d,f)}expandSquare(i,o,a){let c=a/(2*o),d=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),g=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,x=new Ee(g+c*d,_+c*f),C=new Ee(g-c*d,_-c*f);d=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),g=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let b=new Ee(g+c*d,_+c*f),R=new Ee(g-c*d,_-c*f);return[x,b,C,R]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=rt.round(i.getX()),a=rt.round(i.getY());return this.isValid(o,a)}distancePoint(i,o){return rt.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return rt.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class mt{decode(i,o=null){let a=null,c=new pt(i.getBlackMatrix()),d=null,f=null;try{let C=c.detectMirror(!1);d=C.getPoints(),this.reportFoundResultPoints(o,d),f=new gt().decode(C)}catch(C){a=C}if(f==null)try{let C=c.detectMirror(!0);d=C.getPoints(),this.reportFoundResultPoints(o,d),f=new gt().decode(C)}catch(C){throw a??C}let g=new Ue(f.getText(),f.getRawBytes(),f.getNumBits(),d,ae.AZTEC,V.currentTimeMillis()),_=f.getByteSegments();_!=null&&g.putMetadata(Et.BYTE_SEGMENTS,_);let x=f.getECLevel();return x!=null&&g.putMetadata(Et.ERROR_CORRECTION_LEVEL,x),g}reportFoundResultPoints(i,o){if(i!=null){let a=i.get(ce.NEED_RESULT_POINT_CALLBACK);a!=null&&o.forEach((c,d,f)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Qi extends At{constructor(i=500){super(new mt,i)}}class _t{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(ce.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),f=this.doDecode(d,o),g=f.getResultMetadata();let _=270;g!==null&&g.get(Et.ORIENTATION)===!0&&(_=_+g.get(Et.ORIENTATION)%360),f.putMetadata(Et.ORIENTATION,_);const x=f.getResultPoints();if(x!==null){const C=d.getHeight();for(let b=0;b<x.length;b++)x[b]=new Ee(C-x[b].getY()-1,x[b].getX())}return f}else throw new J}}reset(){}doDecode(i,o){const a=i.getWidth(),c=i.getHeight();let d=new $(a);const f=o&&o.get(ce.TRY_HARDER)===!0,g=Math.max(1,c>>(f?8:5));let _;f?_=c:_=15;const x=Math.trunc(c/2);for(let C=0;C<_;C++){const b=Math.trunc((C+1)/2),R=(C&1)===0,P=x+g*(R?b:-b);if(P<0||P>=c)break;try{d=i.getBlackRow(P,d)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(d.reverse(),o&&o.get(ce.NEED_RESULT_POINT_CALLBACK)===!0)){const U=new Map;o.forEach((j,X)=>U.set(X,j)),U.delete(ce.NEED_RESULT_POINT_CALLBACK),o=U}try{const U=this.decodeRow(P,d,o);if(z===1){U.putMetadata(Et.ORIENTATION,180);const j=U.getResultPoints();j!==null&&(j[0]=new Ee(a-j[0].getX()-1,j[0].getY()),j[1]=new Ee(a-j[1].getX()-1,j[1].getY()))}return U}catch{}}}throw new J}static recordPattern(i,o,a){const c=a.length;for(let x=0;x<c;x++)a[x]=0;const d=i.getSize();if(o>=d)throw new J;let f=!i.get(o),g=0,_=o;for(;_<d;){if(i.get(_)!==f)a[g]++;else{if(++g===c)break;a[g]=1,f=!f}_++}if(!(g===c||g===c-1&&_===d))throw new J}static recordPatternInReverse(i,o,a){let c=a.length,d=i.get(o);for(;o>0&&c>=0;)i.get(--o)!==d&&(c--,d=!d);if(c>=0)throw new J;_t.recordPattern(i,o+1,a)}static patternMatchVariance(i,o,a){const c=i.length;let d=0,f=0;for(let x=0;x<c;x++)d+=i[x],f+=o[x];if(d<f)return Number.POSITIVE_INFINITY;const g=d/f;a*=g;let _=0;for(let x=0;x<c;x++){const C=i[x],b=o[x]*g,R=C>b?C-b:b-C;if(R>a)return Number.POSITIVE_INFINITY;_+=R}return _/d}}class se extends _t{static findStartPattern(i){const o=i.getSize(),a=i.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),f=a,g=!1;const _=6;for(let x=a;x<o;x++)if(i.get(x)!==g)d[c]++;else{if(c===_-1){let C=se.MAX_AVG_VARIANCE,b=-1;for(let R=se.CODE_START_A;R<=se.CODE_START_C;R++){const P=_t.patternMatchVariance(d,se.CODE_PATTERNS[R],se.MAX_INDIVIDUAL_VARIANCE);P<C&&(C=P,b=R)}if(b>=0&&i.isRange(Math.max(0,f-(x-f)/2),f,!1))return Int32Array.from([f,x,b]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,g=!g}throw new J}static decodeCode(i,o,a){_t.recordPattern(i,a,o);let c=se.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<se.CODE_PATTERNS.length;f++){const g=se.CODE_PATTERNS[f],_=this.patternMatchVariance(o,g,se.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,d=f)}if(d>=0)return d;throw new J}decodeRow(i,o,a){const c=a&&a.get(ce.ASSUME_GS1)===!0,d=se.findStartPattern(o),f=d[2];let g=0;const _=new Uint8Array(20);_[g++]=f;let x;switch(f){case se.CODE_START_A:x=se.CODE_CODE_A;break;case se.CODE_START_B:x=se.CODE_CODE_B;break;case se.CODE_START_C:x=se.CODE_CODE_C;break;default:throw new K}let C=!1,b=!1,R="",P=d[0],z=d[1];const U=Int32Array.from([0,0,0,0,0,0]);let j=0,X=0,ue=f,de=0,oe=!0,qe=!1,Ve=!1;for(;!C;){const zi=b;switch(b=!1,j=X,X=se.decodeCode(o,U,z),_[g++]=X,X!==se.CODE_STOP&&(oe=!0),X!==se.CODE_STOP&&(de++,ue+=de*X),P=z,z+=U.reduce((gd,fo)=>gd+fo,0),X){case se.CODE_START_A:case se.CODE_START_B:case se.CODE_START_C:throw new K}switch(x){case se.CODE_CODE_A:if(X<64)Ve===qe?R+=String.fromCharCode(32+X):R+=String.fromCharCode(32+X+128),Ve=!1;else if(X<96)Ve===qe?R+=String.fromCharCode(X-64):R+=String.fromCharCode(X+64),Ve=!1;else switch(X!==se.CODE_STOP&&(oe=!1),X){case se.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case se.CODE_FNC_2:case se.CODE_FNC_3:break;case se.CODE_FNC_4_A:!qe&&Ve?(qe=!0,Ve=!1):qe&&Ve?(qe=!1,Ve=!1):Ve=!0;break;case se.CODE_SHIFT:b=!0,x=se.CODE_CODE_B;break;case se.CODE_CODE_B:x=se.CODE_CODE_B;break;case se.CODE_CODE_C:x=se.CODE_CODE_C;break;case se.CODE_STOP:C=!0;break}break;case se.CODE_CODE_B:if(X<96)Ve===qe?R+=String.fromCharCode(32+X):R+=String.fromCharCode(32+X+128),Ve=!1;else switch(X!==se.CODE_STOP&&(oe=!1),X){case se.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case se.CODE_FNC_2:case se.CODE_FNC_3:break;case se.CODE_FNC_4_B:!qe&&Ve?(qe=!0,Ve=!1):qe&&Ve?(qe=!1,Ve=!1):Ve=!0;break;case se.CODE_SHIFT:b=!0,x=se.CODE_CODE_A;break;case se.CODE_CODE_A:x=se.CODE_CODE_A;break;case se.CODE_CODE_C:x=se.CODE_CODE_C;break;case se.CODE_STOP:C=!0;break}break;case se.CODE_CODE_C:if(X<100)X<10&&(R+="0"),R+=X;else switch(X!==se.CODE_STOP&&(oe=!1),X){case se.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+="");break;case se.CODE_CODE_A:x=se.CODE_CODE_A;break;case se.CODE_CODE_B:x=se.CODE_CODE_B;break;case se.CODE_STOP:C=!0;break}break}zi&&(x=x===se.CODE_CODE_A?se.CODE_CODE_B:se.CODE_CODE_A)}const Vt=z-P;if(z=o.getNextUnset(z),!o.isRange(z,Math.min(o.getSize(),z+(z-P)/2),!1))throw new J;if(ue-=de*j,ue%103!==j)throw new W;const Un=R.length;if(Un===0)throw new J;Un>0&&oe&&(x===se.CODE_CODE_C?R=R.substring(0,Un-2):R=R.substring(0,Un-1));const Hn=(d[1]+d[0])/2,wt=P+Vt/2,wn=_.length,Wn=new Uint8Array(wn);for(let zi=0;zi<wn;zi++)Wn[zi]=_[zi];const ho=[new Ee(Hn,i),new Ee(wt,i)];return new Ue(R,Wn,0,ho,ae.CODE_128,new Date().getTime())}}se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],se.MAX_AVG_VARIANCE=.25,se.MAX_INDIVIDUAL_VARIANCE=.7,se.CODE_SHIFT=98,se.CODE_CODE_C=99,se.CODE_CODE_B=100,se.CODE_CODE_A=101,se.CODE_FNC_1=102,se.CODE_FNC_2=97,se.CODE_FNC_3=96,se.CODE_FNC_4_A=101,se.CODE_FNC_4_B=100,se.CODE_START_A=103,se.CODE_START_B=104,se.CODE_START_C=105,se.CODE_STOP=106;class Qe extends _t{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let d=Qe.findAsteriskPattern(o,c),f=o.getNextSet(d[1]),g=o.getSize(),_,x;do{Qe.recordPattern(o,f,c);let U=Qe.toNarrowWidePattern(c);if(U<0)throw new J;_=Qe.patternToChar(U),this.decodeRowResult+=_,x=f;for(let j of c)f+=j;f=o.getNextSet(f)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let U of c)C+=U;let b=f-x-C;if(f!==g&&b*2<C)throw new J;if(this.usingCheckDigit){let U=this.decodeRowResult.length-1,j=0;for(let X=0;X<U;X++)j+=Qe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(X));if(this.decodeRowResult.charAt(U)!==Qe.ALPHABET_STRING.charAt(j%43))throw new W;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new J;let R;this.extendedMode?R=Qe.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let P=(d[1]+d[0])/2,z=x+C/2;return new Ue(R,null,0,[new Ee(P,i),new Ee(z,i)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let a=i.getSize(),c=i.getNextSet(0),d=0,f=c,g=!1,_=o.length;for(let x=c;x<a;x++)if(i.get(x)!==g)o[d]++;else{if(d===_-1){if(this.toNarrowWidePattern(o)===Qe.ASTERISK_ENCODING&&i.isRange(Math.max(0,f-Math.floor((x-f)/2)),f,!1))return[f,x];f+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,g=!g}throw new J}static toNarrowWidePattern(i){let o=i.length,a=0,c;do{let d=2147483647;for(let _ of i)_<d&&_>a&&(d=_);a=d,c=0;let f=0,g=0;for(let _=0;_<o;_++){let x=i[_];x>a&&(g|=1<<o-1-_,c++,f+=x)}if(c===3){for(let _=0;_<o&&c>0;_++){let x=i[_];if(x>a&&(c--,x*2>=f))return-1}return g}}while(c>3);return-1}static patternToChar(i){for(let o=0;o<Qe.CHARACTER_ENCODINGS.length;o++)if(Qe.CHARACTER_ENCODINGS[o]===i)return Qe.ALPHABET_STRING.charAt(o);if(i===Qe.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(i){let o=i.length,a="";for(let c=0;c<o;c++){let d=i.charAt(c);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=i.charAt(c+1),g="\0";switch(d){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new K;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new K;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new K;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new K;break}a+=g,c++}else a+=d}return a}}Qe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Qe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Qe.ASTERISK_ENCODING=148;class Ge extends _t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,a){let c=this.decodeStart(o),d=this.decodeEnd(o),f=new $e;Ge.decodeMiddle(o,c[1],d[0],f);let g=f.toString(),_=null;a!=null&&(_=a.get(ce.ALLOWED_LENGTHS)),_==null&&(_=Ge.DEFAULT_ALLOWED_LENGTHS);let x=g.length,C=!1,b=0;for(let z of _){if(x===z){C=!0;break}z>b&&(b=z)}if(!C&&x>b&&(C=!0),!C)throw new K;const R=[new Ee(c[1],i),new Ee(d[0],i)];return new Ue(g,null,0,R,ae.ITF,new Date().getTime())}static decodeMiddle(i,o,a,c){let d=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(d.fill(0),f.fill(0),g.fill(0);o<a;){_t.recordPattern(i,o,d);for(let x=0;x<5;x++){let C=2*x;f[x]=d[C],g[x]=d[C+1]}let _=Ge.decodeDigit(f);c.append(_.toString()),_=this.decodeDigit(g),c.append(_.toString()),d.forEach(function(x){o+=x})}}decodeStart(i){let o=Ge.skipWhiteSpace(i),a=Ge.findGuardPattern(i,o,Ge.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(i,a[0]),a}validateQuietZone(i,o){let a=this.narrowLineWidth*10;a=a<o?a:o;for(let c=o-1;a>0&&c>=0&&!i.get(c);c--)a--;if(a!==0)throw new J}static skipWhiteSpace(i){const o=i.getSize(),a=i.getNextSet(0);if(a===o)throw new J;return a}decodeEnd(i){i.reverse();try{let o=Ge.skipWhiteSpace(i),a;try{a=Ge.findGuardPattern(i,o,Ge.END_PATTERN_REVERSED[0])}catch(d){d instanceof J&&(a=Ge.findGuardPattern(i,o,Ge.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,a[0]);let c=a[0];return a[0]=i.getSize()-a[1],a[1]=i.getSize()-c,a}finally{i.reverse()}}static findGuardPattern(i,o,a){let c=a.length,d=new Int32Array(c),f=i.getSize(),g=!1,_=0,x=o;d.fill(0);for(let C=o;C<f;C++)if(i.get(C)!==g)d[_]++;else{if(_===c-1){if(_t.patternMatchVariance(d,a,Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return[x,C];x+=d[0]+d[1],V.arraycopy(d,2,d,0,_-1),d[_-1]=0,d[_]=0,_--}else _++;d[_]=1,g=!g}throw new J}static decodeDigit(i){let o=Ge.MAX_AVG_VARIANCE,a=-1,c=Ge.PATTERNS.length;for(let d=0;d<c;d++){let f=Ge.PATTERNS[d],g=_t.patternMatchVariance(i,f,Ge.MAX_INDIVIDUAL_VARIANCE);g<o?(o=g,a=d):g===o&&(a=-1)}if(a>=0)return a%10;throw new J}}Ge.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ge.MAX_AVG_VARIANCE=.38,Ge.MAX_INDIVIDUAL_VARIANCE=.5,Ge.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ge.START_PATTERN=Int32Array.from([1,1,1,1]),Ge.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class et extends _t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,a,c=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),a=et.findGuardPattern(i,c,!1,this.START_END_PATTERN,d);let f=a[0];c=a[1];let g=f-(c-f);g>=0&&(o=i.isRange(g,f,!1))}return a}static checkChecksum(i){return et.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let a=parseInt(i.charAt(o-1),10);return et.getStandardUPCEANChecksum(i.substring(0,o-1))===a}static getStandardUPCEANChecksum(i){let o=i.length,a=0;for(let c=o-1;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new K;a+=d}a*=3;for(let c=o-2;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new K;a+=d}return(1e3-a)%10}static decodeEnd(i,o){return et.findGuardPattern(i,o,!1,et.START_END_PATTERN,new Int32Array(et.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,a,c){return this.findGuardPattern(i,o,a,c,new Int32Array(c.length))}static findGuardPattern(i,o,a,c,d){let f=i.getSize();o=a?i.getNextUnset(o):i.getNextSet(o);let g=0,_=o,x=c.length,C=a;for(let b=o;b<f;b++)if(i.get(b)!==C)d[g]++;else{if(g===x-1){if(_t.patternMatchVariance(d,c,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return Int32Array.from([_,b]);_+=d[0]+d[1];let R=d.slice(2,d.length-1);for(let P=0;P<g-1;P++)d[P]=R[P];d[g-1]=0,d[g]=0,g--}else g++;d[g]=1,C=!C}throw new J}static decodeDigit(i,o,a,c){this.recordPattern(i,a,o);let d=this.MAX_AVG_VARIANCE,f=-1,g=c.length;for(let _=0;_<g;_++){let x=c[_],C=_t.patternMatchVariance(o,x,et.MAX_INDIVIDUAL_VARIANCE);C<d&&(d=C,f=_)}if(f>=0)return f;throw new J}}et.MAX_AVG_VARIANCE=.48,et.MAX_INDIVIDUAL_VARIANCE=.7,et.START_END_PATTERN=Int32Array.from([1,1,1]),et.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),et.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),et.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class It{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,a){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(o,a,c),f=c.toString(),g=It.parseExtensionString(f),_=[new Ee((a[0]+a[1])/2,i),new Ee(d,i)],x=new Ue(f,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&x.putAllMetadata(g),x}decodeMiddle(i,o,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],g=0;for(let x=0;x<5&&f<d;x++){let C=et.decodeDigit(i,c,f,et.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let b of c)f+=b;C>=10&&(g|=1<<4-x),x!==4&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(a.length!==5)throw new J;let _=this.determineCheckDigit(g);if(It.extensionChecksum(a.toString())!==_)throw new J;return f}static extensionChecksum(i){let o=i.length,a=0;for(let c=o-2;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-48;a*=3;for(let c=o-1;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new J}static parseExtensionString(i){if(i.length!==5)return null;let o=It.parseExtension5String(i);return o==null?null:new Map([[Et.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let a=parseInt(i.substring(1)),c=(a/100).toString(),d=a%100,f=d<10?"0"+d:d.toString();return o+c+"."+f}}class Ut{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,a){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(o,a,c),f=c.toString(),g=Ut.parseExtensionString(f),_=[new Ee((a[0]+a[1])/2,i),new Ee(d,i)],x=new Ue(f,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&x.putAllMetadata(g),x}decodeMiddle(i,o,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],g=0;for(let _=0;_<2&&f<d;_++){let x=et.decodeDigit(i,c,f,et.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let C of c)f+=C;x>=10&&(g|=1<<1-_),_!==1&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(a.length!==2)throw new J;if(parseInt(a.toString())%4!==g)throw new J;return f}static parseExtensionString(i){return i.length!==2?null:new Map([[Et.ISSUE_NUMBER,parseInt(i)]])}}class Rr{static decodeRow(i,o,a){let c=et.findGuardPattern(o,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new It().decodeRow(i,o,c)}catch{return new Ut().decodeRow(i,o,c)}}}Rr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends et{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=ht.L_PATTERNS[i-10],a=new Int32Array(o.length);for(let c=0;c<o.length;c++)a[c]=o[o.length-c-1];ht.L_AND_G_PATTERNS[i]=a}}decodeRow(i,o,a){let c=ht.findStartGuardPattern(o),d=a==null?null:a.get(ce.NEED_RESULT_POINT_CALLBACK);if(d!=null){const oe=new Ee((c[0]+c[1])/2,i);d.foundPossibleResultPoint(oe)}let f=this.decodeMiddle(o,c,this.decodeRowStringBuffer),g=f.rowOffset,_=f.resultString;if(d!=null){const oe=new Ee(g,i);d.foundPossibleResultPoint(oe)}let x=this.decodeEnd(o,g);if(d!=null){const oe=new Ee((x[0]+x[1])/2,i);d.foundPossibleResultPoint(oe)}let C=x[1],b=C+(C-x[0]);if(b>=o.getSize()||!o.isRange(C,b,!1))throw new J;let R=_.toString();if(R.length<8)throw new K;if(!ht.checkChecksum(R))throw new W;let P=(c[1]+c[0])/2,z=(x[1]+x[0])/2,U=this.getBarcodeFormat(),j=[new Ee(P,i),new Ee(z,i)],X=new Ue(R,null,0,j,U,new Date().getTime()),ue=0;try{let oe=Rr.decodeRow(i,o,x[1]);X.putMetadata(Et.UPC_EAN_EXTENSION,oe.getText()),X.putAllMetadata(oe.getResultMetadata()),X.addResultPoints(oe.getResultPoints()),ue=oe.getText().length}catch{}let de=a==null?null:a.get(ce.ALLOWED_EAN_EXTENSIONS);if(de!=null){let oe=!1;for(let qe in de)if(ue.toString()===qe){oe=!0;break}if(!oe)throw new J}return X}decodeEnd(i,o){return ht.findGuardPattern(i,o,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return ht.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let a=parseInt(i.charAt(o-1),10);return ht.getStandardUPCEANChecksum(i.substring(0,o-1))===a}static getStandardUPCEANChecksum(i){let o=i.length,a=0;for(let c=o-1;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new K;a+=d}a*=3;for(let c=o-2;c>=0;c-=2){let d=i.charAt(c).charCodeAt(0)-48;if(d<0||d>9)throw new K;a+=d}return(1e3-a)%10}}class mr extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1],g=0;for(let x=0;x<6&&f<d;x++){let C=ht.decodeDigit(i,c,f,ht.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let b of c)f+=b;C>=10&&(g|=1<<5-x)}a=mr.determineFirstDigit(a,g),f=ht.findGuardPattern(i,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&f<d;x++){let C=ht.decodeDigit(i,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+C);for(let b of c)f+=b}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(i,o){for(let a=0;a<10;a++)if(o===this.FIRST_DIGIT_ENCODINGS[a])return i=String.fromCharCode(48+a)+i,i;throw new J}}mr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ec extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f=o[1];for(let _=0;_<4&&f<d;_++){let x=ht.decodeDigit(i,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+x);for(let C of c)f+=C}f=ht.findGuardPattern(i,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&f<d;_++){let x=ht.decodeDigit(i,c,f,ht.L_PATTERNS);a+=String.fromCharCode(48+x);for(let C of c)f+=C}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ae.EAN_8}}class tc extends ht{constructor(){super(...arguments),this.ean13Reader=new mr}getBarcodeFormat(){return ae.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,a))}decodeMiddle(i,o,a){return this.ean13Reader.decodeMiddle(i,o,a)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let a=new Ue(o.substring(1),null,null,i.getResultPoints(),ae.UPC_A);return i.getResultMetadata()!=null&&a.putAllMetadata(i.getResultMetadata()),a}else throw new J}reset(){this.ean13Reader.reset()}}class _i extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,a){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=i.getSize();let f=o[1],g=0;for(let x=0;x<6&&f<d;x++){const C=_i.decodeDigit(i,c,f,_i.L_AND_G_PATTERNS);a+=String.fromCharCode(48+C%10);for(let b of c)f+=b;C>=10&&(g|=1<<5-x)}let _=_i.determineNumSysAndCheckDigit(a,g);return{rowOffset:f,resultString:_}}decodeEnd(i,o){return _i.findGuardPatternWithoutCounters(i,o,!0,_i.MIDDLE_END_PATTERN)}checkChecksum(i){return ht.checkChecksum(_i.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let d=String.fromCharCode(48+a),f=String.fromCharCode(48+c);return d+i+f}throw J.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),a=new $e;a.append(i.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:a.appendChars(o,0,2),a.append(c),a.append("0000"),a.appendChars(o,2,3);break;case 3:a.appendChars(o,0,3),a.append("00000"),a.appendChars(o,3,2);break;case 4:a.appendChars(o,0,4),a.append("00000"),a.append(o[4]);break;default:a.appendChars(o,0,5),a.append("0000"),a.append(c);break}return i.length>=8&&a.append(i.charAt(7)),a.toString()}}_i.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_i.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ca extends _t{constructor(i){super();let o=i==null?null:i.get(ce.POSSIBLE_FORMATS),a=[];r(o)?(a.push(new mr),a.push(new tc),a.push(new ec),a.push(new _i)):(o.indexOf(ae.EAN_13)>-1&&a.push(new mr),o.indexOf(ae.UPC_A)>-1&&a.push(new tc),o.indexOf(ae.EAN_8)>-1&&a.push(new ec),o.indexOf(ae.UPC_E)>-1&&a.push(new _i)),this.readers=a}decodeRow(i,o,a){for(let c of this.readers)try{const d=c.decodeRow(i,o,a),f=d.getBarcodeFormat()===ae.EAN_13&&d.getText().charAt(0)==="0",g=a==null?null:a.get(ce.POSSIBLE_FORMATS),_=g==null||g.includes(ae.UPC_A);if(f&&_){const x=d.getRawBytes(),C=new Ue(d.getText().substring(1),x,x?x.length:null,d.getResultPoints(),ae.UPC_A);return C.putAllMetadata(d.getResultMetadata()),C}return d}catch{}throw new J}reset(){for(let i of this.readers)i.reset()}}class Sn extends _t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let a=0;a<o.length;a++)if(_t.patternMatchVariance(i,o[a],Sn.MAX_INDIVIDUAL_VARIANCE)<Sn.MAX_AVG_VARIANCE)return a;throw new J}static count(i){return rt.sum(new Int32Array(i))}static increment(i,o){let a=0,c=o[0];for(let d=1;d<i.length;d++)o[d]>c&&(c=o[d],a=d);i[a]++}static decrement(i,o){let a=0,c=o[0];for(let d=1;d<i.length;d++)o[d]<c&&(c=o[d],a=d);i[a]--}static isFinderPattern(i){let o=i[0]+i[1],a=o+i[2]+i[3],c=o/a;if(c>=Sn.MIN_FINDER_PATTERN_RATIO&&c<=Sn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of i)g>f&&(f=g),g<d&&(d=g);return f<10*d}return!1}}Sn.MAX_AVG_VARIANCE=.2,Sn.MAX_INDIVIDUAL_VARIANCE=.45,Sn.MIN_FINDER_PATTERN_RATIO=9.5/12,Sn.MAX_FINDER_PATTERN_RATIO=12.5/14;class no{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof no))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class io{constructor(i,o,a,c,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ee(a,d)),this.resultPoints.push(new Ee(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof io))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Oi{constructor(){}static getRSSvalue(i,o,a){let c=0;for(let _ of i)c+=_;let d=0,f=0,g=i.length;for(let _=0;_<g-1;_++){let x;for(x=1,f|=1<<_;x<i[_];x++,f&=~(1<<_)){let C=Oi.combins(c-x-1,g-_-2);if(a&&f===0&&c-x-(g-_-1)>=g-_-1&&(C-=Oi.combins(c-x-(g-_),g-_-2)),g-_-1>1){let b=0;for(let R=c-x-(g-_-2);R>o;R--)b+=Oi.combins(c-x-R-1,g-_-3);C-=b*(g-1-_)}else c-x>o&&C--;d+=C}c-=x}return d}static combins(i,o){let a,c;i-o>o?(c=o,a=i-o):(c=i-o,a=o);let d=1,f=1;for(let g=i;g>a;g--)d*=g,f<=c&&(d/=f,f++);for(;f<=c;)d/=f,f++;return d}}class od{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let a=12*o,c=new $(a),d=0,g=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)g&1<<_&&c.set(d),d++;for(let _=1;_<i.length;++_){let x=i[_],C=x.getLeftChar().getValue();for(let b=11;b>=0;--b)C&1<<b&&c.set(d),d++;if(x.getRightChar()!=null){let b=x.getRightChar().getValue();for(let R=11;R>=0;--R)b&1<<R&&c.set(d),d++}}return c}}class Mr{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Sa{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Ht extends Sa{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Ht.FNC1}}Ht.FNC1="$";class Ie extends Sa{constructor(i,o,a){super(i),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class qn extends Sa{constructor(i,o,a){if(super(i),o<0||o>10||a<0||a>10)throw new K;this.firstDigit=o,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===qn.FNC1}isSecondDigitFNC1(){return this.secondDigit===qn.FNC1}isAnyFNC1(){return this.firstDigit===qn.FNC1||this.secondDigit===qn.FNC1}}qn.FNC1=10;class xe{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new J;let o=i.substring(0,2);for(let d of xe.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(2,d[2],i):xe.processFixedAI(2,d[1],i);if(i.length<3)throw new J;let a=i.substring(0,3);for(let d of xe.THREE_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(3,d[2],i):xe.processFixedAI(3,d[1],i);for(let d of xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,d[2],i):xe.processFixedAI(4,d[1],i);if(i.length<4)throw new J;let c=i.substring(0,4);for(let d of xe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,d[2],i):xe.processFixedAI(4,d[1],i);throw new J}static processFixedAI(i,o,a){if(a.length<i)throw new J;let c=a.substring(0,i);if(a.length<i+o)throw new J;let d=a.substring(i,i+o),f=a.substring(i+o),g="("+c+")"+d,_=xe.parseFieldsInGeneralPurpose(f);return _==null?g:g+_}static processVariableAI(i,o,a){let c=a.substring(0,i),d;a.length<i+o?d=a.length:d=i+o;let f=a.substring(i,d),g=a.substring(d),_="("+c+")"+f,x=xe.parseFieldsInGeneralPurpose(g);return x==null?_:_+x}}xe.VARIABLE_LENGTH=[],xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xe.VARIABLE_LENGTH,20],["22",xe.VARIABLE_LENGTH,29],["30",xe.VARIABLE_LENGTH,8],["37",xe.VARIABLE_LENGTH,8],["90",xe.VARIABLE_LENGTH,30],["91",xe.VARIABLE_LENGTH,30],["92",xe.VARIABLE_LENGTH,30],["93",xe.VARIABLE_LENGTH,30],["94",xe.VARIABLE_LENGTH,30],["95",xe.VARIABLE_LENGTH,30],["96",xe.VARIABLE_LENGTH,30],["97",xe.VARIABLE_LENGTH,3],["98",xe.VARIABLE_LENGTH,30],["99",xe.VARIABLE_LENGTH,30]],xe.THREE_DIGIT_DATA_LENGTH=[["240",xe.VARIABLE_LENGTH,30],["241",xe.VARIABLE_LENGTH,30],["242",xe.VARIABLE_LENGTH,6],["250",xe.VARIABLE_LENGTH,30],["251",xe.VARIABLE_LENGTH,30],["253",xe.VARIABLE_LENGTH,17],["254",xe.VARIABLE_LENGTH,20],["400",xe.VARIABLE_LENGTH,30],["401",xe.VARIABLE_LENGTH,30],["402",17],["403",xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xe.VARIABLE_LENGTH,20],["421",xe.VARIABLE_LENGTH,15],["422",3],["423",xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xe.VARIABLE_LENGTH,15],["391",xe.VARIABLE_LENGTH,18],["392",xe.VARIABLE_LENGTH,15],["393",xe.VARIABLE_LENGTH,18],["703",xe.VARIABLE_LENGTH,30]],xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xe.VARIABLE_LENGTH,20],["8003",xe.VARIABLE_LENGTH,30],["8004",xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xe.VARIABLE_LENGTH,30],["8008",xe.VARIABLE_LENGTH,12],["8018",18],["8020",xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xe.VARIABLE_LENGTH,70],["8200",xe.VARIABLE_LENGTH,70]];class Or{constructor(i){this.buffer=new $e,this.information=i}decodeAllCodes(i,o){let a=o,c=null;do{let d=this.decodeGeneralPurposeField(a,c),f=xe.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&i.append(f),d.isRemaining()?c=""+d.getRemainingValue():c=null,a===d.getNewPosition())break;a=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new qn(this.information.getSize(),qn.FNC1,qn.FNC1):new qn(this.information.getSize(),d-1,qn.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),a=(o-8)/11,c=(o-8)%11;return new qn(i+7,a,c)}extractNumericValueFromBitArray(i,o){return Or.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,a){let c=0;for(let d=0;d<a;++d)i.get(o+d)&&(c|=1<<a-d-1);return c}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ie(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ie(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let a=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(a!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new Ie(this.current.getPosition(),this.buffer.toString()):o=new Ie(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Mr(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Ie(this.current.getPosition(),this.buffer.toString());return new Mr(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Ie(this.current.getPosition(),this.buffer.toString());return new Mr(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Ie(this.current.getPosition(),this.buffer.toString());return new Mr(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Ht(i+5,Ht.FNC1);if(o>=5&&o<15)return new Ht(i+5,"0"+(o-5));let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<90)return new Ht(i+7,""+(a+1));if(a>=90&&a<116)return new Ht(i+7,""+(a+7));let c=this.extractNumericValueFromBitArray(i,8),d;switch(c){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new K}return new Ht(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,6);return a>=16&&a<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Ht(i+5,Ht.FNC1);if(o>=5&&o<15)return new Ht(i+5,"0"+(o-5));let a=this.extractNumericValueFromBitArray(i,6);if(a>=32&&a<58)return new Ht(i+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Kn("Decoding invalid alphanumeric value: "+a)}return new Ht(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class Cs{constructor(i){this.information=i,this.generalDecoder=new Or(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class An extends Cs{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let a=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,a)}encodeCompressedGtinWithoutAI(i,o,a){for(let c=0;c<4;++c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*c,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}An.appendCheckDigit(i,a)}static appendCheckDigit(i,o){let a=0;for(let c=0;c<13;c++){let d=i.charAt(c+o).charCodeAt(0)-48;a+=c&1?d:3*d}a=10-a%10,a===10&&(a=0),i.append(a)}}An.GTIN_SIZE=40;class Lr extends An{constructor(i){super(i)}parseInformation(){let i=new $e;i.append("(01)");let o=i.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Lr.HEADER_SIZE,4);return i.append(a),this.encodeCompressedGtinWithoutAI(i,Lr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,Lr.HEADER_SIZE+44)}}Lr.HEADER_SIZE=4;class Ki extends Cs{constructor(i){super(i)}parseInformation(){let i=new $e;return this.getGeneralDecoder().decodeAllCodes(i,Ki.HEADER_SIZE)}}Ki.HEADER_SIZE=5;class Wo extends An{constructor(i){super(i)}encodeCompressedWeight(i,o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,a);this.addWeightCode(i,c);let d=this.checkWeight(c),f=1e5;for(let g=0;g<5;++g)d/f===0&&i.append("0"),f/=10;i.append(d)}}class Li extends Wo{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Li.HEADER_SIZE+Wo.GTIN_SIZE+Li.WEIGHT_SIZE)throw new J;let i=new $e;return this.encodeCompressedGtin(i,Li.HEADER_SIZE),this.encodeCompressedWeight(i,Li.HEADER_SIZE+Wo.GTIN_SIZE,Li.WEIGHT_SIZE),i.toString()}}Li.HEADER_SIZE=5,Li.WEIGHT_SIZE=15;class sd extends Li{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class ad extends Li{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Di extends An{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Di.HEADER_SIZE+An.GTIN_SIZE)throw new J;let i=new $e;this.encodeCompressedGtin(i,Di.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE+An.GTIN_SIZE,Di.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Di.HEADER_SIZE+An.GTIN_SIZE+Di.LAST_DIGIT_SIZE,null);return i.append(a.getNewString()),i.toString()}}Di.HEADER_SIZE=8,Di.LAST_DIGIT_SIZE=2;class In extends An{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<In.HEADER_SIZE+An.GTIN_SIZE)throw new J;let i=new $e;this.encodeCompressedGtin(i,In.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+An.GTIN_SIZE,In.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+An.GTIN_SIZE+In.LAST_DIGIT_SIZE,In.FIRST_THREE_DIGITS_SIZE);a/100==0&&i.append("0"),a/10==0&&i.append("0"),i.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(In.HEADER_SIZE+An.GTIN_SIZE+In.LAST_DIGIT_SIZE+In.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}In.HEADER_SIZE=8,In.LAST_DIGIT_SIZE=2,In.FIRST_THREE_DIGITS_SIZE=10;class Dt extends Wo{constructor(i,o,a){super(i),this.dateCode=a,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE+Dt.DATE_SIZE)throw new J;let i=new $e;return this.encodeCompressedGtin(i,Dt.HEADER_SIZE),this.encodeCompressedWeight(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE,Dt.WEIGHT_SIZE),this.encodeCompressedDate(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Dt.DATE_SIZE);if(a==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=a%32;a/=32;let d=a%12+1;a/=12;let f=a;f/10==0&&i.append("0"),i.append(f),d/10==0&&i.append("0"),i.append(d),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Dt.HEADER_SIZE=8,Dt.WEIGHT_SIZE=20,Dt.DATE_SIZE=16;function Vo(T){try{if(T.get(1))return new Lr(T);if(!T.get(2))return new Ki(T);switch(Or.extractNumericValueFromBitArray(T,1,4)){case 4:return new sd(T);case 5:return new ad(T)}switch(Or.extractNumericValueFromBitArray(T,1,5)){case 12:return new Di(T);case 13:return new In(T)}switch(Or.extractNumericValueFromBitArray(T,1,7)){case 56:return new Dt(T,"310","11");case 57:return new Dt(T,"320","11");case 58:return new Dt(T,"310","13");case 59:return new Dt(T,"320","13");case 60:return new Dt(T,"310","15");case 61:return new Dt(T,"320","15");case 62:return new Dt(T,"310","17");case 63:return new Dt(T,"320","17")}}catch(i){throw console.log(i),new Kn("unknown decoder: "+T)}}class _r{constructor(i,o,a,c){this.leftchar=i,this.rightchar=o,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof _r?_r.equalsOrNull(i.leftchar,o.leftchar)&&_r.equalsOrNull(i.rightchar,o.rightchar)&&_r.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:_r.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Aa{constructor(i,o,a){this.pairs=i,this.rowNumber=o,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Aa?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let a;return i.forEach((c,d)=>{o.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class ie extends Sn{constructor(i){super(...arguments),this.pairs=new Array(ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,a){this.pairs.length=0,this.startFromEven=!1;try{return ie.constructResult(this.decodeRow2pairs(i,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ie.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof J){if(!this.pairs.length)throw new J;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new J}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let a=o;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(c);try{return this.checkRows(d,a+1)}catch(f){this.verbose&&console.log(f)}}throw new J}static isValidSequence(i){for(let o of ie.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let a=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=o[c]){a=!1;break}if(a)return!0}return!1}storeRow(i,o){let a=0,c=!1,d=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>i){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),a++}d||c||ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Aa(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let a of o)if(a.getPairs().length!==i.length){for(let c of a.getPairs())for(let d of i)if(_r.equals(c,d))break}}static isPartialRow(i,o){for(let a of o){let c=!0;for(let d of i){let f=!1;for(let g of a.getPairs())if(d.equals(g)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=od.buildBitArray(i),c=Vo(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints(),g=[d[0],d[1],f[0],f[1]];return new Ue(c,null,null,g,ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),a=i.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),d=2;for(let g=1;g<this.pairs.size();++g){let _=this.pairs.get(g);c+=_.getLeftChar().getChecksumPortion(),d++;let x=_.getRightChar();x!=null&&(c+=x.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==o.getValue()}static getNextSecondBar(i,o){let a;return i.get(o)?(a=i.getNextUnset(o),a=i.getNextSet(a)):(a=i.getNextSet(o),a=i.getNextUnset(a)),a}retrieveNextPair(i,o,a){let c=o.length%2==0;this.startFromEven&&(c=!c);let d,f=!0,g=-1;do this.findNextPair(i,o,g),d=this.parseFoundFinderPattern(i,a,c),d==null?g=ie.getNextSecondBar(i,this.startEnd[0]):f=!1;while(f);let _=this.decodeDataCharacter(i,d,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new J;let x;try{x=this.decodeDataCharacter(i,d,c,!1)}catch(C){x=null,this.verbose&&console.log(C)}return new _r(_,x,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),f;a>=0?f=a:this.isEmptyPair(o)?f=0:f=o[o.length-1].getFinderPattern().getStartEnd()[1];let g=o.length%2!=0;this.startFromEven&&(g=!g);let _=!1;for(;f<d&&(_=!i.get(f),!!_);)f++;let x=0,C=f;for(let b=f;b<d;b++)if(i.get(b)!=_)c[x]++;else{if(x==3){if(g&&ie.reverseCounters(c),ie.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=b;return}g&&ie.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,_=!_}throw new J}static reverseCounters(i){let o=i.length;for(let a=0;a<o/2;++a){let c=i[a];i[a]=i[o-a-1],i[o-a-1]=c}}parseFoundFinderPattern(i,o,a){let c,d,f;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!i.get(x);)x--;x++,c=this.startEnd[0]-x,d=x,f=this.startEnd[1]}else d=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let g=this.getDecodeFinderCounters();V.arraycopy(g,0,g,1,g.length-1),g[0]=c;let _;try{_=this.parseFinderValue(g,ie.FINDER_PATTERNS)}catch{return null}return new io(_,[d,f],d,f,o)}decodeDataCharacter(i,o,a,c){let d=this.getDataCharacterCounters();for(let wt=0;wt<d.length;wt++)d[wt]=0;if(c)ie.recordPatternInReverse(i,o.getStartEnd()[0],d);else{ie.recordPattern(i,o.getStartEnd()[1],d);for(let wt=0,wn=d.length-1;wt<wn;wt++,wn--){let Wn=d[wt];d[wt]=d[wn],d[wn]=Wn}}let f=17,g=rt.sum(new Int32Array(d))/f,_=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(g-_)/_>.3)throw new J;let x=this.getOddCounts(),C=this.getEvenCounts(),b=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let wt=0;wt<d.length;wt++){let wn=1*d[wt]/g,Wn=wn+.5;if(Wn<1){if(wn<.3)throw new J;Wn=1}else if(Wn>8){if(wn>8.7)throw new J;Wn=8}let ho=wt/2;wt&1?(C[ho]=Wn,R[ho]=wn-Wn):(x[ho]=Wn,b[ho]=wn-Wn)}this.adjustOddEvenCounts(f);let P=4*o.getValue()+(a?0:2)+(c?0:1)-1,z=0,U=0;for(let wt=x.length-1;wt>=0;wt--){if(ie.isNotA1left(o,a,c)){let wn=ie.WEIGHTS[P][2*wt];U+=x[wt]*wn}z+=x[wt]}let j=0;for(let wt=C.length-1;wt>=0;wt--)if(ie.isNotA1left(o,a,c)){let wn=ie.WEIGHTS[P][2*wt+1];j+=C[wt]*wn}let X=U+j;if(z&1||z>13||z<4)throw new J;let ue=(13-z)/2,de=ie.SYMBOL_WIDEST[ue],oe=9-de,qe=Oi.getRSSvalue(x,de,!0),Ve=Oi.getRSSvalue(C,oe,!1),Vt=ie.EVEN_TOTAL_SUBSET[ue],Un=ie.GSUM[ue],Hn=qe*Vt+Ve+Un;return new no(Hn,X)}static isNotA1left(i,o,a){return!(i.getValue()==0&&o&&a)}adjustOddEvenCounts(i){let o=rt.sum(new Int32Array(this.getOddCounts())),a=rt.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;o>13?d=!0:o<4&&(c=!0);let f=!1,g=!1;a>13?g=!0:a<4&&(f=!0);let _=o+a-i,x=(o&1)==1,C=(a&1)==0;if(_==1)if(x){if(C)throw new J;d=!0}else{if(!C)throw new J;g=!0}else if(_==-1)if(x){if(C)throw new J;c=!0}else{if(!C)throw new J;f=!0}else if(_==0){if(x){if(!C)throw new J;o<a?(c=!0,g=!0):(d=!0,f=!0)}else if(C)throw new J}else throw new J;if(c){if(d)throw new J;ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new J;ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ie.SYMBOL_WIDEST=[7,5,4,3,1],ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ie.GSUM=[0,348,1388,2948,3988],ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ie.FINDER_PAT_A=0,ie.FINDER_PAT_B=1,ie.FINDER_PAT_C=2,ie.FINDER_PAT_D=3,ie.FINDER_PAT_E=4,ie.FINDER_PAT_F=5,ie.FINDER_PATTERN_SEQUENCES=[[ie.FINDER_PAT_A,ie.FINDER_PAT_A],[ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B],[ie.FINDER_PAT_A,ie.FINDER_PAT_C,ie.FINDER_PAT_B,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_C],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F]],ie.MAX_PAIRS=11;class ld extends no{constructor(i,o,a){super(i,o),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Xt extends Sn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,a){const c=this.decodePair(o,!1,i,a);Xt.addOrTally(this.possibleLeftPairs,c),o.reverse();let d=this.decodePair(o,!0,i,a);Xt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&Xt.checkChecksum(f,g))return Xt.constructResult(f,g)}throw new J}static addOrTally(i,o){if(o==null)return;let a=!1;for(let c of i)if(c.getValue()===o.getValue()){c.incrementCount(),a=!0;break}a||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let a=4537077*i.getValue()+o.getValue(),c=new String(a).toString(),d=new $e;for(let x=13-c.length;x>0;x--)d.append("0");d.append(c);let f=0;for(let x=0;x<13;x++){let C=d.charAt(x).charCodeAt(0)-48;f+=x&1?C:3*C}f=10-f%10,f===10&&(f=0),d.append(f.toString());let g=i.getFinderPattern().getResultPoints(),_=o.getFinderPattern().getResultPoints();return new Ue(d.toString(),null,0,[g[0],g[1],_[0],_[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(i,o){let a=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(i,o,a,c){try{let d=this.findFinderPattern(i,o),f=this.parseFoundFinderPattern(i,a,o,d),g=c==null?null:c.get(ce.NEED_RESULT_POINT_CALLBACK);if(g!=null){let C=(d[0]+d[1])/2;o&&(C=i.getSize()-1-C),g.foundPossibleResultPoint(new Ee(C,a))}let _=this.decodeDataCharacter(i,f,!0),x=this.decodeDataCharacter(i,f,!1);return new ld(1597*_.getValue()+x.getValue(),_.getChecksumPortion()+4*x.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(i,o,a){let c=this.getDataCharacterCounters();for(let j=0;j<c.length;j++)c[j]=0;if(a)_t.recordPatternInReverse(i,o.getStartEnd()[0],c);else{_t.recordPattern(i,o.getStartEnd()[1]+1,c);for(let j=0,X=c.length-1;j<X;j++,X--){let ue=c[j];c[j]=c[X],c[X]=ue}}let d=a?16:15,f=rt.sum(new Int32Array(c))/d,g=this.getOddCounts(),_=this.getEvenCounts(),x=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let j=0;j<c.length;j++){let X=c[j]/f,ue=Math.floor(X+.5);ue<1?ue=1:ue>8&&(ue=8);let de=Math.floor(j/2);j&1?(_[de]=ue,C[de]=X-ue):(g[de]=ue,x[de]=X-ue)}this.adjustOddEvenCounts(a,d);let b=0,R=0;for(let j=g.length-1;j>=0;j--)R*=9,R+=g[j],b+=g[j];let P=0,z=0;for(let j=_.length-1;j>=0;j--)P*=9,P+=_[j],z+=_[j];let U=R+3*P;if(a){if(b&1||b>12||b<4)throw new J;let j=(12-b)/2,X=Xt.OUTSIDE_ODD_WIDEST[j],ue=9-X,de=Oi.getRSSvalue(g,X,!1),oe=Oi.getRSSvalue(_,ue,!0),qe=Xt.OUTSIDE_EVEN_TOTAL_SUBSET[j],Ve=Xt.OUTSIDE_GSUM[j];return new no(de*qe+oe+Ve,U)}else{if(z&1||z>10||z<4)throw new J;let j=(10-z)/2,X=Xt.INSIDE_ODD_WIDEST[j],ue=9-X,de=Oi.getRSSvalue(g,X,!0),oe=Oi.getRSSvalue(_,ue,!1),qe=Xt.INSIDE_ODD_TOTAL_SUBSET[j],Ve=Xt.INSIDE_GSUM[j];return new no(oe*qe+de+Ve,U)}}findFinderPattern(i,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=i.getSize(),d=!1,f=0;for(;f<c&&(d=!i.get(f),o!==d);)f++;let g=0,_=f;for(let x=f;x<c;x++)if(i.get(x)!==d)a[g]++;else{if(g===3){if(Sn.isFinderPattern(a))return[_,x];_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,d=!d}throw new J}parseFoundFinderPattern(i,o,a,c){let d=i.get(c[0]),f=c[0]-1;for(;f>=0&&d!==i.get(f);)f--;f++;const g=c[0]-f,_=this.getDecodeFinderCounters(),x=new Int32Array(_.length);V.arraycopy(_,0,x,1,_.length-1),x[0]=g;const C=this.parseFinderValue(x,Xt.FINDER_PATTERNS);let b=f,R=c[1];return a&&(b=i.getSize()-1-b,R=i.getSize()-1-R),new io(C,[f,c[1]],b,R,o)}adjustOddEvenCounts(i,o){let a=rt.sum(new Int32Array(this.getOddCounts())),c=rt.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,g=!1,_=!1;i?(a>12?f=!0:a<4&&(d=!0),c>12?_=!0:c<4&&(g=!0)):(a>11?f=!0:a<5&&(d=!0),c>10?_=!0:c<4&&(g=!0));let x=a+c-o,C=(a&1)===(i?1:0),b=(c&1)===1;if(x===1)if(C){if(b)throw new J;f=!0}else{if(!b)throw new J;_=!0}else if(x===-1)if(C){if(b)throw new J;d=!0}else{if(!b)throw new J;g=!0}else if(x===0){if(C){if(!b)throw new J;a<c?(d=!0,_=!0):(f=!0,g=!0)}else if(b)throw new J}else throw new J;if(d){if(f)throw new J;Sn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Sn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(_)throw new J;Sn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Sn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Xt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Xt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Xt.OUTSIDE_GSUM=[0,161,961,2015,2715],Xt.INSIDE_GSUM=[0,336,1036,1516],Xt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Xt.INSIDE_ODD_WIDEST=[2,4,6,8],Xt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yr extends _t{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const a=i?i.get(ce.POSSIBLE_FORMATS):null,c=i&&i.get(ce.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ae.EAN_13)||a.includes(ae.UPC_A)||a.includes(ae.EAN_8)||a.includes(ae.UPC_E))&&this.readers.push(new Ca(i)),a.includes(ae.CODE_39)&&this.readers.push(new Qe(c)),a.includes(ae.CODE_128)&&this.readers.push(new se),a.includes(ae.ITF)&&this.readers.push(new Ge),a.includes(ae.RSS_14)&&this.readers.push(new Xt),a.includes(ae.RSS_EXPANDED)&&this.readers.push(new ie(this.verbose))):(this.readers.push(new Ca(i)),this.readers.push(new Qe),this.readers.push(new Ca(i)),this.readers.push(new se),this.readers.push(new Ge),this.readers.push(new Xt),this.readers.push(new ie(this.verbose)))}decodeRow(i,o,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,o,a)}catch{}throw new J}reset(){this.readers.forEach(i=>i.reset())}}class jo extends At{constructor(i=500,o){super(new yr(o),i,o)}}class yt{constructor(i,o,a){this.ecCodewords=i,this.ecBlocks=[o],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ft{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(i,o,a,c,d,f){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=f;let g=0;const _=f.getECCodewords(),x=f.getECBlocks();for(let C of x)g+=C.getCount()*(C.getDataCodewords()+_);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if(i&1||o&1)throw new K;for(let a of Xe.VERSIONS)if(a.symbolSizeRows===i&&a.symbolSizeColumns===o)return a;throw new K}toString(){return""+this.versionNumber}static buildVersions(){return[new Xe(1,10,10,8,8,new yt(5,new ft(1,3))),new Xe(2,12,12,10,10,new yt(7,new ft(1,5))),new Xe(3,14,14,12,12,new yt(10,new ft(1,8))),new Xe(4,16,16,14,14,new yt(12,new ft(1,12))),new Xe(5,18,18,16,16,new yt(14,new ft(1,18))),new Xe(6,20,20,18,18,new yt(18,new ft(1,22))),new Xe(7,22,22,20,20,new yt(20,new ft(1,30))),new Xe(8,24,24,22,22,new yt(24,new ft(1,36))),new Xe(9,26,26,24,24,new yt(28,new ft(1,44))),new Xe(10,32,32,14,14,new yt(36,new ft(1,62))),new Xe(11,36,36,16,16,new yt(42,new ft(1,86))),new Xe(12,40,40,18,18,new yt(48,new ft(1,114))),new Xe(13,44,44,20,20,new yt(56,new ft(1,144))),new Xe(14,48,48,22,22,new yt(68,new ft(1,174))),new Xe(15,52,52,24,24,new yt(42,new ft(2,102))),new Xe(16,64,64,14,14,new yt(56,new ft(2,140))),new Xe(17,72,72,16,16,new yt(36,new ft(4,92))),new Xe(18,80,80,18,18,new yt(48,new ft(4,114))),new Xe(19,88,88,20,20,new yt(56,new ft(4,144))),new Xe(20,96,96,22,22,new yt(68,new ft(4,174))),new Xe(21,104,104,24,24,new yt(56,new ft(6,136))),new Xe(22,120,120,18,18,new yt(68,new ft(6,175))),new Xe(23,132,132,20,20,new yt(62,new ft(8,163))),new Xe(24,144,144,22,22,new yt(62,new ft(8,156),new ft(2,155))),new Xe(25,8,18,6,16,new yt(7,new ft(1,5))),new Xe(26,8,32,6,14,new yt(11,new ft(1,10))),new Xe(27,12,26,10,24,new yt(14,new ft(1,16))),new Xe(28,12,36,10,16,new yt(18,new ft(1,22))),new Xe(29,16,36,14,16,new yt(24,new ft(1,32))),new Xe(30,16,48,14,22,new yt(28,new ft(1,49)))]}}Xe.VERSIONS=Xe.buildVersions();class lt{constructor(i){const o=i.getHeight();if(o<8||o>144||o&1)throw new K;this.version=lt.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Ye(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),a=i.getWidth();return Xe.getVersionForDimensions(o,a)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,a=4,c=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,_=!1,x=!1,C=!1;do if(a===d&&c===0&&!g)i[o++]=this.readCorner1(d,f)&255,a-=2,c+=2,g=!0;else if(a===d-2&&c===0&&f&3&&!_)i[o++]=this.readCorner2(d,f)&255,a-=2,c+=2,_=!0;else if(a===d+4&&c===2&&!(f&7)&&!x)i[o++]=this.readCorner3(d,f)&255,a-=2,c+=2,x=!0;else if(a===d-2&&c===0&&(f&7)===4&&!C)i[o++]=this.readCorner4(d,f)&255,a-=2,c+=2,C=!0;else{do a<d&&c>=0&&!this.readMappingMatrix.get(c,a)&&(i[o++]=this.readUtah(a,c,d,f)&255),a-=2,c+=2;while(a>=0&&c<f);a+=1,c+=3;do a>=0&&c<f&&!this.readMappingMatrix.get(c,a)&&(i[o++]=this.readUtah(a,c,d,f)&255),a+=2,c-=2;while(a<d&&c>=0);a+=3,c+=1}while(a<d||c<f);if(o!==this.version.getTotalCodewords())throw new K;return i}readModule(i,o,a,c){return i<0&&(i+=a,o+=4-(a+4&7)),o<0&&(o+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,a,c){let d=0;return this.readModule(i-2,o-2,a,c)&&(d|=1),d<<=1,this.readModule(i-2,o-1,a,c)&&(d|=1),d<<=1,this.readModule(i-1,o-2,a,c)&&(d|=1),d<<=1,this.readModule(i-1,o-1,a,c)&&(d|=1),d<<=1,this.readModule(i-1,o,a,c)&&(d|=1),d<<=1,this.readModule(i,o-2,a,c)&&(d|=1),d<<=1,this.readModule(i,o-1,a,c)&&(d|=1),d<<=1,this.readModule(i,o,a,c)&&(d|=1),d}readCorner1(i,o){let a=0;return this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,1,i,o)&&(a|=1),a<<=1,this.readModule(i-1,2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(2,o-1,i,o)&&(a|=1),a<<=1,this.readModule(3,o-1,i,o)&&(a|=1),a}readCorner2(i,o){let a=0;return this.readModule(i-3,0,i,o)&&(a|=1),a<<=1,this.readModule(i-2,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(0,o-4,i,o)&&(a|=1),a<<=1,this.readModule(0,o-3,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a}readCorner3(i,o){let a=0;return this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(0,o-3,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-3,i,o)&&(a|=1),a<<=1,this.readModule(1,o-2,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a}readCorner4(i,o){let a=0;return this.readModule(i-3,0,i,o)&&(a|=1),a<<=1,this.readModule(i-2,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(2,o-1,i,o)&&(a|=1),a<<=1,this.readModule(3,o-1,i,o)&&(a|=1),a}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=o/c|0,g=a/d|0,_=f*c,x=g*d,C=new Ye(x,_);for(let b=0;b<f;++b){const R=b*c;for(let P=0;P<g;++P){const z=P*d;for(let U=0;U<c;++U){const j=b*(c+2)+1+U,X=R+U;for(let ue=0;ue<d;++ue){const de=P*(d+2)+1+ue;if(i.get(de,j)){const oe=z+ue;C.set(oe,X)}}}}}return C}}class Mt{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const a=o.getECBlocks();let c=0;const d=a.getECBlocks();for(let U of d)c+=U.getCount();const f=new Array(c);let g=0;for(let U of d)for(let j=0;j<U.getCount();j++){const X=U.getDataCodewords(),ue=a.getECCodewords()+X;f[g++]=new Mt(X,new Uint8Array(ue))}const x=f[0].codewords.length-a.getECCodewords(),C=x-1;let b=0;for(let U=0;U<C;U++)for(let j=0;j<g;j++)f[j].codewords[U]=i[b++];const R=o.getVersionNumber()===24,P=R?8:g;for(let U=0;U<P;U++)f[U].codewords[x-1]=i[b++];const z=f[0].codewords.length;for(let U=x;U<z;U++)for(let j=0;j<g;j++){const X=R?(j+8)%g:j,ue=R&&X>7?U-1:U;f[X].codewords[ue]=i[b++]}if(b!==i.length)throw new I;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ro{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,a=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(a>0){const f=8-a,g=i<f?i:f,_=f-g,x=255>>8-g<<_;o=(d[c]&x)>>_,i-=g,a+=g,a===8&&(a=0,c++)}if(i>0){for(;i>=8;)o=o<<8|d[c]&255,c++,i-=8;if(i>0){const f=8-i,g=255>>f<<f;o=o<<i|(d[c]&g)>>f,a+=i}}return this.bitOffset=a,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pt;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pt||(Pt={}));class $n{static decode(i){const o=new ro(i),a=new $e,c=new $e,d=new Array;let f=Pt.ASCII_ENCODE;do if(f===Pt.ASCII_ENCODE)f=this.decodeAsciiSegment(o,a,c);else{switch(f){case Pt.C40_ENCODE:this.decodeC40Segment(o,a);break;case Pt.TEXT_ENCODE:this.decodeTextSegment(o,a);break;case Pt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,a);break;case Pt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,a);break;case Pt.BASE256_ENCODE:this.decodeBase256Segment(o,a,d);break;default:throw new K}f=Pt.ASCII_ENCODE}while(f!==Pt.PAD_ENCODE&&o.available()>0);return c.length()>0&&a.append(c.toString()),new gr(i,a.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,a){let c=!1;do{let d=i.readBits(8);if(d===0)throw new K;if(d<=128)return c&&(d+=128),o.append(String.fromCharCode(d-1)),Pt.ASCII_ENCODE;if(d===129)return Pt.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&o.append("0"),o.append(""+f)}else switch(d){case 230:return Pt.C40_ENCODE;case 231:return Pt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:o.append("[)>05"),a.insert(0,"");break;case 237:o.append("[)>06"),a.insert(0,"");break;case 238:return Pt.ANSIX12_ENCODE;case 239:return Pt.TEXT_ENCODE;case 240:return Pt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new K;break}}while(i.available()>0);return Pt.ASCII_ENCODE}static decodeC40Segment(i,o){let a=!1;const c=[];let d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let g=0;g<3;g++){const _=c[g];switch(d){case 0:if(_<3)d=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[_];a?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):o.append(x)}else throw new K;break;case 1:a?(o.append(String.fromCharCode(_+128)),a=!1):o.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[_];a?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):o.append(x)}else switch(_){case 27:o.append("");break;case 30:a=!0;break;default:throw new K}d=0;break;case 3:a?(o.append(String.fromCharCode(_+224)),a=!1):o.append(String.fromCharCode(_+96)),d=0;break;default:throw new K}}}while(i.available()>0)}static decodeTextSegment(i,o){let a=!1,c=[],d=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let g=0;g<3;g++){const _=c[g];switch(d){case 0:if(_<3)d=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[_];a?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):o.append(x)}else throw new K;break;case 1:a?(o.append(String.fromCharCode(_+128)),a=!1):o.append(String.fromCharCode(_)),d=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[_];a?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):o.append(x)}else switch(_){case 27:o.append("");break;case 30:a=!0;break;default:throw new K}d=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[_];a?(o.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):o.append(x),d=0}else throw new K;break;default:throw new K}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const a=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),a);for(let d=0;d<3;d++){const f=a[d];switch(f){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(f<14)o.append(String.fromCharCode(f+44));else if(f<40)o.append(String.fromCharCode(f+51));else throw new K;break}}}while(i.available()>0)}static parseTwoBytes(i,o,a){let c=(i<<8)+o-1,d=Math.floor(c/1600);a[0]=d,c-=d*1600,d=Math.floor(c/40),a[1]=d,a[2]=c-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let a=0;a<4;a++){let c=i.readBits(6);if(c===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}c&32||(c|=64),o.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,o,a){let c=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),c++);let f;if(d===0?f=i.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(i.readBits(8),c++),f<0)throw new K;const g=new Uint8Array(f);for(let _=0;_<f;_++){if(i.available()<8)throw new K;g[_]=this.unrandomize255State(i.readBits(8),c++)}a.push(g);try{o.append(je.decode(g,ve.ISO88591))}catch(_){throw new Kn("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,o){const a=149*o%255+1,c=i-a;return c>=0?c:c+256}}$n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],$n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],$n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$n.TEXT_SHIFT2_SET_CHARS=$n.C40_SHIFT2_SET_CHARS,$n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ia{constructor(){this.rsDecoder=new pr(it.DATA_MATRIX_FIELD_256)}decode(i){const o=new lt(i),a=o.getVersion(),c=o.readCodewords(),d=Mt.getDataBlocks(c,a);let f=0;for(let x of d)f+=x.getNumDataCodewords();const g=new Uint8Array(f),_=d.length;for(let x=0;x<_;x++){const C=d[x],b=C.getCodewords(),R=C.getNumDataCodewords();this.correctErrors(b,R);for(let P=0;P<R;P++)g[P*_+x]=b[P]}return $n.decode(g)}correctErrors(i,o){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-o)}catch{throw new W}for(let c=0;c<o;c++)i[c]=a[c]}}class be{constructor(i){this.image=i,this.rectangleDetector=new ee(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new J;o=this.shiftToModuleCenter(o);const a=o[0],c=o[1],d=o[2],f=o[3];let g=this.transitionsBetween(a,f)+1,_=this.transitionsBetween(d,f)+1;(g&1)===1&&(g+=1),(_&1)===1&&(_+=1),4*g<7*_&&4*_<7*g&&(g=_=Math.max(g,_));let x=be.sampleGrid(this.image,a,c,d,f,g,_);return new dn(x,[a,c,d,f])}static shiftPoint(i,o,a){let c=(o.getX()-i.getX())/(a+1),d=(o.getY()-i.getY())/(a+1);return new Ee(i.getX()+c,i.getY()+d)}static moveAway(i,o,a){let c=i.getX(),d=i.getY();return c<o?c-=1:c+=1,d<a?d-=1:d+=1,new Ee(c,d)}detectSolid1(i){let o=i[0],a=i[1],c=i[3],d=i[2],f=this.transitionsBetween(o,a),g=this.transitionsBetween(a,c),_=this.transitionsBetween(c,d),x=this.transitionsBetween(d,o),C=f,b=[d,o,a,c];return C>g&&(C=g,b[0]=o,b[1]=a,b[2]=c,b[3]=d),C>_&&(C=_,b[0]=a,b[1]=c,b[2]=d,b[3]=o),C>x&&(b[0]=c,b[1]=d,b[2]=o,b[3]=a),b}detectSolid2(i){let o=i[0],a=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d),g=be.shiftPoint(a,c,(f+1)*4),_=be.shiftPoint(c,a,(f+1)*4),x=this.transitionsBetween(g,o),C=this.transitionsBetween(_,d);return x<C?(i[0]=o,i[1]=a,i[2]=c,i[3]=d):(i[0]=a,i[1]=c,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],a=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d),g=this.transitionsBetween(a,d),_=be.shiftPoint(o,a,(g+1)*4),x=be.shiftPoint(c,a,(f+1)*4);f=this.transitionsBetween(_,d),g=this.transitionsBetween(x,d);let C=new Ee(d.getX()+(c.getX()-a.getX())/(f+1),d.getY()+(c.getY()-a.getY())/(f+1)),b=new Ee(d.getX()+(o.getX()-a.getX())/(g+1),d.getY()+(o.getY()-a.getY())/(g+1));if(!this.isValid(C))return this.isValid(b)?b:null;if(!this.isValid(b))return C;let R=this.transitionsBetween(_,C)+this.transitionsBetween(x,C),P=this.transitionsBetween(_,b)+this.transitionsBetween(x,b);return R>P?C:b}shiftToModuleCenter(i){let o=i[0],a=i[1],c=i[2],d=i[3],f=this.transitionsBetween(o,d)+1,g=this.transitionsBetween(c,d)+1,_=be.shiftPoint(o,a,g*4),x=be.shiftPoint(c,a,f*4);f=this.transitionsBetween(_,d)+1,g=this.transitionsBetween(x,d)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let C=(o.getX()+a.getX()+c.getX()+d.getX())/4,b=(o.getY()+a.getY()+c.getY()+d.getY())/4;o=be.moveAway(o,C,b),a=be.moveAway(a,C,b),c=be.moveAway(c,C,b),d=be.moveAway(d,C,b);let R,P;return _=be.shiftPoint(o,a,g*4),_=be.shiftPoint(_,d,f*4),R=be.shiftPoint(a,o,g*4),R=be.shiftPoint(R,c,f*4),x=be.shiftPoint(c,d,g*4),x=be.shiftPoint(x,a,f*4),P=be.shiftPoint(d,c,g*4),P=be.shiftPoint(P,o,f*4),[_,R,x,P]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,a,c,d,f,g){return ln.getInstance().sampleGrid(i,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,o.getX(),o.getY(),d.getX(),d.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(i,o){let a=Math.trunc(i.getX()),c=Math.trunc(i.getY()),d=Math.trunc(o.getX()),f=Math.trunc(o.getY()),g=Math.abs(f-c)>Math.abs(d-a);if(g){let U=a;a=c,c=U,U=d,d=f,f=U}let _=Math.abs(d-a),x=Math.abs(f-c),C=-_/2,b=c<f?1:-1,R=a<d?1:-1,P=0,z=this.image.get(g?c:a,g?a:c);for(let U=a,j=c;U!==d;U+=R){let X=this.image.get(g?j:U,g?U:j);if(X!==z&&(P++,z=X),C+=x,C>0){if(j===f)break;j+=b,C-=_}}return P}}class Ct{constructor(){this.decoder=new Ia}decode(i,o=null){let a,c;if(o!=null&&o.has(ce.PURE_BARCODE)){const x=Ct.extractPureBits(i.getBlackMatrix());a=this.decoder.decode(x),c=Ct.NO_POINTS}else{const x=new be(i.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),c=x.getPoints()}const d=a.getRawBytes(),f=new Ue(a.getText(),d,8*d.length,c,ae.DATA_MATRIX,V.currentTimeMillis()),g=a.getByteSegments();g!=null&&f.putMetadata(Et.BYTE_SEGMENTS,g);const _=a.getECLevel();return _!=null&&f.putMetadata(Et.ERROR_CORRECTION_LEVEL,_),f}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(o==null||a==null)throw new J;const c=this.moduleSize(o,i);let d=o[1];const f=a[1];let g=o[0];const x=(a[0]-g+1)/c,C=(f-d+1)/c;if(x<=0||C<=0)throw new J;const b=c/2;d+=b,g+=b;const R=new Ye(x,C);for(let P=0;P<C;P++){const z=d+P*c;for(let U=0;U<x;U++)i.get(g+U*c,z)&&R.set(U,P)}return R}static moduleSize(i,o){const a=o.getWidth();let c=i[0];const d=i[1];for(;c<a&&o.get(c,d);)c++;if(c===a)throw new J;const f=c-i[0];if(f===0)throw new J;return f}}Ct.NO_POINTS=[];class Ta extends At{constructor(i=500){super(new Ct,i)}}var qi;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(qi||(qi={}));class Ke{constructor(i,o,a){this.value=i,this.stringValue=o,this.bits=a,Ke.FOR_BITS.set(a,this),Ke.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Ke.L;case"M":return Ke.M;case"Q":return Ke.Q;case"H":return Ke.H;default:throw new N(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Ke))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Ke.FOR_BITS.size)throw new I;return Ke.FOR_BITS.get(i)}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.L=new Ke(qi.L,"L",1),Ke.M=new Ke(qi.M,"M",0),Ke.Q=new Ke(qi.Q,"Q",3),Ke.H=new Ke(qi.H,"H",2);class Tn{constructor(i){this.errorCorrectionLevel=Ke.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return B.bitCount(i^o)}static decodeFormatInformation(i,o){const a=Tn.doDecodeFormatInformation(i,o);return a!==null?a:Tn.doDecodeFormatInformation(i^Tn.FORMAT_INFO_MASK_QR,o^Tn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let a=Number.MAX_SAFE_INTEGER,c=0;for(const d of Tn.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===i||f===o)return new Tn(d[1]);let g=Tn.numBitsDiffering(i,f);g<a&&(c=d[1],a=g),i!==o&&(g=Tn.numBitsDiffering(o,f),g<a&&(c=d[1],a=g))}return a<=3?new Tn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Tn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Tn.FORMAT_INFO_MASK_QR=21522,Tn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const a of o)i+=a.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(i,o,...a){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=a;let c=0;const d=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const g of f)c+=g.getCount()*(g.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new K;try{return this.getVersionForNumber((i-17)/4)}catch{throw new K}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return _e.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<_e.VERSION_DECODE_INFO.length;c++){const d=_e.VERSION_DECODE_INFO[c];if(d===i)return _e.getVersionForNumber(c+7);const f=Tn.numBitsDiffering(i,d);f<o&&(a=c+7,o=f)}return o<=3?_e.getVersionForNumber(a):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new Ye(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const d=this.alignmentPatternCenters[c]-2;for(let f=0;f<a;f++)c===0&&(f===0||f===a-1)||c===a-1&&f===0||o.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new G(7,new O(1,19)),new G(10,new O(1,16)),new G(13,new O(1,13)),new G(17,new O(1,9))),new _e(2,Int32Array.from([6,18]),new G(10,new O(1,34)),new G(16,new O(1,28)),new G(22,new O(1,22)),new G(28,new O(1,16))),new _e(3,Int32Array.from([6,22]),new G(15,new O(1,55)),new G(26,new O(1,44)),new G(18,new O(2,17)),new G(22,new O(2,13))),new _e(4,Int32Array.from([6,26]),new G(20,new O(1,80)),new G(18,new O(2,32)),new G(26,new O(2,24)),new G(16,new O(4,9))),new _e(5,Int32Array.from([6,30]),new G(26,new O(1,108)),new G(24,new O(2,43)),new G(18,new O(2,15),new O(2,16)),new G(22,new O(2,11),new O(2,12))),new _e(6,Int32Array.from([6,34]),new G(18,new O(2,68)),new G(16,new O(4,27)),new G(24,new O(4,19)),new G(28,new O(4,15))),new _e(7,Int32Array.from([6,22,38]),new G(20,new O(2,78)),new G(18,new O(4,31)),new G(18,new O(2,14),new O(4,15)),new G(26,new O(4,13),new O(1,14))),new _e(8,Int32Array.from([6,24,42]),new G(24,new O(2,97)),new G(22,new O(2,38),new O(2,39)),new G(22,new O(4,18),new O(2,19)),new G(26,new O(4,14),new O(2,15))),new _e(9,Int32Array.from([6,26,46]),new G(30,new O(2,116)),new G(22,new O(3,36),new O(2,37)),new G(20,new O(4,16),new O(4,17)),new G(24,new O(4,12),new O(4,13))),new _e(10,Int32Array.from([6,28,50]),new G(18,new O(2,68),new O(2,69)),new G(26,new O(4,43),new O(1,44)),new G(24,new O(6,19),new O(2,20)),new G(28,new O(6,15),new O(2,16))),new _e(11,Int32Array.from([6,30,54]),new G(20,new O(4,81)),new G(30,new O(1,50),new O(4,51)),new G(28,new O(4,22),new O(4,23)),new G(24,new O(3,12),new O(8,13))),new _e(12,Int32Array.from([6,32,58]),new G(24,new O(2,92),new O(2,93)),new G(22,new O(6,36),new O(2,37)),new G(26,new O(4,20),new O(6,21)),new G(28,new O(7,14),new O(4,15))),new _e(13,Int32Array.from([6,34,62]),new G(26,new O(4,107)),new G(22,new O(8,37),new O(1,38)),new G(24,new O(8,20),new O(4,21)),new G(22,new O(12,11),new O(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new G(30,new O(3,115),new O(1,116)),new G(24,new O(4,40),new O(5,41)),new G(20,new O(11,16),new O(5,17)),new G(24,new O(11,12),new O(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new G(22,new O(5,87),new O(1,88)),new G(24,new O(5,41),new O(5,42)),new G(30,new O(5,24),new O(7,25)),new G(24,new O(11,12),new O(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new G(24,new O(5,98),new O(1,99)),new G(28,new O(7,45),new O(3,46)),new G(24,new O(15,19),new O(2,20)),new G(30,new O(3,15),new O(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new G(28,new O(1,107),new O(5,108)),new G(28,new O(10,46),new O(1,47)),new G(28,new O(1,22),new O(15,23)),new G(28,new O(2,14),new O(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new G(30,new O(5,120),new O(1,121)),new G(26,new O(9,43),new O(4,44)),new G(28,new O(17,22),new O(1,23)),new G(28,new O(2,14),new O(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new G(28,new O(3,113),new O(4,114)),new G(26,new O(3,44),new O(11,45)),new G(26,new O(17,21),new O(4,22)),new G(26,new O(9,13),new O(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new G(28,new O(3,107),new O(5,108)),new G(26,new O(3,41),new O(13,42)),new G(30,new O(15,24),new O(5,25)),new G(28,new O(15,15),new O(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new G(28,new O(4,116),new O(4,117)),new G(26,new O(17,42)),new G(28,new O(17,22),new O(6,23)),new G(30,new O(19,16),new O(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new G(28,new O(2,111),new O(7,112)),new G(28,new O(17,46)),new G(30,new O(7,24),new O(16,25)),new G(24,new O(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new G(30,new O(4,121),new O(5,122)),new G(28,new O(4,47),new O(14,48)),new G(30,new O(11,24),new O(14,25)),new G(30,new O(16,15),new O(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new G(30,new O(6,117),new O(4,118)),new G(28,new O(6,45),new O(14,46)),new G(30,new O(11,24),new O(16,25)),new G(30,new O(30,16),new O(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new G(26,new O(8,106),new O(4,107)),new G(28,new O(8,47),new O(13,48)),new G(30,new O(7,24),new O(22,25)),new G(30,new O(22,15),new O(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new G(28,new O(10,114),new O(2,115)),new G(28,new O(19,46),new O(4,47)),new G(28,new O(28,22),new O(6,23)),new G(30,new O(33,16),new O(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new G(30,new O(8,122),new O(4,123)),new G(28,new O(22,45),new O(3,46)),new G(30,new O(8,23),new O(26,24)),new G(30,new O(12,15),new O(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new O(3,117),new O(10,118)),new G(28,new O(3,45),new O(23,46)),new G(30,new O(4,24),new O(31,25)),new G(30,new O(11,15),new O(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new O(7,116),new O(7,117)),new G(28,new O(21,45),new O(7,46)),new G(30,new O(1,23),new O(37,24)),new G(30,new O(19,15),new O(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new O(5,115),new O(10,116)),new G(28,new O(19,47),new O(10,48)),new G(30,new O(15,24),new O(25,25)),new G(30,new O(23,15),new O(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new O(13,115),new O(3,116)),new G(28,new O(2,46),new O(29,47)),new G(30,new O(42,24),new O(1,25)),new G(30,new O(23,15),new O(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new O(17,115)),new G(28,new O(10,46),new O(23,47)),new G(30,new O(10,24),new O(35,25)),new G(30,new O(19,15),new O(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new O(17,115),new O(1,116)),new G(28,new O(14,46),new O(21,47)),new G(30,new O(29,24),new O(19,25)),new G(30,new O(11,15),new O(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new O(13,115),new O(6,116)),new G(28,new O(14,46),new O(23,47)),new G(30,new O(44,24),new O(7,25)),new G(30,new O(59,16),new O(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new O(12,121),new O(7,122)),new G(28,new O(12,47),new O(26,48)),new G(30,new O(39,24),new O(14,25)),new G(30,new O(22,15),new O(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new O(6,121),new O(14,122)),new G(28,new O(6,47),new O(34,48)),new G(30,new O(46,24),new O(10,25)),new G(30,new O(2,15),new O(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new O(17,122),new O(4,123)),new G(28,new O(29,46),new O(14,47)),new G(30,new O(49,24),new O(10,25)),new G(30,new O(24,15),new O(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new O(4,122),new O(18,123)),new G(28,new O(13,46),new O(32,47)),new G(30,new O(48,24),new O(14,25)),new G(30,new O(42,15),new O(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new O(20,117),new O(4,118)),new G(28,new O(40,47),new O(7,48)),new G(30,new O(43,24),new O(22,25)),new G(30,new O(10,15),new O(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new O(19,118),new O(6,119)),new G(28,new O(18,47),new O(31,48)),new G(30,new O(34,24),new O(34,25)),new G(30,new O(20,15),new O(61,16)))];var kt;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(kt||(kt={}));class bn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let a=0;a<o;a++)for(let c=0;c<o;c++)this.isMasked(a,c)&&i.flip(c,a)}}bn.values=new Map([[kt.DATA_MASK_000,new bn(kt.DATA_MASK_000,(T,i)=>(T+i&1)===0)],[kt.DATA_MASK_001,new bn(kt.DATA_MASK_001,(T,i)=>(T&1)===0)],[kt.DATA_MASK_010,new bn(kt.DATA_MASK_010,(T,i)=>i%3===0)],[kt.DATA_MASK_011,new bn(kt.DATA_MASK_011,(T,i)=>(T+i)%3===0)],[kt.DATA_MASK_100,new bn(kt.DATA_MASK_100,(T,i)=>(Math.floor(T/2)+Math.floor(i/3)&1)===0)],[kt.DATA_MASK_101,new bn(kt.DATA_MASK_101,(T,i)=>T*i%6===0)],[kt.DATA_MASK_110,new bn(kt.DATA_MASK_110,(T,i)=>T*i%6<3)],[kt.DATA_MASK_111,new bn(kt.DATA_MASK_111,(T,i)=>(T+i+T*i%3&1)===0)]]);class Go{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new K;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let a=0;const c=o-7;for(let d=o-1;d>=c;d--)a=this.copyBit(8,d,a);for(let d=o-8;d<o;d++)a=this.copyBit(d,8,a);if(this.parsedFormatInfo=Tn.decodeFormatInformation(i,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return _e.getVersionForNumber(o);let a=0;const c=i-11;for(let f=5;f>=0;f--)for(let g=i-9;g>=c;g--)a=this.copyBit(g,f,a);let d=_e.decodeVersionInformation(a);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;a=0;for(let f=5;f>=0;f--)for(let g=i-9;g>=c;g--)a=this.copyBit(f,g,a);if(d=_e.decodeVersionInformation(a),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new K}copyBit(i,o,a){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?a<<1|1:a<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),a=bn.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const d=o.buildFunctionPattern();let f=!0;const g=new Uint8Array(o.getTotalCodewords());let _=0,x=0,C=0;for(let b=c-1;b>0;b-=2){b===6&&b--;for(let R=0;R<c;R++){const P=f?c-1-R:R;for(let z=0;z<2;z++)d.get(b-z,P)||(C++,x<<=1,this.bitMatrix.get(b-z,P)&&(x|=1),C===8&&(g[_++]=x,C=0,x=0))}f=!f}if(_!==o.getTotalCodewords())throw new K;return g}remask(){if(this.parsedFormatInfo===null)return;const i=bn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,a=i.getWidth();o<a;o++)for(let c=o+1,d=i.getHeight();c<d;c++)i.get(o,c)!==i.get(c,o)&&(i.flip(c,o),i.flip(o,c))}}class Zo{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,a){if(i.length!==o.getTotalCodewords())throw new I;const c=o.getECBlocksForLevel(a);let d=0;const f=c.getECBlocks();for(const z of f)d+=z.getCount();const g=new Array(d);let _=0;for(const z of f)for(let U=0;U<z.getCount();U++){const j=z.getDataCodewords(),X=c.getECCodewordsPerBlock()+j;g[_++]=new Zo(j,new Uint8Array(X))}const x=g[0].codewords.length;let C=g.length-1;for(;C>=0&&g[C].codewords.length!==x;)C--;C++;const b=x-c.getECCodewordsPerBlock();let R=0;for(let z=0;z<b;z++)for(let U=0;U<_;U++)g[U].codewords[z]=i[R++];for(let z=C;z<_;z++)g[z].codewords[b]=i[R++];const P=g[0].codewords.length;for(let z=b;z<P;z++)for(let U=0;U<_;U++){const j=U<C?z:z+1;g[U].codewords[j]=i[R++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Nn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Nn||(Nn={}));class Ne{constructor(i,o,a,c){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=a,this.bits=c,Ne.FOR_BITS.set(c,this),Ne.FOR_VALUE.set(i,this)}static forBits(i){const o=Ne.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let a;return o<=9?a=0:o<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ne))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Ne.FOR_BITS=new Map,Ne.FOR_VALUE=new Map,Ne.TERMINATOR=new Ne(Nn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ne.NUMERIC=new Ne(Nn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ne.ALPHANUMERIC=new Ne(Nn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ne.STRUCTURED_APPEND=new Ne(Nn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ne.BYTE=new Ne(Nn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ne.ECI=new Ne(Nn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ne.KANJI=new Ne(Nn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ne.FNC1_FIRST_POSITION=new Ne(Nn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ne.FNC1_SECOND_POSITION=new Ne(Nn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ne.HANZI=new Ne(Nn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(i,o,a,c){const d=new ro(i);let f=new $e;const g=new Array;let _=-1,x=-1;try{let C=null,b=!1,R;do{if(d.available()<4)R=Ne.TERMINATOR;else{const P=d.readBits(4);R=Ne.forBits(P)}switch(R){case Ne.TERMINATOR:break;case Ne.FNC1_FIRST_POSITION:case Ne.FNC1_SECOND_POSITION:b=!0;break;case Ne.STRUCTURED_APPEND:if(d.available()<16)throw new K;_=d.readBits(8),x=d.readBits(8);break;case Ne.ECI:const P=Ot.parseECIValue(d);if(C=te.getCharacterSetECIByValue(P),C===null)throw new K;break;case Ne.HANZI:const z=d.readBits(4),U=d.readBits(R.getCharacterCountBits(o));z===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(d,f,U);break;default:const j=d.readBits(R.getCharacterCountBits(o));switch(R){case Ne.NUMERIC:Ot.decodeNumericSegment(d,f,j);break;case Ne.ALPHANUMERIC:Ot.decodeAlphanumericSegment(d,f,j,b);break;case Ne.BYTE:Ot.decodeByteSegment(d,f,j,C,g,c);break;case Ne.KANJI:Ot.decodeKanjiSegment(d,f,j);break;default:throw new K}break}}while(R!==Ne.TERMINATOR)}catch{throw new K}return new gr(i,f.toString(),g.length===0?null:g,a===null?null:a.toString(),_,x)}static decodeHanziSegment(i,o,a){if(a*13>i.available())throw new K;const c=new Uint8Array(2*a);let d=0;for(;a>0;){const f=i.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,c[d]=g>>8&255,c[d+1]=g&255,d+=2,a--}try{o.append(je.decode(c,ve.GB2312))}catch(f){throw new K(f)}}static decodeKanjiSegment(i,o,a){if(a*13>i.available())throw new K;const c=new Uint8Array(2*a);let d=0;for(;a>0;){const f=i.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,c[d]=g>>8,c[d+1]=g,d+=2,a--}try{o.append(je.decode(c,ve.SHIFT_JIS))}catch(f){throw new K(f)}}static decodeByteSegment(i,o,a,c,d,f){if(8*a>i.available())throw new K;const g=new Uint8Array(a);for(let x=0;x<a;x++)g[x]=i.readBits(8);let _;c===null?_=ve.guessEncoding(g,f):_=c.getName();try{o.append(je.decode(g,_))}catch(x){throw new K(x)}d.push(g)}static toAlphaNumericChar(i){if(i>=Ot.ALPHANUMERIC_CHARS.length)throw new K;return Ot.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,a,c){const d=o.length();for(;a>1;){if(i.available()<11)throw new K;const f=i.readBits(11);o.append(Ot.toAlphaNumericChar(Math.floor(f/45))),o.append(Ot.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(i.available()<6)throw new K;o.append(Ot.toAlphaNumericChar(i.readBits(6)))}if(c)for(let f=d;f<o.length();f++)o.charAt(f)==="%"&&(f<o.length()-1&&o.charAt(f+1)==="%"?o.deleteCharAt(f+1):o.setCharAt(f,""))}static decodeNumericSegment(i,o,a){for(;a>=3;){if(i.available()<10)throw new K;const c=i.readBits(10);if(c>=1e3)throw new K;o.append(Ot.toAlphaNumericChar(Math.floor(c/100))),o.append(Ot.toAlphaNumericChar(Math.floor(c/10)%10)),o.append(Ot.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(i.available()<7)throw new K;const c=i.readBits(7);if(c>=100)throw new K;o.append(Ot.toAlphaNumericChar(Math.floor(c/10))),o.append(Ot.toAlphaNumericChar(c%10))}else if(a===1){if(i.available()<4)throw new K;const c=i.readBits(4);if(c>=10)throw new K;o.append(Ot.toAlphaNumericChar(c))}}static parseECIValue(i){const o=i.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const a=i.readBits(8);return(o&63)<<8&4294967295|a}if((o&224)===192){const a=i.readBits(16);return(o&31)<<16&4294967295|a}throw new K}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class Yo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class ba{constructor(){this.rsDecoder=new pr(it.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(Ye.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const a=new Go(i);let c=null;try{return this.decodeBitMatrixParser(a,o)}catch(d){c=d}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const d=this.decodeBitMatrixParser(a,o);return d.setOther(new Yo(!0)),d}catch(d){throw c!==null?c:d}}decodeBitMatrixParser(i,o){const a=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),f=Zo.getDataBlocks(d,a,c);let g=0;for(const C of f)g+=C.getNumDataCodewords();const _=new Uint8Array(g);let x=0;for(const C of f){const b=C.getCodewords(),R=C.getNumDataCodewords();this.correctErrors(b,R);for(let P=0;P<R;P++)_[x++]=b[P]}return Ot.decode(_,a,c,o)}correctErrors(i,o){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-o)}catch{throw new W}for(let c=0;c<o;c++)i[c]=a[c]}}class Xo extends Ee{constructor(i,o,a){super(i,o),this.estimatedModuleSize=a}aboutEquals(i,o,a){if(Math.abs(o-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,a){const c=(this.getX()+o)/2,d=(this.getY()+i)/2,f=(this.estimatedModuleSize+a)/2;return new Xo(c,d,f)}}class Dr{constructor(i,o,a,c,d,f,g){this.image=i,this.startX=o,this.startY=a,this.width=c,this.height=d,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,a=this.width,c=i+a,d=this.startY+o/2,f=new Int32Array(3),g=this.image;for(let _=0;_<o;_++){const x=d+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));f[0]=0,f[1]=0,f[2]=0;let C=i;for(;C<c&&!g.get(C,x);)C++;let b=0;for(;C<c;){if(g.get(C,x))if(b===1)f[1]++;else if(b===2){if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,x,C);if(R!==null)return R}f[0]=f[2],f[1]=1,f[2]=0,b=1}else f[++b]++;else b===1&&b++,f[b]++;C++}if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,x,c);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,a=o/2;for(let c=0;c<3;c++)if(Math.abs(o-i[c])>=a)return!1;return!0}crossCheckVertical(i,o,a,c){const d=this.image,f=d.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let _=i;for(;_>=0&&d.get(o,_)&&g[1]<=a;)g[1]++,_--;if(_<0||g[1]>a)return NaN;for(;_>=0&&!d.get(o,_)&&g[0]<=a;)g[0]++,_--;if(g[0]>a)return NaN;for(_=i+1;_<f&&d.get(o,_)&&g[1]<=a;)g[1]++,_++;if(_===f||g[1]>a)return NaN;for(;_<f&&!d.get(o,_)&&g[2]<=a;)g[2]++,_++;if(g[2]>a)return NaN;const x=g[0]+g[1]+g[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(g)?Dr.centerFromEnd(g,_):NaN}handlePossibleCenter(i,o,a){const c=i[0]+i[1]+i[2],d=Dr.centerFromEnd(i,a),f=this.crossCheckVertical(o,d,2*i[1],c);if(!isNaN(f)){const g=(i[0]+i[1]+i[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(g,f,d))return x.combineEstimate(f,d,g);const _=new Xo(d,f,g);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Ss extends Ee{constructor(i,o,a,c){super(i,o),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,a){if(Math.abs(o-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,a){const c=this.count+1,d=(this.count*this.getX()+o)/c,f=(this.count*this.getY()+i)/c,g=(this.count*this.estimatedModuleSize+a)/c;return new Ss(d,f,g,c)}}class Na{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class hn{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(ce.TRY_HARDER)!==void 0,a=i!=null&&i.get(ce.PURE_BARCODE)!==void 0,c=this.image,d=c.getHeight(),f=c.getWidth();let g=Math.floor(3*d/(4*hn.MAX_MODULES));(g<hn.MIN_SKIP||o)&&(g=hn.MIN_SKIP);let _=!1;const x=new Int32Array(5);for(let b=g-1;b<d&&!_;b+=g){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let R=0;for(let P=0;P<f;P++)if(c.get(P,b))(R&1)===1&&R++,x[R]++;else if(R&1)x[R]++;else if(R===4)if(hn.foundPatternCross(x)){if(this.handlePossibleCenter(x,b,P,a)===!0)if(g=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const U=this.findRowSkip();U>x[2]&&(b+=U-x[2]-g,P=f-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,R=3;continue}R=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,R=3;else x[++R]++;hn.foundPatternCross(x)&&this.handlePossibleCenter(x,b,f,a)===!0&&(g=x[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Ee.orderBestPatterns(C),new Na(C)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const f=i[d];if(f===0)return!1;o+=f}if(o<7)return!1;const a=o/7,c=a/2;return Math.abs(a-i[0])<c&&Math.abs(a-i[1])<c&&Math.abs(3*a-i[2])<3*c&&Math.abs(a-i[3])<c&&Math.abs(a-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,a,c){const d=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;i>=f&&o>=f&&g.get(o-f,i-f);)d[2]++,f++;if(i<f||o<f)return!1;for(;i>=f&&o>=f&&!g.get(o-f,i-f)&&d[1]<=a;)d[1]++,f++;if(i<f||o<f||d[1]>a)return!1;for(;i>=f&&o>=f&&g.get(o-f,i-f)&&d[0]<=a;)d[0]++,f++;if(d[0]>a)return!1;const _=g.getHeight(),x=g.getWidth();for(f=1;i+f<_&&o+f<x&&g.get(o+f,i+f);)d[2]++,f++;if(i+f>=_||o+f>=x)return!1;for(;i+f<_&&o+f<x&&!g.get(o+f,i+f)&&d[3]<a;)d[3]++,f++;if(i+f>=_||o+f>=x||d[3]>=a)return!1;for(;i+f<_&&o+f<x&&g.get(o+f,i+f)&&d[4]<a;)d[4]++,f++;if(d[4]>=a)return!1;const C=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(C-c)<2*c&&hn.foundPatternCross(d)}crossCheckVertical(i,o,a,c){const d=this.image,f=d.getHeight(),g=this.getCrossCheckStateCount();let _=i;for(;_>=0&&d.get(o,_);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(o,_)&&g[1]<=a;)g[1]++,_--;if(_<0||g[1]>a)return NaN;for(;_>=0&&d.get(o,_)&&g[0]<=a;)g[0]++,_--;if(g[0]>a)return NaN;for(_=i+1;_<f&&d.get(o,_);)g[2]++,_++;if(_===f)return NaN;for(;_<f&&!d.get(o,_)&&g[3]<a;)g[3]++,_++;if(_===f||g[3]>=a)return NaN;for(;_<f&&d.get(o,_)&&g[4]<a;)g[4]++,_++;if(g[4]>=a)return NaN;const x=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(x-c)>=2*c?NaN:hn.foundPatternCross(g)?hn.centerFromEnd(g,_):NaN}crossCheckHorizontal(i,o,a,c){const d=this.image,f=d.getWidth(),g=this.getCrossCheckStateCount();let _=i;for(;_>=0&&d.get(_,o);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!d.get(_,o)&&g[1]<=a;)g[1]++,_--;if(_<0||g[1]>a)return NaN;for(;_>=0&&d.get(_,o)&&g[0]<=a;)g[0]++,_--;if(g[0]>a)return NaN;for(_=i+1;_<f&&d.get(_,o);)g[2]++,_++;if(_===f)return NaN;for(;_<f&&!d.get(_,o)&&g[3]<a;)g[3]++,_++;if(_===f||g[3]>=a)return NaN;for(;_<f&&d.get(_,o)&&g[4]<a;)g[4]++,_++;if(g[4]>=a)return NaN;const x=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(x-c)>=c?NaN:hn.foundPatternCross(g)?hn.centerFromEnd(g,_):NaN}handlePossibleCenter(i,o,a,c){const d=i[0]+i[1]+i[2]+i[3]+i[4];let f=hn.centerFromEnd(i,a),g=this.crossCheckVertical(o,Math.floor(f),i[2],d);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),i[2],d),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),i[2],d)))){const _=d/7;let x=!1;const C=this.possibleCenters;for(let b=0,R=C.length;b<R;b++){const P=C[b];if(P.aboutEquals(_,g,f)){C[b]=P.combineEstimate(g,f,_),x=!0;break}}if(!x){const b=new Ss(f,g,_);C.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const a of this.possibleCenters)if(a.getCount()>=hn.CENTER_QUORUM)if(o==null)o=a;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-a.getX())-Math.abs(o.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=hn.CENTER_QUORUM&&(i++,o+=f.getEstimatedModuleSize());if(i<3)return!1;const c=o/a;let d=0;for(const f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-c);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new J;const o=this.possibleCenters;let a;if(i>3){let c=0,d=0;for(const _ of this.possibleCenters){const x=_.getEstimatedModuleSize();c+=x,d+=x*x}a=c/i;let f=Math.sqrt(d/i-a*a);o.sort((_,x)=>{const C=Math.abs(x.getEstimatedModuleSize()-a),b=Math.abs(_.getEstimatedModuleSize()-a);return C<b?-1:C>b?1:0});const g=Math.max(.2*a,f);for(let _=0;_<o.length&&o.length>3;_++){const x=o[_];Math.abs(x.getEstimatedModuleSize()-a)>g&&(o.splice(_,1),_--)}}if(o.length>3){let c=0;for(const d of o)c+=d.getEstimatedModuleSize();a=c/o.length,o.sort((d,f)=>{if(f.getCount()===d.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-a),_=Math.abs(d.getEstimatedModuleSize()-a);return g<_?1:g>_?-1:0}else return f.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}hn.CENTER_QUORUM=2,hn.MIN_SKIP=3,hn.MAX_MODULES=57;class Be{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(ce.NEED_RESULT_POINT_CALLBACK);const a=new hn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(a)}processFinderPatternInfo(i){const o=i.getTopLeft(),a=i.getTopRight(),c=i.getBottomLeft(),d=this.calculateModuleSize(o,a,c);if(d<1)throw new J("No pattern found in proccess finder.");const f=Be.computeDimension(o,a,c,d),g=_e.getProvisionalVersionForDimension(f),_=g.getDimensionForVersion()-7;let x=null;if(g.getAlignmentPatternCenters().length>0){const P=a.getX()-o.getX()+c.getX(),z=a.getY()-o.getY()+c.getY(),U=1-3/_,j=Math.floor(o.getX()+U*(P-o.getX())),X=Math.floor(o.getY()+U*(z-o.getY()));for(let ue=4;ue<=16;ue<<=1)try{x=this.findAlignmentInRegion(d,j,X,ue);break}catch(de){if(!(de instanceof J))throw de}}const C=Be.createTransform(o,a,c,x,f),b=Be.sampleGrid(this.image,C,f);let R;return x===null?R=[c,o,a]:R=[c,o,a,x],new dn(b,R)}static createTransform(i,o,a,c,d){const f=d-3.5;let g,_,x,C;return c!==null?(g=c.getX(),_=c.getY(),x=f-3,C=x):(g=o.getX()-i.getX()+a.getX(),_=o.getY()-i.getY()+a.getY(),x=f,C=f),He.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,x,C,3.5,f,i.getX(),i.getY(),o.getX(),o.getY(),g,_,a.getX(),a.getY())}static sampleGrid(i,o,a){return ln.getInstance().sampleGridWithTransform(i,a,a,o)}static computeDimension(i,o,a,c){const d=rt.round(Ee.distance(i,o)/c),f=rt.round(Ee.distance(i,a)/c);let g=Math.floor((d+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new J("Dimensions could be not found.")}return g}calculateModuleSize(i,o,a){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,a))/2}calculateModuleSizeOneWay(i,o){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,a,c){let d=this.sizeOfBlackWhiteBlackRun(i,o,a,c),f=1,g=i-(a-i);g<0?(f=i/(i-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(g-i),g=this.image.getWidth()-1);let _=Math.floor(o-(c-o)*f);return f=1,_<0?(f=o/(o-_),_=0):_>=this.image.getHeight()&&(f=(this.image.getHeight()-1-o)/(_-o),_=this.image.getHeight()-1),g=Math.floor(i+(g-i)*f),d+=this.sizeOfBlackWhiteBlackRun(i,o,g,_),d-1}sizeOfBlackWhiteBlackRun(i,o,a,c){const d=Math.abs(c-o)>Math.abs(a-i);if(d){let P=i;i=o,o=P,P=a,a=c,c=P}const f=Math.abs(a-i),g=Math.abs(c-o);let _=-f/2;const x=i<a?1:-1,C=o<c?1:-1;let b=0;const R=a+x;for(let P=i,z=o;P!==R;P+=x){const U=d?z:P,j=d?P:z;if(b===1===this.image.get(U,j)){if(b===2)return rt.distance(P,z,i,o);b++}if(_+=g,_>0){if(z===c)break;z+=C,_-=f}}return b===2?rt.distance(a+x,c,i,o):NaN}findAlignmentInRegion(i,o,a,c){const d=Math.floor(c*i),f=Math.max(0,o-d),g=Math.min(this.image.getWidth()-1,o+d);if(g-f<i*3)throw new J("Alignment top exceeds estimated module size.");const _=Math.max(0,a-d),x=Math.min(this.image.getHeight()-1,a+d);if(x-_<i*3)throw new J("Alignment bottom exceeds estimated module size.");return new Dr(this.image,f,_,g-f,x-_,i,this.resultPointCallback).find()}}class _n{constructor(){this.decoder=new ba}getDecoder(){return this.decoder}decode(i,o){let a,c;if(o!=null&&o.get(ce.PURE_BARCODE)!==void 0){const _=_n.extractPureBits(i.getBlackMatrix());a=this.decoder.decodeBitMatrix(_,o),c=_n.NO_POINTS}else{const _=new Be(i.getBlackMatrix()).detect(o);a=this.decoder.decodeBitMatrix(_.getBits(),o),c=_.getPoints()}a.getOther()instanceof Yo&&a.getOther().applyMirroredCorrection(c);const d=new Ue(a.getText(),a.getRawBytes(),void 0,c,ae.QR_CODE,void 0),f=a.getByteSegments();f!==null&&d.putMetadata(Et.BYTE_SEGMENTS,f);const g=a.getECLevel();return g!==null&&d.putMetadata(Et.ERROR_CORRECTION_LEVEL,g),a.hasStructuredAppend()&&(d.putMetadata(Et.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),d.putMetadata(Et.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(o===null||a===null)throw new J;const c=this.moduleSize(o,i);let d=o[1],f=a[1],g=o[0],_=a[0];if(g>=_||d>=f)throw new J;if(f-d!==_-g&&(_=g+(f-d),_>=i.getWidth()))throw new J;const x=Math.round((_-g+1)/c),C=Math.round((f-d+1)/c);if(x<=0||C<=0)throw new J;if(C!==x)throw new J;const b=Math.floor(c/2);d+=b,g+=b;const R=g+Math.floor((x-1)*c)-_;if(R>0){if(R>b)throw new J;g-=R}const P=d+Math.floor((C-1)*c)-f;if(P>0){if(P>b)throw new J;d-=P}const z=new Ye(x,C);for(let U=0;U<C;U++){const j=d+Math.floor(U*c);for(let X=0;X<x;X++)i.get(g+Math.floor(X*c),j)&&z.set(X,U)}return z}static moduleSize(i,o){const a=o.getHeight(),c=o.getWidth();let d=i[0],f=i[1],g=!0,_=0;for(;d<c&&f<a;){if(g!==o.get(d,f)){if(++_===5)break;g=!g}d++,f++}if(d===c||f===a)throw new J;return(d-i[0])/7}}_n.NO_POINTS=new Array;class ye{PDF417Common(){}static getBitCountSum(i){return rt.sum(i)}static toIntArray(i){if(i==null||!i.length)return ye.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let a=0;for(const c of i)o[a++]=c;return o}static getCodeword(i){const o=k.binarySearch(ye.SYMBOL_TABLE,i&262143);return o<0?-1:(ye.CODEWORD_TABLE[o]-1)%ye.NUMBER_OF_CODEWORDS}}ye.NUMBER_OF_CODEWORDS=929,ye.MAX_CODEWORDS_IN_BARCODE=ye.NUMBER_OF_CODEWORDS-1,ye.MIN_ROWS_IN_BARCODE=3,ye.MAX_ROWS_IN_BARCODE=90,ye.MODULES_IN_CODEWORD=17,ye.MODULES_IN_STOP_PATTERN=18,ye.BARS_IN_MODULE=8,ye.EMPTY_INT_ARRAY=new Int32Array([]),ye.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ye.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class nc{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(i,o,a){let c=i.getBlackMatrix(),d=We.detect(a,c);return d.length||(c=c.clone(),c.rotate180(),d=We.detect(a,c)),new nc(c,d)}static detect(i,o){const a=new Array;let c=0,d=0,f=!1;for(;c<o.getHeight();){const g=We.findVertices(o,c,d);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,d=0;for(const _ of a)_[1]!=null&&(c=Math.trunc(Math.max(c,_[1].getY()))),_[3]!=null&&(c=Math.max(c,Math.trunc(_[3].getY())));c+=We.ROW_STEP;continue}if(f=!0,a.push(g),!i)break;g[2]!=null?(d=Math.trunc(g[2].getX()),c=Math.trunc(g[2].getY())):(d=Math.trunc(g[4].getX()),c=Math.trunc(g[4].getY()))}return a}static findVertices(i,o,a){const c=i.getHeight(),d=i.getWidth(),f=new Array(8);return We.copyToResult(f,We.findRowsWithPattern(i,c,d,o,a,We.START_PATTERN),We.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY())),We.copyToResult(f,We.findRowsWithPattern(i,c,d,o,a,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),f}static copyToResult(i,o,a){for(let c=0;c<a.length;c++)i[a[c]]=o[c]}static findRowsWithPattern(i,o,a,c,d,f){const g=new Array(4);let _=!1;const x=new Int32Array(f.length);for(;c<o;c+=We.ROW_STEP){let b=We.findGuardPattern(i,d,c,a,!1,f,x);if(b!=null){for(;c>0;){const R=We.findGuardPattern(i,d,--c,a,!1,f,x);if(R!=null)b=R;else{c++;break}}g[0]=new Ee(b[0],c),g[1]=new Ee(b[1],c),_=!0;break}}let C=c+1;if(_){let b=0,R=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;C<o;C++){const P=We.findGuardPattern(i,R[0],C,a,!1,f,x);if(P!=null&&Math.abs(R[0]-P[0])<We.MAX_PATTERN_DRIFT&&Math.abs(R[1]-P[1])<We.MAX_PATTERN_DRIFT)R=P,b=0;else{if(b>We.SKIPPED_ROW_COUNT_MAX)break;b++}}C-=b+1,g[2]=new Ee(R[0],C),g[3]=new Ee(R[1],C)}return C-c<We.BARCODE_MIN_HEIGHT&&k.fill(g,null),g}static findGuardPattern(i,o,a,c,d,f,g){k.fillWithin(g,0,g.length,0);let _=o,x=0;for(;i.get(_,a)&&_>0&&x++<We.MAX_PIXEL_DRIFT;)_--;let C=_,b=0,R=f.length;for(let P=d;C<c;C++)if(i.get(C,a)!==P)g[b]++;else{if(b===R-1){if(We.patternMatchVariance(g,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([_,C]);_+=g[0]+g[1],V.arraycopy(g,2,g,0,b-1),g[b-1]=0,g[b]=0,b--}else b++;g[b]=1,P=!P}return b===R-1&&We.patternMatchVariance(g,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([_,C-1]):null}static patternMatchVariance(i,o,a){let c=i.length,d=0,f=0;for(let x=0;x<c;x++)d+=i[x],f+=o[x];if(d<f)return 1/0;let g=d/f;a*=g;let _=0;for(let x=0;x<c;x++){let C=i[x],b=o[x]*g,R=C>b?C-b:b-C;if(R>a)return 1/0;_+=R}return _/d}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class cn{constructor(i,o){if(o.length===0)throw new I;this.field=i;let a=o.length;if(a>1&&o[0]===0){let c=1;for(;c<a&&o[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),V.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let o=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)o=this.field.add(this.field.multiply(i,o),this.coefficients[c]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,a=i.coefficients;if(o.length>a.length){let f=o;o=a,a=f}let c=new Int32Array(a.length),d=a.length-o.length;V.arraycopy(a,0,c,0,d);for(let f=d;f<a.length;f++)c[f]=this.field.add(o[f-d],a[f]);return new cn(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof cn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new cn(this.field,new Int32Array([0]));let o=this.coefficients,a=o.length,c=i.coefficients,d=c.length,f=new Int32Array(a+d-1);for(let g=0;g<a;g++){let _=o[g];for(let x=0;x<d;x++)f[g+x]=this.field.add(f[g+x],this.field.multiply(_,c[x]))}return new cn(this.field,f)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let a=0;a<i;a++)o[a]=this.field.subtract(0,this.coefficients[a]);return new cn(this.field,o)}multiplyScalar(i){if(i===0)return new cn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.multiply(this.coefficients[c],i);return new cn(this.field,a)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new cn(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+i);for(let d=0;d<a;d++)c[d]=this.field.multiply(this.coefficients[d],o);return new cn(this.field,c)}toString(){let i=new $e;for(let o=this.getDegree();o>=0;o--){let a=this.getCoefficient(o);a!==0&&(a<0?(i.append(" - "),a=-a):i.length()>0&&i.append(" + "),(o===0||a!==1)&&i.append(a),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class Ra{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new Mi;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class $i extends Ra{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let a=1;for(let c=0;c<i;c++)this.expTable[c]=a,a=a*o%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let a=new Int32Array(i+1);return a[0]=o,new cn(this,a)}}$i.PDF417_GF=new $i(ye.NUMBER_OF_CODEWORDS,3);class As{constructor(){this.field=$i.PDF417_GF}decode(i,o,a){let c=new cn(this.field,i),d=new Int32Array(o),f=!1;for(let z=o;z>0;z--){let U=c.evaluateAt(this.field.exp(z));d[o-z]=U,U!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(a!=null)for(const z of a){let U=this.field.exp(i.length-1-z),j=new cn(this.field,new Int32Array([this.field.subtract(0,U),1]));g=g.multiply(j)}let _=new cn(this.field,d),x=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),_,o),C=x[0],b=x[1],R=this.findErrorLocations(C),P=this.findErrorMagnitudes(b,C,R);for(let z=0;z<R.length;z++){let U=i.length-1-this.field.log(R[z]);if(U<0)throw W.getChecksumInstance();i[U]=this.field.subtract(i[U],P[z])}return R.length}runEuclideanAlgorithm(i,o,a){if(i.getDegree()<o.getDegree()){let R=i;i=o,o=R}let c=i,d=o,f=this.field.getZero(),g=this.field.getOne();for(;d.getDegree()>=Math.round(a/2);){let R=c,P=f;if(c=d,f=g,c.isZero())throw W.getChecksumInstance();d=R;let z=this.field.getZero(),U=c.getCoefficient(c.getDegree()),j=this.field.inverse(U);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let X=d.getDegree()-c.getDegree(),ue=this.field.multiply(d.getCoefficient(d.getDegree()),j);z=z.add(this.field.buildMonomial(X,ue)),d=d.subtract(c.multiplyByMonomial(X,ue))}g=z.multiply(f).subtract(P).negative()}let _=g.getCoefficient(0);if(_===0)throw W.getChecksumInstance();let x=this.field.inverse(_),C=g.multiply(x),b=d.multiply(x);return[C,b]}findErrorLocations(i){let o=i.getDegree(),a=new Int32Array(o),c=0;for(let d=1;d<this.field.getSize()&&c<o;d++)i.evaluateAt(d)===0&&(a[c]=this.field.inverse(d),c++);if(c!==o)throw W.getChecksumInstance();return a}findErrorMagnitudes(i,o,a){let c=o.getDegree(),d=new Int32Array(c);for(let x=1;x<=c;x++)d[c-x]=this.field.multiply(x,o.getCoefficient(x));let f=new cn(this.field,d),g=a.length,_=new Int32Array(g);for(let x=0;x<g;x++){let C=this.field.inverse(a[x]),b=this.field.subtract(0,i.evaluateAt(C)),R=this.field.inverse(f.evaluateAt(C));_[x]=this.field.multiply(b,R)}return _}}class yi{constructor(i,o,a,c,d){i instanceof yi?this.constructor_2(i):this.constructor_1(i,o,a,c,d)}constructor_1(i,o,a,c,d){const f=o==null||a==null,g=c==null||d==null;if(f&&g)throw new J;f?(o=new Ee(0,c.getY()),a=new Ee(0,d.getY())):g&&(c=new Ee(i.getWidth()-1,o.getY()),d=new Ee(i.getWidth()-1,a.getY())),this.image=i,this.topLeft=o,this.bottomLeft=a,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new yi(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,a){let c=this.topLeft,d=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(i>0){let _=a?this.topLeft:this.topRight,x=Math.trunc(_.getY()-i);x<0&&(x=0);let C=new Ee(_.getX(),x);a?c=C:f=C}if(o>0){let _=a?this.bottomLeft:this.bottomRight,x=Math.trunc(_.getY()+o);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let C=new Ee(_.getX(),x);a?d=C:g=C}return new yi(this.image,c,d,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class yn{constructor(i,o,a,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=a,this.rowCount=o+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class xi{constructor(){this.buffer=""}static form(i,o){let a=-1;function c(f,g,_,x,C,b){if(f==="%%")return"%";if(o[++a]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let R=C?parseInt(C.substr(1)):void 0,P;switch(b){case"s":P=o[a];break;case"c":P=o[a][0];break;case"f":P=parseFloat(o[a]).toFixed(f);break;case"p":P=parseFloat(o[a]).toPrecision(f);break;case"e":P=parseFloat(o[a]).toExponential(f);break;case"x":P=parseInt(o[a]).toString(R||16);break;case"d":P=parseFloat(parseInt(o[a],R||10).toPrecision(f)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(R);let z=parseInt(_),U=_&&_[0]+""=="0"?"0":" ";for(;P.length<z;)P=g!==void 0?P+U:U+P;return P}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,c)}format(i,...o){this.buffer+=xi.form(i,o)}toString(){return this.buffer}}class oo{constructor(i){this.boundingBox=new yi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let a=1;a<oo.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(i)-a;if(c>=0&&(o=this.codewords[c],o!=null)||(c=this.imageRowToCodewordIndex(i)+a,c<this.codewords.length&&(o=this.codewords[c],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new xi;let o=0;for(const a of this.codewords){if(a==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,a.getRowNumber(),a.getValue())}return i.toString()}}oo.MAX_NEARBY_DISTANCE=5;class so{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[a,c]of this.values.entries()){const d={getKey:()=>a,getValue:()=>c};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return ye.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class ic extends oo{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),_=-1,x=1,C=0;for(let b=f;b<g;b++){if(o[b]==null)continue;let R=o[b],P=R.getRowNumber()-_;if(P===0)C++;else if(P===1)x=Math.max(x,C),C=1,_=R.getRowNumber();else if(P<0||R.getRowNumber()>=i.getRowCount()||P>b)o[b]=null;else{let z;x>2?z=(x-2)*P:z=P;let U=z>=b;for(let j=1;j<=z&&!U;j++)U=o[b-j]!=null;U?o[b]=null:(_=R.getRowNumber(),C=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.getCodewords(),_=-1;for(let x=d;x<f;x++){if(g[x]==null)continue;let C=g[x];C.setRowNumberAsRowIndicatorColumn();let b=C.getRowNumber()-_;b===0||(b===1?_=C.getRowNumber():C.getRowNumber()>=i.getRowCount()?g[x]=null:_=C.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new so,a=new so,c=new so,d=new so;for(let g of i){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let _=g.getValue()%30,x=g.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(_*3+1);break;case 1:d.setValue(_/3),c.setValue(_%3);break;case 2:o.setValue(_+1);break}}if(o.getValue().length===0||a.getValue().length===0||c.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<ye.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>ye.MAX_ROWS_IN_BARCODE)return null;let f=new yn(o.getValue()[0],a.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,o){for(let a=0;a<i.length;a++){let c=i[a];if(i[a]==null)continue;let d=c.getValue()%30,f=c.getRowNumber();if(f>o.getRowCount()){i[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[a]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[a]=null);break;case 2:d+1!==o.getColumnCount()&&(i[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ao{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=ye.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let a=this.detectionResultColumns[o].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,a))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++)if(i[a]!=null&&o[a]!=null&&i[a].getRowNumber()===o[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[a];d!=null&&(d.setRowNumber(i[a].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<o.length;a++){if(o[a]==null)continue;let c=o[a].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(d=ao.adjustRowNumberIfValid(c,d,g),g.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let a=0;a<o.length;a++){if(o[a]==null)continue;let c=o[a].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(d=ao.adjustRowNumberIfValid(c,d,g),g.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(i)?(a.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,a){if(!this.detectionResultColumns[i-1])return;let c=a[o],d=this.detectionResultColumns[i-1].getCodewords(),f=d;this.detectionResultColumns[i+1]!=null&&(f=this.detectionResultColumns[i+1].getCodewords());let g=new Array(14);g[2]=d[o],g[3]=f[o],o>0&&(g[0]=a[o-1],g[4]=d[o-1],g[5]=f[o-1]),o>1&&(g[8]=a[o-2],g[10]=d[o-2],g[11]=f[o-2]),o<a.length-1&&(g[1]=a[o+1],g[6]=d[o+1],g[7]=f[o+1]),o<a.length-2&&(g[9]=a[o+2],g[12]=d[o+2],g[13]=f[o+2]);for(let _ of g)if(ao.adjustRowNumber(c,_))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new xi;for(let a=0;a<i.getCodewords().length;a++){o.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[a];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Pr{constructor(i,o,a,c){this.rowNumber=Pr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Pr.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Pr.BARCODE_ROW_UNKNOWN=-1;class zn{static initialize(){for(let i=0;i<ye.SYMBOL_TABLE.length;i++){let o=ye.SYMBOL_TABLE[i],a=o&1;for(let c=0;c<ye.BARS_IN_MODULE;c++){let d=0;for(;(o&1)===a;)d+=1,o>>=1;a=o&1,zn.RATIOS_TABLE[i]||(zn.RATIOS_TABLE[i]=new Array(ye.BARS_IN_MODULE)),zn.RATIOS_TABLE[i][ye.BARS_IN_MODULE-c-1]=Math.fround(d/ye.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=zn.getDecodedCodewordValue(zn.sampleBitCounts(i));return o!==-1?o:zn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=rt.sum(i),a=new Int32Array(ye.BARS_IN_MODULE),c=0,d=0;for(let f=0;f<ye.MODULES_IN_CODEWORD;f++){let g=o/(2*ye.MODULES_IN_CODEWORD)+f*o/ye.MODULES_IN_CODEWORD;d+i[c]<=g&&(d+=i[c],c++),a[c]++}return a}static getDecodedCodewordValue(i){let o=zn.getBitValue(i);return ye.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let a=0;a<i.length;a++)for(let c=0;c<i[a];c++)o=o<<1|(a%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=rt.sum(i),a=new Array(ye.BARS_IN_MODULE);if(o>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(i[f]/o);let c=Nr.MAX_VALUE,d=-1;this.bSymbolTableReady||zn.initialize();for(let f=0;f<zn.RATIOS_TABLE.length;f++){let g=0,_=zn.RATIOS_TABLE[f];for(let x=0;x<ye.BARS_IN_MODULE;x++){let C=Math.fround(_[x]-a[x]);if(g+=Math.fround(C*C),g>=c)break}g<c&&(c=g,d=ye.SYMBOL_TABLE[f])}return d}}zn.bSymbolTableReady=!1,zn.RATIOS_TABLE=new Array(ye.SYMBOL_TABLE.length).map(T=>new Array(ye.BARS_IN_MODULE));class Ma{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class ot{static parseLong(i,o=void 0){return parseInt(i,o)}}class rc extends y{}rc.kind="NullPointerException";class wi{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,a){if(i==null)throw new rc;if(o<0||o>i.length||a<0||o+a>i.length||o+a<0)throw new me;if(a===0)return;for(let c=0;c<a;c++)this.write(i[o+c])}flush(){}close(){}}class Qo extends y{}class oc extends wi{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let a=this.buf.length<<1;if(a-i<0&&(a=i),a<0){if(i<0)throw new Qo;a=B.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,a)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,a){if(o<0||o>i.length||a<0||o+a-i.length>0)throw new me;this.ensureCapacity(this.count+a),V.arraycopy(i,o,this.buf,this.count,a),this.count+=a}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var St;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function Is(){if(typeof window<"u")return window.BigInt||null;if(typeof Ls<"u")return Ls.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ts;function Ji(T){if(typeof Ts>"u"&&(Ts=Is()),Ts===null)throw new Error("BigInt is not supported!");return Ts(T)}function cd(){let T=[];T[0]=Ji(1);let i=Ji(900);T[1]=i;for(let o=2;o<16;o++)T[o]=T[o-1]*i;return T}class Q{static decode(i,o){let a=new $e(""),c=te.ISO8859_1;a.enableDecoding(c);let d=1,f=i[d++],g=new Ma;for(;d<i[0];){switch(f){case Q.TEXT_COMPACTION_MODE_LATCH:d=Q.textCompaction(i,d,a);break;case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:d=Q.byteCompaction(f,i,c,d,a);break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d++]);break;case Q.NUMERIC_COMPACTION_MODE_LATCH:d=Q.numericCompaction(i,d,a);break;case Q.ECI_CHARSET:te.getCharacterSetECIByValue(i[d++]);break;case Q.ECI_GENERAL_PURPOSE:d+=2;break;case Q.ECI_USER_DEFINED:d++;break;case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=Q.decodeMacroBlock(i,d,g);break;case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:throw new K;default:d--,d=Q.textCompaction(i,d,a);break}if(d<i.length)f=i[d++];else throw K.getFormatInstance()}if(a.length()===0)throw K.getFormatInstance();let _=new gr(null,a.toString(),null,o);return _.setOther(g),_}static decodeMacroBlock(i,o,a){if(o+Q.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw K.getFormatInstance();let c=new Int32Array(Q.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<Q.NUMBER_OF_SEQUENCE_CODEWORDS;g++,o++)c[g]=i[o];a.setSegmentIndex(B.parseInt(Q.decodeBase900toBase10(c,Q.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new $e;o=Q.textCompaction(i,o,d),a.setFileId(d.toString());let f=-1;for(i[o]===Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=o+1);o<i[0];)switch(i[o]){case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new $e;o=Q.textCompaction(i,o+1,g),a.setFileName(g.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new $e;o=Q.textCompaction(i,o+1,_),a.setSender(_.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new $e;o=Q.textCompaction(i,o+1,x),a.setAddressee(x.toString());break;case Q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new $e;o=Q.numericCompaction(i,o+1,C),a.setSegmentCount(B.parseInt(C.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let b=new $e;o=Q.numericCompaction(i,o+1,b),a.setTimestamp(ot.parseLong(b.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new $e;o=Q.numericCompaction(i,o+1,R),a.setChecksum(B.parseInt(R.toString()));break;case Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let P=new $e;o=Q.numericCompaction(i,o+1,P),a.setFileSize(ot.parseLong(P.toString()));break;default:throw K.getFormatInstance()}break;case Q.MACRO_PDF417_TERMINATOR:o++,a.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(f!==-1){let g=o-f;a.isLastSegment()&&g--,a.setOptionalData(k.copyOfRange(i,f,f+g))}return o}static textCompaction(i,o,a){let c=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),f=0,g=!1;for(;o<i[0]&&!g;){let _=i[o++];if(_<Q.TEXT_COMPACTION_MODE_LATCH)c[f]=_/30,c[f+1]=_%30,f+=2;else switch(_){case Q.TEXT_COMPACTION_MODE_LATCH:c[f++]=Q.TEXT_COMPACTION_MODE_LATCH;break;case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:o--,g=!0;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[o++],d[f]=_,f++;break}}return Q.decodeTextCompaction(c,d,f,a),o}static decodeTextCompaction(i,o,a,c){let d=St.ALPHA,f=St.ALPHA,g=0;for(;g<a;){let _=i[g],x="";switch(d){case St.ALPHA:if(_<26)x=String.fromCharCode(65+_);else switch(_){case 26:x=" ";break;case Q.LL:d=St.LOWER;break;case Q.ML:d=St.MIXED;break;case Q.PS:f=d,d=St.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.LOWER:if(_<26)x=String.fromCharCode(97+_);else switch(_){case 26:x=" ";break;case Q.AS:f=d,d=St.ALPHA_SHIFT;break;case Q.ML:d=St.MIXED;break;case Q.PS:f=d,d=St.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.MIXED:if(_<Q.PL)x=Q.MIXED_CHARS[_];else switch(_){case Q.PL:d=St.PUNCT;break;case 26:x=" ";break;case Q.LL:d=St.LOWER;break;case Q.AL:d=St.ALPHA;break;case Q.PS:f=d,d=St.PUNCT_SHIFT;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.PUNCT:if(_<Q.PAL)x=Q.PUNCT_CHARS[_];else switch(_){case Q.PAL:d=St.ALPHA;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(d=f,_<26)x=String.fromCharCode(65+_);else switch(_){case 26:x=" ";break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(d=f,_<Q.PAL)x=Q.PUNCT_CHARS[_];else switch(_){case Q.PAL:d=St.ALPHA;break;case Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g]);break;case Q.TEXT_COMPACTION_MODE_LATCH:d=St.ALPHA;break}break}x!==""&&c.append(x),g++}}static byteCompaction(i,o,a,c,d){let f=new oc,g=0,_=0,x=!1;switch(i){case Q.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),b=o[c++];for(;c<o[0]&&!x;)switch(C[g++]=b,_=900*_+b,b=o[c++],b){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(g%5===0&&g>0){for(let R=0;R<6;++R)f.write(Number(Ji(_)>>Ji(8*(5-R))));_=0,g=0}break}c===o[0]&&b<Q.TEXT_COMPACTION_MODE_LATCH&&(C[g++]=b);for(let R=0;R<g;R++)f.write(C[R]);break;case Q.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!x;){let R=o[c++];if(R<Q.TEXT_COMPACTION_MODE_LATCH)g++,_=900*_+R;else switch(R){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.NUMERIC_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(g%5===0&&g>0){for(let P=0;P<6;++P)f.write(Number(Ji(_)>>Ji(8*(5-P))));_=0,g=0}}break}return d.append(je.decode(f.toByteArray(),a)),c}static numericCompaction(i,o,a){let c=0,d=!1,f=new Int32Array(Q.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let g=i[o++];if(o===i[0]&&(d=!0),g<Q.TEXT_COMPACTION_MODE_LATCH)f[c]=g,c++;else switch(g){case Q.TEXT_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH:case Q.BYTE_COMPACTION_MODE_LATCH_6:case Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Q.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(c%Q.MAX_NUMERIC_CODEWORDS===0||g===Q.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(a.append(Q.decodeBase900toBase10(f,c)),c=0)}return o}static decodeBase900toBase10(i,o){let a=Ji(0);for(let d=0;d<o;d++)a+=Q.EXP900[o-d-1]*Ji(i[d]);let c=a.toString();if(c.charAt(0)!=="1")throw new K;return c.substring(1)}}Q.TEXT_COMPACTION_MODE_LATCH=900,Q.BYTE_COMPACTION_MODE_LATCH=901,Q.NUMERIC_COMPACTION_MODE_LATCH=902,Q.BYTE_COMPACTION_MODE_LATCH_6=924,Q.ECI_USER_DEFINED=925,Q.ECI_GENERAL_PURPOSE=926,Q.ECI_CHARSET=927,Q.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Q.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Q.MACRO_PDF417_TERMINATOR=922,Q.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Q.MAX_NUMERIC_CODEWORDS=15,Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Q.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Q.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Q.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Q.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Q.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Q.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Q.PL=25,Q.LL=27,Q.AS=27,Q.ML=28,Q.AL=28,Q.PS=29,Q.PAL=29,Q.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Q.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Q.EXP900=Is()?cd():[],Q.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ze{constructor(){}static decode(i,o,a,c,d,f,g){let _=new yi(i,o,a,c,d),x=null,C=null,b;for(let z=!0;;z=!1){if(o!=null&&(x=Ze.getRowIndicatorColumn(i,_,o,!0,f,g)),c!=null&&(C=Ze.getRowIndicatorColumn(i,_,c,!1,f,g)),b=Ze.merge(x,C),b==null)throw J.getNotFoundInstance();let U=b.getBoundingBox();if(z&&U!=null&&(U.getMinY()<_.getMinY()||U.getMaxY()>_.getMaxY()))_=U;else break}b.setBoundingBox(_);let R=b.getBarcodeColumnCount()+1;b.setDetectionResultColumn(0,x),b.setDetectionResultColumn(R,C);let P=x!=null;for(let z=1;z<=R;z++){let U=P?z:R-z;if(b.getDetectionResultColumn(U)!==void 0)continue;let j;U===0||U===R?j=new ic(_,U===0):j=new oo(_),b.setDetectionResultColumn(U,j);let X=-1,ue=X;for(let de=_.getMinY();de<=_.getMaxY();de++){if(X=Ze.getStartColumn(b,U,de,P),X<0||X>_.getMaxX()){if(ue===-1)continue;X=ue}let oe=Ze.detectCodeword(i,_.getMinX(),_.getMaxX(),P,X,de,f,g);oe!=null&&(j.setCodeword(de,oe),ue=X,f=Math.min(f,oe.getWidth()),g=Math.max(g,oe.getWidth()))}}return Ze.createDecoderResult(b)}static merge(i,o){if(i==null&&o==null)return null;let a=Ze.getBarcodeMetadata(i,o);if(a==null)return null;let c=yi.merge(Ze.adjustBoundingBox(i),Ze.adjustBoundingBox(o));return new ao(a,c)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let a=Ze.getMax(o),c=0;for(let g of o)if(c+=a-g,g>0)break;let d=i.getCodewords();for(let g=0;c>0&&d[g]==null;g++)c--;let f=0;for(let g=o.length-1;g>=0&&(f+=a-o[g],!(o[g]>0));g--);for(let g=d.length-1;f>0&&d[g]==null;g--)f--;return i.getBoundingBox().addMissingRows(c,f,i.isLeft())}static getMax(i){let o=-1;for(let a of i)o=Math.max(o,a);return o}static getBarcodeMetadata(i,o){let a;if(i==null||(a=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let c;return o==null||(c=o.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(i,o,a,c,d,f){let g=new ic(o,c);for(let _=0;_<2;_++){let x=_===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let b=Math.trunc(Math.trunc(a.getY()));b<=o.getMaxY()&&b>=o.getMinY();b+=x){let R=Ze.detectCodeword(i,0,i.getWidth(),c,C,b,d,f);R!=null&&(g.setCodeword(b,R),c?C=R.getStartX():C=R.getEndX())}}return g}static adjustCodewordCount(i,o){let a=o[0][1],c=a.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ze.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(d<1||d>ye.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();a.setValue(d)}else c[0]!==d&&a.setValue(d)}static createDecoderResult(i){let o=Ze.createBarcodeMatrix(i);Ze.adjustCodewordCount(i,o);let a=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],f=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let x=0;x<i.getBarcodeColumnCount();x++){let C=o[_][x+1].getValue(),b=_*i.getBarcodeColumnCount()+x;C.length===0?a.push(b):C.length===1?c[b]=C[0]:(f.push(b),d.push(C))}let g=new Array(d.length);for(let _=0;_<g.length;_++)g[_]=d[_];return Ze.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,ye.toIntArray(a),ye.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(i,o,a,c,d){let f=new Int32Array(c.length),g=100;for(;g-- >0;){for(let _=0;_<f.length;_++)o[c[_]]=d[_][f[_]];try{return Ze.decodeCodewords(o,i,a)}catch(_){if(!(_ instanceof W))throw _}if(f.length===0)throw W.getChecksumInstance();for(let _=0;_<f.length;_++)if(f[_]<d[_].length-1){f[_]++;break}else if(f[_]=0,_===f.length-1)throw W.getChecksumInstance()}throw W.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let d=0;d<o[c].length;d++)o[c][d]=new so;let a=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let d of c.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=o.length)continue;o[f][a].setValue(d.getValue())}}}a++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,a,c){let d=c?1:-1,f=null;if(Ze.isValidBarcodeColumn(i,o-d)&&(f=i.getDetectionResultColumn(o-d).getCodeword(a)),f!=null)return c?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(o).getCodewordNearby(a),f!=null)return c?f.getStartX():f.getEndX();if(Ze.isValidBarcodeColumn(i,o-d)&&(f=i.getDetectionResultColumn(o-d).getCodewordNearby(a)),f!=null)return c?f.getEndX():f.getStartX();let g=0;for(;Ze.isValidBarcodeColumn(i,o-d);){o-=d;for(let _ of i.getDetectionResultColumn(o).getCodewords())if(_!=null)return(c?_.getEndX():_.getStartX())+d*g*(_.getEndX()-_.getStartX());g++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,a,c,d,f,g,_){d=Ze.adjustCodewordStartColumn(i,o,a,c,d,f);let x=Ze.getModuleBitCount(i,o,a,c,d,f);if(x==null)return null;let C,b=rt.sum(x);if(c)C=d+b;else{for(let z=0;z<x.length/2;z++){let U=x[z];x[z]=x[x.length-1-z],x[x.length-1-z]=U}C=d,d=C-b}if(!Ze.checkCodewordSkew(b,g,_))return null;let R=zn.getDecodedValue(x),P=ye.getCodeword(R);return P===-1?null:new Pr(d,C,Ze.getCodewordBucketNumber(R),P)}static getModuleBitCount(i,o,a,c,d,f){let g=d,_=new Int32Array(8),x=0,C=c?1:-1,b=c;for(;(c?g<a:g>=o)&&x<_.length;)i.get(g,f)===b?(_[x]++,g+=C):(x++,b=!b);return x===_.length||g===(c?a:o)&&x===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,a,c,d,f){let g=d,_=c?-1:1;for(let x=0;x<2;x++){for(;(c?g>=o:g<a)&&c===i.get(g,f);){if(Math.abs(d-g)>Ze.CODEWORD_SKEW_SIZE)return d;g+=_}_=-_,c=!c}return g}static checkCodewordSkew(i,o,a){return o-Ze.CODEWORD_SKEW_SIZE<=i&&i<=a+Ze.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,a){if(i.length===0)throw K.getFormatInstance();let c=1<<o+1,d=Ze.correctErrors(i,a,c);Ze.verifyCodewordCount(i,c);let f=Q.decode(i,""+o);return f.setErrorsCorrected(d),f.setErasures(a.length),f}static correctErrors(i,o,a){if(o!=null&&o.length>a/2+Ze.MAX_ERRORS||a<0||a>Ze.MAX_EC_CODEWORDS)throw W.getChecksumInstance();return Ze.errorCorrection.decode(i,a,o)}static verifyCodewordCount(i,o){if(i.length<4)throw K.getFormatInstance();let a=i[0];if(a>i.length)throw K.getFormatInstance();if(a===0)if(o<i.length)i[0]=i.length-o;else throw K.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),a=0,c=o.length-1;for(;!((i&1)!==a&&(a=i&1,c--,c<0));)o[c]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ze.getCodewordBucketNumber(Ze.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new xi;for(let a=0;a<i.length;a++){o.format("Row %2d: ",a);for(let c=0;c<i[a].length;c++){let d=i[a][c];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}Ze.CODEWORD_SKEW_SIZE=2,Ze.MAX_ERRORS=3,Ze.MAX_EC_CODEWORDS=512,Ze.errorCorrection=new As;class xn{decode(i,o=null){let a=xn.decode(i,o,!1);if(a==null||a.length===0||a[0]==null)throw J.getNotFoundInstance();return a[0]}decodeMultiple(i,o=null){try{return xn.decode(i,o,!0)}catch(a){throw a instanceof K||a instanceof W?J.getNotFoundInstance():a}}static decode(i,o,a){const c=new Array,d=We.detectMultiple(i,o,a);for(const f of d.getPoints()){const g=Ze.decode(d.getBits(),f[4],f[5],f[6],f[7],xn.getMinCodewordWidth(f),xn.getMaxCodewordWidth(f)),_=new Ue(g.getText(),g.getRawBytes(),void 0,f,ae.PDF_417);_.putMetadata(Et.ERROR_CORRECTION_LEVEL,g.getECLevel());const x=g.getOther();x!=null&&_.putMetadata(Et.PDF417_EXTRA_METADATA,x),c.push(_)}return c.map(f=>f)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?B.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(xn.getMaxWidth(i[0],i[4]),xn.getMaxWidth(i[6],i[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.max(xn.getMaxWidth(i[1],i[5]),xn.getMaxWidth(i[7],i[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(xn.getMinWidth(i[0],i[4]),xn.getMinWidth(i[6],i[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.min(xn.getMinWidth(i[1],i[5]),xn.getMinWidth(i[7],i[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}reset(){}}class Jn extends y{}Jn.kind="ReaderException";class sc{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!r(i)&&i.get(ce.TRY_HARDER)===!0,a=r(i)?null:i.get(ce.POSSIBLE_FORMATS),c=new Array;if(!r(a)){const d=a.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);d&&!o&&c.push(new yr(i,this.verbose)),a.includes(ae.QR_CODE)&&c.push(new _n),a.includes(ae.DATA_MATRIX)&&c.push(new Ct),a.includes(ae.AZTEC)&&c.push(new mt),a.includes(ae.PDF_417)&&c.push(new xn),d&&o&&c.push(new yr(i,this.verbose))}c.length===0&&(o||c.push(new yr(i,this.verbose)),c.push(new _n),c.push(new Ct),c.push(new mt),c.push(new xn),o&&c.push(new yr(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Jn("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(a){if(a instanceof Jn)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class ac extends At{constructor(i=null,o=500){const a=new sc;a.setHints(i),super(a,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class xr extends At{constructor(i=500){super(new xn,i)}}class lc extends At{constructor(i=500){super(new _n,i)}}var bs;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(bs||(bs={}));var $t=bs;class Oa{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new an(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let a=o[o.length-1];const c=this.field;for(let d=o.length;d<=i;d++){const f=a.multiply(new an(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));o.push(f),a=f}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const a=i.length-o;if(a<=0)throw new I("No data bytes provided");const c=this.buildGenerator(o),d=new Int32Array(a);V.arraycopy(i,0,d,0,a);let f=new an(this.field,d);f=f.multiplyByMonomial(o,1);const _=f.divide(c)[1].getCoefficients(),x=o-_.length;for(let C=0;C<x;C++)i[a+C]=0;V.arraycopy(_,0,i,a+x,_.length)}}class Wt{constructor(){}static applyMaskPenaltyRule1(i){return Wt.applyMaskPenaltyRule1Internal(i,!0)+Wt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const a=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let f=0;f<d-1;f++){const g=a[f];for(let _=0;_<c-1;_++){const x=g[_];x===g[_+1]&&x===a[f+1][_]&&x===a[f+1][_+1]&&o++}}return Wt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const a=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let f=0;f<d;f++)for(let g=0;g<c;g++){const _=a[f];g+6<c&&_[g]===1&&_[g+1]===0&&_[g+2]===1&&_[g+3]===1&&_[g+4]===1&&_[g+5]===0&&_[g+6]===1&&(Wt.isWhiteHorizontal(_,g-4,g)||Wt.isWhiteHorizontal(_,g+7,g+11))&&o++,f+6<d&&a[f][g]===1&&a[f+1][g]===0&&a[f+2][g]===1&&a[f+3][g]===1&&a[f+4][g]===1&&a[f+5][g]===0&&a[f+6][g]===1&&(Wt.isWhiteVertical(a,g,f-4,f)||Wt.isWhiteVertical(a,g,f+7,f+11))&&o++}return o*Wt.N3}static isWhiteHorizontal(i,o,a){o=Math.max(o,0),a=Math.min(a,i.length);for(let c=o;c<a;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,o,a,c){a=Math.max(a,0),c=Math.min(c,i.length);for(let d=a;d<c;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const a=i.getArray(),c=i.getWidth(),d=i.getHeight();for(let _=0;_<d;_++){const x=a[_];for(let C=0;C<c;C++)x[C]===1&&o++}const f=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-f)*10/f)*Wt.N4}static getDataMaskBit(i,o,a){let c,d;switch(i){case 0:c=a+o&1;break;case 1:c=a&1;break;case 2:c=o%3;break;case 3:c=(a+o)%3;break;case 4:c=Math.floor(a/2)+Math.floor(o/3)&1;break;case 5:d=a*o,c=(d&1)+d%3;break;case 6:d=a*o,c=(d&1)+d%3&1;break;case 7:d=a*o,c=d%3+(a+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,o){let a=0;const c=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),f=i.getArray();for(let g=0;g<c;g++){let _=0,x=-1;for(let C=0;C<d;C++){const b=o?f[g][C]:f[C][g];b===x?_++:(_>=5&&(a+=Wt.N1+(_-5)),_=1,x=b)}_>=5&&(a+=Wt.N1+(_-5))}return a}}Wt.N1=3,Wt.N2=3,Wt.N3=40,Wt.N4=10;class Ko{constructor(i,o){this.width=i,this.height=o;const a=new Array(o);for(let c=0;c!==o;c++)a[c]=new Uint8Array(i);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,a){this.bytes[o][i]=a}setBoolean(i,o,a){this.bytes[o][i]=a?1:0}clear(i){for(const o of this.bytes)k.fill(o,i)}equals(i){if(!(i instanceof Ko))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let a=0,c=this.height;a<c;++a){const d=this.bytes[a],f=o.bytes[a];for(let g=0,_=this.width;g<_;++g)if(d[g]!==f[g])return!1}return!0}toString(){const i=new $e;for(let o=0,a=this.height;o<a;++o){const c=this.bytes[o];for(let d=0,f=this.width;d<f;++d)switch(c[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class kr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new $e;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<kr.NUM_MASK_PATTERNS}}kr.NUM_MASK_PATTERNS=8;class Tt extends y{}Tt.kind="WriterException";class Me{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,a,c,d){Me.clearMatrix(d),Me.embedBasicPatterns(a,d),Me.embedTypeInfo(o,c,d),Me.maybeEmbedVersionInfo(a,d),Me.embedDataBits(i,c,d)}static embedBasicPatterns(i,o){Me.embedPositionDetectionPatternsAndSeparators(o),Me.embedDarkDotAtLeftBottomCorner(o),Me.maybeEmbedPositionAdjustmentPatterns(i,o),Me.embedTimingPatterns(o)}static embedTypeInfo(i,o,a){const c=new $;Me.makeTypeInfoBits(i,o,c);for(let d=0,f=c.getSize();d<f;++d){const g=c.get(c.getSize()-1-d),_=Me.TYPE_INFO_COORDINATES[d],x=_[0],C=_[1];if(a.setBoolean(x,C,g),d<8){const b=a.getWidth()-d-1;a.setBoolean(b,8,g)}else{const R=a.getHeight()-7+(d-8);a.setBoolean(8,R,g)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const a=new $;Me.makeVersionInfoBits(i,a);let c=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const g=a.get(c);c--,o.setBoolean(d,o.getHeight()-11+f,g),o.setBoolean(o.getHeight()-11+f,d,g)}}static embedDataBits(i,o,a){let c=0,d=-1,f=a.getWidth()-1,g=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<a.getHeight();){for(let _=0;_<2;++_){const x=f-_;if(!Me.isEmpty(a.get(x,g)))continue;let C;c<i.getSize()?(C=i.get(c),++c):C=!1,o!==255&&Wt.getDataMaskBit(o,x,g)&&(C=!C),a.setBoolean(x,g,C)}g+=d}d=-d,g+=d,f-=2}if(c!==i.getSize())throw new Tt("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-B.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const a=Me.findMSBSet(o);for(i<<=a-1;Me.findMSBSet(i)>=a;)i^=o<<Me.findMSBSet(i)-a;return i}static makeTypeInfoBits(i,o,a){if(!kr.isValidMaskPattern(o))throw new Tt("Invalid mask pattern");const c=i.getBits()<<3|o;a.appendBits(c,5);const d=Me.calculateBCHCode(c,Me.TYPE_INFO_POLY);a.appendBits(d,10);const f=new $;if(f.appendBits(Me.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new Tt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const a=Me.calculateBCHCode(i.getVersionNumber(),Me.VERSION_INFO_POLY);if(o.appendBits(a,12),o.getSize()!==18)throw new Tt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const a=(o+1)%2;Me.isEmpty(i.get(o,6))&&i.setNumber(o,6,a),Me.isEmpty(i.get(6,o))&&i.setNumber(6,o,a)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Tt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,a){for(let c=0;c<8;++c){if(!Me.isEmpty(a.get(i+c,o)))throw new Tt;a.setNumber(i+c,o,0)}}static embedVerticalSeparationPattern(i,o,a){for(let c=0;c<7;++c){if(!Me.isEmpty(a.get(i,o+c)))throw new Tt;a.setNumber(i,o+c,0)}}static embedPositionAdjustmentPattern(i,o,a){for(let c=0;c<5;++c){const d=Me.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)a.setNumber(i+f,o+c,d[f])}}static embedPositionDetectionPattern(i,o,a){for(let c=0;c<7;++c){const d=Me.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)a.setNumber(i+f,o+c,d[f])}}static embedPositionDetectionPatternsAndSeparators(i){const o=Me.POSITION_DETECTION_PATTERN[0].length;Me.embedPositionDetectionPattern(0,0,i),Me.embedPositionDetectionPattern(i.getWidth()-o,0,i),Me.embedPositionDetectionPattern(0,i.getWidth()-o,i);const a=8;Me.embedHorizontalSeparationPattern(0,a-1,i),Me.embedHorizontalSeparationPattern(i.getWidth()-a,a-1,i),Me.embedHorizontalSeparationPattern(0,i.getWidth()-a,i);const c=7;Me.embedVerticalSeparationPattern(c,0,i),Me.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),Me.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const a=i.getVersionNumber()-1,c=Me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let d=0,f=c.length;d!==f;d++){const g=c[d];if(g>=0)for(let _=0;_!==f;_++){const x=c[_];x>=0&&Me.isEmpty(o.get(x,g))&&Me.embedPositionAdjustmentPattern(x-2,g-2,o)}}}}Me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Me.VERSION_INFO_POLY=7973,Me.TYPE_INFO_POLY=1335,Me.TYPE_INFO_MASK_PATTERN=21522;class ud{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rt{constructor(){}static calculateMaskPenalty(i){return Wt.applyMaskPenaltyRule1(i)+Wt.applyMaskPenaltyRule2(i)+Wt.applyMaskPenaltyRule3(i)+Wt.applyMaskPenaltyRule4(i)}static encode(i,o,a=null){let c=Rt.DEFAULT_BYTE_MODE_ENCODING;const d=a!==null&&a.get($t.CHARACTER_SET)!==void 0;d&&(c=a.get($t.CHARACTER_SET).toString());const f=this.chooseMode(i,c),g=new $;if(f===Ne.BYTE&&(d||Rt.DEFAULT_BYTE_MODE_ENCODING!==c)){const de=te.getCharacterSetECIByName(c);de!==void 0&&this.appendECI(de,g)}this.appendModeInfo(f,g);const _=new $;this.appendBytes(i,f,_,c);let x;if(a!==null&&a.get($t.QR_VERSION)!==void 0){const de=Number.parseInt(a.get($t.QR_VERSION).toString(),10);x=_e.getVersionForNumber(de);const oe=this.calculateBitsNeeded(f,g,_,x);if(!this.willFit(oe,x,o))throw new Tt("Data too big for requested version")}else x=this.recommendVersion(o,f,g,_);const C=new $;C.appendBitArray(g);const b=f===Ne.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(b,x,f,C),C.appendBitArray(_);const R=x.getECBlocksForLevel(o),P=x.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(P,C);const z=this.interleaveWithECBytes(C,x.getTotalCodewords(),P,R.getNumBlocks()),U=new kr;U.setECLevel(o),U.setMode(f),U.setVersion(x);const j=x.getDimensionForVersion(),X=new Ko(j,j),ue=this.chooseMaskPattern(z,o,x,X);return U.setMaskPattern(ue),Me.buildMatrix(z,o,x,ue,X),U.setMatrix(X),U}static recommendVersion(i,o,a,c){const d=this.calculateBitsNeeded(o,a,c,_e.getVersionForNumber(1)),f=this.chooseVersion(d,i),g=this.calculateBitsNeeded(o,a,c,f);return this.chooseVersion(g,i)}static calculateBitsNeeded(i,o,a,c){return o.getSize()+i.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(i){return i<Rt.ALPHANUMERIC_TABLE.length?Rt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(te.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Ne.KANJI;let a=!1,c=!1;for(let d=0,f=i.length;d<f;++d){const g=i.charAt(d);if(Rt.isDigit(g))a=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)c=!0;else return Ne.BYTE}return c?Ne.ALPHANUMERIC:a?Ne.NUMERIC:Ne.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=je.encode(i,te.SJIS)}catch{return!1}const a=o.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const d=o[c]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,a,c){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<kr.NUM_MASK_PATTERNS;g++){Me.buildMatrix(i,o,a,g,c);let _=this.calculateMaskPenalty(c);_<d&&(d=_,f=g)}return f}static chooseVersion(i,o){for(let a=1;a<=40;a++){const c=_e.getVersionForNumber(a);if(Rt.willFit(i,c,o))return c}throw new Tt("Data too big")}static willFit(i,o,a){const c=o.getTotalCodewords(),f=o.getECBlocksForLevel(a).getTotalECCodewords(),g=c-f,_=(i+7)/8;return g>=_}static terminateBits(i,o){const a=i*8;if(o.getSize()>a)throw new Tt("data bits cannot fit in the QR Code"+o.getSize()+" > "+a);for(let f=0;f<4&&o.getSize()<a;++f)o.appendBit(!1);const c=o.getSize()&7;if(c>0)for(let f=c;f<8;f++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let f=0;f<d;++f)o.appendBits(f&1?17:236,8);if(o.getSize()!==a)throw new Tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,a,c,d,f){if(c>=a)throw new Tt("Block ID too large");const g=i%a,_=a-g,x=Math.floor(i/a),C=x+1,b=Math.floor(o/a),R=b+1,P=x-b,z=C-R;if(P!==z)throw new Tt("EC bytes mismatch");if(a!==_+g)throw new Tt("RS blocks mismatch");if(i!==(b+P)*_+(R+z)*g)throw new Tt("Total bytes mismatch");c<_?(d[0]=b,f[0]=P):(d[0]=R,f[0]=z)}static interleaveWithECBytes(i,o,a,c){if(i.getSizeInBytes()!==a)throw new Tt("Number of bits and data bytes does not match");let d=0,f=0,g=0;const _=new Array;for(let C=0;C<c;++C){const b=new Int32Array(1),R=new Int32Array(1);Rt.getNumDataBytesAndNumECBytesForBlockID(o,a,c,C,b,R);const P=b[0],z=new Uint8Array(P);i.toBytes(8*d,z,0,P);const U=Rt.generateECBytes(z,R[0]);_.push(new ud(z,U)),f=Math.max(f,P),g=Math.max(g,U.length),d+=b[0]}if(a!==d)throw new Tt("Data bytes does not match offset");const x=new $;for(let C=0;C<f;++C)for(const b of _){const R=b.getDataBytes();C<R.length&&x.appendBits(R[C],8)}for(let C=0;C<g;++C)for(const b of _){const R=b.getErrorCorrectionBytes();C<R.length&&x.appendBits(R[C],8)}if(o!==x.getSizeInBytes())throw new Tt("Interleaving error: "+o+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(i,o){const a=i.length,c=new Int32Array(a+o);for(let f=0;f<a;f++)c[f]=i[f]&255;new Oa(it.QR_CODE_FIELD_256).encode(c,o);const d=new Uint8Array(o);for(let f=0;f<o;f++)d[f]=c[a+f];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,a,c){const d=a.getCharacterCountBits(o);if(i>=1<<d)throw new Tt(i+" is bigger than "+((1<<d)-1));c.appendBits(i,d)}static appendBytes(i,o,a,c){switch(o){case Ne.NUMERIC:Rt.appendNumericBytes(i,a);break;case Ne.ALPHANUMERIC:Rt.appendAlphanumericBytes(i,a);break;case Ne.BYTE:Rt.append8BitBytes(i,a,c);break;case Ne.KANJI:Rt.appendKanjiBytes(i,a);break;default:throw new Tt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=Rt.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const a=i.length;let c=0;for(;c<a;){const d=Rt.getDigit(i.charAt(c));if(c+2<a){const f=Rt.getDigit(i.charAt(c+1)),g=Rt.getDigit(i.charAt(c+2));o.appendBits(d*100+f*10+g,10),c+=3}else if(c+1<a){const f=Rt.getDigit(i.charAt(c+1));o.appendBits(d*10+f,7),c+=2}else o.appendBits(d,4),c++}}static appendAlphanumericBytes(i,o){const a=i.length;let c=0;for(;c<a;){const d=Rt.getAlphanumericCode(i.charCodeAt(c));if(d===-1)throw new Tt;if(c+1<a){const f=Rt.getAlphanumericCode(i.charCodeAt(c+1));if(f===-1)throw new Tt;o.appendBits(d*45+f,11),c+=2}else o.appendBits(d,6),c++}}static append8BitBytes(i,o,a){let c;try{c=je.encode(i,a)}catch(d){throw new Tt(d)}for(let d=0,f=c.length;d!==f;d++){const g=c[d];o.appendBits(g,8)}}static appendKanjiBytes(i,o){let a;try{a=je.encode(i,te.SJIS)}catch(d){throw new Tt(d)}const c=a.length;for(let d=0;d<c;d+=2){const f=a[d]&255,g=a[d+1]&255,_=f<<8&4294967295|g;let x=-1;if(_>=33088&&_<=40956?x=_-33088:_>=57408&&_<=60351&&(x=_-49472),x===-1)throw new Tt("Invalid byte sequence");const C=(x>>8)*192+(x&255);o.appendBits(C,13)}}static appendECI(i,o){o.appendBits(Ne.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rt.DEFAULT_BYTE_MODE_ENCODING=te.UTF8.getName();class wr{write(i,o,a,c=null){if(i.length===0)throw new I("Found empty contents");if(o<0||a<0)throw new I("Requested dimensions are too small: "+o+"x"+a);let d=Ke.L,f=wr.QUIET_ZONE_SIZE;c!==null&&(c.get($t.ERROR_CORRECTION)!==void 0&&(d=Ke.fromString(c.get($t.ERROR_CORRECTION).toString())),c.get($t.MARGIN)!==void 0&&(f=Number.parseInt(c.get($t.MARGIN).toString(),10)));const g=Rt.encode(i,d,c);return this.renderResult(g,o,a,f)}writeToDom(i,o,a,c,d=null){typeof i=="string"&&(i=document.querySelector(i));const f=this.write(o,a,c,d);i&&i.appendChild(f)}renderResult(i,o,a,c){const d=i.getMatrix();if(d===null)throw new Kn;const f=d.getWidth(),g=d.getHeight(),_=f+c*2,x=g+c*2,C=Math.max(o,_),b=Math.max(a,x),R=Math.min(Math.floor(C/_),Math.floor(b/x)),P=Math.floor((C-f*R)/2),z=Math.floor((b-g*R)/2),U=this.createSVGElement(C,b);for(let j=0,X=z;j<g;j++,X+=R)for(let ue=0,de=P;ue<f;ue++,de+=R)if(d.get(ue,j)===1){const oe=this.createSvgRectElement(de,X,R,R);U.appendChild(oe)}return U}createSVGElement(i,o){const a=document.createElementNS(wr.SVG_NS,"svg");return a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",o.toString()),a}createSvgRectElement(i,o,a,c){const d=document.createElementNS(wr.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",a.toString()),d.setAttributeNS(null,"width",c.toString()),d.setAttributeNS(null,"fill","#000000"),d}}wr.QUIET_ZONE_SIZE=4,wr.SVG_NS="http://www.w3.org/2000/svg";class er{encode(i,o,a,c,d){if(i.length===0)throw new I("Found empty contents");if(o!==ae.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(a<0||c<0)throw new I(`Requested dimensions are too small: ${a}x${c}`);let f=Ke.L,g=er.QUIET_ZONE_SIZE;d!==null&&(d.get($t.ERROR_CORRECTION)!==void 0&&(f=Ke.fromString(d.get($t.ERROR_CORRECTION).toString())),d.get($t.MARGIN)!==void 0&&(g=Number.parseInt(d.get($t.MARGIN).toString(),10)));const _=Rt.encode(i,f,d);return er.renderResult(_,a,c,g)}static renderResult(i,o,a,c){const d=i.getMatrix();if(d===null)throw new Kn;const f=d.getWidth(),g=d.getHeight(),_=f+c*2,x=g+c*2,C=Math.max(o,_),b=Math.max(a,x),R=Math.min(Math.floor(C/_),Math.floor(b/x)),P=Math.floor((C-f*R)/2),z=Math.floor((b-g*R)/2),U=new Ye(C,b);for(let j=0,X=z;j<g;j++,X+=R)for(let ue=0,de=P;ue<f;ue++,de+=R)d.get(ue,j)===1&&U.setRegion(de,X,R,R);return U}}er.QUIET_ZONE_SIZE=4;class Br{encode(i,o,a,c,d){let f;switch(o){case ae.QR_CODE:f=new er;break;default:throw new I("No encoder available for format "+o)}return f.encode(i,o,a,c,d)}}class Pi extends ne{constructor(i,o,a,c,d,f,g,_){if(super(f,g),this.yuvData=i,this.dataWidth=o,this.dataHeight=a,this.left=c,this.top=d,c+f>o||d+g>a)throw new I("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(f,g)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const a=this.getWidth();(o==null||o.length<a)&&(o=new Uint8ClampedArray(a));const c=(i+this.top)*this.dataWidth+this.left;return V.arraycopy(this.yuvData,c,o,0,a),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const a=i*o,c=new Uint8ClampedArray(a);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return V.arraycopy(this.yuvData,d,c,0,a),c;for(let f=0;f<o;f++){const g=f*i;V.arraycopy(this.yuvData,d,c,g,i),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,a,c){return new Pi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,a,c,!1)}renderThumbnail(){const i=this.getWidth()/Pi.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Pi.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(i*o),c=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let f=0;f<o;f++){const g=f*i;for(let _=0;_<i;_++){const x=c[d+_*Pi.THUMBNAIL_SCALE_FACTOR]&255;a[g+_]=4278190080|x*65793}d+=this.dataWidth*Pi.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Pi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const a=this.yuvData;for(let c=0,d=this.top*this.dataWidth+this.left;c<o;c++,d+=this.dataWidth){const f=d+i/2;for(let g=d,_=d+i-1;g<f;g++,_--){const x=a[g];a[g]=a[_],a[_]=x}}}invert(){return new Se(this)}}Pi.THUMBNAIL_SCALE_FACTOR=2;class Fr extends ne{constructor(i,o,a,c,d,f,g){if(super(o,a),this.dataWidth=c,this.dataHeight=d,this.left=f,this.top=g,i.BYTES_PER_ELEMENT===4){const _=o*a,x=new Uint8ClampedArray(_);for(let C=0;C<_;C++){const b=i[C],R=b>>16&255,P=b>>7&510,z=b&255;x[C]=(R+P+z)/4&255}this.luminances=x}else this.luminances=i;if(c===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+a>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const a=this.getWidth();(o==null||o.length<a)&&(o=new Uint8ClampedArray(a));const c=(i+this.top)*this.dataWidth+this.left;return V.arraycopy(this.luminances,c,o,0,a),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const a=i*o,c=new Uint8ClampedArray(a);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return V.arraycopy(this.luminances,d,c,0,a),c;for(let f=0;f<o;f++){const g=f*i;V.arraycopy(this.luminances,d,c,g,i),d+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,o,a,c){return new Fr(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new Se(this)}}class ei extends te{static forName(i){return this.getCharacterSetECIByName(i)}}class Ns{}Ns.ISO_8859_1=te.ISO8859_1;class La{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class cc{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class Da{constructor(i){this.previous=i}getPrevious(){return this.previous}}class vr extends Da{constructor(i,o,a){super(i),this.value=o,this.bitCount=a}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new vr(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new vr(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+B.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Pa extends vr{constructor(i,o,a){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=a}appendTo(i,o){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):a===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+a],8)}addBinaryShift(i,o){return new Pa(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dd(T,i,o){return new Pa(T,i,o)}function lo(T,i,o){return new vr(T,i,o)}const hd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fn=0,tr=1,ai=2,ki=3,Bi=4,co=new vr(null,0,0),ka=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function qo(T){for(let i of T)k.fill(i,-1);return T[fn][Bi]=0,T[tr][Bi]=0,T[tr][fn]=28,T[ki][Bi]=0,T[ai][Bi]=0,T[ai][fn]=15,T}const Ba=qo(k.createInt32Array(6,6));class ti{constructor(i,o,a,c){this.token=i,this.mode=o,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let a=this.bitCount,c=this.token;if(i!==this.mode){let f=ka[this.mode][i];c=lo(c,f&65535,f>>16),a+=f>>16}let d=i===ai?4:5;return c=lo(c,o,d),new ti(c,i,0,a+d)}shiftAndAppend(i,o){let a=this.token,c=this.mode===ai?4:5;return a=lo(a,Ba[this.mode][i],c),a=lo(a,o,5),new ti(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let o=this.token,a=this.mode,c=this.bitCount;if(this.mode===Bi||this.mode===ai){let g=ka[a][fn];o=lo(o,g&65535,g>>16),c+=g>>16,a=fn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ti(o,a,this.binaryShiftByteCount+1,c+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=dd(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ti(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(ka[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=ti.calculateBinaryShiftCost(i)-ti.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())o.unshift(c);let a=new $;for(const c of o)c.appendTo(a,i);return a}toString(){return ve.format("%s bits=%d bytes=%d",hd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ti.INITIAL_STATE=new ti(co,fn,0,0);function fd(T){const i=ve.getCharCode(" "),o=ve.getCharCode("."),a=ve.getCharCode(",");T[fn][i]=1;const c=ve.getCharCode("Z"),d=ve.getCharCode("A");for(let R=d;R<=c;R++)T[fn][R]=R-d+2;T[tr][i]=1;const f=ve.getCharCode("z"),g=ve.getCharCode("a");for(let R=g;R<=f;R++)T[tr][R]=R-g+2;T[ai][i]=1;const _=ve.getCharCode("9"),x=ve.getCharCode("0");for(let R=x;R<=_;R++)T[ai][R]=R-x+2;T[ai][a]=12,T[ai][o]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<C.length;R++)T[ki][ve.getCharCode(C[R])]=R;const b=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<b.length;R++)ve.getCharCode(b[R])>0&&(T[Bi][ve.getCharCode(b[R])]=R);return T}const Fi=fd(k.createInt32Array(5,256));class Er{constructor(i){this.text=i}encode(){const i=ve.getCharCode(" "),o=ve.getCharCode(`
`);let a=cc.singletonList(ti.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,g=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case ve.getCharCode("\r"):f=g===o?2:0;break;case ve.getCharCode("."):f=g===i?3:0;break;case ve.getCharCode(","):f=g===i?4:0;break;case ve.getCharCode(":"):f=g===i?5:0;break;default:f=0}f>0?(a=Er.updateStateListForPair(a,d,f),d++):a=this.updateStateListForChar(a,d)}return cc.min(a,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const a=[];for(let c of i)this.updateStateForChar(c,o,a);return Er.simplifyStates(a)}updateStateForChar(i,o,a){let c=this.text[o]&255,d=Fi[i.getMode()][c]>0,f=null;for(let g=0;g<=Bi;g++){let _=Fi[g][c];if(_>0){if(f==null&&(f=i.endBinaryShift(o)),!d||g===i.getMode()||g===ai){const x=f.latchAndAppend(g,_);a.push(x)}if(!d&&Ba[i.getMode()][g]>=0){const x=f.shiftAndAppend(g,_);a.push(x)}}}if(i.getBinaryShiftByteCount()>0||Fi[i.getMode()][c]===0){let g=i.addBinaryShiftChar(o);a.push(g)}}static updateStateListForPair(i,o,a){const c=[];for(let d of i)this.updateStateForPair(d,o,a,c);return this.simplifyStates(c)}static updateStateForPair(i,o,a,c){let d=i.endBinaryShift(o);if(c.push(d.latchAndAppend(Bi,a)),i.getMode()!==Bi&&c.push(d.shiftAndAppend(Bi,a)),a===3||a===4){let f=d.latchAndAppend(ai,16-a).latchAndAppend(ai,1);c.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(f)}}static simplifyStates(i){let o=[];for(const a of i){let c=!0;for(const d of o){if(d.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(d)&&(o=o.filter(f=>f!==d))}c&&o.push(a)}return o}}class ut{constructor(){}static encodeBytes(i){return ut.encode(i,ut.DEFAULT_EC_PERCENT,ut.DEFAULT_AZTEC_LAYERS)}static encode(i,o,a){let c=new Er(i).encode(),d=B.truncDivision(c.getSize()*o,100)+11,f=c.getSize()+d,g,_,x,C,b;if(a!==ut.DEFAULT_AZTEC_LAYERS){if(g=a<0,_=Math.abs(a),_>(g?ut.MAX_NB_BITS_COMPACT:ut.MAX_NB_BITS))throw new I(ve.format("Illegal value %s for layers",a));x=ut.totalBitsInLayer(_,g),C=ut.WORD_SIZE[_];let oe=x-x%C;if(b=ut.stuffBits(c,C),b.getSize()+d>oe)throw new I("Data to large for user specified layer");if(g&&b.getSize()>C*64)throw new I("Data to large for user specified layer")}else{C=0,b=null;for(let oe=0;;oe++){if(oe>ut.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(g=oe<=3,_=g?oe+1:oe,x=ut.totalBitsInLayer(_,g),f>x)continue;(b==null||C!==ut.WORD_SIZE[_])&&(C=ut.WORD_SIZE[_],b=ut.stuffBits(c,C));let qe=x-x%C;if(!(g&&b.getSize()>C*64)&&b.getSize()+d<=qe)break}}let R=ut.generateCheckWords(b,x,C),P=b.getSize()/C,z=ut.generateModeMessage(g,_,P),U=(g?11:14)+_*4,j=new Int32Array(U),X;if(g){X=U;for(let oe=0;oe<j.length;oe++)j[oe]=oe}else{X=U+1+2*B.truncDivision(B.truncDivision(U,2)-1,15);let oe=B.truncDivision(U,2),qe=B.truncDivision(X,2);for(let Ve=0;Ve<oe;Ve++){let Vt=Ve+B.truncDivision(Ve,15);j[oe-Ve-1]=qe-Vt-1,j[oe+Ve]=qe+Vt+1}}let ue=new Ye(X);for(let oe=0,qe=0;oe<_;oe++){let Ve=(_-oe)*4+(g?9:12);for(let Vt=0;Vt<Ve;Vt++){let Un=Vt*2;for(let Hn=0;Hn<2;Hn++)R.get(qe+Un+Hn)&&ue.set(j[oe*2+Hn],j[oe*2+Vt]),R.get(qe+Ve*2+Un+Hn)&&ue.set(j[oe*2+Vt],j[U-1-oe*2-Hn]),R.get(qe+Ve*4+Un+Hn)&&ue.set(j[U-1-oe*2-Hn],j[U-1-oe*2-Vt]),R.get(qe+Ve*6+Un+Hn)&&ue.set(j[U-1-oe*2-Vt],j[oe*2+Hn])}qe+=Ve*8}if(ut.drawModeMessage(ue,g,X,z),g)ut.drawBullsEye(ue,B.truncDivision(X,2),5);else{ut.drawBullsEye(ue,B.truncDivision(X,2),7);for(let oe=0,qe=0;oe<B.truncDivision(U,2)-1;oe+=15,qe+=16)for(let Ve=B.truncDivision(X,2)&1;Ve<X;Ve+=2)ue.set(B.truncDivision(X,2)-qe,Ve),ue.set(B.truncDivision(X,2)+qe,Ve),ue.set(Ve,B.truncDivision(X,2)-qe),ue.set(Ve,B.truncDivision(X,2)+qe)}let de=new La;return de.setCompact(g),de.setSize(X),de.setLayers(_),de.setCodeWords(P),de.setMatrix(ue),de}static drawBullsEye(i,o,a){for(let c=0;c<a;c+=2)for(let d=o-c;d<=o+c;d++)i.set(d,o-c),i.set(d,o+c),i.set(o-c,d),i.set(o+c,d);i.set(o-a,o-a),i.set(o-a+1,o-a),i.set(o-a,o-a+1),i.set(o+a,o-a),i.set(o+a,o-a+1),i.set(o+a,o+a-1)}static generateModeMessage(i,o,a){let c=new $;return i?(c.appendBits(o-1,2),c.appendBits(a-1,6),c=ut.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(a-1,11),c=ut.generateCheckWords(c,40,4)),c}static drawModeMessage(i,o,a,c){let d=B.truncDivision(a,2);if(o)for(let f=0;f<7;f++){let g=d-3+f;c.get(f)&&i.set(g,d-5),c.get(f+7)&&i.set(d+5,g),c.get(20-f)&&i.set(g,d+5),c.get(27-f)&&i.set(d-5,g)}else for(let f=0;f<10;f++){let g=d-5+f+B.truncDivision(f,5);c.get(f)&&i.set(g,d-7),c.get(f+10)&&i.set(d+7,g),c.get(29-f)&&i.set(g,d+7),c.get(39-f)&&i.set(d-7,g)}}static generateCheckWords(i,o,a){let c=i.getSize()/a,d=new Oa(ut.getGF(a)),f=B.truncDivision(o,a),g=ut.bitsToWords(i,a,f);d.encode(g,f-c);let _=o%a,x=new $;x.appendBits(0,_);for(const C of Array.from(g))x.appendBits(C,a);return x}static bitsToWords(i,o,a){let c=new Int32Array(a),d,f;for(d=0,f=i.getSize()/o;d<f;d++){let g=0;for(let _=0;_<o;_++)g|=i.get(d*o+_)?1<<o-_-1:0;c[d]=g}return c}static getGF(i){switch(i){case 4:return it.AZTEC_PARAM;case 6:return it.AZTEC_DATA_6;case 8:return it.AZTEC_DATA_8;case 10:return it.AZTEC_DATA_10;case 12:return it.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let a=new $,c=i.getSize(),d=(1<<o)-2;for(let f=0;f<c;f+=o){let g=0;for(let _=0;_<o;_++)(f+_>=c||i.get(f+_))&&(g|=1<<o-1-_);(g&d)===d?(a.appendBits(g&d,o),f--):g&d?a.appendBits(g,o):(a.appendBits(g|1,o),f--)}return a}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}ut.DEFAULT_EC_PERCENT=33,ut.DEFAULT_AZTEC_LAYERS=0,ut.MAX_NB_BITS=32,ut.MAX_NB_BITS_COMPACT=4,ut.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class uo{encode(i,o,a,c){return this.encodeWithHints(i,o,a,c,null)}encodeWithHints(i,o,a,c,d){let f=Ns.ISO_8859_1,g=ut.DEFAULT_EC_PERCENT,_=ut.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has($t.CHARACTER_SET)&&(f=ei.forName(d.get($t.CHARACTER_SET).toString())),d.has($t.ERROR_CORRECTION)&&(g=B.parseInt(d.get($t.ERROR_CORRECTION).toString())),d.has($t.AZTEC_LAYERS)&&(_=B.parseInt(d.get($t.AZTEC_LAYERS).toString()))),uo.encodeLayers(i,o,a,c,f,g,_)}static encodeLayers(i,o,a,c,d,f,g){if(o!==ae.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let _=ut.encode(ve.getBytes(i,d),f,g);return uo.renderResult(_,a,c)}static renderResult(i,o,a){let c=i.getMatrix();if(c==null)throw new Kn;let d=c.getWidth(),f=c.getHeight(),g=Math.max(o,d),_=Math.max(a,f),x=Math.min(g/d,_/f),C=(g-d*x)/2,b=(_-f*x)/2,R=new Ye(g,_);for(let P=0,z=b;P<f;P++,z+=x)for(let U=0,j=C;U<d;U++,j+=x)c.get(U,P)&&R.setRegion(j,z,x,x);return R}}n.AbstractExpandedDecoder=Cs,n.ArgumentException=N,n.ArithmeticException=Mi,n.AztecCode=La,n.AztecCodeReader=mt,n.AztecCodeWriter=uo,n.AztecDecoder=gt,n.AztecDetector=pt,n.AztecDetectorResult=Ho,n.AztecEncoder=ut,n.AztecHighLevelEncoder=Er,n.AztecPoint=qt,n.BarcodeFormat=ae,n.Binarizer=Y,n.BinaryBitmap=D,n.BitArray=$,n.BitMatrix=Ye,n.BitSource=ro,n.BrowserAztecCodeReader=Qi,n.BrowserBarcodeReader=jo,n.BrowserCodeReader=At,n.BrowserDatamatrixCodeReader=Ta,n.BrowserMultiFormatReader=ac,n.BrowserPDF417Reader=xr,n.BrowserQRCodeReader=lc,n.BrowserQRCodeSvgWriter=wr,n.CharacterSetECI=te,n.ChecksumException=W,n.Code128Reader=se,n.Code39Reader=Qe,n.DataMatrixDecodedBitStreamParser=$n,n.DataMatrixReader=Ct,n.DecodeHintType=ce,n.DecoderResult=gr,n.DefaultGridSampler=dt,n.DetectorResult=dn,n.EAN13Reader=mr,n.EncodeHintType=$t,n.Exception=y,n.FormatException=K,n.GenericGF=it,n.GenericGFPoly=an,n.GlobalHistogramBinarizer=Le,n.GridSampler=Oe,n.GridSamplerInstance=ln,n.HTMLCanvasElementLuminanceSource=le,n.HybridBinarizer=Te,n.ITFReader=Ge,n.IllegalArgumentException=I,n.IllegalStateException=Kn,n.InvertedLuminanceSource=Se,n.LuminanceSource=ne,n.MathUtils=rt,n.MultiFormatOneDReader=yr,n.MultiFormatReader=sc,n.MultiFormatWriter=Br,n.NotFoundException=J,n.OneDReader=_t,n.PDF417DecodedBitStreamParser=Q,n.PDF417DecoderErrorCorrection=As,n.PDF417Reader=xn,n.PDF417ResultMetadata=Ma,n.PerspectiveTransform=He,n.PlanarYUVLuminanceSource=Pi,n.QRCodeByteMatrix=Ko,n.QRCodeDataMask=bn,n.QRCodeDecodedBitStreamParser=Ot,n.QRCodeDecoderErrorCorrectionLevel=Ke,n.QRCodeDecoderFormatInformation=Tn,n.QRCodeEncoder=Rt,n.QRCodeEncoderQRCode=kr,n.QRCodeMaskUtil=Wt,n.QRCodeMatrixUtil=Me,n.QRCodeMode=Ne,n.QRCodeReader=_n,n.QRCodeVersion=_e,n.QRCodeWriter=er,n.RGBLuminanceSource=Fr,n.RSS14Reader=Xt,n.RSSExpandedReader=ie,n.ReaderException=Jn,n.ReedSolomonDecoder=pr,n.ReedSolomonEncoder=Oa,n.ReedSolomonException=Xi,n.Result=Ue,n.ResultMetadataType=Et,n.ResultPoint=Ee,n.StringUtils=ve,n.UnsupportedOperationException=ze,n.VideoInputDevice=De,n.WhiteRectangleDetector=ee,n.WriterException=Tt,n.ZXingArrays=k,n.ZXingCharset=ei,n.ZXingInteger=B,n.ZXingStandardCharsets=Ns,n.ZXingStringBuilder=$e,n.ZXingStringEncoding=je,n.ZXingSystem=V,n.createAbstractExpandedDecoder=Vo,Object.defineProperty(n,"__esModule",{value:!0})})})(qh,qh.exports);var Gt=qh.exports;const Nv=Ou(Gt),Rv=Gy({__proto__:null,default:Nv},[Gt]);var Ig=function(){function t(e,n,r){if(this.formatMap=new Map([[Ce.QR_CODE,Gt.BarcodeFormat.QR_CODE],[Ce.AZTEC,Gt.BarcodeFormat.AZTEC],[Ce.CODABAR,Gt.BarcodeFormat.CODABAR],[Ce.CODE_39,Gt.BarcodeFormat.CODE_39],[Ce.CODE_93,Gt.BarcodeFormat.CODE_93],[Ce.CODE_128,Gt.BarcodeFormat.CODE_128],[Ce.DATA_MATRIX,Gt.BarcodeFormat.DATA_MATRIX],[Ce.MAXICODE,Gt.BarcodeFormat.MAXICODE],[Ce.ITF,Gt.BarcodeFormat.ITF],[Ce.EAN_13,Gt.BarcodeFormat.EAN_13],[Ce.EAN_8,Gt.BarcodeFormat.EAN_8],[Ce.PDF_417,Gt.BarcodeFormat.PDF_417],[Ce.RSS_14,Gt.BarcodeFormat.RSS_14],[Ce.RSS_EXPANDED,Gt.BarcodeFormat.RSS_EXPANDED],[Ce.UPC_A,Gt.BarcodeFormat.UPC_A],[Ce.UPC_E,Gt.BarcodeFormat.UPC_E],[Ce.UPC_EAN_EXTENSION,Gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Rv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(Gt.DecodeHintType.POSSIBLE_FORMATS,l),u.set(Gt.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new Gt.MultiFormatReader(this.verbose,this.hints),r=new Gt.HTMLCanvasElementLuminanceSource(e),l=new Gt.BinaryBitmap(new Gt.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:G_.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Mv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},Ov=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Tg=function(){function t(e,n,r){if(this.formatMap=new Map([[Ce.QR_CODE,"qr_code"],[Ce.AZTEC,"aztec"],[Ce.CODABAR,"codabar"],[Ce.CODE_39,"code_39"],[Ce.CODE_93,"code_93"],[Ce.CODE_128,"code_128"],[Ce.DATA_MATRIX,"data_matrix"],[Ce.ITF,"itf"],[Ce.EAN_13,"ean_13"],[Ce.EAN_8,"ean_8"],[Ce.PDF_417,"pdf417"],[Ce.UPC_A,"upc_a"],[Ce.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Mv(this,void 0,void 0,function(){var n,r;return Ov(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:G_.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var p=u[l],w=p.boundingBox.width*p.boundingBox.height;w>r&&(r=w,n=p)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),bg=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},Ng=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Lv=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Tg.isSupported()?(this.primaryDecoder=new Tg(e,r,l),this.secondaryDecoder=new Ig(e,r,l)):this.primaryDecoder=new Ig(e,r,l)}return t.prototype.decodeAsync=function(e){return bg(this,void 0,void 0,function(){var n;return Ng(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return bg(this,void 0,void 0,function(){var n,r;return Ng(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),f1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fu=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},gu=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Q_=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),Dv=function(t){f1(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Q_),Pv=function(t){f1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(Dv),kv=function(t){f1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Q_),Bv=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Pv(this.track)},t.prototype.torchFeature=function(){return new kv(this.track)},t}(),Fv=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return fu(this,void 0,void 0,function(){var u,p;return gu(this,function(w){switch(w.label){case 0:return u=new t(e,n,l),r.aspectRatio?(p={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:w.sent(),w.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return fu(this,void 0,void 0,function(){return gu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,p=0;e.mediaStream.getVideoTracks().forEach(function(w){e.mediaStream.removeTrack(w),w.stop(),++p,p>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Bv(this.getFirstTrackOrFail())},t}(),zv=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return fu(this,void 0,void 0,function(){return gu(this,function(l){return[2,Fv.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return fu(this,void 0,void 0,function(){var n,r;return gu(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Rg=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},Mg=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Uv=function(){function t(){}return t.failIfNotSupported=function(){return Rg(this,void 0,void 0,function(){return Mg(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Rg(this,void 0,void 0,function(){return Mg(this,function(n){return[2,zv.create(e)]})})},t}(),Hv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},Wv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Vv=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Zs.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Zs.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Hv(this,void 0,void 0,function(){var e,n,r,l,u,p,w;return Wv(this,function(E){switch(E.label){case 0:return e=function(y){for(var N=y.getVideoTracks(),I=0,D=N;I<D.length;I++){var W=D[I];W.enabled=!1,W.stop(),y.removeTrack(W)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=E.sent(),l=[],u=0,p=r;u<p.length;u++)w=p[u],w.kind==="videoinput"&&l.push({id:w.deviceId,label:w.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var p=[],w=0,E=u;w<E.length;w++){var y=E[w];y.kind==="video"&&p.push({id:y.id,label:y.label})}e(p)},l=MediaStreamTrack;l.getSources(r)})},t}(),rn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(rn||(rn={}));var jv=function(){function t(){this.state=rn.NOT_STARTED,this.onGoingTransactionNewState=rn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case rn.UNKNOWN:throw"Transition from unknown is not allowed";case rn.NOT_STARTED:this.failIfNewStateIs(e,[rn.PAUSED]);break;case rn.SCANNING:break;case rn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),Gv=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===rn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==rn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===rn.PAUSED},t}(),Zv=function(){function t(){}return t.create=function(){return new Gv(new jv)},t}(),Yv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vi=function(t){Yv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(or),Xv=function(){function t(e,n){this.logger=n,this.fps=vi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=vi.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?X_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ar(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Og=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Y_(this.verbose),this.qrcode=new Lv(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Zv.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;l?p=l:p=this.verbose?this.logger.log:function(){};var w=Xv.create(n,this.logger);this.clearElement();var E=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=E,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:vi.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var I=this,D=this.stateManagerProxy.startTransition(rn.SCANNING);return new Promise(function(W,Y){var V=y?w.videoConstraints:I.createVideoConstraints(e);if(!V){D.cancel(),Y("videoConstraints should be defined");return}var me={};(!y||w.aspectRatio)&&(me.aspectRatio=w.aspectRatio);var H={onRenderSurfaceReady:function(k,B){I.setupUi(k,B,w),I.isScanning=!0,I.foreverScan(w,r,p)}};Uv.failIfNotSupported().then(function(k){k.create(V).then(function(B){return B.render(u.element,me,H).then(function($){I.renderedCamera=$,D.execute(),W(null)}).catch(function($){D.cancel(),Y($)})}).catch(function(B){D.cancel(),Y(Zs.errorGettingUserMedia(B))})}).catch(function(k){D.cancel(),Y(Zs.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rn.PAUSED),this.showPausedState(),(Ar(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(rn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(vi.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ar(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var w=p.width,E=p.height,y=document.getElementById(r.elementId),N=y.clientWidth?y.clientWidth:vi.DEFAULT_WIDTH,I=Math.max(y.clientHeight?y.clientHeight:E,vi.FILE_SCAN_MIN_HEIGHT),D=r.computeCanvasDrawConfig(w,E,N,I);if(n){var W=r.createCanvasElement(N,I,"qr-canvas-visible");W.style.display="inline-block",y.appendChild(W);var Y=W.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=N,Y.canvas.height=I,Y.drawImage(p,0,0,w,E,D.x,D.y,D.width,D.height)}var V=vi.FILE_SCAN_HIDDEN_CANVAS_PADDING,me=Math.max(p.width,D.width),H=Math.max(p.height,D.height),k=me+2*V,B=H+2*V,$=r.createCanvasElement(k,B);y.appendChild($);var pe=$.getContext("2d");if(!pe)throw"Unable to get 2d context from canvas";pe.canvas.width=k,pe.canvas.height=B,pe.drawImage(p,0,0,w,E,V,V,me,H);try{r.qrcode.decodeRobustlyAsync($).then(function(ce){l(Sg.createFromQrcodeResult(ce))}).catch(u)}catch(ce){u("QR code parse error, error = ".concat(ce))}},p.onerror=u,p.onabort=u,p.onstalled=u,p.onsuspend=u,p.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Vv.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!X_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ce.QR_CODE,Ce.AZTEC,Ce.CODABAR,Ce.CODE_39,Ce.CODE_93,Ce.CODE_128,Ce.DATA_MATRIX,Ce.MAXICODE,Ce.ITF,Ce.EAN_13,Ce.EAN_8,Ce.PDF_417,Ce.RSS_14,Ce.RSS_EXPANDED,Ce.UPC_A,Ce.UPC_E,Ce.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var p=u[l];Tv(p)?r.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ar(e))return!0;if(!Ar(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ar(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ar(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var p=this.toQrdimensions(e,n,u),w=function(y){if(y<vi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(vi.MIN_QR_BOX_SIZE,"px.")},E=function(y){return y>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};w(p.width),w(p.height),p.width=E(p.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=Ar(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=r.isShadedBoxEnabled()&&u.height<=n,w={x:0,y:0,width:e,height:n},E=p?this.getShadedRegionBounds(e,n,u):w,y=this.createCanvasElement(E.width,E.height),N={willReadFrequently:!0},I=y.getContext("2d",N);I.canvas.width=E.width,I.canvas.height=E.height,this.element.append(y),p&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=I,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Zs.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Sg.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=Zs.codeParseError(l);return n(u,Z_.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),p=u.videoWidth/u.clientWidth,w=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*p,y=this.qrRegion.height*w,N=this.qrRegion.x*p,I=this.qrRegion.y*w;this.context.drawImage(u,N,I,E,y,0,0,this.qrRegion.width,this.qrRegion.height);var D=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(W){!W&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){D()})):D()}).catch(function(W){l.logger.logError("Error happend while scanning context",W),D()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",p=function(Y){if(Y in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Y,"'")},w=Object.keys(e);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var E=Object.keys(e)[0];if(E!==n&&E!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(E===n){var y=e.facingMode;if(typeof y=="string"){if(p(y))return{facingMode:y}}else if(typeof y=="object")if(u in y){if(p(y["".concat(u)]))return{facingMode:{exact:y["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var N=typeof y;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(u in I)return{deviceId:{exact:I["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var D=typeof I;throw"Invalid type of 'deviceId' = ".concat(D)}}}var W=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(W)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,p=(l-n)/2;return{x:u,y:p,width:e,height:n}}else{var w=e,E=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(E)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?vi.BORDER_SHADER_MATCH_COLOR:vi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,p=document.createElement("canvas");return p.style.width="".concat(l,"px"),p.style.height="".concat(u,"px"),p.style.display="none",p.id=Ar(r)?"qr-canvas":r,p},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var p=(n-l.width)/2,w=(r-l.height)/2;if(u.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(vi.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var E=5,y=40;this.insertShaderBorders(u,y,E,-E,null,0,!0),this.insertShaderBorders(u,y,E,-E,null,0,!1),this.insertShaderBorders(u,y,E,null,-E,0,!0),this.insertShaderBorders(u,y,E,null,-E,0,!1),this.insertShaderBorders(u,E,y+E,-E,null,-E,!0),this.insertShaderBorders(u,E,y+E,null,-E,-E,!0),this.insertShaderBorders(u,E,y+E,-E,null,-E,!1),this.insertShaderBorders(u,E,y+E,null,-E,-E,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,p,w){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=vi.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(n,"px"),E.style.height="".concat(r,"px"),l!==null&&(E.style.top="".concat(l,"px")),u!==null&&(E.style.bottom="".concat(u,"px")),w?E.style.left="".concat(p,"px"):E.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),e.appendChild(E)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),g1="data:image/svg+xml;base64,",Qv=g1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Kv=g1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Lg=g1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Dg=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),$v=function(){function t(){this.data=Dg.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Dg.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),Jv=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Ag.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Ag.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),eE=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Lg,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=qv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Lg,this.infoIcon.style.opacity="0.6")},t}(),tE=function(){function t(){var e=this;this.infoDiv=new Jv,this.infoIcon=new eE(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),nE=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},iE=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Pg=function(){function t(){}return t.hasPermissions=function(){return nE(this,void 0,void 0,function(){var e,n,r,l;return iE(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),po=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Po.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Po.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return or.DEFAULT_SUPPORTED_SCAN_TYPE;var n=or.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!or.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),Si=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),jr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(Si.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),K_=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function w(N){try{y(r.next(N))}catch(I){p(I)}}function E(N){try{y(r.throw(N))}catch(I){p(I)}}function y(N){N.done?u(N.value):l(N.value).then(w,E)}y((r=r.apply(t,e||[])).next())})},q_=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(N){return E([y,N])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},kg=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return K_(this,void 0,void 0,function(){var e,n;return q_(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?bt.torchOffButton():bt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?bt.torchOnFailedMessage():bt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),rE=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=jr.createElement("button",Si.TORCH_BUTTON_ID),this.torchController=new kg(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=bt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return K_(r,void 0,void 0,function(){return q_(this,function(p){switch(p.label){case 0:return[4,l.torchController.flipState()];case 1:return p.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(Si.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(Si.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(Si.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(Si.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new kg(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=bt.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),oE=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=jr.createElement("button",Si.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(w){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=jr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(w){if(!(w==null||w.target==null)){var E=w.target;if(!(E.files&&E.files.length===0)){var y=E.files,N=y[0],I=N.name;u.setImageNameToButton(I),r(N)}}});var p=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(p),this.fileBasedScanRegion.addEventListener("dragenter",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(w){w.stopPropagation(),w.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var E=w.dataTransfer;if(E){var y=E.files;if(!y||y.length===0)return;for(var N=!1,I=0;I<y.length;++I){var D=y.item(I);if(D){var W=/image.*/;if(D.type.match(W)){N=!0;var Y=D.name;u.setImageNameToButton(Y),r(D),p.innerText=bt.dragAndDropMessage();break}}}N||(p.innerText=bt.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=bt.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var p=bt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=p},t.prototype.setInitialValueToButton=function(){var e=bt.fileSelectionChooseImage()+" - "+bt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),sE=function(){function t(e){this.selectElement=jr.createElement("select",Si.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=bt.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,p=0,w=this.cameras;p<w.length;p++){var E=w[p],y=E.id,N=E.label==null?y:E.label;(!N||N==="")&&(N=[bt.anonymousCameraPrefix(),u++].join(" "));var I=document.createElement("option");I.value=y,I.innerText=N,this.options.push(I),this.selectElement.appendChild(I)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),aE=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=jr.createElement("input",Si.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=bt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),Ei;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ei||(Ei={}));function lE(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function cE(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var uE=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new po(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Y_(this.verbose),this.persistedDataManager=new $v,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,p){if(e)e(u,p);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(bt.lastMatch(u),Ei.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,p){n&&n(u,p)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Og(this.getScanRegionId(),cE(this.config,this.verbose))},t.prototype.pause=function(e){(Ar(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=or.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!or.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=or.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=or.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:or.SCAN_DEFAULT_FPS,rememberLastUsedCamera:or.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:or.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),po.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new tE;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(bt.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};Og.getCameras().then(function(p){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),p&&p.length>0?(e.removeChild(n),l.renderCameraSelection(p)):(l.setHeaderMessage(bt.noCameraFound(),Ei.STATUS_WARNING),u())}).catch(function(p){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(p,Ei.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=jr.createElement("button",this.getCameraPermissionButtonId());l.innerText=bt.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(po.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Pg.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=po.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=po.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";po.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(bt.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(p){r.resetHeaderMessage(),r.qrCodeSuccessCallback(p.decodedText,p)}).catch(function(p){r.setHeaderMessage(p,Ei.STATUS_WARNING),r.qrCodeErrorCallback(p,Z_.createFrom(p))}))};this.fileSelectionUi=oE.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=aE.create(l,!1),p=function(V){var me=V.zoomFeature();if(me.isSupported()){u.setOnCameraZoomValueChangeCallback(function(k){me.apply(k)});var H=1;n.config.defaultZoomValueIfSupported&&(H=n.config.defaultZoomValueIfSupported),H=bv(H,me.min(),me.max()),u.setValues(me.min(),me.max(),H,me.step()),u.show()}},w=sE.create(l,e),E=document.createElement("span"),y=jr.createElement("button",Si.CAMERA_START_BUTTON_ID);y.innerText=bt.scanButtonStartScanningText(),E.appendChild(y);var N=jr.createElement("button",Si.CAMERA_STOP_BUTTON_ID);N.innerText=bt.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,E.appendChild(N);var I,D=function(V){if(!V.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(V.torchFeature()):I=rE.create(E,V.torchFeature(),{display:"none",marginLeft:"5px"},function(me){r.setHeaderMessage(me,Ei.STATUS_WARNING)}),I.show()};l.appendChild(E);var W=function(V){V||(y.style.display="none"),y.innerText=bt.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,V&&(y.style.display="inline-block")};if(y.addEventListener("click",function(V){y.innerText=bt.scanButtonScanningStarting(),w.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var me=w.getValue();r.persistedDataManager.setLastUsedCameraId(me),r.html5Qrcode.start(me,lE(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(H){N.disabled=!1,N.style.display="inline-block",W(!1);var k=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&D(k),n.config.showZoomSliderIfSupported===!0&&p(k)}).catch(function(H){r.showHideScanTypeSwapLink(!0),w.enable(),W(!0),r.setHeaderMessage(H,Ei.STATUS_WARNING)})}),w.hasSingleItem()&&y.click(),N.addEventListener("click",function(V){if(!r.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,r.html5Qrcode.stop().then(function(me){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),w.enable(),y.disabled=!1,N.style.display="none",y.style.display="inline-block",I&&(I.reset(),I.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(me){N.disabled=!1,r.setHeaderMessage(me,Ei.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var Y=r.persistedDataManager.getLastUsedCameraId();w.hasValue(Y)?(w.setValue(Y),y.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=bt.textIfCameraScanSelected(),r=bt.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var p=jr.createElement("span",this.getDashboardSectionSwapLinkId());p.style.textDecoration="underline",p.style.cursor="pointer",p.innerText=po.isCameraScanType(this.currentScanType)?n:r,p.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,po.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),p.innerText=r,e.currentScanType=Po.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),p.innerText=n,e.currentScanType=Po.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(p),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Pg.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Ei.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case Ei.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Ei.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Ei.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Qv,this.cameraScanImage.alt=bt.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Kv,this.fileScanImage.alt=bt.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Si.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Si.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const dE="/Mapa-UC/assets/classroomLogo-caNNTX4V.png",hE="/Mapa-UC/assets/ScienceGroundFloorPlan-u3Hq3kSs.png",fE="/Mapa-UC/assets/Science1stFloorPlan-wchKLXKh.png",gE="/Mapa-UC/assets/Science2ndFloorPlan-72T-1DP_.png",pE="/Mapa-UC/assets/leaveButton--kz3Hal_.png",mE="/Mapa-UC/assets/BRS1stFloorPlan-HFWeZoi-.png",_E="/Mapa-UC/assets/BRS2ndFloorPlan-P15QRV88.png",yE="/Mapa-UC/assets/BRS3rdFloorPlan-0XqkoP_w.png",xE="/Mapa-UC/assets/BRS4thFloorPlan-ZHpzsnA-.png",wE="/Mapa-UC/assets/BRS5thFloorPlan-Em2tRAoJ.png",vE="/Mapa-UC/assets/BRS6thFloorPlan-tiw_cL5j.png",EE="/Mapa-UC/assets/BRS7thFloorPlan-030Wrle2.png",CE="/Mapa-UC/assets/BRS7thFloorPlan-030Wrle2.png",SE="/Mapa-UC/assets/BRS9thFloorPlan-DGDpXTmQ.png";function AE(t){let e=[];return t=="science2ndFloor"&&(e=[{id:0,lat:6.51,lon:.47},{id:1,lat:6.24,lon:.47},{lat:5.2,lon:.8,title:"office",building:"Science",floor:"2nd Floor",node:1,label:"classroomLogo"},{id:2,lat:6.75,lon:1},{lat:7.4,lon:.9,title:"classRoom",building:"Science",floor:"2nd Floor",node:2,label:"classroomLogo"},{id:3,lat:6.51,lon:1},{id:6,lat:6.51,lon:1.8},{id:5,lat:6.24,lon:1.8},{lat:5.2,lon:1.7,title:"office",building:"Science",floor:"2nd Floor",node:5,label:"classroomLogo"},{id:4,lat:6.75,lon:1.8},{lat:7.4,lon:1.7,title:"office",building:"Science",floor:"2nd Floor",node:4,label:"classroomLogo"},{id:7,lat:6.51,lon:2.25},{id:8,lat:6.51,lon:2.38},{id:9,lat:6.24,lon:2.38},{lat:5.2,lon:2.26,title:"classRoom",building:"Science",floor:"2nd Floor",node:9,label:"classroomLogo"},{id:10,lat:6.51,lon:2.55},{id:14,lat:7.15,lon:2.55,label:"leaveButton",destination:"science1stFloor"},{id:11,lat:7.5,lon:2.25},{id:12,lat:7.5,lon:2.55},{id:13,lat:7.41,lon:2.55,label:"leaveButton"},{id:15,lat:6.75,lon:2.78},{lat:8.1,lon:2.8,title:"office",building:"Science",floor:"2nd Floor",node:15,label:"classroomLogo"},{id:16,lat:6.51,lon:2.78},{id:19,lat:6.51,lon:3.3},{id:18,lat:6.75,lon:3.3},{lat:7.25,lon:3.2,title:"classRoom",building:"Science",floor:"2nd Floor",node:18,label:"classroomLogo"},{id:20,lat:6.24,lon:3.3},{lat:5.9,lon:3.2,title:"classRoom",building:"Science",floor:"2nd Floor",node:20,label:"classroomLogo"},{id:22,lat:6.51,lon:4.1},{id:23,lat:6.24,lon:4.1},{lat:5.9,lon:4.16,title:"classRoom",building:"Science",floor:"2nd Floor",node:23,label:"classroomLogo"},{id:21,lat:6.75,lon:4.1},{lat:7.25,lon:4,title:"classRoom",building:"Science",floor:"2nd Floor",node:21,label:"classroomLogo"},{id:24,lat:6.51,lon:4.63},{id:25,lat:7.79,lon:4.63},{id:26,lat:7.79,lon:4.725},{lat:8.1,lon:5.23,title:"classRoom",building:"Science",floor:"2nd Floor",node:26,label:"classroomLogo"},{id:27,lat:7.79,lon:4.5},{lat:8.1,lon:3.9,title:"classRoom",building:"Science",floor:"2nd Floor",node:27,label:"classroomLogo"},{id:28,lat:6.51,lon:5.3},{id:29,lat:6.75,lon:5.3},{lat:7.25,lon:5.23,title:"classRoom",building:"Science",floor:"2nd Floor",node:29,label:"classroomLogo"},{id:30,lat:6.24,lon:5.3},{lat:5.9,lon:5.25,title:"classRoom",building:"Science",floor:"2nd Floor",node:30,label:"classroomLogo"},{id:31,lat:6.51,lon:5.92},{id:33,lat:6.51,lon:6.3},{id:34,lat:6.51,lon:6.47},{id:32,lat:6.75,lon:6.3},{lat:7.5,lon:6.2,title:"",building:"Science",floor:"2nd Floor",node:32,label:"classroomLogo"},{id:35,lat:6.24,lon:6.47},{lat:5.9,lon:6.4,title:"classRoom",building:"Science",floor:"2nd Floor",node:35,label:"classroomLogo"},{id:37,lat:6.51,lon:6.8},{id:36,lat:6.75,lon:6.8},{lat:7.7,lon:6.75,title:"",building:"Science",floor:"2nd Floor",node:36,label:"classroomLogo"},{id:38,lat:6.51,lon:7.12},{id:39,lat:6.51,lon:7.4},{id:48,lat:5.05,lon:7.12},{id:47,lat:5.6,lon:7.21},{lat:5.5,lon:7.5,title:"facility",building:"Science",floor:"2nd Floor",node:47,label:"classroomLogo"},{id:46,lat:6,lon:7.3},{lat:6.05,lon:7.7,title:"facility",building:"Science",floor:"2nd Floor",node:46,label:"classroomLogo"},{id:40,lat:6.75,lon:7.4},{lat:7.7,lon:7.3,title:"",building:"Science",floor:"2nd Floor",node:40,label:"classroomLogo"},{id:41,lat:6.51,lon:7.65},{id:42,lat:6.63,lon:7.65},{id:45,lat:6.35,lon:7.65},{id:43,lat:6.63,lon:7.96},{id:44,lat:6.75,lon:7.96},{lat:7.25,lon:8.17,title:"classRoom",building:"Science",floor:"2nd Floor",node:44,label:"classroomLogo"},{id:49,lat:4.95,lon:5.92},{id:50,lat:4.95,lon:5.99},{lat:4.95,lon:6.4,title:"classRoom",building:"Science",floor:"2nd Floor",node:50,label:"classroomLogo"},{id:51,lat:4.2,lon:5.92},{id:52,lat:4.2,lon:5.99},{lat:4.25,lon:6.5,title:"classRoom",building:"Science",floor:"2nd Floor",node:52,label:"classroomLogo"},{id:53,lat:3.6,lon:5.92},{id:54,lat:3.31,lon:5.92},{lat:3,lon:5.75,title:"",building:"PE",floor:"2nd Floor",node:54,label:"classroomLogo"},{id:55,lat:3.6,lon:6.3},{id:56,lat:3.1,lon:6.3},{lat:2.75,lon:6.3,title:"",building:"PE",floor:"2nd Floor",node:56,label:"classroomLogo"},{id:57,lat:3.73,lon:6.3},{id:58,lat:3.73,lon:7.1},{id:59,lat:3.42,lon:7.1},{id:60,lat:3.6,lon:5.55},{id:61,lat:3.83,lon:5.55},{lat:4.4,lon:5.42,title:"classRoom",building:"Science",floor:"2nd Floor",node:61,label:"classroomLogo"},{id:62,lat:3.31,lon:5.25},{lat:3,lon:5.15,title:"",building:"PE",floor:"2nd Floor",node:62,label:"classroomLogo"},{id:63,lat:3.6,lon:5.05},{id:64,lat:3.83,lon:5.05},{lat:4.4,lon:4.9,title:"classRoom",building:"Science",floor:"2nd Floor",node:64,label:"classroomLogo"},{id:66,lat:3.31,lon:4.65},{lat:3,lon:4.5,title:"",building:"PE",floor:"2nd Floor",node:66,label:"classroomLogo"},{id:82,lat:3.6,lon:5.25},{id:68,lat:3.83,lon:4.5},{lat:4.4,lon:4.38,title:"classRoom",building:"Science",floor:"2nd Floor",node:68,label:"classroomLogo"},{id:67,lat:3.6,lon:4.5},{id:65,lat:3.6,lon:4.65},{id:71,lat:3.31,lon:3.9},{lat:3,lon:3.8,title:"",building:"PE",floor:"2nd Floor",node:71,label:"classroomLogo"},{id:69,lat:3.6,lon:3.9},{id:70,lat:3.83,lon:3.9},{lat:4.4,lon:3.84,title:"classRoom",building:"Science",floor:"2nd Floor",node:70,label:"classroomLogo"},{id:73,lat:3.24,lon:3.33,label:"leaveButton"},{id:75,lat:3.24,lon:3.045},{id:74,lat:3.6,lon:3.045},{id:72,lat:3.6,lon:3.33},{id:76,lat:3.6,lon:2.78},{id:77,lat:3.15,lon:2.5,label:"leaveButton",destination:"BRS2ndFloor"},{id:78,lat:4.2,lon:2.78},{id:79,lat:4.2,lon:2.86},{lat:4.3,lon:3.2,title:"classRoom",building:"Science",floor:"2nd Floor",node:79,label:"classroomLogo"},{id:80,lat:4.95,lon:2.78},{id:81,lat:4.95,lon:2.86},{lat:5,lon:3.2,title:"classRoom",building:"Science",floor:"2nd Floor",node:81,label:"classroomLogo"},{id:90,lat:6.63,lon:8.51},{id:98,lat:6.63,lon:8.6},{id:91,lat:7.9,lon:9.05},{id:92,lat:7.9,lon:8.99},{lat:8,lon:8.2,title:"classRoom",building:"Science",floor:"2nd Floor",node:92,label:"classroomLogo"},{id:95,lat:6.35,lon:8.2,label:"leaveButton"},{id:17,lat:2.45,lon:3.045},{id:99,lat:2.45,lon:3.33},{id:84,lat:2.68,lon:3.33,label:"leaveButton"},{id:93,lat:3.21,lon:7.1,label:"leaveButton"},{id:94,lat:3.42,lon:7,label:"leaveButton",destination:"science1stFloor"},{id:87,lat:6.65,lon:.47},{id:88,lat:6.65,lon:.25,label:"leaveButton"},{id:87,lat:6.38,lon:.47},{id:89,lat:6.35,lon:8.45,label:"leaveButton",destination:"science1stFloor"},{id:86,lat:6.38,lon:.23,label:"leaveButton"},{id:85,lat:6.38,lon:.47}]),t=="science1stFloor"&&(e=[{id:340,lat:7.63,lon:2.8,label:"leaveButton",destination:"science2ndFloor"},{id:341,lat:7.73,lon:2.8},{id:342,lat:7.73,lon:2.5},{id:343,lat:6.6,lon:2.5},{id:344,lat:6.6,lon:2.65},{id:345,lat:6.3,lon:2.65},{lat:5.5,lon:2.55,title:"classRoom",building:"Science",floor:"1st Floor",node:345,label:"classroomLogo"},{id:346,lat:6.6,lon:2.8},{id:347,lat:7.28,lon:2.8,label:"leaveButton",destination:"scienceGroundFloor"},{id:348,lat:6.6,lon:3.05},{id:349,lat:6.3,lon:3.05},{lat:5.5,lon:3.15,title:"classRoom",building:"Science",floor:"1st Floor",node:349,label:"classroomLogo"},{id:350,lat:6.6,lon:3.5},{id:351,lat:6.9,lon:3.5},{lat:7.9,lon:3.25,title:"classRoom",building:"Science",floor:"1st Floor",node:351,label:"classroomLogo"},{id:352,lat:6.3,lon:3.5},{lat:6.15,lon:3.3,title:"classRoom",building:"Science",floor:"1st Floor",node:352,label:"classroomLogo"},{id:353,lat:6.6,lon:3.96},{id:354,lat:6.3,lon:3.96},{lat:5.5,lon:3.69,title:"classRoom",building:"Science",floor:"1st Floor",node:354,label:"classroomLogo"},{id:355,lat:6.6,lon:4.05},{id:356,lat:6.9,lon:4.05},{lat:7.9,lon:4,title:"classRoom",building:"Science",floor:"1st Floor",node:356,label:"classroomLogo"},{id:357,lat:6.6,lon:4.4},{id:358,lat:6.3,lon:4.4},{lat:5.8,lon:4.3,title:"classRoom",building:"Science",floor:"1st Floor",node:358,label:"classroomLogo"},{id:359,lat:6.6,lon:4.75},{id:360,lat:6.9,lon:4.75},{lat:7.9,lon:4.5,title:"classRoom",building:"Science",floor:"1st Floor",node:360,label:"classroomLogo"},{id:361,lat:6.6,lon:5},{id:362,lat:6.6,lon:5.5},{id:363,lat:6.3,lon:5.5},{lat:5.8,lon:5.4,title:"classRoom",building:"Science",floor:"1st Floor",node:363,label:"classroomLogo"},{id:364,lat:6.6,lon:5.75},{id:365,lat:6.9,lon:5.75},{lat:7.9,lon:5.5,title:"classRoom",building:"Science",floor:"1st Floor",node:365,label:"classroomLogo"},{id:366,lat:6.6,lon:6.1},{id:367,lat:6.3,lon:6.1},{lat:5.8,lon:5.95,title:"classRoom",building:"Science",floor:"1st Floor",node:367,label:"classroomLogo"},{id:368,lat:6.6,lon:6.45},{id:369,lat:6.9,lon:6.45},{lat:7.9,lon:6.34,title:"classRoom",building:"Science",floor:"1st Floor",node:369,label:"classroomLogo"},{id:370,lat:6.6,lon:6.7},{id:371,lat:6.3,lon:6.7},{lat:5.8,lon:6.55,title:"classRoom",building:"Science",floor:"1st Floor",node:371,label:"classroomLogo"},{id:372,lat:6.6,lon:7.15},{id:373,lat:6.9,lon:7.15},{lat:7.9,lon:7,title:"classRoom",building:"Science",floor:"1st Floor",node:373,label:"classroomLogo"},{id:374,lat:6.6,lon:7.3},{id:375,lat:6.3,lon:7.3},{lat:5.8,lon:7.2,title:"classRoom",building:"Science",floor:"1st Floor",node:375,label:"classroomLogo"},{id:376,lat:6.6,lon:7.83},{id:377,lat:6.08,lon:7.83},{id:378,lat:6.08,lon:8},{lat:5.93,lon:8.4,title:"classRoom",building:"Science",floor:"1st Floor",node:378,label:"classroomLogo"},{id:379,lat:5.88,lon:7.83},{lat:5.2,lon:8,title:"classRoom",building:"Science",floor:"1st Floor",node:379,label:"classroomLogo"},{id:405,lat:6.6,lon:8.05},{id:406,lat:6.9,lon:8.05},{lat:7.9,lon:7.95,title:"classRoom",building:"Science",floor:"1st Floor",node:406,label:"classroomLogo"},{id:380,lat:6.6,lon:8.59},{id:407,lat:6.75,lon:8.59},{id:381,lat:6.9,lon:8.59},{lat:8.35,lon:8.65,title:"classRoom",building:"Science",floor:"1st Floor",node:381,label:"classroomLogo"},{id:382,lat:6.75,lon:8.82},{id:383,lat:6.75,lon:8.88},{id:384,lat:7.15,lon:8.82},{lat:7.7,lon:9,title:"classRoom",building:"Science",floor:"1st Floor",node:384,label:"classroomLogo"},{id:385,lat:6.6,lon:8.82},{id:386,lat:6.45,lon:8.82},{id:387,lat:6.45,lon:9.1,label:"leaveButton",destination:"science2ndFloor"},{id:390,lat:6.75,lon:9.35},{id:391,lat:6.75,lon:9.45},{id:392,lat:6.45,lon:9.35},{id:393,lat:6.45,lon:9.25,label:"leaveButton",destination:"scienceGroundFloor"},{id:394,lat:4.5,lon:5},{id:395,lat:4.5,lon:4.85},{lat:4.6,lon:4.4,title:"classRoom",building:"Science",floor:"1st Floor",node:395,label:"classroomLogo"},{id:396,lat:4.25,lon:5},{id:397,lat:4.25,lon:5.17},{lat:4.3,lon:5.7,title:"classRoom",building:"Science",floor:"1st Floor",node:397,label:"classroomLogo"},{id:398,lat:3.9,lon:5},{id:399,lat:3.9,lon:5.17},{lat:3.9,lon:5.7,title:"classRoom",building:"Science",floor:"1st Floor",node:399,label:"classroomLogo"},{id:400,lat:3.45,lon:5},{lat:2.6,lon:5,title:"classRoom",building:"Science",floor:"1st Floor",node:400,label:"classroomLogo"},{id:401,lat:3.45,lon:7.4,label:"leaveButton",destination:"science2ndFloor"},{id:403,lat:3.45,lon:2.96},{id:404,lat:3.05,lon:2.75,label:"leaveButton",destination:"BRS1stFloor"}]),t=="scienceGroundFloor"?e=[{id:420,lat:6.645,lon:1.32,label:"leaveButton",destination:"science1stFloor"},{id:421,lat:6.76,lon:1.32},{id:422,lat:6.76,lon:.99},{id:425,lat:5.5,lon:.99},{id:424,lat:5.5,lon:.85},{lat:5.5,lon:.3,title:"classRoom",building:"Science",floor:"Ground Floor",node:424,label:"classroomLogo"},{id:426,lat:5.5,lon:1.1},{id:427,lat:5.19,lon:1.1},{lat:4.6,lon:1,title:"classRoom",building:"Science",floor:"Ground Floor",node:427,label:"classroomLogo"},{id:428,lat:5.5,lon:1.36},{id:429,lat:5.82,lon:1.36},{id:430,lat:5.5,lon:1.85},{id:431,lat:5.82,lon:1.85},{lat:7,lon:1.7,title:"classRoom",building:"Science",floor:"Ground Floor",node:431,label:"classroomLogo"},{id:432,lat:5.19,lon:1.85},{lat:4.6,lon:1.7,title:"classRoom",building:"Science",floor:"Ground Floor",node:432,label:"classroomLogo"},{id:433,lat:5.5,lon:2.5},{id:434,lat:5.82,lon:2.5},{lat:7,lon:2.4,title:"classRoom",building:"Science",floor:"Ground Floor",node:434,label:"classroomLogo"},{id:435,lat:5.19,lon:2.5},{lat:4.6,lon:2.36,title:"classRoom",building:"Science",floor:"Ground Floor",node:435,label:"classroomLogo"},{id:436,lat:5.5,lon:3.2},{id:437,lat:5.82,lon:3.2},{lat:7,lon:3.1,title:"classRoom",building:"Science",floor:"Ground Floor",node:437,label:"classroomLogo"},{id:438,lat:5.5,lon:3.4},{id:439,lat:5.19,lon:3.4},{lat:4.6,lon:3.3,title:"classRoom",building:"Science",floor:"Ground Floor",node:439,label:"classroomLogo"},{id:440,lat:5.5,lon:3.9},{id:441,lat:5.82,lon:3.9},{lat:7,lon:3.8,title:"classRoom",building:"Science",floor:"Ground Floor",node:441,label:"classroomLogo"},{id:442,lat:5.5,lon:4.45},{id:443,lat:5.19,lon:4.45},{lat:4.6,lon:4.2,title:"classRoom",building:"Science",floor:"Ground Floor",node:443,label:"classroomLogo"},{id:444,lat:5.5,lon:4.6},{id:445,lat:5.82,lon:4.6},{lat:7,lon:4.5,title:"classRoom",building:"Science",floor:"Ground Floor",node:445,label:"classroomLogo"},{id:446,lat:5.5,lon:5.32},{id:447,lat:5.82,lon:5.32},{lat:7,lon:5.2,title:"classRoom",building:"Science",floor:"Ground Floor",node:447,label:"classroomLogo"},{id:448,lat:5.19,lon:5.32},{lat:4.6,lon:5.2,title:"classRoom",building:"Science",floor:"Ground Floor",node:448,label:"classroomLogo"},{id:449,lat:5.5,lon:6},{id:450,lat:5.82,lon:6},{lat:7,lon:5.9,title:"classRoom",building:"Science",floor:"Ground Floor",node:450,label:"classroomLogo"},{id:451,lat:5.19,lon:6},{lat:4.6,lon:5.9,title:"classRoom",building:"Science",floor:"Ground Floor",node:451,label:"classroomLogo"},{id:452,lat:5.5,lon:6.7},{id:453,lat:5.82,lon:6.7},{lat:7,lon:6.65,title:"classRoom",building:"Science",floor:"Ground Floor",node:453,label:"classroomLogo"},{id:454,lat:5.19,lon:6.7},{lat:4.68,lon:6.63,title:"classRoom",building:"Science",floor:"Ground Floor",node:454,label:"classroomLogo"},{id:455,lat:5.5,lon:6.9},{id:456,lat:5.34,lon:6.9},{id:457,lat:5.34,lon:7.2},{id:458,lat:5.19,lon:7.2},{lat:3.9,lon:7.2,title:"classRoom",building:"Science",floor:"Ground Floor",node:458,label:"classroomLogo"},{id:459,lat:5.34,lon:7.4},{id:460,lat:5.45,lon:7.4},{lat:7,lon:7.6,title:"classRoom",building:"Science",floor:"Ground Floor",node:460,label:"classroomLogo"},{id:461,lat:5.34,lon:7.6},{id:462,lat:5.19,lon:7.6},{lat:4.68,lon:7.6,title:"classRoom",building:"Science",floor:"Ground Floor",node:462,label:"classroomLogo"},{id:463,lat:5.34,lon:8.6},{id:464,lat:5.65,lon:8.7},{id:465,lat:5.82,lon:8.7},{lat:7,lon:8.6,title:"classRoom",building:"Science",floor:"Ground Floor",node:465,label:"classroomLogo"},{id:466,lat:5.65,lon:8.53,label:"leaveButton",destination:"science1stFloor"}]:t=="BRS1stFloor"?e=[{id:130,lat:8.3,lon:9.65,label:"leaveButton",destination:"science1stFloor"},{id:131,lat:5,lon:9.65},{id:132,lat:5,lon:8.1},{id:133,lat:5.38,lon:8.1},{lat:6.8,lon:7.9,title:"classRoom",building:"BRS",floor:"1st Floor",node:133,label:"classroomLogo"},{id:134,lat:5,lon:7.1},{id:135,lat:4.66,lon:7.1},{lat:3.4,lon:7,title:"classRoom",building:"BRS",floor:"1st Floor",node:135,label:"classroomLogo"},{id:136,lat:5,lon:5.7},{id:137,lat:5.38,lon:5.7},{lat:6.8,lon:5.5,title:"classRoom",building:"BRS",floor:"1st Floor",node:137,label:"classroomLogo"},{id:138,lat:5,lon:4.3},{id:139,lat:4.66,lon:4.3},{lat:3.5,lon:4.1,title:"classRoom",building:"BRS",floor:"1st Floor",node:139,label:"classroomLogo"},{id:140,lat:5,lon:4.17},{id:141,lat:5.4,lon:4.17},{lat:6.7,lon:3.5,title:"facility",building:"BRS",floor:"1st Floor",node:141,label:"classroomLogo"},{id:142,lat:5,lon:3.1},{id:143,lat:5.38,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"",building:"BRS",floor:"1st Floor",node:143},{id:144,lat:5,lon:1.5},{id:145,lat:4.66,lon:1.5},{lat:3.5,lon:1.2,title:"classRoom",building:"BRS",floor:"1st Floor",node:145,label:"classroomLogo"},{id:146,lat:5,lon:.7},{id:147,lat:6.6,lon:.7},{id:148,lat:6.6,lon:1.9},{id:149,lat:6.2,lon:1.9,label:"leaveButton",destination:"BRS2ndFloor"}]:t=="BRS2ndFloor"?e=[{id:100,lat:8.55,lon:9.65,label:"leaveButton",destination:"science2ndFloor"},{id:101,lat:5.25,lon:9.65},{id:102,lat:5.25,lon:8.1},{id:103,lat:5.6,lon:8.1},{lat:6.8,lon:7.9,title:"classRoom",building:"BRS",floor:"2nd Floor",node:103,label:"classroomLogo"},{id:104,lat:5.25,lon:7.7},{id:105,lat:4.95,lon:7.7},{lat:3.5,lon:7.6,title:"classRoom",building:"BRS",floor:"2nd Floor",node:105,label:"classroomLogo"},{id:106,lat:5.25,lon:5.7},{id:107,lat:5.6,lon:5.7},{lat:6.8,lon:5.5,title:"classRoom",building:"BRS",floor:"2nd Floor",node:107,label:"classroomLogo"},{id:108,lat:5.25,lon:4.7},{id:109,lat:4.95,lon:4.7},{lat:3.5,lon:4.5,title:"classRoom",building:"BRS",floor:"2nd Floor",node:109,label:"classroomLogo"},{id:110,lat:5.25,lon:4.17},{id:111,lat:5.8,lon:4.17},{lat:6.9,lon:3.6,title:"facility",building:"BRS",floor:"2nd Floor",node:111,label:"classroomLogo"},{id:112,lat:5.25,lon:3.1},{id:113,lat:5.6,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:6.1,lon:2.9,title:"",building:"BRS",floor:"2nd Floor",node:113},{id:114,lat:5.25,lon:1.9},{id:115,lat:5.6,lon:1.9,label:"leaveButton",destination:"BRS1stFloor"},{id:116,lat:5.25,lon:1.6},{id:117,lat:4.95,lon:1.6},{lat:3.5,lon:1.4,title:"classRoom",building:"BRS",floor:"2nd Floor",node:117,label:"classroomLogo"},{id:118,lat:5.25,lon:.7},{id:119,lat:6.9,lon:.7},{id:120,lat:6.9,lon:1.9},{id:121,lat:6.5,lon:1.9,label:"leaveButton",destination:"BRS3rdFloor"}]:t=="BRS3rdFloor"?e=[{id:155,lat:8.3,lon:9.65,label:"leaveButton",destination:"BRS2ndFloor"},{id:156,lat:5,lon:9.65},{id:157,lat:5,lon:7.8},{id:158,lat:4.66,lon:7.8},{lat:3.4,lon:7.5,title:"classRoom",building:"BRS",floor:"3rd Floor",node:158,label:"classroomLogo"},{id:159,lat:5,lon:7},{id:160,lat:5.38,lon:7},{lat:7,lon:6.5,title:"classRoom",building:"BRS",floor:"3rd Floor",node:160,label:"classroomLogo"},{id:161,lat:5,lon:4.3},{id:162,lat:4.66,lon:4.3},{lat:3.5,lon:4.1,title:"classRoom",building:"BRS",floor:"3rd Floor",node:162,label:"classroomLogo"},{id:163,lat:5,lon:4.17},{id:164,lat:5.5,lon:4.17},{lat:6.7,lon:3.5,title:"facility",building:"BRS",floor:"3rd Floor",node:164,label:"classroomLogo"},{id:165,lat:5,lon:3.1},{id:166,lat:5.38,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"",building:"BRS",floor:"3rd Floor",node:166},{id:167,lat:5,lon:1.9},{id:168,lat:5.38,lon:1.9,label:"leaveButton",destination:"BRS2ndFloor"},{id:169,lat:5,lon:1.5},{id:170,lat:4.66,lon:1.5},{lat:3.5,lon:1.2,title:"classRoom",building:"BRS",floor:"3rd Floor",node:170,label:"classroomLogo"},{id:171,lat:5,lon:.7},{id:172,lat:6.6,lon:.7},{id:173,lat:6.6,lon:1.9},{id:174,lat:6.26,lon:1.9,label:"leaveButton",destination:"BRS4thFloor"}]:t=="BRS4thFloor"?e=[{id:202,lat:6.28,lon:2.95,label:"leaveButton",destination:"BRS5thFloor"},{id:201,lat:6.6,lon:2.95},{id:200,lat:6.6,lon:1.9},{id:199,lat:5.22,lon:1.9},{id:198,lat:5.22,lon:2.45},{id:203,lat:4.9,lon:2.45},{id:204,lat:4.9,lon:1.9},{id:205,lat:4.9,lon:.85},{id:206,lat:5.6,lon:.85,label:"leaveButton"},{id:207,lat:4.9,lon:.1},{id:196,lat:5.22,lon:2.95},{id:197,lat:5.55,lon:2.95,label:"leaveButton",destination:"BRS3rdFloor"},{id:194,lat:5.22,lon:4},{id:195,lat:5.55,lon:4,label:"elevator",elevatorBuilding:"BRS"},{lat:6,lon:3.9,title:"classRoom",building:"BRS",floor:"4th Floor",node:195},{id:192,lat:5.22,lon:4.5},{id:193,lat:4.93,lon:4.5},{lat:4,lon:4.3,title:"classRoom",building:"BRS",floor:"4th Floor",node:193,label:"classroomLogo"},{id:190,lat:5.22,lon:4.98},{id:191,lat:5.7,lon:4.98},{lat:6.8,lon:4.5,title:"classRoom",building:"BRS",floor:"4th Floor",node:191},{id:188,lat:5.22,lon:6.3},{id:189,lat:5.55,lon:6.3},{lat:6.8,lon:6,title:"classRoom",building:"BRS",floor:"4th Floor",node:189,label:"classroomLogo"},{id:186,lat:5.22,lon:6.55},{id:187,lat:4.93,lon:6.55},{lat:4,lon:6.4,title:"classRoom",building:"BRS",floor:"4th Floor",node:187,label:"classroomLogo"},{id:184,lat:5.22,lon:8.3},{id:185,lat:5.55,lon:8.3},{lat:6.8,lon:8,title:"classRoom",building:"BRS",floor:"4th Floor",node:185,label:"classroomLogo"},{id:182,lat:5.22,lon:8.5},{id:183,lat:4.93,lon:8.5},{lat:4,lon:8.3,title:"classRoom",building:"BRS",floor:"4th Floor",node:183,label:"classroomLogo"},{id:181,lat:5.22,lon:9.67},{id:180,lat:8.05,lon:9.67},{id:208,lat:1.9,lon:2.45},{lat:2,lon:2.45,title:"classRoom",building:"BRS",floor:"4th Floor",node:208}]:t=="BRS5thFloor"?e=[{id:215,lat:6.24,lon:1.88,label:"leaveButton",destination:"BRS6thFloor"},{id:216,lat:6.65,lon:1.88},{id:217,lat:6.65,lon:.65},{id:218,lat:4.95,lon:.65},{id:219,lat:4.95,lon:1.4},{id:220,lat:4.66,lon:1.4},{lat:3.3,lon:3.4,title:"classRoom",building:"BRS",floor:"5th Floor",node:220},{id:221,lat:4.95,lon:1.88},{id:222,lat:5.4,lon:1.88,label:"leaveButton",destination:"BRS4thFloor"},{id:223,lat:4.95,lon:3.1},{id:224,lat:5.4,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"classRoom",building:"BRS",floor:"5th Floor",node:224},{id:225,lat:4.95,lon:4.15},{id:226,lat:5.6,lon:4.15},{lat:6.6,lon:3.6,title:"classRoom",building:"BRS",floor:"5th Floor",node:226},{lat:7.5,lon:6.5,title:"classRoom",building:"BRS",floor:"5th Floor",node:227}]:t=="BRS6thFloor"?e=[{id:230,lat:6.24,lon:1.88,label:"leaveButton",destination:"BRS7thFloor"},{id:231,lat:6.65,lon:1.88},{id:232,lat:6.65,lon:.65},{id:233,lat:4.95,lon:.65},{id:234,lat:4.95,lon:1.2},{id:235,lat:4.66,lon:1.2},{lat:3.3,lon:1.1,title:"classRoom",building:"BRS",floor:"6th Floor",node:235},{id:236,lat:4.95,lon:1.88},{id:237,lat:5.4,lon:1.88,label:"leaveButton",destination:"BRS5thFloor"},{id:238,lat:4.95,lon:3.1},{id:239,lat:5.4,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"classRoom",building:"BRS",floor:"6th Floor",node:239},{id:240,lat:4.95,lon:4.15},{id:241,lat:5.6,lon:4.15},{lat:6.6,lon:3.6,title:"classRoom",building:"BRS",floor:"6th Floor",node:241},{id:242,lat:4.66,lon:4.15},{id:243,lat:4.95,lon:7},{id:244,lat:4.66,lon:7},{id:245,lat:5.4,lon:7},{lat:7.5,lon:6.8,title:"classRoom",building:"BRS",floor:"6th Floor",node:245},{id:246,lat:4.95,lon:9.65},{id:247,lat:5.4,lon:9.65},{lat:3.3,lon:5,title:"classRoom",building:"BRS",floor:"6th Floor",node:248}]:t=="BRS7thFloor"?e=[{id:255,lat:6.24,lon:1.88,label:"leaveButton",destination:"BRS8thFloor"},{id:256,lat:6.65,lon:1.88},{id:257,lat:6.65,lon:.65},{id:258,lat:4.95,lon:.65},{id:259,lat:4.95,lon:1.2},{id:260,lat:4.66,lon:1.2},{lat:3.3,lon:1.1,title:"classRoom",building:"BRS",floor:"7th Floor",node:260},{id:261,lat:4.95,lon:1.88},{id:262,lat:5.4,lon:1.88,label:"leaveButton",destination:"BRS6thFloor"},{id:263,lat:4.95,lon:3.1},{id:264,lat:5.4,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"classRoom",building:"BRS",floor:"7th Floor",node:264},{id:265,lat:4.95,lon:3.5},{id:266,lat:4.66,lon:3.5},{lat:3.3,lon:3.3,title:"classRoom",building:"BRS",floor:"7th Floor",node:266},{id:267,lat:4.95,lon:4.15},{id:268,lat:5.6,lon:4.15},{lat:6.6,lon:3.6,title:"classRoom",building:"BRS",floor:"7th Floor",node:268},{id:269,lat:4.95,lon:5.8},{id:270,lat:5.4,lon:5.8},{lat:7.5,lon:5.5,title:"classRoom",building:"BRS",floor:"7th Floor",node:270},{id:271,lat:4.66,lon:5.8},{lat:3.3,lon:5.5,title:"classRoom",building:"BRS",floor:"7th Floor",node:271},{id:272,lat:4.95,lon:8.1},{id:273,lat:4.66,lon:8.1},{lat:3.3,lon:7.8,title:"classRoom",building:"BRS",floor:"7th Floor",node:273},{id:274,lat:4.95,lon:8.6},{id:275,lat:5.4,lon:8.6},{lat:7.5,lon:7.9,title:"classRoom",building:"BRS",floor:"7th Floor",node:275}]:t=="BRS8thFloor"?e=[{id:280,lat:6.24,lon:1.88,label:"leaveButton",destination:"BRS9thFloor"},{id:281,lat:6.65,lon:1.88},{id:282,lat:6.65,lon:.65},{id:283,lat:4.95,lon:.65},{id:284,lat:4.95,lon:1.2},{id:285,lat:4.66,lon:1.2},{lat:3.3,lon:1.1,title:"classRoom",building:"BRS",floor:"8th Floor",node:285},{id:286,lat:4.95,lon:1.88},{id:287,lat:5.4,lon:1.88,label:"leaveButton",destination:"BRS7thFloor"},{id:288,lat:4.95,lon:3.1},{id:289,lat:5.4,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:5.8,lon:2.9,title:"classRoom",building:"BRS",floor:"8th Floor",node:289},{id:290,lat:4.95,lon:3.5},{id:291,lat:4.66,lon:3.5},{lat:3.3,lon:3.3,title:"classRoom",building:"BRS",floor:"8th Floor",node:291},{id:292,lat:4.95,lon:4.15},{id:293,lat:5.6,lon:4.15},{lat:6.6,lon:3.6,title:"classRoom",building:"BRS",floor:"8th Floor",node:293},{id:294,lat:4.95,lon:5.8},{id:295,lat:5.4,lon:5.8},{lat:7.5,lon:5.5,title:"classRoom",building:"BRS",floor:"8th Floor",node:295},{id:296,lat:4.66,lon:5.8},{lat:3.3,lon:5.5,title:"classRoom",building:"BRS",floor:"8th Floor",node:296},{id:297,lat:4.95,lon:8.1},{id:298,lat:4.66,lon:8.1},{lat:3.3,lon:7.8,title:"classRoom",building:"BRS",floor:"8th Floor",node:298},{id:299,lat:4.95,lon:8.6},{id:300,lat:5.4,lon:8.6},{lat:7.5,lon:7.9,title:"classRoom",building:"BRS",floor:"8th Floor",node:300}]:t=="BRS9thFloor"&&(e=[{id:305,lat:6.24,lon:1.88,label:"leaveButton",destination:"BRS10thFloor"},{id:306,lat:6.65,lon:1.88},{id:307,lat:6.65,lon:.65},{id:308,lat:4.95,lon:.65},{id:309,lat:4.95,lon:1.2},{id:310,lat:4.43,lon:1.2},{lat:3.3,lon:1.1,title:"classRoom",building:"BRS",floor:"9th Floor",node:310},{id:311,lat:4.95,lon:1.88},{id:312,lat:5.6,lon:1.88,label:"leaveButton",destination:"BRS8thFloor"},{id:313,lat:4.95,lon:3.1},{id:314,lat:5.6,lon:3.1,label:"elevator",elevatorBuilding:"BRS"},{lat:6,lon:2.9,title:"classRoom",building:"BRS",floor:"9th Floor",node:314},{id:315,lat:4.95,lon:3.5},{id:316,lat:4.43,lon:3.5},{lat:3.3,lon:3.3,title:"classRoom",building:"BRS",floor:"9th Floor",node:316},{id:317,lat:4.95,lon:4.15},{id:318,lat:5.7,lon:4.15},{lat:6.8,lon:3.6,title:"classRoom",building:"BRS",floor:"9th Floor",node:318},{id:319,lat:4.95,lon:5.3},{id:320,lat:5.6,lon:5.3},{lat:7.5,lon:5,title:"classRoom",building:"BRS",floor:"9th Floor",node:320},{id:321,lat:4.95,lon:5.8},{id:322,lat:4.43,lon:5.8},{lat:3.3,lon:5.5,title:"classRoom",building:"BRS",floor:"9th Floor",node:322},{id:323,lat:4.95,lon:7.2},{id:324,lat:5.6,lon:7.2},{lat:7.5,lon:7,title:"classRoom",building:"BRS",floor:"9th Floor",node:324},{id:325,lat:4.95,lon:8.1},{id:326,lat:4.43,lon:8.1},{lat:3.3,lon:7.8,title:"classRoom",building:"BRS",floor:"9th Floor",node:326},{id:327,lat:4.95,lon:9.15},{id:328,lat:5.6,lon:9.15},{lat:7.5,lon:8.8,title:"classRoom",building:"BRS",floor:"9th Floor",node:328}]),e}var Bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=function(t,e){if(!t)throw wa(e)},wa=function(t){return new Error("Firebase Database ("+$_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},IE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const l=t[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=t[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=t[n++],p=t[n++],w=t[n++],E=((l&7)<<18|(u&63)<<12|(p&63)<<6|w&63)-65536;e[r++]=String.fromCharCode(55296+(E>>10)),e[r++]=String.fromCharCode(56320+(E&1023))}else{const u=t[n++],p=t[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|p&63)}}return e.join("")},p1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<t.length;l+=3){const u=t[l],p=l+1<t.length,w=p?t[l+1]:0,E=l+2<t.length,y=E?t[l+2]:0,N=u>>2,I=(u&3)<<4|w>>4;let D=(w&15)<<2|y>>6,W=y&63;E||(W=64,p||(D=64)),r.push(n[N],n[I],n[D],n[W])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<t.length;){const u=n[t.charAt(l++)],w=l<t.length?n[t.charAt(l)]:0;++l;const y=l<t.length?n[t.charAt(l)]:64;++l;const I=l<t.length?n[t.charAt(l)]:64;if(++l,u==null||w==null||y==null||I==null)throw new TE;const D=u<<2|w>>4;if(r.push(D),y!==64){const W=w<<4&240|y>>2;if(r.push(W),I!==64){const Y=y<<6&192|I;r.push(Y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(t){const e=J_(t);return p1.encodeByteArray(e,!0)},pu=function(t){return e2(t).replace(/\./g,"")},$h=function(t){try{return p1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){return t2(void 0,t)}function t2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!NE(n)||(t[n]=t2(t[n],e[n]));return t}function NE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=()=>RE().__FIREBASE_DEFAULTS__,OE=()=>{if(typeof process>"u"||typeof Bg>"u")return;const t=Bg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$h(t[1]);return e&&JSON.parse(e)},n2=()=>{try{return ME()||OE()||LE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DE=t=>{var e,n;return(n=(e=n2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},PE=t=>{const e=DE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i2=()=>{var t;return(t=n2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pu(JSON.stringify(n)),pu(JSON.stringify(p)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(BE())}function FE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o2(){return $_.NODE_ADMIN===!0}function zE(){try{return typeof indexedDB=="object"}catch{return!1}}function UE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="FirebaseError";class Yl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HE,Object.setPrototypeOf(this,Yl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s2.prototype.create)}}class s2{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],p=u?WE(u,r):"Error",w=`${this.serviceName}: ${p} (${l}).`;return new Yl(l,w,r)}}function WE(t,e){return t.replace(VE,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const VE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return JSON.parse(t)}function Dn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=function(t){let e={},n={},r={},l="";try{const u=t.split(".");e=Ol($h(u[0])||""),n=Ol($h(u[1])||""),l=u[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:l}},jE=function(t){const e=a2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},GE=function(t){const e=a2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Fg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mu(t,e,n){const r={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=e.call(n,t[l],l,t));return r}function Jh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=t[l],p=e[l];if(zg(u)&&zg(p)){if(!Jh(u,p))return!1}else if(u!==p)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function zg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let I=0;I<16;I++)r[I]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let I=0;I<16;I++)r[I]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let I=16;I<80;I++){const D=r[I-3]^r[I-8]^r[I-14]^r[I-16];r[I]=(D<<1|D>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],p=this.chain_[2],w=this.chain_[3],E=this.chain_[4],y,N;for(let I=0;I<80;I++){I<40?I<20?(y=w^u&(p^w),N=1518500249):(y=u^p^w,N=1859775393):I<60?(y=u&p|w&(u|p),N=2400959708):(y=u^p^w,N=3395469782);const D=(l<<5|l>>>27)+y+E+N+r[I]&4294967295;E=w,w=p,p=(u<<30|u>>>2)&4294967295,u=l,l=D}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+p&4294967295,this.chain_[3]=this.chain_[3]+w&4294967295,this.chain_[4]=this.chain_[4]+E&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let l=0;const u=this.buf_;let p=this.inbuf_;for(;l<n;){if(p===0)for(;l<=r;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(u[p]=e.charCodeAt(l),++p,++l,p===this.blockSize){this.compress_(u),p=0;break}}else for(;l<n;)if(u[p]=e[l],++p,++l,p===this.blockSize){this.compress_(u),p=0;break}}this.inbuf_=p,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[r]=this.chain_[l]>>u&255,++r;return e}}function l2(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);if(l>=55296&&l<=56319){const u=l-55296;r++,ge(r<t.length,"Surrogate pair missing trail surrogate.");const p=t.charCodeAt(r)-56320;l=65536+(u<<10)+p}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Ku=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return t&&t._delegate?t._delegate:t}class Ll{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new m1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qE(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,p]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(u);r===w&&p.resolve(l)}return l}onInit(e,n){var r;const l=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(l))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(l,u);const p=this.instances.get(l);return p&&e(p,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KE(t){return t===es?void 0:t}function qE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Bt||(Bt={}));const JE={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},e3=Bt.INFO,t3={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},n3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),l=t3[e];if(l)console[l](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c2{constructor(e){this.name=e,this._logLevel=e3,this._logHandler=n3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...e),this._logHandler(this,Bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...e),this._logHandler(this,Bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...e),this._logHandler(this,Bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...e),this._logHandler(this,Bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...e),this._logHandler(this,Bt.ERROR,...e)}}const i3=(t,e)=>e.some(n=>t instanceof n);let Ug,Hg;function r3(){return Ug||(Ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o3(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u2=new WeakMap,ef=new WeakMap,d2=new WeakMap,Wd=new WeakMap,_1=new WeakMap;function s3(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",u),t.removeEventListener("error",p)},u=()=>{n(Ro(t.result)),l()},p=()=>{r(t.error),l()};t.addEventListener("success",u),t.addEventListener("error",p)});return e.then(n=>{n instanceof IDBCursor&&u2.set(n,t)}).catch(()=>{}),_1.set(e,t),e}function a3(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",p),t.removeEventListener("abort",p)},u=()=>{n(),l()},p=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",u),t.addEventListener("error",p),t.addEventListener("abort",p)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ro(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l3(t){tf=t(tf)}function c3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vd(this),e,...n);return d2.set(r,e.sort?e.sort():[e]),Ro(r)}:o3().includes(t)?function(...e){return t.apply(Vd(this),e),Ro(u2.get(this))}:function(...e){return Ro(t.apply(Vd(this),e))}}function u3(t){return typeof t=="function"?c3(t):(t instanceof IDBTransaction&&a3(t),i3(t,r3())?new Proxy(t,tf):t)}function Ro(t){if(t instanceof IDBRequest)return s3(t);if(Wd.has(t))return Wd.get(t);const e=u3(t);return e!==t&&(Wd.set(t,e),_1.set(e,t)),e}const Vd=t=>_1.get(t);function d3(t,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const p=indexedDB.open(t,e),w=Ro(p);return r&&p.addEventListener("upgradeneeded",E=>{r(Ro(p.result),E.oldVersion,E.newVersion,Ro(p.transaction),E)}),n&&p.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),w.then(E=>{u&&E.addEventListener("close",()=>u()),l&&E.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),w}const h3=["get","getKey","getAll","getAllKeys","count"],f3=["put","add","delete","clear"],jd=new Map;function Wg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=f3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||h3.includes(n)))return;const u=async function(p,...w){const E=this.transaction(p,l?"readwrite":"readonly");let y=E.store;return r&&(y=y.index(w.shift())),(await Promise.all([y[n](...w),l&&E.done]))[0]};return jd.set(e,u),u}l3(t=>({...t,get:(e,n,r)=>Wg(e,n)||t.get(e,n,r),has:(e,n)=>!!Wg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function p3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Vg="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new c2("@firebase/app"),m3="@firebase/app-compat",_3="@firebase/analytics-compat",y3="@firebase/analytics",x3="@firebase/app-check-compat",w3="@firebase/app-check",v3="@firebase/auth",E3="@firebase/auth-compat",C3="@firebase/database",S3="@firebase/database-compat",A3="@firebase/functions",I3="@firebase/functions-compat",T3="@firebase/installations",b3="@firebase/installations-compat",N3="@firebase/messaging",R3="@firebase/messaging-compat",M3="@firebase/performance",O3="@firebase/performance-compat",L3="@firebase/remote-config",D3="@firebase/remote-config-compat",P3="@firebase/storage",k3="@firebase/storage-compat",B3="@firebase/firestore",F3="@firebase/firestore-compat",z3="firebase",U3="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",H3={[nf]:"fire-core",[m3]:"fire-core-compat",[y3]:"fire-analytics",[_3]:"fire-analytics-compat",[w3]:"fire-app-check",[x3]:"fire-app-check-compat",[v3]:"fire-auth",[E3]:"fire-auth-compat",[C3]:"fire-rtdb",[S3]:"fire-rtdb-compat",[A3]:"fire-fn",[I3]:"fire-fn-compat",[T3]:"fire-iid",[b3]:"fire-iid-compat",[N3]:"fire-fcm",[R3]:"fire-fcm-compat",[M3]:"fire-perf",[O3]:"fire-perf-compat",[L3]:"fire-rc",[D3]:"fire-rc-compat",[P3]:"fire-gcs",[k3]:"fire-gcs-compat",[B3]:"fire-fst",[F3]:"fire-fst-compat","fire-js":"fire-js",[z3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,of=new Map;function W3(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yu(t){const e=t.name;if(of.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,t);for(const n of _u.values())W3(n,t);return!0}function V3(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Mo=new s2("app","Firebase",j3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=U3;function h2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rf,automaticDataCollectionEnabled:!1},e),l=r.name;if(typeof l!="string"||!l)throw Mo.create("bad-app-name",{appName:String(l)});if(n||(n=i2()),!n)throw Mo.create("no-options");const u=_u.get(l);if(u){if(Jh(n,u.options)&&Jh(r,u.config))return u;throw Mo.create("duplicate-app",{appName:l})}const p=new $E(l);for(const E of of.values())p.addComponent(E);const w=new G3(n,r,p);return _u.set(l,w),w}function Y3(t=rf){const e=_u.get(t);if(!e&&t===rf&&i2())return h2();if(!e)throw Mo.create("no-app",{appName:t});return e}function ta(t,e,n){var r;let l=(r=H3[t])!==null&&r!==void 0?r:t;n&&(l+=`-${n}`);const u=l.match(/\s|\//),p=e.match(/\s|\//);if(u||p){const w=[`Unable to register library "${l}" with version "${e}":`];u&&w.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&p&&w.push("and"),p&&w.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(w.join(" "));return}yu(new Ll(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="firebase-heartbeat-database",Q3=1,Dl="firebase-heartbeat-store";let Gd=null;function f2(){return Gd||(Gd=d3(X3,Q3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mo.create("idb-open",{originalErrorMessage:t.message})})),Gd}async function K3(t){try{const n=(await f2()).transaction(Dl),r=await n.objectStore(Dl).get(g2(t));return await n.done,r}catch(e){if(e instanceof Yl)gs.warn(e.message);else{const n=Mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(n.message)}}}async function jg(t,e){try{const r=(await f2()).transaction(Dl,"readwrite");await r.objectStore(Dl).put(e,g2(t)),await r.done}catch(n){if(n instanceof Yl)gs.warn(n.message);else{const r=Mo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gs.warn(r.message)}}}function g2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=1024,$3=30*24*60*60*1e3;class J3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Gg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(p=>p.date===u)))return this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(p=>{const w=new Date(p.date).valueOf();return Date.now()-w<=$3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gg(),{heartbeatsToSend:r,unsentEntries:l}=eC(this._heartbeatsCache.heartbeats),u=pu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}}function Gg(){return new Date().toISOString().substring(0,10)}function eC(t,e=q3){const n=[];let r=t.slice();for(const l of t){const u=n.find(p=>p.agent===l.agent);if(u){if(u.dates.push(l.date),Zg(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zE()?UE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Zg(t){return pu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){yu(new Ll("platform-logger",e=>new g3(e),"PRIVATE")),yu(new Ll("heartbeat",e=>new J3(e),"PRIVATE")),ta(nf,Vg,t),ta(nf,Vg,"esm2017"),ta("fire-js","")}nC("");var iC="firebase",rC="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta(iC,rC,"app");var Yg={};const Xg="@firebase/database",Qg="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p2="";function oC(t){p2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ol(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return eo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sC(e)}}catch{}return new aC},os=m2("localStorage"),sf=m2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new c2("@firebase/database"),lC=function(){let t=1;return function(){return t++}}(),_2=function(t){const e=XE(t),n=new YE;n.update(e);const r=n.digest();return p1.encodeByteArray(r)},Xl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Xl.apply(null,r):typeof r=="object"?e+=Dn(r):e+=r,e+=" "}return e};let ls=null,Kg=!0;const cC=function(t,e){ge(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(na.logLevel=Bt.VERBOSE,ls=na.log.bind(na),e&&sf.set("logging_enabled",!0)):typeof t=="function"?ls=t:(ls=null,sf.remove("logging_enabled"))},Yn=function(...t){if(Kg===!0&&(Kg=!1,ls===null&&sf.get("logging_enabled")===!0&&cC(!0)),ls){const e=Xl.apply(null,t);ls(e)}},Ql=function(t){return function(...e){Yn(t,...e)}},af=function(...t){const e="FIREBASE INTERNAL ERROR: "+Xl(...t);na.error(e)},$r=function(...t){const e=`FIREBASE FATAL ERROR: ${Xl(...t)}`;throw na.error(e),new Error(e)},Ti=function(...t){const e="FIREBASE WARNING: "+Xl(...t);na.warn(e)},uC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ti("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},y2=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dC=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ga="[MIN_NAME]",ps="[MAX_NAME]",va=function(t,e){if(t===e)return 0;if(t===ga||e===ps)return-1;if(e===ga||t===ps)return 1;{const n=qg(t),r=qg(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},hC=function(t,e){return t===e?0:t<e?-1:1},Xa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Dn(e))},y1=function(t){if(typeof t!="object"||t===null)return Dn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Dn(e[r]),n+=":",n+=y1(t[e[r]]);return n+="}",n},x2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let l=0;l<n;l+=e)l+e>n?r.push(t.substring(l,n)):r.push(t.substring(l,l+e));return r};function mi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const w2=function(t){ge(!y2(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let l,u,p,w,E;t===0?(u=0,p=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(w=Math.min(Math.floor(Math.log(t)/Math.LN2),r),u=w+r,p=Math.round(t*Math.pow(2,n-w)-Math.pow(2,n))):(u=0,p=Math.round(t/Math.pow(2,1-r-n))));const y=[];for(E=n;E;E-=1)y.push(p%2?1:0),p=Math.floor(p/2);for(E=e;E;E-=1)y.push(u%2?1:0),u=Math.floor(u/2);y.push(l?1:0),y.reverse();const N=y.join("");let I="";for(E=0;E<64;E+=8){let D=parseInt(N.substr(E,8),2).toString(16);D.length===1&&(D="0"+D),I=I+D}return I.toLowerCase()},fC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function pC(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const mC=new RegExp("^-?(0*)\\d{1,10}$"),_C=-2147483648,yC=2147483647,qg=function(t){if(mC.test(t)){const e=Number(t);if(e>=_C&&e<=yC)return e}return null},Kl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ti("Exception was thrown by user callback.",n),e},Math.floor(0))}},xC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ti(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ti(e)}}class ia{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ia.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="5",v2="v",E2="s",C2="r",S2="f",A2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,I2="ls",T2="p",lf="ac",b2="websocket",N2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,l,u=!1,p="",w=!1,E=!1){this.secure=n,this.namespace=r,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=p,this.includeNamespaceInQueryParams=w,this.isUsingEmulator=E,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=os.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&os.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function EC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function M2(t,e,n){ge(typeof e=="string","typeof type must == string"),ge(typeof n=="object","typeof params must == object");let r;if(e===b2)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===N2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);EC(t)&&(n.ns=t.namespace);const l=[];return mi(n,(u,p)=>{l.push(u+"="+p)}),r+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.counters_={}}incrementCounter(e,n=1){eo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd={},Yd={};function w1(t){const e=t.toString();return Zd[e]||(Zd[e]=new CC),Zd[e]}function SC(t,e){const n=t.toString();return Yd[n]||(Yd[n]=e()),Yd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<r.length;++l)r[l]&&Kl(()=>{this.onMessage_(r[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="start",IC="close",TC="pLPCommand",bC="pRTLPCB",O2="id",L2="pw",D2="ser",NC="cb",RC="seg",MC="ts",OC="d",LC="dframe",P2=1870,k2=30,DC=P2-k2,PC=25e3,kC=3e4;class Ys{constructor(e,n,r,l,u,p,w){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.transportSessionId=p,this.lastSessionId=w,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ql(e),this.stats_=w1(n),this.urlFn=E=>(this.appCheckToken&&(E[lf]=this.appCheckToken),M2(n,N2,E))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new AC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kC)),dC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new v1((...u)=>{const[p,w,E,y,N]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,p===$g)this.id=w,this.password=E;else if(p===IC)w?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(w,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+p)},(...u)=>{const[p,w]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(p,w)},()=>{this.onClosed_()},this.urlFn);const r={};r[$g]="t",r[D2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[NC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[v2]=x1,this.transportSessionId&&(r[E2]=this.transportSessionId),this.lastSessionId&&(r[I2]=this.lastSessionId),this.applicationId&&(r[T2]=this.applicationId),this.appCheckToken&&(r[lf]=this.appCheckToken),typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(r[C2]=S2);const l=this.urlFn(r);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ys.forceAllow_=!0}static forceDisallow(){Ys.forceDisallow_=!0}static isAvailable(){return Ys.forceAllow_?!0:!Ys.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fC()&&!gC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Dn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=e2(n),l=x2(r,DC);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[LC]="t",r[O2]=e,r[L2]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Dn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class v1{constructor(e,n,r,l){this.onDisconnect=r,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=lC(),window[TC+this.uniqueCallbackIdentifier]=e,window[bC+this.uniqueCallbackIdentifier]=n,this.myIFrame=v1.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const p="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(p),this.myIFrame.doc.close()}catch(w){Yn("frame writing exception"),w.stack&&Yn(w.stack),Yn(w)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Yn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[O2]=this.myID,e[L2]=this.myPW,e[D2]=this.currentSerial;let n=this.urlFn(e),r="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+k2+r.length<=P2;){const p=this.pendingSegs.shift();r=r+"&"+RC+l+"="+p.seg+"&"+MC+l+"="+p.ts+"&"+OC+l+"="+p.d,l++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(r,Math.floor(PC)),u=()=>{clearTimeout(l),r()};this.addTag(e,u)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const l=r.readyState;(!l||l==="loaded"||l==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Yn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=16384,FC=45e3;let xu=null;typeof MozWebSocket<"u"?xu=MozWebSocket:typeof WebSocket<"u"&&(xu=WebSocket);class ar{constructor(e,n,r,l,u,p,w){this.connId=e,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ql(this.connId),this.stats_=w1(n),this.connURL=ar.connectionURL_(n,p,w,l,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,l,u){const p={};return p[v2]=x1,typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(p[C2]=S2),n&&(p[E2]=n),r&&(p[I2]=r),l&&(p[lf]=l),u&&(p[T2]=u),M2(e,b2,p)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,os.set("previous_websocket_failure",!0);try{let r;o2(),this.mySock=new xu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){ar.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&xu!==null&&!ar.forceDisallow_}static previouslyFailed(){return os.isInMemoryStorage||os.get("previous_websocket_failure")===!0}markConnectionHealthy(){os.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ol(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ge(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Dn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=x2(n,BC);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(FC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ar.responsesRequiredToBeHealthy=2;ar.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ys,ar]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ar&&ar.isAvailable();let r=n&&!ar.previouslyFailed();if(e.webSocketOnly&&(n||Ti("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ar];else{const l=this.transports_=[];for(const u of Pl.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);Pl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=6e4,UC=5e3,HC=10*1024,WC=100*1024,Xd="t",Jg="d",VC="s",ep="r",jC="e",tp="o",np="a",ip="n",rp="p",GC="h";class ZC{constructor(e,n,r,l,u,p,w,E,y,N){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=p,this.onReady_=w,this.onDisconnect_=E,this.onKill_=y,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ql("c:"+this.id+":"),this.transportManager_=new Pl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=dl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>WC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>HC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xd in e){const n=e[Xd];n===np?this.upgradeIfSecondaryHealthy_():n===ep?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===tp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:np,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ip,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xa(Xd,e);if(Jg in e){const r=e[Jg];if(n===GC){const l=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===ip){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===VC?this.onConnectionShutdown_(r):n===ep?this.onReset_(r):n===jC?af("Server Error: "+r):n===tp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):af("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),x1!==r&&Ti("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),dl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(UC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{put(e,n,r,l){}merge(e,n,r,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.allowedEvents_=e,this.listeners_={},ge(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let l=0;l<r.length;l++)r[l].callback.apply(r[l].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const l=this.getInitialEvent(e);l&&n.apply(r,l)}off(e,n,r){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!r||r===l[u].context)){l.splice(u,1);return}}validateEventType_(e){ge(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends F2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!r2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wu}getInitialEvent(e){return ge(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=32,sp=768;class Lt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[r]=this.pieces_[l],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function vt(){return new Lt("")}function st(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ko(t){return t.pieces_.length-t.pieceNum_}function Ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Lt(t.pieces_,e)}function z2(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function YC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function U2(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function H2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Lt(e,0)}function En(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Lt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let l=0;l<r.length;l++)r[l].length>0&&n.push(r[l])}return new Lt(n,0)}function at(t){return t.pieceNum_>=t.pieces_.length}function di(t,e){const n=st(t),r=st(e);if(n===null)return e;if(n===r)return di(Ft(t),Ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function E1(t,e){if(ko(t)!==ko(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function lr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ko(t)>ko(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class XC{constructor(e,n){this.errorPrefix_=n,this.parts_=U2(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ku(this.parts_[r]);W2(this)}}function QC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ku(e),W2(t)}function KC(t){const e=t.parts_.pop();t.byteLength_-=Ku(e),t.parts_.length>0&&(t.byteLength_-=1)}function W2(t){if(t.byteLength_>sp)throw new Error(t.errorPrefix_+"has a key path longer than "+sp+" bytes ("+t.byteLength_+").");if(t.parts_.length>op)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+op+") or object contains a cycle "+ts(t))}function ts(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends F2{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new C1}getInitialEvent(e){return ge(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=1e3,qC=60*5*1e3,ap=30*1e3,$C=1.3,JC=3e4,eS="server_kill",lp=3;class Yr extends B2{constructor(e,n,r,l,u,p,w,E){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=p,this.appCheckTokenProvider_=w,this.authOverride_=E,this.id=Yr.nextPersistentConnectionId_++,this.log_=Ql("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qa,this.maxReconnectDelay_=qC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!o2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");C1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const l=++this.requestNumber_,u={r:l,a:e,b:n};this.log_(Dn(u)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[l]=r)}get(e){this.initConnection_();const n=new m1,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:p=>{const w=p.d;p.s==="ok"?n.resolve(w):n.reject(w)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(e,n,r,l){this.initConnection_();const u=e._queryIdentifier,p=e._path.toString();this.log_("Listen called for "+p+" "+u),this.listens.has(p)||this.listens.set(p,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(p).has(u),"listen() called twice for same path/queryId.");const w={onComplete:l,hashFn:n,query:e,tag:r};this.listens.get(p).set(u,w),this.connected_&&this.sendListen_(w)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+r+" for "+l);const u={p:r},p="q";e.tag&&(u.q=n._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(p,u,w=>{const E=w.d,y=w.s;Yr.warnOnListenWarnings_(E,n),(this.listens.get(r)&&this.listens.get(r).get(l))===e&&(this.log_("listen response",w),y!=="ok"&&this.removeListen_(r,l),e.onComplete&&e.onComplete(y,E))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&eo(e,"w")){const r=fa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();Ti(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||GE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ap)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=jE(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,l=>{const u=l.s,p=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,e._queryObject,n)}sendUnlisten_(e,n,r,l){this.log_("Unlisten on "+e+" for "+n);const u={p:e},p="n";l&&(u.q=r,u.t=l),this.sendRequest(p,u)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,l){const u={p:n,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,p=>{l&&setTimeout(()=>{l(p.s,p.d)},Math.floor(0))})}put(e,n,r,l){this.putInternal("p",e,n,r,l)}merge(e,n,r,l){this.putInternal("m",e,n,r,l)}putInternal(e,n,r,l,u){this.initConnection_();const p={p:n,d:r};u!==void 0&&(p.h=u),this.outstandingPuts_.push({action:e,request:p,onComplete:l}),this.outstandingPutCount_++;const w=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(w):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Dn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):af("Unrecognized action received from server: "+Dn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JC&&(this.reconnectDelay_=Qa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$C)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Yr.nextConnectionId_++,u=this.lastSessionId;let p=!1,w=null;const E=function(){w?w.close():(p=!0,r())},y=function(I){ge(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(I)};this.realtime_={close:E,sendRequest:y};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[I,D]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);p?Yn("getToken() completed but was canceled"):(Yn("getToken() completed. Creating connection."),this.authToken_=I&&I.accessToken,this.appCheckToken_=D&&D.token,w=new ZC(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,W=>{Ti(W+" ("+this.repoInfo_.toString()+")"),this.interrupt(eS)},u))}catch(I){this.log_("Failed to get token: "+I),p||(this.repoInfo_.nodeAdmin&&Ti(I),E())}}}interrupt(e){Yn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Yn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Fg(this.interruptReasons_)&&(this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(u=>y1(u)).join("$"):r="default";const l=this.removeListen_(e,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const r=new Lt(e).toString();let l;if(this.listens.has(r)){const u=this.listens.get(r);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(e,n){Yn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lp&&(this.reconnectDelay_=ap,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Yn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=lp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+p2.replace(/\./g,"-")]=1,r2()?e["framework.cordova"]=1:FE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wu.getInstance().currentlyOnline();return Fg(this.interruptReasons_)&&e}}Yr.nextPersistentConnectionId_=0;Yr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new nt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new nt(ga,e),l=new nt(ga,n);return this.compare(r,l)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc;class V2 extends $u{static get __EMPTY_NODE(){return Nc}static set __EMPTY_NODE(e){Nc=e}compare(e,n){return va(e.name,n.name)}isDefinedOn(e){throw wa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return nt.MIN}maxPost(){return new nt(ps,Nc)}makePost(e,n){return ge(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,Nc)}toString(){return".key"}}const ra=new V2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let p=1;for(;!e.isEmpty();)if(e=e,p=n?r(e.key,n):1,l&&(p*=-1),p<0)this.isReverse_?e=e.left:e=e.right;else if(p===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ln{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??Ln.RED,this.left=l??hi.EMPTY_NODE,this.right=u??hi.EMPTY_NODE}copy(e,n,r,l,u){return new Ln(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return hi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,l;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return hi.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ln.RED=!0;Ln.BLACK=!1;class tS{copy(e,n,r,l,u){return this}insert(e,n,r){return new Ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hi{constructor(e,n=hi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new hi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ln.BLACK,null,null))}remove(e){return new hi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,l=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return l?l.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(l=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Rc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Rc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Rc(this.root_,null,this.comparator_,!0,e)}}hi.EMPTY_NODE=new tS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){return va(t.name,e.name)}function S1(t,e){return va(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf;function iS(t){cf=t}const j2=function(t){return typeof t=="number"?"number:"+w2(t):"string:"+t},G2=function(t){if(t.isLeafNode()){const e=t.val();ge(typeof e=="string"||typeof e=="number"||typeof e=="object"&&eo(e,".sv"),"Priority must be a string or number.")}else ge(t===cf||t.isEmpty(),"priority of unexpected type.");ge(t===cf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp;class Mn{constructor(e,n=Mn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ge(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),G2(this.priorityNode_)}static set __childrenNodeConstructor(e){cp=e}static get __childrenNodeConstructor(){return cp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return at(e)?this:st(e)===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Mn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=st(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ge(r!==".priority"||ko(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Mn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ft(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+j2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=w2(this.value_):e+=this.value_,this.lazyHash_=_2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mn.__childrenNodeConstructor?-1:(ge(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,l=Mn.VALUE_TYPE_ORDER.indexOf(n),u=Mn.VALUE_TYPE_ORDER.indexOf(r);return ge(l>=0,"Unknown leaf type: "+n),ge(u>=0,"Unknown leaf type: "+r),l===u?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Mn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2,Y2;function rS(t){Z2=t}function oS(t){Y2=t}class sS extends $u{compare(e,n){const r=e.node.getPriority(),l=n.node.getPriority(),u=r.compareTo(l);return u===0?va(e.name,n.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt(ps,new Mn("[PRIORITY-POST]",Y2))}makePost(e,n){const r=Z2(e);return new nt(n,new Mn("[PRIORITY-POST]",r))}toString(){return".priority"}}const sn=new sS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=Math.log(2);class lS{constructor(e){const n=u=>parseInt(Math.log(u)/aS,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=r(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vu=function(t,e,n,r){t.sort(e);const l=function(E,y){const N=y-E;let I,D;if(N===0)return null;if(N===1)return I=t[E],D=n?n(I):I,new Ln(D,I.node,Ln.BLACK,null,null);{const W=parseInt(N/2,10)+E,Y=l(E,W),V=l(W+1,y);return I=t[W],D=n?n(I):I,new Ln(D,I.node,Ln.BLACK,Y,V)}},u=function(E){let y=null,N=null,I=t.length;const D=function(Y,V){const me=I-Y,H=I;I-=Y;const k=l(me+1,H),B=t[me],$=n?n(B):B;W(new Ln($,B.node,V,null,k))},W=function(Y){y?(y.left=Y,y=Y):(N=Y,y=Y)};for(let Y=0;Y<E.count;++Y){const V=E.nextBitIsOne(),me=Math.pow(2,E.count-(Y+1));V?D(me,Ln.BLACK):(D(me,Ln.BLACK),D(me,Ln.RED))}return N},p=new lS(t.length),w=u(p);return new hi(r||e,w)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd;const Os={};class Gr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ge(Os&&sn,"ChildrenNode.ts has not been loaded"),Qd=Qd||new Gr({".priority":Os},{".priority":sn}),Qd}get(e){const n=fa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hi?n:null}hasIndex(e){return eo(this.indexSet_,e.toString())}addIndex(e,n){ge(e!==ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let l=!1;const u=n.getIterator(nt.Wrap);let p=u.getNext();for(;p;)l=l||e.isDefinedOn(p.node),r.push(p),p=u.getNext();let w;l?w=vu(r,e.getCompare()):w=Os;const E=e.toString(),y=Object.assign({},this.indexSet_);y[E]=e;const N=Object.assign({},this.indexes_);return N[E]=w,new Gr(N,y)}addToIndexes(e,n){const r=mu(this.indexes_,(l,u)=>{const p=fa(this.indexSet_,u);if(ge(p,"Missing index implementation for "+u),l===Os)if(p.isDefinedOn(e.node)){const w=[],E=n.getIterator(nt.Wrap);let y=E.getNext();for(;y;)y.name!==e.name&&w.push(y),y=E.getNext();return w.push(e),vu(w,p.getCompare())}else return Os;else{const w=n.get(e.name);let E=l;return w&&(E=E.remove(new nt(e.name,w))),E.insert(e,e.node)}});return new Gr(r,this.indexSet_)}removeFromIndexes(e,n){const r=mu(this.indexes_,l=>{if(l===Os)return l;{const u=n.get(e.name);return u?l.remove(new nt(e.name,u)):l}});return new Gr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka;class Fe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&G2(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ka||(Ka=new Fe(new hi(S1),null,Gr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ka}updatePriority(e){return this.children_.isEmpty()?this:new Fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ka:n}}getChild(e){const n=st(e);return n===null?this:this.getImmediateChild(n).getChild(Ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ge(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new nt(e,n);let l,u;n.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(e,n),u=this.indexMap_.addToIndexes(r,this.children_));const p=l.isEmpty()?Ka:this.priorityNode_;return new Fe(l,p,u)}}updateChild(e,n){const r=st(e);if(r===null)return n;{ge(st(e)!==".priority"||ko(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(Ft(e),n);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,l=0,u=!0;if(this.forEachChild(sn,(p,w)=>{n[p]=w.val(e),r++,u&&Fe.INTEGER_REGEXP_.test(p)?l=Math.max(l,Number(p)):u=!1}),!e&&u&&l<2*r){const p=[];for(const w in n)p[w]=n[w];return p}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+j2(this.getPriority().val())+":"),this.forEachChild(sn,(n,r)=>{const l=r.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":_2(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const l=this.resolveIndex_(r);if(l){const u=l.getPredecessorKey(new nt(e,n));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new nt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new nt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,nt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ql?-1:0}withIndex(e){if(e===ra||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ra||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(sn),l=n.getIterator(sn);let u=r.getNext(),p=l.getNext();for(;u&&p;){if(u.name!==p.name||!u.node.equals(p.node))return!1;u=r.getNext(),p=l.getNext()}return u===null&&p===null}else return!1;else return!1}}resolveIndex_(e){return e===ra?null:this.indexMap_.get(e.toString())}}Fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class cS extends Fe{constructor(){super(new hi(S1),Fe.EMPTY_NODE,Gr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fe.EMPTY_NODE}isEmpty(){return!1}}const ql=new cS;Object.defineProperties(nt,{MIN:{value:new nt(ga,Fe.EMPTY_NODE)},MAX:{value:new nt(ps,ql)}});V2.__EMPTY_NODE=Fe.EMPTY_NODE;Mn.__childrenNodeConstructor=Fe;iS(ql);oS(ql);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=!0;function Xn(t,e=null){if(t===null)return Fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ge(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Mn(n,Xn(e))}if(!(t instanceof Array)&&uS){const n=[];let r=!1;if(mi(t,(p,w)=>{if(p.substring(0,1)!=="."){const E=Xn(w);E.isEmpty()||(r=r||!E.getPriority().isEmpty(),n.push(new nt(p,E)))}}),n.length===0)return Fe.EMPTY_NODE;const u=vu(n,nS,p=>p.name,S1);if(r){const p=vu(n,sn.getCompare());return new Fe(u,Xn(e),new Gr({".priority":p},{".priority":sn}))}else return new Fe(u,Xn(e),Gr.Default)}else{let n=Fe.EMPTY_NODE;return mi(t,(r,l)=>{if(eo(t,r)&&r.substring(0,1)!=="."){const u=Xn(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(r,u))}}),n.updatePriority(Xn(e))}}rS(Xn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends $u{constructor(e){super(),this.indexPath_=e,ge(!at(e)&&st(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),l=this.extractChild(n.node),u=r.compareTo(l);return u===0?va(e.name,n.name):u}makePost(e,n){const r=Xn(e),l=Fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new nt(n,l)}maxPost(){const e=Fe.EMPTY_NODE.updateChild(this.indexPath_,ql);return new nt(ps,e)}toString(){return U2(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS extends $u{compare(e,n){const r=e.node.compareTo(n.node);return r===0?va(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,n){const r=Xn(e);return new nt(n,r)}toString(){return".value"}}const fS=new hS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){return{type:"value",snapshotNode:t}}function pa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function kl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Bl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.index_=e}updateChild(e,n,r,l,u,p){ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const w=e.getImmediateChild(n);return w.getChild(l).equals(r.getChild(l))&&w.isEmpty()===r.isEmpty()||(p!=null&&(r.isEmpty()?e.hasChild(n)?p.trackChildChange(kl(n,w)):ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):w.isEmpty()?p.trackChildChange(pa(n,r)):p.trackChildChange(Bl(n,r,w))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(sn,(l,u)=>{n.hasChild(l)||r.trackChildChange(kl(l,u))}),n.isLeafNode()||n.forEachChild(sn,(l,u)=>{if(e.hasChild(l)){const p=e.getImmediateChild(l);p.equals(u)||r.trackChildChange(Bl(l,u,p))}else r.trackChildChange(pa(l,u))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.indexedFilter_=new A1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fl.getStartPost_(e),this.endPost_=Fl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,l,u,p){return this.matches(new nt(n,r))||(r=Fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,l,u,p)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Fe.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(Fe.EMPTY_NODE);const u=this;return n.forEachChild(sn,(p,w)=>{u.matches(new nt(p,w))||(l=l.updateImmediateChild(p,Fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,l,u,p){return this.rangedFilter_.matches(new nt(n,r))||(r=Fe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,l,u,p):this.fullLimitUpdateChild_(e,n,r,u,p)}updateFullNode(e,n,r){let l;if(n.isLeafNode()||n.isEmpty())l=Fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=Fe.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let p=0;for(;u.hasNext()&&p<this.limit_;){const w=u.getNext();if(this.withinDirectionalStart(w))if(this.withinDirectionalEnd(w))l=l.updateImmediateChild(w.name,w.node),p++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(Fe.EMPTY_NODE);let u;this.reverse_?u=l.getReverseIterator(this.index_):u=l.getIterator(this.index_);let p=0;for(;u.hasNext();){const w=u.getNext();p<this.limit_&&this.withinDirectionalStart(w)&&this.withinDirectionalEnd(w)?p++:l=l.updateImmediateChild(w.name,Fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,l,u){let p;if(this.reverse_){const I=this.index_.getCompare();p=(D,W)=>I(W,D)}else p=this.index_.getCompare();const w=e;ge(w.numChildren()===this.limit_,"");const E=new nt(n,r),y=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),N=this.rangedFilter_.matches(E);if(w.hasChild(n)){const I=w.getImmediateChild(n);let D=l.getChildAfterChild(this.index_,y,this.reverse_);for(;D!=null&&(D.name===n||w.hasChild(D.name));)D=l.getChildAfterChild(this.index_,D,this.reverse_);const W=D==null?1:p(D,E);if(N&&!r.isEmpty()&&W>=0)return u!=null&&u.trackChildChange(Bl(n,r,I)),w.updateImmediateChild(n,r);{u!=null&&u.trackChildChange(kl(n,I));const V=w.updateImmediateChild(n,Fe.EMPTY_NODE);return D!=null&&this.rangedFilter_.matches(D)?(u!=null&&u.trackChildChange(pa(D.name,D.node)),V.updateImmediateChild(D.name,D.node)):V}}else return r.isEmpty()?e:N&&p(y,E)>=0?(u!=null&&(u.trackChildChange(kl(y.name,y.node)),u.trackChildChange(pa(n,r))),w.updateImmediateChild(n,r).updateImmediateChild(y.name,Fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sn}copy(){const e=new I1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mS(t){return t.loadsAllData()?new A1(t.getIndex()):t.hasLimit()?new pS(t):new Fl(t)}function up(t){const e={};if(t.isDefault())return e;let n;if(t.index_===sn?n="$priority":t.index_===fS?n="$value":t.index_===ra?n="$key":(ge(t.index_ instanceof dS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Dn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Dn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Dn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Dn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Dn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==sn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends B2{constructor(e,n,r,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=l,this.log_=Ql("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const p=Eu.getListenId_(e,r),w={};this.listens_[p]=w;const E=up(e._queryParams);this.restRequest_(u+".json",E,(y,N)=>{let I=N;if(y===404&&(I=null,y=null),y===null&&this.onDataUpdate_(u,I,!1,r),fa(this.listens_,p)===w){let D;y?y===401?D="permission_denied":D="rest_error:"+y:D="ok",l(D,null)}})}unlisten(e,n){const r=Eu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=up(e._queryParams),r=e._path.toString(),l=new m1;return this.restRequest_(r+".json",n,(u,p)=>{let w=p;u===404&&(w=null,u=null),u===null?(this.onDataUpdate_(r,w,!1,null),l.resolve(w)):l.reject(new Error(w))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const p=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ZE(n);this.log_("Sending REST request for "+p);const w=new XMLHttpRequest;w.onreadystatechange=()=>{if(r&&w.readyState===4){this.log_("REST Response for "+p+" received. status:",w.status,"response:",w.responseText);let E=null;if(w.status>=200&&w.status<300){try{E=Ol(w.responseText)}catch{Ti("Failed to parse JSON response for "+p+": "+w.responseText)}r(null,E)}else w.status!==401&&w.status!==404&&Ti("Got unsuccessful REST response for "+p+" Status: "+w.status),r(w.status);r=null}},w.open("GET",p,!0),w.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.rootNode_=Fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(){return{value:null,children:new Map}}function Q2(t,e,n){if(at(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=st(e);t.children.has(r)||t.children.set(r,Cu());const l=t.children.get(r);e=Ft(e),Q2(l,e,n)}}function uf(t,e,n){t.value!==null?n(e,t.value):yS(t,(r,l)=>{const u=new Lt(e.toString()+"/"+r);uf(l,u,n)})}function yS(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&mi(this.last_,(r,l)=>{n[r]=n[r]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=10*1e3,wS=30*1e3,vS=5*60*1e3;class ES{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xS(e);const r=hp+(wS-hp)*Math.random();dl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;mi(e,(l,u)=>{u>0&&eo(this.statsToReport_,l)&&(n[l]=u,r=!0)}),r&&this.server_.reportStats(n),dl(this.reportStats_.bind(this),Math.floor(Math.random()*2*vS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cr||(cr={}));function K2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function T1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function b1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=cr.ACK_USER_WRITE,this.source=K2()}operationForChild(e){if(at(this.path)){if(this.affectedTree.value!=null)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Lt(e));return new Su(vt(),n,this.revert)}}else return ge(st(this.path)===e,"operationForChild called for unrelated child."),new Su(Ft(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.source=e,this.path=n,this.type=cr.LISTEN_COMPLETE}operationForChild(e){return at(this.path)?new zl(this.source,vt()):new zl(this.source,Ft(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=cr.OVERWRITE}operationForChild(e){return at(this.path)?new ms(this.source,vt(),this.snap.getImmediateChild(e)):new ms(this.source,Ft(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=cr.MERGE}operationForChild(e){if(at(this.path)){const n=this.children.subtree(new Lt(e));return n.isEmpty()?null:n.value?new ms(this.source,vt(),n.value):new Ul(this.source,vt(),n)}else return ge(st(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ul(this.source,Ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(at(e))return this.isFullyInitialized()&&!this.filtered_;const n=st(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function SS(t,e,n,r){const l=[],u=[];return e.forEach(p=>{p.type==="child_changed"&&t.index_.indexedValueChanged(p.oldSnap,p.snapshotNode)&&u.push(gS(p.childName,p.snapshotNode))}),qa(t,l,"child_removed",e,r,n),qa(t,l,"child_added",e,r,n),qa(t,l,"child_moved",u,r,n),qa(t,l,"child_changed",e,r,n),qa(t,l,"value",e,r,n),l}function qa(t,e,n,r,l,u){const p=r.filter(w=>w.type===n);p.sort((w,E)=>IS(t,w,E)),p.forEach(w=>{const E=AS(t,w,u);l.forEach(y=>{y.respondsTo(w.type)&&e.push(y.createEvent(E,t.query_))})})}function AS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function IS(t,e,n){if(e.childName==null||n.childName==null)throw wa("Should only compare child_ events.");const r=new nt(e.childName,e.snapshotNode),l=new nt(n.childName,n.snapshotNode);return t.index_.compare(r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t,e){return{eventCache:t,serverCache:e}}function hl(t,e,n,r){return Ju(new _s(e,n,r),t.serverCache)}function q2(t,e,n,r){return Ju(t.eventCache,new _s(e,n,r))}function df(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ys(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd;const TS=()=>(Kd||(Kd=new hi(hC)),Kd);class Zt{constructor(e,n=TS()){this.value=e,this.children=n}static fromObject(e){let n=new Zt(null);return mi(e,(r,l)=>{n=n.set(new Lt(r),l)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:vt(),value:this.value};if(at(e))return null;{const r=st(e),l=this.children.get(r);if(l!==null){const u=l.findRootMostMatchingPathAndValue(Ft(e),n);return u!=null?{path:En(new Lt(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(at(e))return this;{const n=st(e),r=this.children.get(n);return r!==null?r.subtree(Ft(e)):new Zt(null)}}set(e,n){if(at(e))return new Zt(n,this.children);{const r=st(e),u=(this.children.get(r)||new Zt(null)).set(Ft(e),n),p=this.children.insert(r,u);return new Zt(this.value,p)}}remove(e){if(at(e))return this.children.isEmpty()?new Zt(null):new Zt(null,this.children);{const n=st(e),r=this.children.get(n);if(r){const l=r.remove(Ft(e));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new Zt(null):new Zt(this.value,u)}else return this}}get(e){if(at(e))return this.value;{const n=st(e),r=this.children.get(n);return r?r.get(Ft(e)):null}}setTree(e,n){if(at(e))return n;{const r=st(e),u=(this.children.get(r)||new Zt(null)).setTree(Ft(e),n);let p;return u.isEmpty()?p=this.children.remove(r):p=this.children.insert(r,u),new Zt(this.value,p)}}fold(e){return this.fold_(vt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((l,u)=>{r[l]=u.fold_(En(e,l),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,vt(),n)}findOnPath_(e,n,r){const l=this.value?r(n,this.value):!1;if(l)return l;if(at(e))return null;{const u=st(e),p=this.children.get(u);return p?p.findOnPath_(Ft(e),En(n,u),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,vt(),n)}foreachOnPath_(e,n,r){if(at(e))return this;{this.value&&r(n,this.value);const l=st(e),u=this.children.get(l);return u?u.foreachOnPath_(Ft(e),En(n,l),r):new Zt(null)}}foreach(e){this.foreach_(vt(),e)}foreach_(e,n){this.children.inorderTraversal((r,l)=>{l.foreach_(En(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new Zt(null))}}function fl(t,e,n){if(at(e))return new hr(new Zt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const l=r.path;let u=r.value;const p=di(l,e);return u=u.updateChild(p,n),new hr(t.writeTree_.set(l,u))}else{const l=new Zt(n),u=t.writeTree_.setTree(e,l);return new hr(u)}}}function fp(t,e,n){let r=t;return mi(n,(l,u)=>{r=fl(r,En(e,l),u)}),r}function gp(t,e){if(at(e))return hr.empty();{const n=t.writeTree_.setTree(e,new Zt(null));return new hr(n)}}function hf(t,e){return vs(t,e)!=null}function vs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(di(n.path,e)):null}function pp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(sn,(r,l)=>{e.push(new nt(r,l))}):t.writeTree_.children.inorderTraversal((r,l)=>{l.value!=null&&e.push(new nt(r,l.value))}),e}function Oo(t,e){if(at(e))return t;{const n=vs(t,e);return n!=null?new hr(new Zt(n)):new hr(t.writeTree_.subtree(e))}}function ff(t){return t.writeTree_.isEmpty()}function ma(t,e){return $2(vt(),t.writeTree_,e)}function $2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(ge(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):n=$2(En(t,l),u,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(En(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){return ny(e,t)}function bS(t,e,n,r,l){ge(r>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:l}),l&&(t.visibleWrites=fl(t.visibleWrites,e,n)),t.lastWriteId=r}function NS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function RS(t,e){const n=t.allWrites.findIndex(w=>w.writeId===e);ge(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let l=r.visible,u=!1,p=t.allWrites.length-1;for(;l&&p>=0;){const w=t.allWrites[p];w.visible&&(p>=n&&MS(w,r.path)?l=!1:lr(r.path,w.path)&&(u=!0)),p--}if(l){if(u)return OS(t),!0;if(r.snap)t.visibleWrites=gp(t.visibleWrites,r.path);else{const w=r.children;mi(w,E=>{t.visibleWrites=gp(t.visibleWrites,En(r.path,E))})}return!0}else return!1}function MS(t,e){if(t.snap)return lr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lr(En(t.path,n),e))return!0;return!1}function OS(t){t.visibleWrites=J2(t.allWrites,LS,vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function LS(t){return t.visible}function J2(t,e,n){let r=hr.empty();for(let l=0;l<t.length;++l){const u=t[l];if(e(u)){const p=u.path;let w;if(u.snap)lr(n,p)?(w=di(n,p),r=fl(r,w,u.snap)):lr(p,n)&&(w=di(p,n),r=fl(r,vt(),u.snap.getChild(w)));else if(u.children){if(lr(n,p))w=di(n,p),r=fp(r,w,u.children);else if(lr(p,n))if(w=di(p,n),at(w))r=fp(r,vt(),u.children);else{const E=fa(u.children,st(w));if(E){const y=E.getChild(Ft(w));r=fl(r,vt(),y)}}}else throw wa("WriteRecord should have .snap or .children")}}return r}function ey(t,e,n,r,l){if(!r&&!l){const u=vs(t.visibleWrites,e);if(u!=null)return u;{const p=Oo(t.visibleWrites,e);if(ff(p))return n;if(n==null&&!hf(p,vt()))return null;{const w=n||Fe.EMPTY_NODE;return ma(p,w)}}}else{const u=Oo(t.visibleWrites,e);if(!l&&ff(u))return n;if(!l&&n==null&&!hf(u,vt()))return null;{const p=function(y){return(y.visible||l)&&(!r||!~r.indexOf(y.writeId))&&(lr(y.path,e)||lr(e,y.path))},w=J2(t.allWrites,p,e),E=n||Fe.EMPTY_NODE;return ma(w,E)}}}function DS(t,e,n){let r=Fe.EMPTY_NODE;const l=vs(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(sn,(u,p)=>{r=r.updateImmediateChild(u,p)}),r;if(n){const u=Oo(t.visibleWrites,e);return n.forEachChild(sn,(p,w)=>{const E=ma(Oo(u,new Lt(p)),w);r=r.updateImmediateChild(p,E)}),pp(u).forEach(p=>{r=r.updateImmediateChild(p.name,p.node)}),r}else{const u=Oo(t.visibleWrites,e);return pp(u).forEach(p=>{r=r.updateImmediateChild(p.name,p.node)}),r}}function PS(t,e,n,r,l){ge(r||l,"Either existingEventSnap or existingServerSnap must exist");const u=En(e,n);if(hf(t.visibleWrites,u))return null;{const p=Oo(t.visibleWrites,u);return ff(p)?l.getChild(n):ma(p,l.getChild(n))}}function kS(t,e,n,r){const l=En(e,n),u=vs(t.visibleWrites,l);if(u!=null)return u;if(r.isCompleteForChild(n)){const p=Oo(t.visibleWrites,l);return ma(p,r.getNode().getImmediateChild(n))}else return null}function BS(t,e){return vs(t.visibleWrites,e)}function FS(t,e,n,r,l,u,p){let w;const E=Oo(t.visibleWrites,e),y=vs(E,vt());if(y!=null)w=y;else if(n!=null)w=ma(E,n);else return[];if(w=w.withIndex(p),!w.isEmpty()&&!w.isLeafNode()){const N=[],I=p.getCompare(),D=u?w.getReverseIteratorFrom(r,p):w.getIteratorFrom(r,p);let W=D.getNext();for(;W&&N.length<l;)I(W,r)!==0&&N.push(W),W=D.getNext();return N}else return[]}function zS(){return{visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1}}function Au(t,e,n,r){return ey(t.writeTree,t.treePath,e,n,r)}function R1(t,e){return DS(t.writeTree,t.treePath,e)}function mp(t,e,n,r){return PS(t.writeTree,t.treePath,e,n,r)}function Iu(t,e){return BS(t.writeTree,En(t.treePath,e))}function US(t,e,n,r,l,u){return FS(t.writeTree,t.treePath,e,n,r,l,u)}function M1(t,e,n){return kS(t.writeTree,t.treePath,e,n)}function ty(t,e){return ny(En(t.treePath,e),t.writeTree)}function ny(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ge(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ge(r!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(r);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(r,Bl(r,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(r,kl(r,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(r,pa(r,e.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(r,Bl(r,e.snapshotNode,l.oldSnap));else throw wa("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const iy=new WS;class O1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new _s(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return M1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ys(this.viewCache_),u=US(this.writes_,l,n,1,r,e);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){return{filter:t}}function jS(t,e){ge(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ge(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function GS(t,e,n,r,l){const u=new HS;let p,w;if(n.type===cr.OVERWRITE){const y=n;y.source.fromUser?p=gf(t,e,y.path,y.snap,r,l,u):(ge(y.source.fromServer,"Unknown source."),w=y.source.tagged||e.serverCache.isFiltered()&&!at(y.path),p=Tu(t,e,y.path,y.snap,r,l,w,u))}else if(n.type===cr.MERGE){const y=n;y.source.fromUser?p=YS(t,e,y.path,y.children,r,l,u):(ge(y.source.fromServer,"Unknown source."),w=y.source.tagged||e.serverCache.isFiltered(),p=pf(t,e,y.path,y.children,r,l,w,u))}else if(n.type===cr.ACK_USER_WRITE){const y=n;y.revert?p=KS(t,e,y.path,r,l,u):p=XS(t,e,y.path,y.affectedTree,r,l,u)}else if(n.type===cr.LISTEN_COMPLETE)p=QS(t,e,n.path,r,u);else throw wa("Unknown operation type: "+n.type);const E=u.getChanges();return ZS(e,p,E),{viewCache:p,changes:E}}function ZS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const l=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=df(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&n.push(X2(df(e)))}}function ry(t,e,n,r,l,u){const p=e.eventCache;if(Iu(r,n)!=null)return e;{let w,E;if(at(n))if(ge(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=ys(e),N=y instanceof Fe?y:Fe.EMPTY_NODE,I=R1(r,N);w=t.filter.updateFullNode(e.eventCache.getNode(),I,u)}else{const y=Au(r,ys(e));w=t.filter.updateFullNode(e.eventCache.getNode(),y,u)}else{const y=st(n);if(y===".priority"){ge(ko(n)===1,"Can't have a priority with additional path components");const N=p.getNode();E=e.serverCache.getNode();const I=mp(r,n,N,E);I!=null?w=t.filter.updatePriority(N,I):w=p.getNode()}else{const N=Ft(n);let I;if(p.isCompleteForChild(y)){E=e.serverCache.getNode();const D=mp(r,n,p.getNode(),E);D!=null?I=p.getNode().getImmediateChild(y).updateChild(N,D):I=p.getNode().getImmediateChild(y)}else I=M1(r,y,e.serverCache);I!=null?w=t.filter.updateChild(p.getNode(),y,I,N,l,u):w=p.getNode()}}return hl(e,w,p.isFullyInitialized()||at(n),t.filter.filtersNodes())}}function Tu(t,e,n,r,l,u,p,w){const E=e.serverCache;let y;const N=p?t.filter:t.filter.getIndexedFilter();if(at(n))y=N.updateFullNode(E.getNode(),r,null);else if(N.filtersNodes()&&!E.isFiltered()){const W=E.getNode().updateChild(n,r);y=N.updateFullNode(E.getNode(),W,null)}else{const W=st(n);if(!E.isCompleteForPath(n)&&ko(n)>1)return e;const Y=Ft(n),me=E.getNode().getImmediateChild(W).updateChild(Y,r);W===".priority"?y=N.updatePriority(E.getNode(),me):y=N.updateChild(E.getNode(),W,me,Y,iy,null)}const I=q2(e,y,E.isFullyInitialized()||at(n),N.filtersNodes()),D=new O1(l,I,u);return ry(t,I,n,l,D,w)}function gf(t,e,n,r,l,u,p){const w=e.eventCache;let E,y;const N=new O1(l,e,u);if(at(n))y=t.filter.updateFullNode(e.eventCache.getNode(),r,p),E=hl(e,y,!0,t.filter.filtersNodes());else{const I=st(n);if(I===".priority")y=t.filter.updatePriority(e.eventCache.getNode(),r),E=hl(e,y,w.isFullyInitialized(),w.isFiltered());else{const D=Ft(n),W=w.getNode().getImmediateChild(I);let Y;if(at(D))Y=r;else{const V=N.getCompleteChild(I);V!=null?z2(D)===".priority"&&V.getChild(H2(D)).isEmpty()?Y=V:Y=V.updateChild(D,r):Y=Fe.EMPTY_NODE}if(W.equals(Y))E=e;else{const V=t.filter.updateChild(w.getNode(),I,Y,D,N,p);E=hl(e,V,w.isFullyInitialized(),t.filter.filtersNodes())}}}return E}function _p(t,e){return t.eventCache.isCompleteForChild(e)}function YS(t,e,n,r,l,u,p){let w=e;return r.foreach((E,y)=>{const N=En(n,E);_p(e,st(N))&&(w=gf(t,w,N,y,l,u,p))}),r.foreach((E,y)=>{const N=En(n,E);_p(e,st(N))||(w=gf(t,w,N,y,l,u,p))}),w}function yp(t,e,n){return n.foreach((r,l)=>{e=e.updateChild(r,l)}),e}function pf(t,e,n,r,l,u,p,w){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E=e,y;at(n)?y=r:y=new Zt(null).setTree(n,r);const N=e.serverCache.getNode();return y.children.inorderTraversal((I,D)=>{if(N.hasChild(I)){const W=e.serverCache.getNode().getImmediateChild(I),Y=yp(t,W,D);E=Tu(t,E,new Lt(I),Y,l,u,p,w)}}),y.children.inorderTraversal((I,D)=>{const W=!e.serverCache.isCompleteForChild(I)&&D.value===null;if(!N.hasChild(I)&&!W){const Y=e.serverCache.getNode().getImmediateChild(I),V=yp(t,Y,D);E=Tu(t,E,new Lt(I),V,l,u,p,w)}}),E}function XS(t,e,n,r,l,u,p){if(Iu(l,n)!=null)return e;const w=e.serverCache.isFiltered(),E=e.serverCache;if(r.value!=null){if(at(n)&&E.isFullyInitialized()||E.isCompleteForPath(n))return Tu(t,e,n,E.getNode().getChild(n),l,u,w,p);if(at(n)){let y=new Zt(null);return E.getNode().forEachChild(ra,(N,I)=>{y=y.set(new Lt(N),I)}),pf(t,e,n,y,l,u,w,p)}else return e}else{let y=new Zt(null);return r.foreach((N,I)=>{const D=En(n,N);E.isCompleteForPath(D)&&(y=y.set(N,E.getNode().getChild(D)))}),pf(t,e,n,y,l,u,w,p)}}function QS(t,e,n,r,l){const u=e.serverCache,p=q2(e,u.getNode(),u.isFullyInitialized()||at(n),u.isFiltered());return ry(t,p,n,r,iy,l)}function KS(t,e,n,r,l,u){let p;if(Iu(r,n)!=null)return e;{const w=new O1(r,e,l),E=e.eventCache.getNode();let y;if(at(n)||st(n)===".priority"){let N;if(e.serverCache.isFullyInitialized())N=Au(r,ys(e));else{const I=e.serverCache.getNode();ge(I instanceof Fe,"serverChildren would be complete if leaf node"),N=R1(r,I)}N=N,y=t.filter.updateFullNode(E,N,u)}else{const N=st(n);let I=M1(r,N,e.serverCache);I==null&&e.serverCache.isCompleteForChild(N)&&(I=E.getImmediateChild(N)),I!=null?y=t.filter.updateChild(E,N,I,Ft(n),w,u):e.eventCache.getNode().hasChild(N)?y=t.filter.updateChild(E,N,Fe.EMPTY_NODE,Ft(n),w,u):y=E,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(p=Au(r,ys(e)),p.isLeafNode()&&(y=t.filter.updateFullNode(y,p,u)))}return p=e.serverCache.isFullyInitialized()||Iu(r,vt())!=null,hl(e,y,p,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,l=new A1(r.getIndex()),u=mS(r);this.processor_=VS(u);const p=n.serverCache,w=n.eventCache,E=l.updateFullNode(Fe.EMPTY_NODE,p.getNode(),null),y=u.updateFullNode(Fe.EMPTY_NODE,w.getNode(),null),N=new _s(E,p.isFullyInitialized(),l.filtersNodes()),I=new _s(y,w.isFullyInitialized(),u.filtersNodes());this.viewCache_=Ju(I,N),this.eventGenerator_=new CS(this.query_)}get query(){return this.query_}}function $S(t){return t.viewCache_.serverCache.getNode()}function JS(t,e){const n=ys(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!at(e)&&!n.getImmediateChild(st(e)).isEmpty())?n.getChild(e):null}function xp(t){return t.eventRegistrations_.length===0}function e4(t,e){t.eventRegistrations_.push(e)}function wp(t,e,n){const r=[];if(n){ge(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(u=>{const p=u.createCancelEvent(n,l);p&&r.push(p)})}if(e){let l=[];for(let u=0;u<t.eventRegistrations_.length;++u){const p=t.eventRegistrations_[u];if(!p.matches(e))l.push(p);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(u+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return r}function vp(t,e,n,r){e.type===cr.MERGE&&e.source.queryId!==null&&(ge(ys(t.viewCache_),"We should always have a full cache before handling merges"),ge(df(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,u=GS(t.processor_,l,e,n,r);return jS(t.processor_,u.viewCache),ge(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,oy(t,u.changes,u.viewCache.eventCache.getNode(),null)}function t4(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(sn,(u,p)=>{r.push(pa(u,p))}),n.isFullyInitialized()&&r.push(X2(n.getNode())),oy(t,r,n.getNode(),e)}function oy(t,e,n,r){const l=r?[r]:t.eventRegistrations_;return SS(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu;class n4{constructor(){this.views=new Map}}function i4(t){ge(!bu,"__referenceConstructor has already been defined"),bu=t}function r4(){return ge(bu,"Reference.ts has not been loaded"),bu}function o4(t){return t.views.size===0}function L1(t,e,n,r){const l=e.source.queryId;if(l!==null){const u=t.views.get(l);return ge(u!=null,"SyncTree gave us an op for an invalid query."),vp(u,e,n,r)}else{let u=[];for(const p of t.views.values())u=u.concat(vp(p,e,n,r));return u}}function s4(t,e,n,r,l){const u=e._queryIdentifier,p=t.views.get(u);if(!p){let w=Au(n,l?r:null),E=!1;w?E=!0:r instanceof Fe?(w=R1(n,r),E=!1):(w=Fe.EMPTY_NODE,E=!1);const y=Ju(new _s(w,E,!1),new _s(r,l,!1));return new qS(e,y)}return p}function a4(t,e,n,r,l,u){const p=s4(t,e,r,l,u);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,p),e4(p,n),t4(p,n)}function l4(t,e,n,r){const l=e._queryIdentifier,u=[];let p=[];const w=Bo(t);if(l==="default")for(const[E,y]of t.views.entries())p=p.concat(wp(y,n,r)),xp(y)&&(t.views.delete(E),y.query._queryParams.loadsAllData()||u.push(y.query));else{const E=t.views.get(l);E&&(p=p.concat(wp(E,n,r)),xp(E)&&(t.views.delete(l),E.query._queryParams.loadsAllData()||u.push(E.query)))}return w&&!Bo(t)&&u.push(new(r4())(e._repo,e._path)),{removed:u,events:p}}function sy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function oa(t,e){let n=null;for(const r of t.views.values())n=n||JS(r,e);return n}function ay(t,e){if(e._queryParams.loadsAllData())return ed(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ly(t,e){return ay(t,e)!=null}function Bo(t){return ed(t)!=null}function ed(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;function c4(t){ge(!Nu,"__referenceConstructor has already been defined"),Nu=t}function u4(){return ge(Nu,"Reference.ts has not been loaded"),Nu}let d4=1;class Ep{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zt(null),this.pendingWriteTree_=zS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function h4(t,e,n,r,l){return bS(t.pendingWriteTree_,e,n,r,l),l?$l(t,new ms(K2(),e,n)):[]}function Xs(t,e,n=!1){const r=NS(t.pendingWriteTree_,e);if(RS(t.pendingWriteTree_,e)){let u=new Zt(null);return r.snap!=null?u=u.set(vt(),!0):mi(r.children,p=>{u=u.set(new Lt(p),!0)}),$l(t,new Su(r.path,u,n))}else return[]}function td(t,e,n){return $l(t,new ms(T1(),e,n))}function f4(t,e,n){const r=Zt.fromObject(n);return $l(t,new Ul(T1(),e,r))}function g4(t,e){return $l(t,new zl(T1(),e))}function p4(t,e,n){const r=D1(t,n);if(r){const l=P1(r),u=l.path,p=l.queryId,w=di(u,e),E=new zl(b1(p),w);return k1(t,u,E)}else return[]}function mf(t,e,n,r,l=!1){const u=e._path,p=t.syncPointTree_.get(u);let w=[];if(p&&(e._queryIdentifier==="default"||ly(p,e))){const E=l4(p,e,n,r);o4(p)&&(t.syncPointTree_=t.syncPointTree_.remove(u));const y=E.removed;if(w=E.events,!l){const N=y.findIndex(D=>D._queryParams.loadsAllData())!==-1,I=t.syncPointTree_.findOnPath(u,(D,W)=>Bo(W));if(N&&!I){const D=t.syncPointTree_.subtree(u);if(!D.isEmpty()){const W=y4(D);for(let Y=0;Y<W.length;++Y){const V=W[Y],me=V.query,H=hy(t,V);t.listenProvider_.startListening(gl(me),Ru(t,me),H.hashFn,H.onComplete)}}}!I&&y.length>0&&!r&&(N?t.listenProvider_.stopListening(gl(e),null):y.forEach(D=>{const W=t.queryToTagMap.get(nd(D));t.listenProvider_.stopListening(gl(D),W)}))}x4(t,y)}return w}function m4(t,e,n,r){const l=D1(t,r);if(l!=null){const u=P1(l),p=u.path,w=u.queryId,E=di(p,e),y=new ms(b1(w),E,n);return k1(t,p,y)}else return[]}function _4(t,e,n,r){const l=D1(t,r);if(l){const u=P1(l),p=u.path,w=u.queryId,E=di(p,e),y=Zt.fromObject(n),N=new Ul(b1(w),E,y);return k1(t,p,N)}else return[]}function Cp(t,e,n,r=!1){const l=e._path;let u=null,p=!1;t.syncPointTree_.foreachOnPath(l,(D,W)=>{const Y=di(D,l);u=u||oa(W,Y),p=p||Bo(W)});let w=t.syncPointTree_.get(l);w?(p=p||Bo(w),u=u||oa(w,vt())):(w=new n4,t.syncPointTree_=t.syncPointTree_.set(l,w));let E;u!=null?E=!0:(E=!1,u=Fe.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((W,Y)=>{const V=oa(Y,vt());V&&(u=u.updateImmediateChild(W,V))}));const y=ly(w,e);if(!y&&!e._queryParams.loadsAllData()){const D=nd(e);ge(!t.queryToTagMap.has(D),"View does not exist, but we have a tag");const W=w4();t.queryToTagMap.set(D,W),t.tagToQueryMap.set(W,D)}const N=N1(t.pendingWriteTree_,l);let I=a4(w,e,n,N,u,E);if(!y&&!p&&!r){const D=ay(w,e);I=I.concat(v4(t,e,D))}return I}function cy(t,e,n){const l=t.pendingWriteTree_,u=t.syncPointTree_.findOnPath(e,(p,w)=>{const E=di(p,e),y=oa(w,E);if(y)return y});return ey(l,e,u,n,!0)}function $l(t,e){return uy(e,t.syncPointTree_,null,N1(t.pendingWriteTree_,vt()))}function uy(t,e,n,r){if(at(t.path))return dy(t,e,n,r);{const l=e.get(vt());n==null&&l!=null&&(n=oa(l,vt()));let u=[];const p=st(t.path),w=t.operationForChild(p),E=e.children.get(p);if(E&&w){const y=n?n.getImmediateChild(p):null,N=ty(r,p);u=u.concat(uy(w,E,y,N))}return l&&(u=u.concat(L1(l,t,r,n))),u}}function dy(t,e,n,r){const l=e.get(vt());n==null&&l!=null&&(n=oa(l,vt()));let u=[];return e.children.inorderTraversal((p,w)=>{const E=n?n.getImmediateChild(p):null,y=ty(r,p),N=t.operationForChild(p);N&&(u=u.concat(dy(N,w,E,y)))}),l&&(u=u.concat(L1(l,t,r,n))),u}function hy(t,e){const n=e.query,r=Ru(t,n);return{hashFn:()=>($S(e)||Fe.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return r?p4(t,n._path,r):g4(t,n._path);{const u=pC(l,n);return mf(t,n,null,u)}}}}function Ru(t,e){const n=nd(e);return t.queryToTagMap.get(n)}function nd(t){return t._path.toString()+"$"+t._queryIdentifier}function D1(t,e){return t.tagToQueryMap.get(e)}function P1(t){const e=t.indexOf("$");return ge(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Lt(t.substr(0,e))}}function k1(t,e,n){const r=t.syncPointTree_.get(e);ge(r,"Missing sync point for query tag that we're tracking");const l=N1(t.pendingWriteTree_,e);return L1(r,n,l,null)}function y4(t){return t.fold((e,n,r)=>{if(n&&Bo(n))return[ed(n)];{let l=[];return n&&(l=sy(n)),mi(r,(u,p)=>{l=l.concat(p)}),l}})}function gl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(u4())(t._repo,t._path):t}function x4(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const l=nd(r),u=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(u)}}}function w4(){return d4++}function v4(t,e,n){const r=e._path,l=Ru(t,e),u=hy(t,n),p=t.listenProvider_.startListening(gl(e),l,u.hashFn,u.onComplete),w=t.syncPointTree_.subtree(r);if(l)ge(!Bo(w.value),"If we're adding a query, it shouldn't be shadowed");else{const E=w.fold((y,N,I)=>{if(!at(y)&&N&&Bo(N))return[ed(N).query];{let D=[];return N&&(D=D.concat(sy(N).map(W=>W.query))),mi(I,(W,Y)=>{D=D.concat(Y)}),D}});for(let y=0;y<E.length;++y){const N=E[y];t.listenProvider_.stopListening(gl(N),Ru(t,N))}}return p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new B1(n)}node(){return this.node_}}class F1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=En(this.path_,e);return new F1(this.syncTree_,n)}node(){return cy(this.syncTree_,this.path_)}}const E4=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Sp=function(t,e,n){if(!t||typeof t!="object")return t;if(ge(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return C4(t[".sv"],e,n);if(typeof t[".sv"]=="object")return S4(t[".sv"],e);ge(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},C4=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ge(!1,"Unexpected server value: "+t)}},S4=function(t,e,n){t.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ge(!1,"Unexpected increment value: "+r);const l=e.node();if(ge(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return r;const p=l.getValue();return typeof p!="number"?r:p+r},A4=function(t,e,n,r){return z1(e,new F1(n,t),r)},I4=function(t,e,n){return z1(t,new B1(e),n)};function z1(t,e,n){const r=t.getPriority().val(),l=Sp(r,e.getImmediateChild(".priority"),n);let u;if(t.isLeafNode()){const p=t,w=Sp(p.getValue(),e,n);return w!==p.getValue()||l!==p.getPriority().val()?new Mn(w,Xn(l)):t}else{const p=t;return u=p,l!==p.getPriority().val()&&(u=u.updatePriority(new Mn(l))),p.forEachChild(sn,(w,E)=>{const y=z1(E,e.getImmediateChild(w),n);y!==E&&(u=u.updateImmediateChild(w,y))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function H1(t,e){let n=e instanceof Lt?e:new Lt(e),r=t,l=st(n);for(;l!==null;){const u=fa(r.node.children,l)||{children:{},childCount:0};r=new U1(l,r,u),n=Ft(n),l=st(n)}return r}function Ea(t){return t.node.value}function fy(t,e){t.node.value=e,_f(t)}function gy(t){return t.node.childCount>0}function T4(t){return Ea(t)===void 0&&!gy(t)}function id(t,e){mi(t.node.children,(n,r)=>{e(new U1(n,t,r))})}function py(t,e,n,r){n&&!r&&e(t),id(t,l=>{py(l,e,!0,r)}),n&&r&&e(t)}function b4(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Jl(t){return new Lt(t.parent===null?t.name:Jl(t.parent)+"/"+t.name)}function _f(t){t.parent!==null&&N4(t.parent,t.name,t)}function N4(t,e,n){const r=T4(n),l=eo(t.node.children,e);r&&l?(delete t.node.children[e],t.node.childCount--,_f(t)):!r&&!l&&(t.node.children[e]=n.node,t.node.childCount++,_f(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/[\[\].#$\/\u0000-\u001F\u007F]/,M4=/[\[\].#$\u0000-\u001F\u007F]/,qd=10*1024*1024,my=function(t){return typeof t=="string"&&t.length!==0&&!R4.test(t)},_y=function(t){return typeof t=="string"&&t.length!==0&&!M4.test(t)},O4=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_y(t)},yy=function(t,e,n){const r=n instanceof Lt?new XC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ts(r));if(typeof e=="function")throw new Error(t+"contains a function "+ts(r)+" with contents = "+e.toString());if(y2(e))throw new Error(t+"contains "+e.toString()+" "+ts(r));if(typeof e=="string"&&e.length>qd/3&&Ku(e)>qd)throw new Error(t+"contains a string greater than "+qd+" utf8 bytes "+ts(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(mi(e,(p,w)=>{if(p===".value")l=!0;else if(p!==".priority"&&p!==".sv"&&(u=!0,!my(p)))throw new Error(t+" contains an invalid key ("+p+") "+ts(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);QC(r,p),yy(t,w,r),KC(r)}),l&&u)throw new Error(t+' contains ".value" child '+ts(r)+" in addition to actual children.")}},xy=function(t,e,n,r){if(!(r&&n===void 0)&&!_y(n))throw new Error(l2(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},L4=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xy(t,e,n,r)},D4=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!my(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!O4(n))throw new Error(l2(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wy(t,e){let n=null;for(let r=0;r<e.length;r++){const l=e[r],u=l.getPath();n!==null&&!E1(u,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&t.eventLists_.push(n)}function vy(t,e,n){wy(t,n),Ey(t,r=>E1(r,e))}function Es(t,e,n){wy(t,n),Ey(t,r=>lr(r,e)||lr(e,r))}function Ey(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const l=t.eventLists_[r];if(l){const u=l.path;e(u)?(k4(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function k4(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ls&&Yn("event: "+n.toString()),Kl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="repo_interrupt",F4=25;class z4{constructor(e,n,r,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new P4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cu(),this.transactionQueueTree_=new U1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function U4(t,e,n){if(t.stats_=w1(t.repoInfo_),t.forceRestClient_||xC())t.server_=new Eu(t.repoInfo_,(r,l,u,p)=>{Ap(t,r,l,u,p)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ip(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Yr(t.repoInfo_,e,(r,l,u,p)=>{Ap(t,r,l,u,p)},r=>{Ip(t,r)},r=>{W4(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=SC(t.repoInfo_,()=>new ES(t.stats_,t.server_)),t.infoData_=new _S,t.infoSyncTree_=new Ep({startListening:(r,l,u,p)=>{let w=[];const E=t.infoData_.getNode(r._path);return E.isEmpty()||(w=td(t.infoSyncTree_,r._path,E),setTimeout(()=>{p("ok")},0)),w},stopListening:()=>{}}),W1(t,"connected",!1),t.serverSyncTree_=new Ep({startListening:(r,l,u,p)=>(t.server_.listen(r,u,l,(w,E)=>{const y=p(w,E);Es(t.eventQueue_,r._path,y)}),[]),stopListening:(r,l)=>{t.server_.unlisten(r,l)}})}function H4(t){const n=t.infoData_.getNode(new Lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cy(t){return E4({timestamp:H4(t)})}function Ap(t,e,n,r,l){t.dataUpdateCount++;const u=new Lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let p=[];if(l)if(r){const E=mu(n,y=>Xn(y));p=_4(t.serverSyncTree_,u,E,l)}else{const E=Xn(n);p=m4(t.serverSyncTree_,u,E,l)}else if(r){const E=mu(n,y=>Xn(y));p=f4(t.serverSyncTree_,u,E)}else{const E=Xn(n);p=td(t.serverSyncTree_,u,E)}let w=u;p.length>0&&(w=j1(t,u)),Es(t.eventQueue_,w,p)}function Ip(t,e){W1(t,"connected",e),e===!1&&j4(t)}function W4(t,e){mi(e,(n,r)=>{W1(t,n,r)})}function W1(t,e,n){const r=new Lt("/.info/"+e),l=Xn(n);t.infoData_.updateSnapshot(r,l);const u=td(t.infoSyncTree_,r,l);Es(t.eventQueue_,r,u)}function V4(t){return t.nextWriteId_++}function j4(t){Sy(t,"onDisconnectEvents");const e=Cy(t),n=Cu();uf(t.onDisconnect_,vt(),(l,u)=>{const p=A4(l,u,t.serverSyncTree_,e);Q2(n,l,p)});let r=[];uf(n,vt(),(l,u)=>{r=r.concat(td(t.serverSyncTree_,l,u));const p=Q4(t,l);j1(t,p)}),t.onDisconnect_=Cu(),Es(t.eventQueue_,vt(),r)}function G4(t,e,n){let r;st(e._path)===".info"?r=Cp(t.infoSyncTree_,e,n):r=Cp(t.serverSyncTree_,e,n),vy(t.eventQueue_,e._path,r)}function Tp(t,e,n){let r;st(e._path)===".info"?r=mf(t.infoSyncTree_,e,n):r=mf(t.serverSyncTree_,e,n),vy(t.eventQueue_,e._path,r)}function Z4(t){t.persistentConnection_&&t.persistentConnection_.interrupt(B4)}function Sy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Yn(n,...e)}function Ay(t,e,n){return cy(t.serverSyncTree_,e,n)||Fe.EMPTY_NODE}function V1(t,e=t.transactionQueueTree_){if(e||rd(t,e),Ea(e)){const n=Ty(t,e);ge(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&Y4(t,Jl(e),n)}else gy(e)&&id(e,n=>{V1(t,n)})}function Y4(t,e,n){const r=n.map(y=>y.currentWriteId),l=Ay(t,e,r);let u=l;const p=l.hash();for(let y=0;y<n.length;y++){const N=n[y];ge(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const I=di(e,N.path);u=u.updateChild(I,N.currentOutputSnapshotRaw)}const w=u.val(!0),E=e;t.server_.put(E.toString(),w,y=>{Sy(t,"transaction put response",{path:E.toString(),status:y});let N=[];if(y==="ok"){const I=[];for(let D=0;D<n.length;D++)n[D].status=2,N=N.concat(Xs(t.serverSyncTree_,n[D].currentWriteId)),n[D].onComplete&&I.push(()=>n[D].onComplete(null,!0,n[D].currentOutputSnapshotResolved)),n[D].unwatcher();rd(t,H1(t.transactionQueueTree_,e)),V1(t,t.transactionQueueTree_),Es(t.eventQueue_,e,N);for(let D=0;D<I.length;D++)Kl(I[D])}else{if(y==="datastale")for(let I=0;I<n.length;I++)n[I].status===3?n[I].status=4:n[I].status=0;else{Ti("transaction at "+E.toString()+" failed: "+y);for(let I=0;I<n.length;I++)n[I].status=4,n[I].abortReason=y}j1(t,e)}},p)}function j1(t,e){const n=Iy(t,e),r=Jl(n),l=Ty(t,n);return X4(t,l,r),r}function X4(t,e,n){if(e.length===0)return;const r=[];let l=[];const p=e.filter(w=>w.status===0).map(w=>w.currentWriteId);for(let w=0;w<e.length;w++){const E=e[w],y=di(n,E.path);let N=!1,I;if(ge(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),E.status===4)N=!0,I=E.abortReason,l=l.concat(Xs(t.serverSyncTree_,E.currentWriteId,!0));else if(E.status===0)if(E.retryCount>=F4)N=!0,I="maxretry",l=l.concat(Xs(t.serverSyncTree_,E.currentWriteId,!0));else{const D=Ay(t,E.path,p);E.currentInputSnapshot=D;const W=e[w].update(D.val());if(W!==void 0){yy("transaction failed: Data returned ",W,E.path);let Y=Xn(W);typeof W=="object"&&W!=null&&eo(W,".priority")||(Y=Y.updatePriority(D.getPriority()));const me=E.currentWriteId,H=Cy(t),k=I4(Y,D,H);E.currentOutputSnapshotRaw=Y,E.currentOutputSnapshotResolved=k,E.currentWriteId=V4(t),p.splice(p.indexOf(me),1),l=l.concat(h4(t.serverSyncTree_,E.path,k,E.currentWriteId,E.applyLocally)),l=l.concat(Xs(t.serverSyncTree_,me,!0))}else N=!0,I="nodata",l=l.concat(Xs(t.serverSyncTree_,E.currentWriteId,!0))}Es(t.eventQueue_,n,l),l=[],N&&(e[w].status=2,function(D){setTimeout(D,Math.floor(0))}(e[w].unwatcher),e[w].onComplete&&(I==="nodata"?r.push(()=>e[w].onComplete(null,!1,e[w].currentInputSnapshot)):r.push(()=>e[w].onComplete(new Error(I),!1,null))))}rd(t,t.transactionQueueTree_);for(let w=0;w<r.length;w++)Kl(r[w]);V1(t,t.transactionQueueTree_)}function Iy(t,e){let n,r=t.transactionQueueTree_;for(n=st(e);n!==null&&Ea(r)===void 0;)r=H1(r,n),e=Ft(e),n=st(e);return r}function Ty(t,e){const n=[];return by(t,e,n),n.sort((r,l)=>r.order-l.order),n}function by(t,e,n){const r=Ea(e);if(r)for(let l=0;l<r.length;l++)n.push(r[l]);id(e,l=>{by(t,l,n)})}function rd(t,e){const n=Ea(e);if(n){let r=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[r]=n[l],r++);n.length=r,fy(e,n.length>0?n:void 0)}id(e,r=>{rd(t,r)})}function Q4(t,e){const n=Jl(Iy(t,e)),r=H1(t.transactionQueueTree_,e);return b4(r,l=>{$d(t,l)}),$d(t,r),py(r,l=>{$d(t,l)}),n}function $d(t,e){const n=Ea(e);if(n){const r=[];let l=[],u=-1;for(let p=0;p<n.length;p++)n[p].status===3||(n[p].status===1?(ge(u===p-1,"All SENT items should be at beginning of queue."),u=p,n[p].status=3,n[p].abortReason="set"):(ge(n[p].status===0,"Unexpected transaction status in abort"),n[p].unwatcher(),l=l.concat(Xs(t.serverSyncTree_,n[p].currentWriteId,!0)),n[p].onComplete&&r.push(n[p].onComplete.bind(null,new Error("set"),!1,null))));u===-1?fy(e,void 0):n.length=u+1,Es(t.eventQueue_,Jl(e),l);for(let p=0;p<r.length;p++)Kl(r[p])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let l=n[r];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function q4(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ti(`Invalid query segment '${n}' in query '${t}'`)}return e}const bp=function(t,e){const n=$4(t),r=n.namespace;n.domain==="firebase.com"&&$r(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&$r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uC();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new R2(n.host,n.secure,r,l,e,"",r!==n.subdomain),path:new Lt(n.pathString)}},$4=function(t){let e="",n="",r="",l="",u="",p=!0,w="https",E=443;if(typeof t=="string"){let y=t.indexOf("//");y>=0&&(w=t.substring(0,y-1),t=t.substring(y+2));let N=t.indexOf("/");N===-1&&(N=t.length);let I=t.indexOf("?");I===-1&&(I=t.length),e=t.substring(0,Math.min(N,I)),N<I&&(l=K4(t.substring(N,I)));const D=q4(t.substring(Math.min(t.length,I)));y=e.indexOf(":"),y>=0?(p=w==="https"||w==="wss",E=parseInt(e.substring(y+1),10)):y=e.length;const W=e.slice(0,y);if(W.toLowerCase()==="localhost")n="localhost";else if(W.split(".").length<=2)n=W;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),n=e.substring(Y+1),u=r}"ns"in D&&(u=D.ns)}return{host:e,port:E,domain:n,subdomain:r,secure:p,scheme:w,pathString:l,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n,r,l){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dn(this.snapshot.exportVal())}}class Ry{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ge(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,l){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=l}get key(){return at(this._path)?null:z2(this._path)}get ref(){return new to(this._repo,this._path)}get _queryIdentifier(){const e=dp(this._queryParams),n=y1(e);return n==="{}"?"default":n}get _queryObject(){return dp(this._queryParams)}isEqual(e){if(e=qu(e),!(e instanceof G1))return!1;const n=this._repo===e._repo,r=E1(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&r&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+YC(this._path)}}class to extends G1{constructor(e,n){super(e,n,new I1,!1)}get parent(){const e=H2(this._path);return e===null?null:new to(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Lt(e),r=Mu(this.ref,e);return new Hl(this._node.getChild(n),r,sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,l)=>e(new Hl(l,Mu(this.ref,r),sn)))}hasChild(e){const n=new Lt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jd(t,e){return t=qu(t),t._checkNotDeleted("ref"),e!==void 0?Mu(t._root,e):t._root}function Mu(t,e){return t=qu(t),st(t._path)===null?L4("child","path",e,!1):xy("child","path",e,!1),new to(t._repo,En(t._path,e))}class Z1{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Ny("value",this,new Hl(e.snapshotNode,new to(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ry(this,e,n):null}matches(e){return e instanceof Z1?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Y1{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Ry(this,e,n):null}createEvent(e,n){ge(e.childName!=null,"Child events should have a childName.");const r=Mu(new to(n._repo,n._path),e.childName),l=n._queryParams.getIndex();return new Ny(e.type,this,new Hl(e.snapshotNode,r,l),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Y1?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function eA(t,e,n,r,l){let u;if(typeof r=="object"&&(u=void 0,l=r),typeof r=="function"&&(u=r),l&&l.onlyOnce){const E=n,y=(N,I)=>{Tp(t._repo,t,w),E(N,I)};y.userCallback=n.userCallback,y.context=n.context,n=y}const p=new J4(n,u||void 0),w=e==="value"?new Z1(p):new Y1(e,p);return G4(t._repo,t,w),()=>Tp(t._repo,t,w)}function eh(t,e,n,r){return eA(t,"value",e,n,r)}i4(to);c4(to);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FIREBASE_DATABASE_EMULATOR_HOST",yf={};let nA=!1;function iA(t,e,n,r){t.repoInfo_=new R2(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function rA(t,e,n,r,l){let u=r||t.options.databaseURL;u===void 0&&(t.options.projectId||$r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yn("Using default host for project ",t.options.projectId),u=`${t.options.projectId}-default-rtdb.firebaseio.com`);let p=bp(u,l),w=p.repoInfo,E,y;typeof process<"u"&&Yg&&(y=Yg[tA]),y?(E=!0,u=`http://${y}?ns=${w.namespace}`,p=bp(u,l),w=p.repoInfo):E=!p.repoInfo.secure;const N=l&&E?new ia(ia.OWNER):new vC(t.name,t.options,e);D4("Invalid Firebase Database URL",p),at(p.path)||$r("Database URL must point to the root of a Firebase Database (not including a child path).");const I=sA(w,t,N,new wC(t.name,n));return new aA(I,t)}function oA(t,e){const n=yf[e];(!n||n[t.key]!==t)&&$r(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Z4(t),delete n[t.key]}function sA(t,e,n,r){let l=yf[e.name];l||(l={},yf[e.name]=l);let u=l[t.toURLString()];return u&&$r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new z4(t,nA,n,r),l[t.toURLString()]=u,u}class aA{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(U4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new to(this._repo,vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$r("Cannot call "+e+" on a deleted database.")}}function lA(t=Y3(),e){const n=V3(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=PE("database");r&&cA(n,...r)}return n}function cA(t,e,n,r={}){t=qu(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$r("Cannot call useEmulator() after instance has already been initialized.");const l=t._repoInternal;let u;if(l.repoInfo_.nodeAdmin)r.mockUserToken&&$r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new ia(ia.OWNER);else if(r.mockUserToken){const p=typeof r.mockUserToken=="string"?r.mockUserToken:kE(r.mockUserToken,t.app.options.projectId);u=new ia(p)}iA(l,e,n,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){oC(Z3),yu(new Ll("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return rA(r,l,u,n)},"PUBLIC").setMultipleInstances(!0)),ta(Xg,Qg,t),ta(Xg,Qg,"esm2017")}Yr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Yr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};uA();const dA={apiKey:"AIzaSyBwM78rh1iYKCnJlW1-oYwB4dZbrRFdz-c",authDomain:"roomorientationdata.firebaseapp.com",databaseURL:"https://roomorientationdata-default-rtdb.firebaseio.com",projectId:"roomorientationdata",storageBucket:"roomorientationdata.appspot.com",messagingSenderId:"99942721154",appId:"1:99942721154:web:18939bfc42074d9316769b"},hA=h2(dA),th=lA(hA);function My({style:t}){const[e,n]=pn.useState(""),[r,l]=pn.useState(""),[u,p]=pn.useState(!1),[w,E]=pn.useState(!1),y=pn.useRef(null),[N,I]=pn.useState(!1),[D,W]=pn.useState(!1),[Y,V]=pn.useState(!1),[me,H]=pn.useState(!1),[k,B]=pn.useState(!1),[$,pe]=pn.useState(!1),[ce,K]=pn.useState(""),[fe,te]=pn.useState(!1),ze=()=>{console.log("tangaga"),event.preventDefault();const ee=new uE("reader",{qrbox:{width:300,height:300},fps:20}),Oe=dt=>{console.log("QR Code Value Detected:",dt),n(dt),te(!1),ee.clear()},He=dt=>{console.error(dt)};fe?(ee.clear(),te(!1)):(te(!0),ee.render(Oe,He))},je=ee=>{const{value:Oe}=ee.target;K(Oe)},ve=()=>{I(!N),W(!N)},$e=()=>{V(!Y),H(!Y)};let Ye=[],J;const Le=pn.useRef(null);pn.useEffect(()=>{Le.current=Gn.map("map",{center:[0,-.09],zoom:13,zoomControl:!1,crs:Gn.CRS.EPSG3395}),Le.current.setView([10,10],3);const ee=()=>{p(!1),E(!1)};return document.body.addEventListener("click",ee),()=>{Le.current.remove(),document.body.removeEventListener("click",ee)}},[]);const Te=ee=>{let Oe=[{url:ee,bounds:[[0,0],[10,10]]}];Le.current.eachLayer(function(He){He instanceof Gn.ImageOverlay&&Le.current.removeLayer(He)}),Oe.forEach(function(He){Gn.imageOverlay(He.url,He.bounds).addTo(Le.current)})};function ne(ee){ee==="science2ndFloor"?Te(gE):ee==="science1stFloor"?Te(fE):ee==="scienceGroundFloor"?Te(hE):ee==="BRS1stFloor"?Te(mE):ee==="BRS2ndFloor"?Te(_E):ee==="BRS3rdFloor"?Te(yE):ee==="BRS4thFloor"?Te(xE):ee==="BRS5thFloor"?Te(wE):ee==="BRS6thFloor"?Te(vE):ee==="BRS7thFloor"?Te(EE):ee==="BRS8thFloor"?Te(CE):ee==="BRS9thFloor"&&Te(SE)}const Se=ee=>{le(),De(),At(ee),Ho(ee),ne(ee),gr(Ye)},le=()=>{Le.current.eachLayer(ee=>{ee instanceof Gn.Marker&&Le.current.removeLayer(ee)})},De=()=>{Le.current.eachLayer(ee=>{ee instanceof Gn.Polyline&&Le.current.removeLayer(ee)})};let Re=[];const At=ee=>{Re=AE(ee),Ue(Le.current,Re)},Ue=(ee,Oe)=>{Oe.forEach(He=>{Je(He,ee)})},Je=(ee,Oe)=>{if(!Oe){console.error("Map not defined. Cannot add marker.");return}function He(pt,mt){if(mt==="BRS")switch(pt){case 1:Se("BRS1stFloor");break;case 2:Se("BRS2ndFloor");break;case 3:Se("BRS3rdFloor");break;case 4:Se("BRS4thFloor");break;case 5:Se("BRS5thFloor");break;case 6:Se("BRS6thFloor");break;case 7:Se("BRS7thFloor");break;case 8:Se("BRS8thFloor");break;case 9:Se("BRS9thFloor");break}}if(Object.prototype.hasOwnProperty.call(ee,"label")){const pt=Gn.marker([ee.lat,ee.lon]).addTo(Oe);if(ee.label==="leaveButton"&&(pt.bindPopup(`Node ${ee.id}`),pt.setIcon(Gn.icon({iconUrl:pE,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]})),pt.on("click",()=>{le(),Se(ee.destination),Et(Ye,Re)})),ee.label==="classroomLogo"&&(pt.bindPopup(`Node ${ee.id}`),pt.setIcon(Gn.icon({iconUrl:dE,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]}))),ee.label==="elevator"){pt.bindPopup(`Node ${ee.id}`),pt.setIcon(Gn.icon({iconUrl:xg,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]}));let Qe;ee.elevatorBuilding==="BRS"&&(Qe=[{id:1,node:143},{id:2,node:113},{id:3,node:166},{id:4,node:195},{id:5,node:224},{id:6,node:239},{id:7,node:264},{id:8,node:289},{id:9,node:314}]),pt.on("click",()=>{let Ge;for(let It=0;It<Ye.length;It++)for(let Ut=0;Ut<Qe.length;Ut++)Ye[It]===Qe[Ut].node&&(Ge=Qe[Ut].id);let et=document.createElement("div");for(let It=1;It<=Qe.length;It++){let Ut=document.createElement("button");Ut.textContent=It,Ut.addEventListener("click",()=>{He(It,ee.elevatorBuilding)}),It===Ge&&(Ut.style.backgroundColor="red"),et.appendChild(Ut)}pt.getPopup().setContent(et),pt.openPopup()})}let mt="Your Current Location: ",Qi="Your Destination: ",_t=Ye[0],se=Ye[Ye.length-1];ee.id===_t&&pt.bindPopup(`<strong>${mt}</strong> Room: ${ee.roomID}`),ee.id===se&&(pt.bindPopup(`<strong>${Qi}</strong> Room: ${ee.roomID}`),pt.openPopup())}const dt=(pt,mt,Qi,_t)=>new Promise((se,Qe)=>{if(Qi==="roomID"){const Ge=Jd(th,pt);eh(Ge,et=>{const It=et.val();for(let Ut=1;Ut<=50;Ut++)if(It&&It[mt]&&It[mt].length>0&&It[mt][Ut].node===_t){const Rr=It[mt][Ut].roomID;se(Rr)}})}else Qe("Type is not 'roomID'")}),ln=(pt,mt,Qi,_t)=>new Promise((se,Qe)=>{if(Qi==="roomID"){const Ge=Jd(th,pt);eh(Ge,et=>{const It=et.val();for(let Ut=1;Ut<=50;Ut++)if(It&&It[mt]&&It[mt].length>0&&It[mt][Ut].node===_t){const Rr=It[mt][Ut].cat;se(Rr)}})}else Qe("Type is not 'roomID'")});if(Object.prototype.hasOwnProperty.call(ee,"title")){var qt=Gn.latLng(ee.lat,ee.lon);ln(ee.building,ee.floor,"roomID",ee.node).then(pt=>{dt(ee.building,ee.floor,"roomID",ee.node).then(mt=>{pt===""?Gn.marker(qt,{icon:Gn.divIcon({html:`<strong> ${pt} </strong> ${mt}`,className:"text-below-marker"})}).addTo(Oe):Gn.marker(qt,{icon:Gn.divIcon({html:`<strong> ${pt}: </strong> ${mt}`,className:"text-below-marker"})}).addTo(Oe)}).catch(mt=>{console.error("Error:",mt)})}).catch(pt=>{console.error("Error:",pt)})}Et(Ye,Re)},ae=(ee,Oe)=>{for(let He=0;He<ee.length;He++)for(let dt=0;dt<Oe.length;dt++)if(ee[He]===Oe[dt].id)return console.log("ehe:",ee[He]),Oe[dt].id},nn=ee=>Re.find(Oe=>Oe.id===ee),Et=(ee,Oe)=>{const He=nn(ae(ee,Oe));He&&Le.current.flyTo([He.lat,He.lon],8,{duration:1,easeLinearity:.5})},gr=ee=>{for(let Oe=0;Oe<ee.length-1;Oe++){const He=nn(ee[Oe]),dt=nn(ee[Oe+1]);He&&dt&&Yi(Le.current,He,dt)}},Yi=(ee,Oe,He)=>{const dt=[[Oe.lat,Oe.lon],[He.lat,He.lon]];Gn.polyline(dt,{weight:"4",color:"red"}).addTo(ee)},an=["S123","S214","S215","S216","S217","S218","S219","S220"],Mi=ee=>{const{value:Oe}=ee.target;n(Oe),p(Oe.trim().length>0)},it=ee=>{const{value:Oe}=ee.target;l(Oe),E(Oe.trim().length>0)},Xi=(ee,Oe)=>{Oe?(n(ee),p(!1)):(l(ee),E(!1))},Kn=ee=>{ee.preventDefault();const Oe=(dt,ln)=>new Promise((qt,pt)=>{const mt=["Ground Floor","1st Floor","2nd Floor","3rd Floor","4th Floor","5th Floor","6th Floor","7th Floor","8th Floor","9th Floor"],Qi=Jd(th,dt);eh(Qi,_t=>{const se=_t.val();for(let Qe=0;Qe<mt.length;Qe++)for(let Ge=1;Ge<=50;Ge++)if(se&&se[mt[Qe]]&&se[mt[Qe]][Ge])if(se[mt[Qe]][Ge].roomID===ln.toLowerCase()||se[mt[Qe]][Ge].roomID===ln.toUpperCase()){let et=se[mt[Qe]][Ge].node;console.log(et),qt(et);return}else console.log("wala data");else console.log("wala data2");qt("Room not found")},_t=>{pt(_t)})}),He=dt=>{if(dt[0].toLowerCase()==="s")return"Science";if(dt[0].toLowerCase()==="u")return"BRS";if(dt[0].toLowerCase()==="g")return"PE"};k&&(console.log("fac:",$),Oe(He(e),e).then(dt=>{Oe(He(r),r).then(ln=>{console.log(ln),Ye=wg("enterDestination",String(dt),String(ln),N,me),J=vg("enterDestination",String(dt),String(ln),N,me),Se(J)})})),$&&(console.log("dest:",k),Oe(He(e),e).then(dt=>{Ye=wg("enterFindFacility",dt,ce,N,me),J=vg("enterFindFacility",dt,ce,N,me),Se(J)}))},pr=an.filter(ee=>ee.toLowerCase().indexOf(e.toLowerCase())!==-1),Kt=an.filter(ee=>ee.toLowerCase().indexOf(r.toLowerCase())!==-1),[gt,rt]=pn.useState(""),Nr=ee=>{const{value:Oe}=ee.target;rt(Oe),Oe==="Enter Destination"?(B(!0),pe(!1)):(B(!1),pe(!0))},[Ee,dn]=pn.useState(""),Ho=ee=>{ee=="science2ndFloor"?dn("Science Building 2nd Floor, PE Building 1st Floor"):ee=="science1stFloor"?dn("Science Building 1st Floor, PE Building Ground Floor"):ee=="scienceGroundFloor"?dn("Science Building Ground Floor"):ee=="BRS1stFloor"?dn("BRS Building 1st Floor"):ee=="BRS2ndFloor"?dn("BRS Building 2nd Floor"):ee=="BRS3rdFloor"?dn("BRS Building 3rd Floor"):ee=="BRS4thFloor"?dn("BRS Building 4th Floor"):ee=="BRS5thFloor"?dn("BRS Building 5th Floor"):ee=="BRS6thFloor"?dn("BRS Building 6th Floor"):ee=="BRS7thFloor"?dn("BRS Building 7th Floor"):ee=="BRS8thFloor"?dn("BRS Building 8th Floor"):ee=="BRS9thFloor"&&dn("BRS Building 9th Floor")};return Pe.jsxs("div",{style:t,ref:y,children:[Pe.jsx("div",{id:"reader",style:{display:fe?"block":"none"}}),Pe.jsx("div",{id:"result"}),Pe.jsxs("div",{className:"sticky-div",children:[Pe.jsx("div",{children:Pe.jsxs("select",{value:gt,onChange:Nr,className:"pickButton",children:[Pe.jsx("option",{defaultValue:"",children:"Choose Destination"}),Pe.jsx("option",{value:"Enter Destination",children:"Enter Destination"}),Pe.jsx("option",{value:"Find Closest Facility",children:"Find Facility/Office"})]})}),Pe.jsx("div",{style:{display:k||$?"block":"none"},children:Pe.jsx("form",{children:Pe.jsxs("div",{style:{display:"flex",borderBottom:"4px solid #0c380c"},children:[Pe.jsxs("span",{style:{flex:"70%",background:"#0c380c"},children:[Pe.jsxs("div",{style:{display:"flex"},children:[Pe.jsx("div",{style:{flex:"100%"},children:Pe.jsx("label",{children:Pe.jsx("input",{className:"InputBox",placeholder:"Enter Your Current Location",type:"text",name:"currentPost",value:e,onChange:Mi})})}),Pe.jsx("div",{children:Pe.jsx("button",{className:"qrButton",onClick:ze,children:"QR"})})]}),u&&Pe.jsx("ul",{className:"Suggestions",children:pr.map((ee,Oe)=>Pe.jsx("li",{onClick:()=>Xi(ee,!0),children:ee},Oe))}),Pe.jsx("label",{children:Pe.jsx("input",{className:"InputBox",placeholder:"Enter Your Destination",type:"text",name:"destination",value:r,onChange:it,style:{display:k?"block":"none"}})}),w&&Pe.jsx("ul",{className:"Suggestions",children:Kt.map((ee,Oe)=>Pe.jsx("li",{onClick:()=>Xi(ee,!1),children:ee},Oe))}),Pe.jsxs("select",{style:{display:k?"none":"block"},className:"InputBox",id:"selectFac",value:ce,onChange:je,children:[Pe.jsx("option",{children:"Select Facility"}),Pe.jsx("option",{children:"CR(WOMEN)"}),Pe.jsx("option",{children:"CR(MEN)"}),Pe.jsx("option",{children:"CEA: Faculty Office"}),Pe.jsx("option",{children:"test"})]})]}),Pe.jsx("span",{style:{flex:"30%",background:"#0c380c",borderLeft:"2px solid #0c380c",borderRight:"2px solid #0c380c",borderTop:"1px solid #0c380c"},children:Pe.jsxs("div",{children:[Pe.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[Pe.jsxs("div",{className:`CheckboxDiv ${D?"clicked":""}`,onClick:ve,children:[Pe.jsx("input",{type:"checkbox",className:"checkbox",id:"elev",checked:N,onChange:()=>{}}),Pe.jsx("img",{src:xg,className:"checkbox-image",alt:"Elevator Logo"})]}),Pe.jsxs("div",{className:`CheckboxDiv ${me?"clicked":""}`,onClick:$e,children:[Pe.jsx("input",{type:"checkbox",className:"checkbox",id:"emer",checked:Y,onChange:()=>{}}),Pe.jsx("img",{src:Sv,className:"checkbox-image",alt:"Elevator Logo"})]})]}),Pe.jsx("div",{children:Pe.jsx("button",{title:"Locate",className:"Locatebuttons",onClick:Kn,children:" Locate"})})]})})]})})}),Pe.jsx("div",{className:"currentPosition",style:{},children:Pe.jsxs("h4",{style:{textAlign:"center",margin:"5px",opacity:"0.6",borderRadius:"60px"},children:[" ",Ee]})})]}),Pe.jsx("div",{id:"map",style:{width:"100%",height:"1000px"}})]})}My.propTypes={style:Cv.object};function fA(){return Pe.jsx(Pe.Fragment,{children:Pe.jsx(My,{})})}nh.createRoot(document.getElementById("root")).render(Pe.jsx(ax.StrictMode,{children:Pe.jsx(fA,{})}));
