function Gy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in t)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(t,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ru(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bg={exports:{}},Du={},Mg={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=Symbol.for("react.element"),Zy=Symbol.for("react.portal"),Yy=Symbol.for("react.fragment"),Xy=Symbol.for("react.strict_mode"),Qy=Symbol.for("react.profiler"),Ky=Symbol.for("react.provider"),qy=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Jy=Symbol.for("react.suspense"),ex=Symbol.for("react.memo"),tx=Symbol.for("react.lazy"),a0=Symbol.iterator;function nx(t){return t===null||typeof t!="object"?null:(t=a0&&t[a0]||t["@@iterator"],typeof t=="function"?t:null)}var Og={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rg=Object.assign,Dg={};function ga(t,e,n){this.props=t,this.context=e,this.refs=Dg,this.updater=n||Og}ga.prototype.isReactComponent={};ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lg(){}Lg.prototype=ga.prototype;function mf(t,e,n){this.props=t,this.context=e,this.refs=Dg,this.updater=n||Og}var _f=mf.prototype=new Lg;_f.constructor=mf;Rg(_f,ga.prototype);_f.isPureReactComponent=!0;var l0=Array.isArray,Pg=Object.prototype.hasOwnProperty,yf={current:null},kg={key:!0,ref:!0,__self:!0,__source:!0};function Bg(t,e,n){var r,l={},u=null,g=null;if(e!=null)for(r in e.ref!==void 0&&(g=e.ref),e.key!==void 0&&(u=""+e.key),e)Pg.call(e,r)&&!kg.hasOwnProperty(r)&&(l[r]=e[r]);var w=arguments.length-2;if(w===1)l.children=n;else if(1<w){for(var C=Array(w),y=0;y<w;y++)C[y]=arguments[y+2];l.children=C}if(t&&t.defaultProps)for(r in w=t.defaultProps,w)l[r]===void 0&&(l[r]=w[r]);return{$$typeof:Wl,type:t,key:u,ref:g,props:l,_owner:yf.current}}function ix(t,e){return{$$typeof:Wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wl}function rx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c0=/\/+/g;function mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rx(""+t.key):e.toString(36)}function Oc(t,e,n,r,l){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var g=!1;if(t===null)g=!0;else switch(u){case"string":case"number":g=!0;break;case"object":switch(t.$$typeof){case Wl:case Zy:g=!0}}if(g)return g=t,l=l(g),t=r===""?"."+mh(g,0):r,l0(l)?(n="",t!=null&&(n=t.replace(c0,"$&/")+"/"),Oc(l,e,n,"",function(y){return y})):l!=null&&(xf(l)&&(l=ix(l,n+(!l.key||g&&g.key===l.key?"":(""+l.key).replace(c0,"$&/")+"/")+t)),e.push(l)),1;if(g=0,r=r===""?".":r+":",l0(t))for(var w=0;w<t.length;w++){u=t[w];var C=r+mh(u,w);g+=Oc(u,e,n,C,l)}else if(C=nx(t),typeof C=="function")for(t=C.call(t),w=0;!(u=t.next()).done;)u=u.value,C=r+mh(u,w++),g+=Oc(u,e,n,C,l);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return g}function dc(t,e,n){if(t==null)return t;var r=[],l=0;return Oc(t,r,"","",function(u){return e.call(n,u,l++)}),r}function sx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ei={current:null},Rc={transition:null},ox={ReactCurrentDispatcher:ei,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:yf};ct.Children={map:dc,forEach:function(t,e,n){dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dc(t,function(){e++}),e},toArray:function(t){return dc(t,function(e){return e})||[]},only:function(t){if(!xf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=ga;ct.Fragment=Yy;ct.Profiler=Qy;ct.PureComponent=mf;ct.StrictMode=Xy;ct.Suspense=Jy;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ox;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rg({},t.props),l=t.key,u=t.ref,g=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,g=yf.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var w=t.type.defaultProps;for(C in e)Pg.call(e,C)&&!kg.hasOwnProperty(C)&&(r[C]=e[C]===void 0&&w!==void 0?w[C]:e[C])}var C=arguments.length-2;if(C===1)r.children=n;else if(1<C){w=Array(C);for(var y=0;y<C;y++)w[y]=arguments[y+2];r.children=w}return{$$typeof:Wl,type:t.type,key:l,ref:u,props:r,_owner:g}};ct.createContext=function(t){return t={$$typeof:qy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ky,_context:t},t.Consumer=t};ct.createElement=Bg;ct.createFactory=function(t){var e=Bg.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:$y,render:t}};ct.isValidElement=xf;ct.lazy=function(t){return{$$typeof:tx,_payload:{_status:-1,_result:t},_init:sx}};ct.memo=function(t,e){return{$$typeof:ex,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Rc.transition;Rc.transition={};try{t()}finally{Rc.transition=e}};ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ct.useCallback=function(t,e){return ei.current.useCallback(t,e)};ct.useContext=function(t){return ei.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return ei.current.useDeferredValue(t)};ct.useEffect=function(t,e){return ei.current.useEffect(t,e)};ct.useId=function(){return ei.current.useId()};ct.useImperativeHandle=function(t,e,n){return ei.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return ei.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return ei.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return ei.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return ei.current.useReducer(t,e,n)};ct.useRef=function(t){return ei.current.useRef(t)};ct.useState=function(t){return ei.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return ei.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return ei.current.useTransition()};ct.version="18.2.0";Mg.exports=ct;var cn=Mg.exports;const ax=Ru(cn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx=cn,cx=Symbol.for("react.element"),ux=Symbol.for("react.fragment"),hx=Object.prototype.hasOwnProperty,dx=lx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fx={key:!0,ref:!0,__self:!0,__source:!0};function Fg(t,e,n){var r,l={},u=null,g=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(g=e.ref);for(r in e)hx.call(e,r)&&!fx.hasOwnProperty(r)&&(l[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)l[r]===void 0&&(l[r]=e[r]);return{$$typeof:cx,type:t,key:u,ref:g,props:l,_owner:dx.current}}Du.Fragment=ux;Du.jsx=Fg;Du.jsxs=Fg;bg.exports=Du;var Pe=bg.exports,Jh={},zg={exports:{}},Ii={},Ug={exports:{}},Hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,Te){var le=te.length;te.push(Te);e:for(;0<le;){var Le=le-1>>>1,be=te[Le];if(0<l(be,Te))te[Le]=Te,te[le]=be,le=Le;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var Te=te[0],le=te.pop();if(le!==Te){te[0]=le;e:for(var Le=0,be=te.length,Et=be>>>1;Le<Et;){var He=2*(Le+1)-1,$e=te[He],ae=He+1,$t=te[ae];if(0>l($e,le))ae<be&&0>l($t,$e)?(te[Le]=$t,te[ae]=le,Le=ae):(te[Le]=$e,te[He]=le,Le=He);else if(ae<be&&0>l($t,le))te[Le]=$t,te[ae]=le,Le=ae;else break e}}return Te}function l(te,Te){var le=te.sortIndex-Te.sortIndex;return le!==0?le:te.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var g=Date,w=g.now();t.unstable_now=function(){return g.now()-w}}var C=[],y=[],N=1,A=null,R=3,H=!1,Z=!1,W=!1,me=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(te){for(var Te=n(y);Te!==null;){if(Te.callback===null)r(y);else if(Te.startTime<=te)r(y),Te.sortIndex=Te.expirationTime,e(C,Te);else break;Te=n(y)}}function q(te){if(W=!1,k(te),!Z)if(n(C)!==null)Z=!0,De(ge);else{var Te=n(y);Te!==null&&Oe(q,Te.startTime-te)}}function ge(te,Te){Z=!1,W&&(W=!1,U(fe),fe=-1),H=!0;var le=R;try{for(k(Te),A=n(C);A!==null&&(!(A.expirationTime>Te)||te&&!je());){var Le=A.callback;if(typeof Le=="function"){A.callback=null,R=A.priorityLevel;var be=Le(A.expirationTime<=Te);Te=t.unstable_now(),typeof be=="function"?A.callback=be:A===n(C)&&r(C),k(Te)}else r(C);A=n(C)}if(A!==null)var Et=!0;else{var He=n(y);He!==null&&Oe(q,He.startTime-Te),Et=!1}return Et}finally{A=null,R=le,H=!1}}var ue=!1,Q=null,fe=-1,ee=5,ze=-1;function je(){return!(t.unstable_now()-ze<ee)}function ve(){if(Q!==null){var te=t.unstable_now();ze=te;var Te=!0;try{Te=Q(!0,te)}finally{Te?qe():(ue=!1,Q=null)}}else ue=!1}var qe;if(typeof P=="function")qe=function(){P(ve)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,$=Xe.port2;Xe.port1.onmessage=ve,qe=function(){$.postMessage(null)}}else qe=function(){me(ve,0)};function De(te){Q=te,ue||(ue=!0,qe())}function Oe(te,Te){fe=me(function(){te(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){Z||H||(Z=!0,De(ge))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return n(C)},t.unstable_next=function(te){switch(R){case 1:case 2:case 3:var Te=3;break;default:Te=R}var le=R;R=Te;try{return te()}finally{R=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,Te){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var le=R;R=te;try{return Te()}finally{R=le}},t.unstable_scheduleCallback=function(te,Te,le){var Le=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Le+le:Le):le=Le,te){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=le+be,te={id:N++,callback:Te,priorityLevel:te,startTime:le,expirationTime:be,sortIndex:-1},le>Le?(te.sortIndex=le,e(y,te),n(C)===null&&te===n(y)&&(W?(U(fe),fe=-1):W=!0,Oe(q,le-Le))):(te.sortIndex=be,e(C,te),Z||H||(Z=!0,De(ge))),te},t.unstable_shouldYield=je,t.unstable_wrapCallback=function(te){var Te=R;return function(){var le=R;R=Te;try{return te.apply(this,arguments)}finally{R=le}}}})(Hg);Ug.exports=Hg;var px=Ug.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=cn,Ai=px;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vg=new Set,gl={};function _o(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(gl[t]=e,t=0;t<e.length;t++)Vg.add(e[t])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,gx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u0={},h0={};function mx(t){return ed.call(h0,t)?!0:ed.call(u0,t)?!1:gx.test(t)?h0[t]=!0:(u0[t]=!0,!1)}function _x(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yx(t,e,n,r){if(e===null||typeof e>"u"||_x(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ti(t,e,n,r,l,u,g){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=g}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wf,vf);Ln[e]=new ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wf,vf);Ln[e]=new ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wf,vf);Ln[e]=new ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new ti(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cf(t,e,n,r){var l=Ln.hasOwnProperty(e)?Ln[e]:null;(l!==null?l.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yx(e,n,l,r)&&(n=null),r||l===null?mx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(e=l.attributeName,r=l.attributeNamespace,n===null?t.removeAttribute(e):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qr=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),jg=Symbol.for("react.provider"),Gg=Symbol.for("react.context"),Sf=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),Af=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),Zg=Symbol.for("react.offscreen"),d0=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=d0&&t[d0]||t["@@iterator"],typeof t=="function"?t:null)}var qt=Object.assign,_h;function $a(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var yh=!1;function xh(t,e){if(!t||yh)return"";yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(y){var r=y}Reflect.construct(t,[],e)}else{try{e.call()}catch(y){r=y}t.call(e.prototype)}else{try{throw Error()}catch(y){r=y}t()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var l=y.stack.split(`
`),u=r.stack.split(`
`),g=l.length-1,w=u.length-1;1<=g&&0<=w&&l[g]!==u[w];)w--;for(;1<=g&&0<=w;g--,w--)if(l[g]!==u[w]){if(g!==1||w!==1)do if(g--,w--,0>w||l[g]!==u[w]){var C=`
`+l[g].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=g&&0<=w);break}}}finally{yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$a(t):""}function xx(t){switch(t.tag){case 5:return $a(t.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return t=xh(t.type,!1),t;case 11:return t=xh(t.type.render,!1),t;case 1:return t=xh(t.type,!0),t;default:return""}}function rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Ro:return"Portal";case td:return"Profiler";case Ef:return"StrictMode";case nd:return"Suspense";case id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gg:return(t.displayName||"Context")+".Consumer";case jg:return(t._context.displayName||"Context")+".Provider";case Sf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Af:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case fs:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}function wx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vx(t){var e=Yg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(g){r=""+g,u.call(this,g)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(g){r=""+g},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pc(t){t._valueTracker||(t._valueTracker=vx(t))}function Xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sd(t,e){var n=e.checked;return qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function f0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ms(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qg(t,e){e=e.checked,e!=null&&Cf(t,"checked",e,!1)}function od(t,e){Qg(t,e);var n=Ms(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&ad(t,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ad(t,e,n){(e!=="number"||Vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ja=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ms(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,r&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(Ja(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ms(n)}}function Kg(t,e){var n=Ms(e.value),r=Ms(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function m0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gc,$g=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,l){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gc=gc||document.createElement("div"),gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cx=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){Cx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function Jg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function em(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Jg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,l):t[n]=l}}var Ex=qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(Ex[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=null;function If(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fd=null,Xo=null,Qo=null;function _0(t){if(t=Gl(t)){if(typeof fd!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Fu(e),fd(t.stateNode,t.type,e))}}function tm(t){Xo?Qo?Qo.push(t):Qo=[t]:Xo=t}function nm(){if(Xo){var t=Xo,e=Qo;if(Qo=Xo=null,_0(t),e)for(t=0;t<e.length;t++)_0(e[t])}}function im(t,e){return t(e)}function rm(){}var wh=!1;function sm(t,e,n){if(wh)return t(e,n);wh=!0;try{return im(t,e,n)}finally{wh=!1,(Xo!==null||Qo!==null)&&(rm(),nm())}}function _l(t,e){var n=t.stateNode;if(n===null)return null;var r=Fu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var pd=!1;if(Zr)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){pd=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{pd=!1}function Sx(t,e,n,r,l,u,g,w,C){var y=Array.prototype.slice.call(arguments,3);try{e.apply(n,y)}catch(N){this.onError(N)}}var il=!1,jc=null,Gc=!1,gd=null,Ax={onError:function(t){il=!0,jc=t}};function Ix(t,e,n,r,l,u,g,w,C){il=!1,jc=null,Sx.apply(Ax,arguments)}function Tx(t,e,n,r,l,u,g,w,C){if(Ix.apply(this,arguments),il){if(il){var y=jc;il=!1,jc=null}else throw Error(de(198));Gc||(Gc=!0,gd=y)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function om(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y0(t){if(yo(t)!==t)throw Error(de(188))}function Nx(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return y0(l),t;if(u===r)return y0(l),e;u=u.sibling}throw Error(de(188))}if(n.return!==r.return)n=l,r=u;else{for(var g=!1,w=l.child;w;){if(w===n){g=!0,n=l,r=u;break}if(w===r){g=!0,r=l,n=u;break}w=w.sibling}if(!g){for(w=u.child;w;){if(w===n){g=!0,n=u,r=l;break}if(w===r){g=!0,r=u,n=l;break}w=w.sibling}if(!g)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function am(t){return t=Nx(t),t!==null?lm(t):null}function lm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lm(t);if(e!==null)return e;t=t.sibling}return null}var cm=Ai.unstable_scheduleCallback,x0=Ai.unstable_cancelCallback,bx=Ai.unstable_shouldYield,Mx=Ai.unstable_requestPaint,sn=Ai.unstable_now,Ox=Ai.unstable_getCurrentPriorityLevel,Tf=Ai.unstable_ImmediatePriority,um=Ai.unstable_UserBlockingPriority,Zc=Ai.unstable_NormalPriority,Rx=Ai.unstable_LowPriority,hm=Ai.unstable_IdlePriority,Lu=null,Ar=null;function Dx(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Lu,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:kx,Lx=Math.log,Px=Math.LN2;function kx(t){return t>>>=0,t===0?32:31-(Lx(t)/Px|0)|0}var mc=64,_c=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,l=t.suspendedLanes,u=t.pingedLanes,g=n&268435455;if(g!==0){var w=g&~l;w!==0?r=el(w):(u&=g,u!==0&&(r=el(u)))}else g=n&~l,g!==0?r=el(g):u!==0&&(r=el(u));if(r===0)return 0;if(e!==0&&e!==r&&!(e&l)&&(l=r&-r,u=e&-e,l>=u||l===16&&(u&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ar(e),l=1<<n,r|=t[n],e&=~l;return r}function Bx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,l=t.expirationTimes,u=t.pendingLanes;0<u;){var g=31-ar(u),w=1<<g,C=l[g];C===-1?(!(w&n)||w&r)&&(l[g]=Bx(w,e)):C<=e&&(t.expiredLanes|=w),u&=~w}}function md(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dm(){var t=mc;return mc<<=1,!(mc&4194240)&&(mc=64),t}function vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ar(e),t[e]=n}function zx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-ar(n),u=1<<l;e[l]=0,r[l]=-1,t[l]=-1,n&=~u}}function Nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ar(n),l=1<<r;l&e|t[r]&e&&(t[r]|=e),n&=~l}}var It=0;function fm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pm,bf,gm,mm,_m,_d=!1,yc=[],xs=null,ws=null,vs=null,yl=new Map,xl=new Map,gs=[],Ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(t,e){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":yl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(e.pointerId)}}function Wa(t,e,n,r,l,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[l]},e!==null&&(e=Gl(e),e!==null&&bf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function Hx(t,e,n,r,l){switch(e){case"focusin":return xs=Wa(xs,t,e,n,r,l),!0;case"dragenter":return ws=Wa(ws,t,e,n,r,l),!0;case"mouseover":return vs=Wa(vs,t,e,n,r,l),!0;case"pointerover":var u=l.pointerId;return yl.set(u,Wa(yl.get(u)||null,t,e,n,r,l)),!0;case"gotpointercapture":return u=l.pointerId,xl.set(u,Wa(xl.get(u)||null,t,e,n,r,l)),!0}return!1}function ym(t){var e=Js(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=om(n),e!==null){t.blockedOn=e,_m(t.priority,function(){gm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dd=r,n.target.dispatchEvent(r),dd=null}else return e=Gl(n),e!==null&&bf(e),t.blockedOn=n,!1;e.shift()}return!0}function v0(t,e,n){Dc(t)&&n.delete(e)}function Wx(){_d=!1,xs!==null&&Dc(xs)&&(xs=null),ws!==null&&Dc(ws)&&(ws=null),vs!==null&&Dc(vs)&&(vs=null),yl.forEach(v0),xl.forEach(v0)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,Wx)))}function wl(t){function e(l){return Va(l,t)}if(0<yc.length){Va(yc[0],t);for(var n=1;n<yc.length;n++){var r=yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xs!==null&&Va(xs,t),ws!==null&&Va(ws,t),vs!==null&&Va(vs,t),yl.forEach(e),xl.forEach(e),n=0;n<gs.length;n++)r=gs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gs.length&&(n=gs[0],n.blockedOn===null);)ym(n),n.blockedOn===null&&gs.shift()}var Ko=qr.ReactCurrentBatchConfig,Xc=!0;function Vx(t,e,n,r){var l=It,u=Ko.transition;Ko.transition=null;try{It=1,Mf(t,e,n,r)}finally{It=l,Ko.transition=u}}function jx(t,e,n,r){var l=It,u=Ko.transition;Ko.transition=null;try{It=4,Mf(t,e,n,r)}finally{It=l,Ko.transition=u}}function Mf(t,e,n,r){if(Xc){var l=yd(t,e,n,r);if(l===null)Oh(t,e,r,Qc,n),w0(t,r);else if(Hx(l,t,e,n,r))r.stopPropagation();else if(w0(t,r),e&4&&-1<Ux.indexOf(t)){for(;l!==null;){var u=Gl(l);if(u!==null&&pm(u),u=yd(t,e,n,r),u===null&&Oh(t,e,r,Qc,n),u===l)break;l=u}l!==null&&r.stopPropagation()}else Oh(t,e,r,null,n)}}var Qc=null;function yd(t,e,n,r){if(Qc=null,t=If(r),t=Js(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=om(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qc=t,null}function xm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ox()){case Tf:return 1;case um:return 4;case Zc:case Rx:return 16;case hm:return 536870912;default:return 16}default:return 16}}var _s=null,Of=null,Lc=null;function wm(){if(Lc)return Lc;var t,e=Of,n=e.length,r,l="value"in _s?_s.value:_s.textContent,u=l.length;for(t=0;t<n&&e[t]===l[t];t++);var g=n-t;for(r=1;r<=g&&e[n-r]===l[u-r];r++);return Lc=l.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xc(){return!0}function C0(){return!1}function Ti(t){function e(n,r,l,u,g){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(n=t[w],this[w]=n?n(u):u[w]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?xc:C0,this.isPropagationStopped=C0,this}return qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),e}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rf=Ti(ma),jl=qt({},ma,{view:0,detail:0}),Gx=Ti(jl),Ch,Eh,ja,Pu=qt({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Df,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ja&&(ja&&t.type==="mousemove"?(Ch=t.screenX-ja.screenX,Eh=t.screenY-ja.screenY):Eh=Ch=0,ja=t),Ch)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),E0=Ti(Pu),Zx=qt({},Pu,{dataTransfer:0}),Yx=Ti(Zx),Xx=qt({},jl,{relatedTarget:0}),Sh=Ti(Xx),Qx=qt({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Kx=Ti(Qx),qx=qt({},ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$x=Ti(qx),Jx=qt({},ma,{data:0}),S0=Ti(Jx),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nw[t])?!!e[t]:!1}function Df(){return iw}var rw=qt({},jl,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Df,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sw=Ti(rw),ow=qt({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A0=Ti(ow),aw=qt({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Df}),lw=Ti(aw),cw=qt({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),uw=Ti(cw),hw=qt({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dw=Ti(hw),fw=[9,13,27,32],Lf=Zr&&"CompositionEvent"in window,rl=null;Zr&&"documentMode"in document&&(rl=document.documentMode);var pw=Zr&&"TextEvent"in window&&!rl,vm=Zr&&(!Lf||rl&&8<rl&&11>=rl),I0=" ",T0=!1;function Cm(t,e){switch(t){case"keyup":return fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function gw(t,e){switch(t){case"compositionend":return Em(e);case"keypress":return e.which!==32?null:(T0=!0,I0);case"textInput":return t=e.data,t===I0&&T0?null:t;default:return null}}function mw(t,e){if(Lo)return t==="compositionend"||!Lf&&Cm(t,e)?(t=wm(),Lc=Of=_s=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vm&&e.locale!=="ko"?null:e.data;default:return null}}var _w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_w[t.type]:e==="textarea"}function Sm(t,e,n,r){tm(r),e=Kc(e,"onChange"),0<e.length&&(n=new Rf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sl=null,vl=null;function yw(t){Pm(t,0)}function ku(t){var e=Bo(t);if(Xg(e))return t}function xw(t,e){if(t==="change")return e}var Am=!1;if(Zr){var Ah;if(Zr){var Ih="oninput"in document;if(!Ih){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),Ih=typeof b0.oninput=="function"}Ah=Ih}else Ah=!1;Am=Ah&&(!document.documentMode||9<document.documentMode)}function M0(){sl&&(sl.detachEvent("onpropertychange",Im),vl=sl=null)}function Im(t){if(t.propertyName==="value"&&ku(vl)){var e=[];Sm(e,vl,t,If(t)),sm(yw,e)}}function ww(t,e,n){t==="focusin"?(M0(),sl=e,vl=n,sl.attachEvent("onpropertychange",Im)):t==="focusout"&&M0()}function vw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(vl)}function Cw(t,e){if(t==="click")return ku(e)}function Ew(t,e){if(t==="input"||t==="change")return ku(e)}function Sw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:Sw;function Cl(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ed.call(e,l)||!ur(t[l],e[l]))return!1}return!0}function O0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R0(t,e){var n=O0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O0(n)}}function Tm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nm(){for(var t=window,e=Vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vc(t.document)}return e}function Pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aw(t){var e=Nm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tm(n.ownerDocument.documentElement,n)){if(r!==null&&Pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,u=Math.min(r.start,l);r=r.end===void 0?u:Math.min(r.end,l),!t.extend&&u>r&&(l=r,r=u,u=l),l=R0(n,u);var g=R0(n,r);l&&g&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),u>r?(t.addRange(e),t.extend(g.node,g.offset)):(e.setEnd(g.node,g.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Iw=Zr&&"documentMode"in document&&11>=document.documentMode,Po=null,xd=null,ol=null,wd=!1;function D0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wd||Po==null||Po!==Vc(r)||(r=Po,"selectionStart"in r&&Pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ol&&Cl(ol,r)||(ol=r,r=Kc(xd,"onSelect"),0<r.length&&(e=new Rf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ko={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},Th={},bm={};Zr&&(bm=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Bu(t){if(Th[t])return Th[t];if(!ko[t])return t;var e=ko[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bm)return Th[t]=e[n];return t}var Mm=Bu("animationend"),Om=Bu("animationiteration"),Rm=Bu("animationstart"),Dm=Bu("transitionend"),Lm=new Map,L0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(t,e){Lm.set(t,e),_o(e,[t])}for(var Nh=0;Nh<L0.length;Nh++){var bh=L0[Nh],Tw=bh.toLowerCase(),Nw=bh[0].toUpperCase()+bh.slice(1);Ps(Tw,"on"+Nw)}Ps(Mm,"onAnimationEnd");Ps(Om,"onAnimationIteration");Ps(Rm,"onAnimationStart");Ps("dblclick","onDoubleClick");Ps("focusin","onFocus");Ps("focusout","onBlur");Ps(Dm,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function P0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tx(r,e,void 0,t),t.currentTarget=null}function Pm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],l=r.event;r=r.listeners;e:{var u=void 0;if(e)for(var g=r.length-1;0<=g;g--){var w=r[g],C=w.instance,y=w.currentTarget;if(w=w.listener,C!==u&&l.isPropagationStopped())break e;P0(l,w,y),u=C}else for(g=0;g<r.length;g++){if(w=r[g],C=w.instance,y=w.currentTarget,w=w.listener,C!==u&&l.isPropagationStopped())break e;P0(l,w,y),u=C}}}if(Gc)throw t=gd,Gc=!1,gd=null,t}function Ht(t,e){var n=e[Ad];n===void 0&&(n=e[Ad]=new Set);var r=t+"__bubble";n.has(r)||(km(e,t,2,!1),n.add(r))}function Mh(t,e,n){var r=0;e&&(r|=4),km(n,t,r,e)}var vc="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[vc]){t[vc]=!0,Vg.forEach(function(n){n!=="selectionchange"&&(bw.has(n)||Mh(n,!1,t),Mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vc]||(e[vc]=!0,Mh("selectionchange",!1,e))}}function km(t,e,n,r){switch(xm(e)){case 1:var l=Vx;break;case 4:l=jx;break;default:l=Mf}n=l.bind(null,e,n,t),l=void 0,!pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),r?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function Oh(t,e,n,r,l){var u=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var w=r.stateNode.containerInfo;if(w===l||w.nodeType===8&&w.parentNode===l)break;if(g===4)for(g=r.return;g!==null;){var C=g.tag;if((C===3||C===4)&&(C=g.stateNode.containerInfo,C===l||C.nodeType===8&&C.parentNode===l))return;g=g.return}for(;w!==null;){if(g=Js(w),g===null)return;if(C=g.tag,C===5||C===6){r=u=g;continue e}w=w.parentNode}}r=r.return}sm(function(){var y=u,N=If(n),A=[];e:{var R=Lm.get(t);if(R!==void 0){var H=Rf,Z=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":H=sw;break;case"focusin":Z="focus",H=Sh;break;case"focusout":Z="blur",H=Sh;break;case"beforeblur":case"afterblur":H=Sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=lw;break;case Mm:case Om:case Rm:H=Kx;break;case Dm:H=uw;break;case"scroll":H=Gx;break;case"wheel":H=dw;break;case"copy":case"cut":case"paste":H=$x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=A0}var W=(e&4)!==0,me=!W&&t==="scroll",U=W?R!==null?R+"Capture":null:R;W=[];for(var P=y,k;P!==null;){k=P;var q=k.stateNode;if(k.tag===5&&q!==null&&(k=q,U!==null&&(q=_l(P,U),q!=null&&W.push(Sl(P,q,k)))),me)break;P=P.return}0<W.length&&(R=new H(R,Z,null,n,N),A.push({event:R,listeners:W}))}}if(!(e&7)){e:{if(R=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",R&&n!==dd&&(Z=n.relatedTarget||n.fromElement)&&(Js(Z)||Z[Yr]))break e;if((H||R)&&(R=N.window===N?N:(R=N.ownerDocument)?R.defaultView||R.parentWindow:window,H?(Z=n.relatedTarget||n.toElement,H=y,Z=Z?Js(Z):null,Z!==null&&(me=yo(Z),Z!==me||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(H=null,Z=y),H!==Z)){if(W=E0,q="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(W=A0,q="onPointerLeave",U="onPointerEnter",P="pointer"),me=H==null?R:Bo(H),k=Z==null?R:Bo(Z),R=new W(q,P+"leave",H,n,N),R.target=me,R.relatedTarget=k,q=null,Js(N)===y&&(W=new W(U,P+"enter",Z,n,N),W.target=k,W.relatedTarget=me,q=W),me=q,H&&Z)t:{for(W=H,U=Z,P=0,k=W;k;k=bo(k))P++;for(k=0,q=U;q;q=bo(q))k++;for(;0<P-k;)W=bo(W),P--;for(;0<k-P;)U=bo(U),k--;for(;P--;){if(W===U||U!==null&&W===U.alternate)break t;W=bo(W),U=bo(U)}W=null}else W=null;H!==null&&k0(A,R,H,W,!1),Z!==null&&me!==null&&k0(A,me,Z,W,!0)}}e:{if(R=y?Bo(y):window,H=R.nodeName&&R.nodeName.toLowerCase(),H==="select"||H==="input"&&R.type==="file")var ge=xw;else if(N0(R))if(Am)ge=Ew;else{ge=vw;var ue=ww}else(H=R.nodeName)&&H.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(ge=Cw);if(ge&&(ge=ge(t,y))){Sm(A,ge,n,N);break e}ue&&ue(t,R,y),t==="focusout"&&(ue=R._wrapperState)&&ue.controlled&&R.type==="number"&&ad(R,"number",R.value)}switch(ue=y?Bo(y):window,t){case"focusin":(N0(ue)||ue.contentEditable==="true")&&(Po=ue,xd=y,ol=null);break;case"focusout":ol=xd=Po=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,D0(A,n,N);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":D0(A,n,N)}var Q;if(Lf)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else Lo?Cm(t,n)&&(fe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(fe="onCompositionStart");fe&&(vm&&n.locale!=="ko"&&(Lo||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&Lo&&(Q=wm()):(_s=N,Of="value"in _s?_s.value:_s.textContent,Lo=!0)),ue=Kc(y,fe),0<ue.length&&(fe=new S0(fe,t,null,n,N),A.push({event:fe,listeners:ue}),Q?fe.data=Q:(Q=Em(n),Q!==null&&(fe.data=Q)))),(Q=pw?gw(t,n):mw(t,n))&&(y=Kc(y,"onBeforeInput"),0<y.length&&(N=new S0("onBeforeInput","beforeinput",null,n,N),A.push({event:N,listeners:y}),N.data=Q))}Pm(A,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kc(t,e){for(var n=e+"Capture",r=[];t!==null;){var l=t,u=l.stateNode;l.tag===5&&u!==null&&(l=u,u=_l(t,n),u!=null&&r.unshift(Sl(t,u,l)),u=_l(t,e),u!=null&&r.push(Sl(t,u,l))),t=t.return}return r}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k0(t,e,n,r,l){for(var u=e._reactName,g=[];n!==null&&n!==r;){var w=n,C=w.alternate,y=w.stateNode;if(C!==null&&C===r)break;w.tag===5&&y!==null&&(w=y,l?(C=_l(n,u),C!=null&&g.unshift(Sl(n,C,w))):l||(C=_l(n,u),C!=null&&g.push(Sl(n,C,w)))),n=n.return}g.length!==0&&t.push({event:e,listeners:g})}var Mw=/\r\n?/g,Ow=/\u0000|\uFFFD/g;function B0(t){return(typeof t=="string"?t:""+t).replace(Mw,`
`).replace(Ow,"")}function Cc(t,e,n){if(e=B0(e),B0(t)!==e&&n)throw Error(de(425))}function qc(){}var vd=null,Cd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,Dw=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(Lw)}:Sd;function Lw(t){setTimeout(function(){throw t})}function Rh(t,e){var n=e,r=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){t.removeChild(l),wl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);wl(e)}function Cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function z0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _a=Math.random().toString(36).slice(2),Sr="__reactFiber$"+_a,Al="__reactProps$"+_a,Yr="__reactContainer$"+_a,Ad="__reactEvents$"+_a,Pw="__reactListeners$"+_a,kw="__reactHandles$"+_a;function Js(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=z0(t);t!==null;){if(n=t[Sr])return n;t=z0(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[Sr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Fu(t){return t[Al]||null}var Id=[],Fo=-1;function ks(t){return{current:t}}function jt(t){0>Fo||(t.current=Id[Fo],Id[Fo]=null,Fo--)}function kt(t,e){Fo++,Id[Fo]=t.current,t.current=e}var Os={},jn=ks(Os),ci=ks(!1),oo=Os;function sa(t,e){var n=t.type.contextTypes;if(!n)return Os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var l={},u;for(u in n)l[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function ui(t){return t=t.childContextTypes,t!=null}function $c(){jt(ci),jt(jn)}function U0(t,e,n){if(jn.current!==Os)throw Error(de(168));kt(jn,e),kt(ci,n)}function Bm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in e))throw Error(de(108,wx(t)||"Unknown",l));return qt({},n,r)}function Jc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,oo=jn.current,kt(jn,t),kt(ci,ci.current),!0}function H0(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=Bm(t,e,oo),r.__reactInternalMemoizedMergedChildContext=t,jt(ci),jt(jn),kt(jn,t)):jt(ci),kt(ci,n)}var zr=null,zu=!1,Dh=!1;function Fm(t){zr===null?zr=[t]:zr.push(t)}function Bw(t){zu=!0,Fm(t)}function Bs(){if(!Dh&&zr!==null){Dh=!0;var t=0,e=It;try{var n=zr;for(It=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zr=null,zu=!1}catch(l){throw zr!==null&&(zr=zr.slice(t+1)),cm(Tf,Bs),l}finally{It=e,Dh=!1}}return null}var zo=[],Uo=0,eu=null,tu=0,zi=[],Ui=0,ao=null,Ur=1,Hr="";function Qs(t,e){zo[Uo++]=tu,zo[Uo++]=eu,eu=t,tu=e}function zm(t,e,n){zi[Ui++]=Ur,zi[Ui++]=Hr,zi[Ui++]=ao,ao=t;var r=Ur;t=Hr;var l=32-ar(r)-1;r&=~(1<<l),n+=1;var u=32-ar(e)+l;if(30<u){var g=l-l%5;u=(r&(1<<g)-1).toString(32),r>>=g,l-=g,Ur=1<<32-ar(e)+l|n<<l|r,Hr=u+t}else Ur=1<<u|n<<l|r,Hr=t}function kf(t){t.return!==null&&(Qs(t,1),zm(t,1,0))}function Bf(t){for(;t===eu;)eu=zo[--Uo],zo[Uo]=null,tu=zo[--Uo],zo[Uo]=null;for(;t===ao;)ao=zi[--Ui],zi[Ui]=null,Hr=zi[--Ui],zi[Ui]=null,Ur=zi[--Ui],zi[Ui]=null}var Ei=null,Ci=null,Zt=!1,ir=null;function Um(t,e){var n=Hi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ei=t,Ci=Cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ei=t,Ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ao!==null?{id:Ur,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ei=t,Ci=null,!0):!1;default:return!1}}function Td(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nd(t){if(Zt){var e=Ci;if(e){var n=e;if(!W0(t,e)){if(Td(t))throw Error(de(418));e=Cs(n.nextSibling);var r=Ei;e&&W0(t,e)?Um(r,n):(t.flags=t.flags&-4097|2,Zt=!1,Ei=t)}}else{if(Td(t))throw Error(de(418));t.flags=t.flags&-4097|2,Zt=!1,Ei=t}}}function V0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ei=t}function Ec(t){if(t!==Ei)return!1;if(!Zt)return V0(t),Zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Ci)){if(Td(t))throw Hm(),Error(de(418));for(;e;)Um(t,e),e=Cs(e.nextSibling)}if(V0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ci=Cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ci=null}}else Ci=Ei?Cs(t.stateNode.nextSibling):null;return!0}function Hm(){for(var t=Ci;t;)t=Cs(t.nextSibling)}function oa(){Ci=Ei=null,Zt=!1}function Ff(t){ir===null?ir=[t]:ir.push(t)}var Fw=qr.ReactCurrentBatchConfig;function er(t,e){if(t&&t.defaultProps){e=qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var nu=ks(null),iu=null,Ho=null,zf=null;function Uf(){zf=Ho=iu=null}function Hf(t){var e=nu.current;jt(nu),t._currentValue=e}function bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){iu=t,zf=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function Vi(t){var e=t._currentValue;if(zf!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(iu===null)throw Error(de(308));Ho=t,iu.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var eo=null;function Wf(t){eo===null?eo=[t]:eo.push(t)}function Wm(t,e,n,r){var l=e.interleaved;return l===null?(n.next=n,Wf(e)):(n.next=l.next,l.next=n),e.interleaved=n,Xr(t,r)}function Xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ps=!1;function Vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var l=r.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),r.pending=e,Xr(t,n)}return l=r.interleaved,l===null?(e.next=e,Wf(r)):(e.next=l.next,l.next=e),r.interleaved=e,Xr(t,n)}function kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}function j0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?l=u=g:u=u.next=g,n=n.next}while(n!==null);u===null?l=u=e:u=u.next=e}else l=u=e;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ru(t,e,n,r){var l=t.updateQueue;ps=!1;var u=l.firstBaseUpdate,g=l.lastBaseUpdate,w=l.shared.pending;if(w!==null){l.shared.pending=null;var C=w,y=C.next;C.next=null,g===null?u=y:g.next=y,g=C;var N=t.alternate;N!==null&&(N=N.updateQueue,w=N.lastBaseUpdate,w!==g&&(w===null?N.firstBaseUpdate=y:w.next=y,N.lastBaseUpdate=C))}if(u!==null){var A=l.baseState;g=0,N=y=C=null,w=u;do{var R=w.lane,H=w.eventTime;if((r&R)===R){N!==null&&(N=N.next={eventTime:H,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var Z=t,W=w;switch(R=e,H=n,W.tag){case 1:if(Z=W.payload,typeof Z=="function"){A=Z.call(H,A,R);break e}A=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=W.payload,R=typeof Z=="function"?Z.call(H,A,R):Z,R==null)break e;A=qt({},A,R);break e;case 2:ps=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,R=l.effects,R===null?l.effects=[w]:R.push(w))}else H={eventTime:H,lane:R,tag:w.tag,payload:w.payload,callback:w.callback,next:null},N===null?(y=N=H,C=A):N=N.next=H,g|=R;if(w=w.next,w===null){if(w=l.shared.pending,w===null)break;R=w,w=R.next,R.next=null,l.lastBaseUpdate=R,l.shared.pending=null}}while(!0);if(N===null&&(C=A),l.baseState=C,l.firstBaseUpdate=y,l.lastBaseUpdate=N,e=l.shared.interleaved,e!==null){l=e;do g|=l.lane,l=l.next;while(l!==e)}else u===null&&(l.shared.lanes=0);co|=g,t.lanes=g,t.memoizedState=A}}function G0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(de(191,l));l.call(r)}}}var jm=new Wg.Component().refs;function Md(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uu={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jn(),l=As(t),u=jr(r,l);u.payload=e,n!=null&&(u.callback=n),e=Es(t,u,l),e!==null&&(lr(e,t,l,r),kc(e,t,l))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jn(),l=As(t),u=jr(r,l);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Es(t,u,l),e!==null&&(lr(e,t,l,r),kc(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jn(),r=As(t),l=jr(n,r);l.tag=2,e!=null&&(l.callback=e),e=Es(t,l,r),e!==null&&(lr(e,t,r,n),kc(e,t,r))}};function Z0(t,e,n,r,l,u,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,g):e.prototype&&e.prototype.isPureReactComponent?!Cl(n,r)||!Cl(l,u):!0}function Gm(t,e,n){var r=!1,l=Os,u=e.contextType;return typeof u=="object"&&u!==null?u=Vi(u):(l=ui(e)?oo:jn.current,r=e.contextTypes,u=(r=r!=null)?sa(t,l):Os),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=u),e}function Y0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uu.enqueueReplaceState(e,e.state,null)}function Od(t,e,n,r){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs=jm,Vf(t);var u=e.contextType;typeof u=="object"&&u!==null?l.context=Vi(u):(u=ui(e)?oo:jn.current,l.context=sa(t,u)),l.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(Md(t,e,u,n),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&Uu.enqueueReplaceState(l,l.state,null),ru(t,n,l,r),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var l=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(g){var w=l.refs;w===jm&&(w=l.refs={}),g===null?delete w[u]:w[u]=g},e._stringRef=u,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Sc(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X0(t){var e=t._init;return e(t._payload)}function Zm(t){function e(U,P){if(t){var k=U.deletions;k===null?(U.deletions=[P],U.flags|=16):k.push(P)}}function n(U,P){if(!t)return null;for(;P!==null;)e(U,P),P=P.sibling;return null}function r(U,P){for(U=new Map;P!==null;)P.key!==null?U.set(P.key,P):U.set(P.index,P),P=P.sibling;return U}function l(U,P){return U=Is(U,P),U.index=0,U.sibling=null,U}function u(U,P,k){return U.index=k,t?(k=U.alternate,k!==null?(k=k.index,k<P?(U.flags|=2,P):k):(U.flags|=2,P)):(U.flags|=1048576,P)}function g(U){return t&&U.alternate===null&&(U.flags|=2),U}function w(U,P,k,q){return P===null||P.tag!==6?(P=Uh(k,U.mode,q),P.return=U,P):(P=l(P,k),P.return=U,P)}function C(U,P,k,q){var ge=k.type;return ge===Do?N(U,P,k.props.children,q,k.key):P!==null&&(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===fs&&X0(ge)===P.type)?(q=l(P,k.props),q.ref=Ga(U,P,k),q.return=U,q):(q=Wc(k.type,k.key,k.props,null,U.mode,q),q.ref=Ga(U,P,k),q.return=U,q)}function y(U,P,k,q){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=Hh(k,U.mode,q),P.return=U,P):(P=l(P,k.children||[]),P.return=U,P)}function N(U,P,k,q,ge){return P===null||P.tag!==7?(P=ro(k,U.mode,q,ge),P.return=U,P):(P=l(P,k),P.return=U,P)}function A(U,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Uh(""+P,U.mode,k),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case fc:return k=Wc(P.type,P.key,P.props,null,U.mode,k),k.ref=Ga(U,null,P),k.return=U,k;case Ro:return P=Hh(P,U.mode,k),P.return=U,P;case fs:var q=P._init;return A(U,q(P._payload),k)}if(Ja(P)||Ua(P))return P=ro(P,U.mode,k,null),P.return=U,P;Sc(U,P)}return null}function R(U,P,k,q){var ge=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return ge!==null?null:w(U,P,""+k,q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fc:return k.key===ge?C(U,P,k,q):null;case Ro:return k.key===ge?y(U,P,k,q):null;case fs:return ge=k._init,R(U,P,ge(k._payload),q)}if(Ja(k)||Ua(k))return ge!==null?null:N(U,P,k,q,null);Sc(U,k)}return null}function H(U,P,k,q,ge){if(typeof q=="string"&&q!==""||typeof q=="number")return U=U.get(k)||null,w(P,U,""+q,ge);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case fc:return U=U.get(q.key===null?k:q.key)||null,C(P,U,q,ge);case Ro:return U=U.get(q.key===null?k:q.key)||null,y(P,U,q,ge);case fs:var ue=q._init;return H(U,P,k,ue(q._payload),ge)}if(Ja(q)||Ua(q))return U=U.get(k)||null,N(P,U,q,ge,null);Sc(P,q)}return null}function Z(U,P,k,q){for(var ge=null,ue=null,Q=P,fe=P=0,ee=null;Q!==null&&fe<k.length;fe++){Q.index>fe?(ee=Q,Q=null):ee=Q.sibling;var ze=R(U,Q,k[fe],q);if(ze===null){Q===null&&(Q=ee);break}t&&Q&&ze.alternate===null&&e(U,Q),P=u(ze,P,fe),ue===null?ge=ze:ue.sibling=ze,ue=ze,Q=ee}if(fe===k.length)return n(U,Q),Zt&&Qs(U,fe),ge;if(Q===null){for(;fe<k.length;fe++)Q=A(U,k[fe],q),Q!==null&&(P=u(Q,P,fe),ue===null?ge=Q:ue.sibling=Q,ue=Q);return Zt&&Qs(U,fe),ge}for(Q=r(U,Q);fe<k.length;fe++)ee=H(Q,U,fe,k[fe],q),ee!==null&&(t&&ee.alternate!==null&&Q.delete(ee.key===null?fe:ee.key),P=u(ee,P,fe),ue===null?ge=ee:ue.sibling=ee,ue=ee);return t&&Q.forEach(function(je){return e(U,je)}),Zt&&Qs(U,fe),ge}function W(U,P,k,q){var ge=Ua(k);if(typeof ge!="function")throw Error(de(150));if(k=ge.call(k),k==null)throw Error(de(151));for(var ue=ge=null,Q=P,fe=P=0,ee=null,ze=k.next();Q!==null&&!ze.done;fe++,ze=k.next()){Q.index>fe?(ee=Q,Q=null):ee=Q.sibling;var je=R(U,Q,ze.value,q);if(je===null){Q===null&&(Q=ee);break}t&&Q&&je.alternate===null&&e(U,Q),P=u(je,P,fe),ue===null?ge=je:ue.sibling=je,ue=je,Q=ee}if(ze.done)return n(U,Q),Zt&&Qs(U,fe),ge;if(Q===null){for(;!ze.done;fe++,ze=k.next())ze=A(U,ze.value,q),ze!==null&&(P=u(ze,P,fe),ue===null?ge=ze:ue.sibling=ze,ue=ze);return Zt&&Qs(U,fe),ge}for(Q=r(U,Q);!ze.done;fe++,ze=k.next())ze=H(Q,U,fe,ze.value,q),ze!==null&&(t&&ze.alternate!==null&&Q.delete(ze.key===null?fe:ze.key),P=u(ze,P,fe),ue===null?ge=ze:ue.sibling=ze,ue=ze);return t&&Q.forEach(function(ve){return e(U,ve)}),Zt&&Qs(U,fe),ge}function me(U,P,k,q){if(typeof k=="object"&&k!==null&&k.type===Do&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case fc:e:{for(var ge=k.key,ue=P;ue!==null;){if(ue.key===ge){if(ge=k.type,ge===Do){if(ue.tag===7){n(U,ue.sibling),P=l(ue,k.props.children),P.return=U,U=P;break e}}else if(ue.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===fs&&X0(ge)===ue.type){n(U,ue.sibling),P=l(ue,k.props),P.ref=Ga(U,ue,k),P.return=U,U=P;break e}n(U,ue);break}else e(U,ue);ue=ue.sibling}k.type===Do?(P=ro(k.props.children,U.mode,q,k.key),P.return=U,U=P):(q=Wc(k.type,k.key,k.props,null,U.mode,q),q.ref=Ga(U,P,k),q.return=U,U=q)}return g(U);case Ro:e:{for(ue=k.key;P!==null;){if(P.key===ue)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){n(U,P.sibling),P=l(P,k.children||[]),P.return=U,U=P;break e}else{n(U,P);break}else e(U,P);P=P.sibling}P=Hh(k,U.mode,q),P.return=U,U=P}return g(U);case fs:return ue=k._init,me(U,P,ue(k._payload),q)}if(Ja(k))return Z(U,P,k,q);if(Ua(k))return W(U,P,k,q);Sc(U,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(n(U,P.sibling),P=l(P,k),P.return=U,U=P):(n(U,P),P=Uh(k,U.mode,q),P.return=U,U=P),g(U)):n(U,P)}return me}var aa=Zm(!0),Ym=Zm(!1),Zl={},Ir=ks(Zl),Il=ks(Zl),Tl=ks(Zl);function to(t){if(t===Zl)throw Error(de(174));return t}function jf(t,e){switch(kt(Tl,e),kt(Il,t),kt(Ir,Zl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cd(e,t)}jt(Ir),kt(Ir,e)}function la(){jt(Ir),jt(Il),jt(Tl)}function Xm(t){to(Tl.current);var e=to(Ir.current),n=cd(e,t.type);e!==n&&(kt(Il,t),kt(Ir,n))}function Gf(t){Il.current===t&&(jt(Ir),jt(Il))}var Qt=ks(0);function su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lh=[];function Zf(){for(var t=0;t<Lh.length;t++)Lh[t]._workInProgressVersionPrimary=null;Lh.length=0}var Bc=qr.ReactCurrentDispatcher,Ph=qr.ReactCurrentBatchConfig,lo=0,Kt=null,mn=null,Tn=null,ou=!1,al=!1,Nl=0,zw=0;function zn(){throw Error(de(321))}function Yf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function Xf(t,e,n,r,l,u){if(lo=u,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bc.current=t===null||t.memoizedState===null?Vw:jw,t=n(r,l),al){u=0;do{if(al=!1,Nl=0,25<=u)throw Error(de(301));u+=1,Tn=mn=null,e.updateQueue=null,Bc.current=Gw,t=n(r,l)}while(al)}if(Bc.current=au,e=mn!==null&&mn.next!==null,lo=0,Tn=mn=Kt=null,ou=!1,e)throw Error(de(300));return t}function Qf(){var t=Nl!==0;return Nl=0,t}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function ji(){if(mn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=mn.next;var e=Tn===null?Kt.memoizedState:Tn.next;if(e!==null)Tn=e,mn=t;else{if(t===null)throw Error(de(310));mn=t,t={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Tn===null?Kt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function bl(t,e){return typeof e=="function"?e(t):e}function kh(t){var e=ji(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=mn,l=r.baseQueue,u=n.pending;if(u!==null){if(l!==null){var g=l.next;l.next=u.next,u.next=g}r.baseQueue=l=u,n.pending=null}if(l!==null){u=l.next,r=r.baseState;var w=g=null,C=null,y=u;do{var N=y.lane;if((lo&N)===N)C!==null&&(C=C.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:t(r,y.action);else{var A={lane:N,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};C===null?(w=C=A,g=r):C=C.next=A,Kt.lanes|=N,co|=N}y=y.next}while(y!==null&&y!==u);C===null?g=r:C.next=w,ur(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=g,e.baseQueue=C,n.lastRenderedState=r}if(t=n.interleaved,t!==null){l=t;do u=l.lane,Kt.lanes|=u,co|=u,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bh(t){var e=ji(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,l=n.pending,u=e.memoizedState;if(l!==null){n.pending=null;var g=l=l.next;do u=t(u,g.action),g=g.next;while(g!==l);ur(u,e.memoizedState)||(oi=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function Qm(){}function Km(t,e){var n=Kt,r=ji(),l=e(),u=!ur(r.memoizedState,l);if(u&&(r.memoizedState=l,oi=!0),r=r.queue,Kf(Jm.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,Ml(9,$m.bind(null,n,r,l,e),void 0,null),Mn===null)throw Error(de(349));lo&30||qm(n,e,l)}return l}function qm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $m(t,e,n,r){e.value=n,e.getSnapshot=r,e_(e)&&t_(t)}function Jm(t,e,n){return n(function(){e_(e)&&t_(t)})}function e_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function t_(t){var e=Xr(t,1);e!==null&&lr(e,t,1,-1)}function Q0(t){var e=Cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:t},e.queue=t,t=t.dispatch=Ww.bind(null,Kt,t),[e.memoizedState,t]}function Ml(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function n_(){return ji().memoizedState}function Fc(t,e,n,r){var l=Cr();Kt.flags|=t,l.memoizedState=Ml(1|e,n,void 0,r===void 0?null:r)}function Hu(t,e,n,r){var l=ji();r=r===void 0?null:r;var u=void 0;if(mn!==null){var g=mn.memoizedState;if(u=g.destroy,r!==null&&Yf(r,g.deps)){l.memoizedState=Ml(e,n,u,r);return}}Kt.flags|=t,l.memoizedState=Ml(1|e,n,u,r)}function K0(t,e){return Fc(8390656,8,t,e)}function Kf(t,e){return Hu(2048,8,t,e)}function i_(t,e){return Hu(4,2,t,e)}function r_(t,e){return Hu(4,4,t,e)}function s_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o_(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4,4,s_.bind(null,e,t),n)}function qf(){}function a_(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l_(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function c_(t,e,n){return lo&21?(ur(n,e)||(n=dm(),Kt.lanes|=n,co|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function Uw(t,e){var n=It;It=n!==0&&4>n?n:4,t(!0);var r=Ph.transition;Ph.transition={};try{t(!1),e()}finally{It=n,Ph.transition=r}}function u_(){return ji().memoizedState}function Hw(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},h_(t))d_(e,n);else if(n=Wm(t,e,n,r),n!==null){var l=Jn();lr(n,t,r,l),f_(n,e,r)}}function Ww(t,e,n){var r=As(t),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(h_(t))d_(e,l);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var g=e.lastRenderedState,w=u(g,n);if(l.hasEagerState=!0,l.eagerState=w,ur(w,g)){var C=e.interleaved;C===null?(l.next=l,Wf(e)):(l.next=C.next,C.next=l),e.interleaved=l;return}}catch{}finally{}n=Wm(t,e,l,r),n!==null&&(l=Jn(),lr(n,t,r,l),f_(n,e,r))}}function h_(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function d_(t,e){al=ou=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}var au={readContext:Vi,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},Vw={readContext:Vi,useCallback:function(t,e){return Cr().memoizedState=[t,e===void 0?null:e],t},useContext:Vi,useEffect:K0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,s_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=Cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Hw.bind(null,Kt,t),[r.memoizedState,t]},useRef:function(t){var e=Cr();return t={current:t},e.memoizedState=t},useState:Q0,useDebugValue:qf,useDeferredValue:function(t){return Cr().memoizedState=t},useTransition:function(){var t=Q0(!1),e=t[0];return t=Uw.bind(null,t[1]),Cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Kt,l=Cr();if(Zt){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),Mn===null)throw Error(de(349));lo&30||qm(r,e,n)}l.memoizedState=n;var u={value:n,getSnapshot:e};return l.queue=u,K0(Jm.bind(null,r,u,t),[t]),r.flags|=2048,Ml(9,$m.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=Cr(),e=Mn.identifierPrefix;if(Zt){var n=Hr,r=Ur;n=(r&~(1<<32-ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jw={readContext:Vi,useCallback:a_,useContext:Vi,useEffect:Kf,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:kh,useRef:n_,useState:function(){return kh(bl)},useDebugValue:qf,useDeferredValue:function(t){var e=ji();return c_(e,mn.memoizedState,t)},useTransition:function(){var t=kh(bl)[0],e=ji().memoizedState;return[t,e]},useMutableSource:Qm,useSyncExternalStore:Km,useId:u_,unstable_isNewReconciler:!1},Gw={readContext:Vi,useCallback:a_,useContext:Vi,useEffect:Kf,useImperativeHandle:o_,useInsertionEffect:i_,useLayoutEffect:r_,useMemo:l_,useReducer:Bh,useRef:n_,useState:function(){return Bh(bl)},useDebugValue:qf,useDeferredValue:function(t){var e=ji();return mn===null?e.memoizedState=t:c_(e,mn.memoizedState,t)},useTransition:function(){var t=Bh(bl)[0],e=ji().memoizedState;return[t,e]},useMutableSource:Qm,useSyncExternalStore:Km,useId:u_,unstable_isNewReconciler:!1};function ca(t,e){try{var n="",r=e;do n+=xx(r),r=r.return;while(r);var l=n}catch(u){l=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:l,digest:null}}function Fh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zw=typeof WeakMap=="function"?WeakMap:Map;function p_(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cu||(cu=!0,Wd=r),Rd(t,e)},n}function g_(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var l=e.value;n.payload=function(){return r(l)},n.callback=function(){Rd(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Rd(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:g!==null?g:""})}),n}function q0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zw;var l=new Set;r.set(e,l)}else l=r.get(e),l===void 0&&(l=new Set,r.set(e,l));l.has(n)||(l.add(n),t=ov.bind(null,t,e,n),e.then(t,t))}function $0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function J0(t,e,n,r,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t)}var Yw=qr.ReactCurrentOwner,oi=!1;function $n(t,e,n,r){e.child=t===null?Ym(e,null,n,r):aa(e,t.child,n,r)}function ep(t,e,n,r,l){n=n.render;var u=e.ref;return qo(e,l),r=Xf(t,e,n,r,u,l),n=Qf(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Qr(t,e,l)):(Zt&&n&&kf(e),e.flags|=1,$n(t,e,r,l),e.child)}function tp(t,e,n,r,l){if(t===null){var u=n.type;return typeof u=="function"&&!s1(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,m_(t,e,u,r,l)):(t=Wc(n.type,null,r,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&l)){var g=u.memoizedProps;if(n=n.compare,n=n!==null?n:Cl,n(g,r)&&t.ref===e.ref)return Qr(t,e,l)}return e.flags|=1,t=Is(u,r),t.ref=e.ref,t.return=e,e.child=t}function m_(t,e,n,r,l){if(t!==null){var u=t.memoizedProps;if(Cl(u,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=u,(t.lanes&l)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,Qr(t,e,l)}return Dd(t,e,n,r,l)}function __(t,e,n){var r=e.pendingProps,l=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Vo,wi),wi|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Vo,wi),wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,kt(Vo,wi),wi|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,kt(Vo,wi),wi|=r;return $n(t,e,l,n),e.child}function y_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dd(t,e,n,r,l){var u=ui(n)?oo:jn.current;return u=sa(e,u),qo(e,l),n=Xf(t,e,n,r,u,l),r=Qf(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Qr(t,e,l)):(Zt&&r&&kf(e),e.flags|=1,$n(t,e,n,l),e.child)}function np(t,e,n,r,l){if(ui(n)){var u=!0;Jc(e)}else u=!1;if(qo(e,l),e.stateNode===null)zc(t,e),Gm(e,n,r),Od(e,n,r,l),r=!0;else if(t===null){var g=e.stateNode,w=e.memoizedProps;g.props=w;var C=g.context,y=n.contextType;typeof y=="object"&&y!==null?y=Vi(y):(y=ui(n)?oo:jn.current,y=sa(e,y));var N=n.getDerivedStateFromProps,A=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function";A||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==r||C!==y)&&Y0(e,g,r,y),ps=!1;var R=e.memoizedState;g.state=R,ru(e,r,g,l),C=e.memoizedState,w!==r||R!==C||ci.current||ps?(typeof N=="function"&&(Md(e,n,N,r),C=e.memoizedState),(w=ps||Z0(e,n,w,r,R,C,y))?(A||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(e.flags|=4194308)):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=C),g.props=r,g.state=C,g.context=y,r=w):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{g=e.stateNode,Vm(t,e),w=e.memoizedProps,y=e.type===e.elementType?w:er(e.type,w),g.props=y,A=e.pendingProps,R=g.context,C=n.contextType,typeof C=="object"&&C!==null?C=Vi(C):(C=ui(n)?oo:jn.current,C=sa(e,C));var H=n.getDerivedStateFromProps;(N=typeof H=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==A||R!==C)&&Y0(e,g,r,C),ps=!1,R=e.memoizedState,g.state=R,ru(e,r,g,l);var Z=e.memoizedState;w!==A||R!==Z||ci.current||ps?(typeof H=="function"&&(Md(e,n,H,r),Z=e.memoizedState),(y=ps||Z0(e,n,y,r,R,Z,C)||!1)?(N||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(r,Z,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(r,Z,C)),typeof g.componentDidUpdate=="function"&&(e.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Z),g.props=r,g.state=Z,g.context=C,r=y):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&R===t.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&R===t.memoizedState||(e.flags|=1024),r=!1)}return Ld(t,e,n,r,u,l)}function Ld(t,e,n,r,l,u){y_(t,e);var g=(e.flags&128)!==0;if(!r&&!g)return l&&H0(e,n,!1),Qr(t,e,u);r=e.stateNode,Yw.current=e;var w=g&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&g?(e.child=aa(e,t.child,null,u),e.child=aa(e,null,w,u)):$n(t,e,w,u),e.memoizedState=r.state,l&&H0(e,n,!0),e.child}function x_(t){var e=t.stateNode;e.pendingContext?U0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U0(t,e.context,!1),jf(t,e.containerInfo)}function ip(t,e,n,r,l){return oa(),Ff(l),e.flags|=256,$n(t,e,n,r),e.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function kd(t){return{baseLanes:t,cachePool:null,transitions:null}}function w_(t,e,n){var r=e.pendingProps,l=Qt.current,u=!1,g=(e.flags&128)!==0,w;if((w=g)||(w=t!==null&&t.memoizedState===null?!1:(l&2)!==0),w?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),kt(Qt,l&1),t===null)return Nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(g=r.children,t=r.fallback,u?(r=e.mode,u=e.child,g={mode:"hidden",children:g},!(r&1)&&u!==null?(u.childLanes=0,u.pendingProps=g):u=ju(g,r,0,null),t=ro(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=kd(n),e.memoizedState=Pd,t):$f(e,g));if(l=t.memoizedState,l!==null&&(w=l.dehydrated,w!==null))return Xw(t,e,g,r,w,l,n);if(u){u=r.fallback,g=e.mode,l=t.child,w=l.sibling;var C={mode:"hidden",children:r.children};return!(g&1)&&e.child!==l?(r=e.child,r.childLanes=0,r.pendingProps=C,e.deletions=null):(r=Is(l,C),r.subtreeFlags=l.subtreeFlags&14680064),w!==null?u=Is(w,u):(u=ro(u,g,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,g=t.child.memoizedState,g=g===null?kd(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},u.memoizedState=g,u.childLanes=t.childLanes&~n,e.memoizedState=Pd,r}return u=t.child,t=u.sibling,r=Is(u,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $f(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ac(t,e,n,r){return r!==null&&Ff(r),aa(e,t.child,null,n),t=$f(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xw(t,e,n,r,l,u,g){if(n)return e.flags&256?(e.flags&=-257,r=Fh(Error(de(422))),Ac(t,e,g,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,l=e.mode,r=ju({mode:"visible",children:r.children},l,0,null),u=ro(u,l,g,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,e.mode&1&&aa(e,t.child,null,g),e.child.memoizedState=kd(g),e.memoizedState=Pd,u);if(!(e.mode&1))return Ac(t,e,g,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var w=r.dgst;return r=w,u=Error(de(419)),r=Fh(u,r,void 0),Ac(t,e,g,r)}if(w=(g&t.childLanes)!==0,oi||w){if(r=Mn,r!==null){switch(g&-g){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|g)?0:l,l!==0&&l!==u.retryLane&&(u.retryLane=l,Xr(t,l),lr(r,t,l,-1))}return r1(),r=Fh(Error(de(421))),Ac(t,e,g,r)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=av.bind(null,t),l._reactRetry=e,null):(t=u.treeContext,Ci=Cs(l.nextSibling),Ei=e,Zt=!0,ir=null,t!==null&&(zi[Ui++]=Ur,zi[Ui++]=Hr,zi[Ui++]=ao,Ur=t.id,Hr=t.overflow,ao=e),e=$f(e,r.children),e.flags|=4096,e)}function rp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bd(t.return,e,n)}function zh(t,e,n,r,l){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=l)}function v_(t,e,n){var r=e.pendingProps,l=r.revealOrder,u=r.tail;if($n(t,e,r.children,n),r=Qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rp(t,n,e);else if(t.tag===19)rp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Qt,r),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&su(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),zh(e,!1,l,n,u);break;case"backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&su(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}zh(e,!0,n,null,u);break;case"together":zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),co|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=Is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qw(t,e,n){switch(e.tag){case 3:x_(e),oa();break;case 5:Xm(e);break;case 1:ui(e.type)&&Jc(e);break;case 4:jf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,l=e.memoizedProps.value;kt(nu,r._currentValue),r._currentValue=l;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Qt,Qt.current&1),e.flags|=128,null):n&e.child.childLanes?w_(t,e,n):(kt(Qt,Qt.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);kt(Qt,Qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v_(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),kt(Qt,Qt.current),r)break;return null;case 22:case 23:return e.lanes=0,__(t,e,n)}return Qr(t,e,n)}var C_,Bd,E_,S_;C_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bd=function(){};E_=function(t,e,n,r){var l=t.memoizedProps;if(l!==r){t=e.stateNode,to(Ir.current);var u=null;switch(n){case"input":l=sd(t,l),r=sd(t,r),u=[];break;case"select":l=qt({},l,{value:void 0}),r=qt({},r,{value:void 0}),u=[];break;case"textarea":l=ld(t,l),r=ld(t,r),u=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qc)}ud(n,r);var g;n=null;for(y in l)if(!r.hasOwnProperty(y)&&l.hasOwnProperty(y)&&l[y]!=null)if(y==="style"){var w=l[y];for(g in w)w.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(gl.hasOwnProperty(y)?u||(u=[]):(u=u||[]).push(y,null));for(y in r){var C=r[y];if(w=l!=null?l[y]:void 0,r.hasOwnProperty(y)&&C!==w&&(C!=null||w!=null))if(y==="style")if(w){for(g in w)!w.hasOwnProperty(g)||C&&C.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in C)C.hasOwnProperty(g)&&w[g]!==C[g]&&(n||(n={}),n[g]=C[g])}else n||(u||(u=[]),u.push(y,n)),n=C;else y==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,w=w?w.__html:void 0,C!=null&&w!==C&&(u=u||[]).push(y,C)):y==="children"?typeof C!="string"&&typeof C!="number"||(u=u||[]).push(y,""+C):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(gl.hasOwnProperty(y)?(C!=null&&y==="onScroll"&&Ht("scroll",t),u||w===C||(u=[])):(u=u||[]).push(y,C))}n&&(u=u||[]).push("style",n);var y=u;(e.updateQueue=y)&&(e.flags|=4)}};S_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Za(t,e){if(!Zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kw(t,e,n){var r=e.pendingProps;switch(Bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return ui(e.type)&&$c(),Un(e),null;case 3:return r=e.stateNode,la(),jt(ci),jt(jn),Zf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ir!==null&&(Gd(ir),ir=null))),Bd(t,e),Un(e),null;case 5:Gf(e);var l=to(Tl.current);if(n=e.type,t!==null&&e.stateNode!=null)E_(t,e,n,r,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return Un(e),null}if(t=to(Ir.current),Ec(e)){r=e.stateNode,n=e.type;var u=e.memoizedProps;switch(r[Sr]=e,r[Al]=u,t=(e.mode&1)!==0,n){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(l=0;l<tl.length;l++)Ht(tl[l],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":f0(r,u),Ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ht("invalid",r);break;case"textarea":g0(r,u),Ht("invalid",r)}ud(n,u),l=null;for(var g in u)if(u.hasOwnProperty(g)){var w=u[g];g==="children"?typeof w=="string"?r.textContent!==w&&(u.suppressHydrationWarning!==!0&&Cc(r.textContent,w,t),l=["children",w]):typeof w=="number"&&r.textContent!==""+w&&(u.suppressHydrationWarning!==!0&&Cc(r.textContent,w,t),l=["children",""+w]):gl.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&Ht("scroll",r)}switch(n){case"input":pc(r),p0(r,u,!0);break;case"textarea":pc(r),m0(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=qc)}r=l,e.updateQueue=r,r!==null&&(e.flags|=4)}else{g=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=g.createElement(n,{is:r.is}):(t=g.createElement(n),n==="select"&&(g=t,r.multiple?g.multiple=!0:r.size&&(g.size=r.size))):t=g.createElementNS(t,n),t[Sr]=e,t[Al]=r,C_(t,e,!1,!1),e.stateNode=t;e:{switch(g=hd(n,r),n){case"dialog":Ht("cancel",t),Ht("close",t),l=r;break;case"iframe":case"object":case"embed":Ht("load",t),l=r;break;case"video":case"audio":for(l=0;l<tl.length;l++)Ht(tl[l],t);l=r;break;case"source":Ht("error",t),l=r;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),l=r;break;case"details":Ht("toggle",t),l=r;break;case"input":f0(t,r),l=sd(t,r),Ht("invalid",t);break;case"option":l=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=qt({},r,{value:void 0}),Ht("invalid",t);break;case"textarea":g0(t,r),l=ld(t,r),Ht("invalid",t);break;default:l=r}ud(n,l),w=l;for(u in w)if(w.hasOwnProperty(u)){var C=w[u];u==="style"?em(t,C):u==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&$g(t,C)):u==="children"?typeof C=="string"?(n!=="textarea"||C!=="")&&ml(t,C):typeof C=="number"&&ml(t,""+C):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gl.hasOwnProperty(u)?C!=null&&u==="onScroll"&&Ht("scroll",t):C!=null&&Cf(t,u,C,g))}switch(n){case"input":pc(t),p0(t,r,!1);break;case"textarea":pc(t),m0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ms(r.value));break;case"select":t.multiple=!!r.multiple,u=r.value,u!=null?Yo(t,!!r.multiple,u,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)S_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=to(Tl.current),to(Ir.current),Ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(u=r.nodeValue!==n)&&(t=Ei,t!==null))switch(t.tag){case 3:Cc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cc(r.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Un(e),null;case 13:if(jt(Qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zt&&Ci!==null&&e.mode&1&&!(e.flags&128))Hm(),oa(),e.flags|=98560,u=!1;else if(u=Ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(de(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(de(317));u[Sr]=e}else oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),u=!1}else ir!==null&&(Gd(ir),ir=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qt.current&1?yn===0&&(yn=3):r1())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return la(),Bd(t,e),t===null&&El(e.stateNode.containerInfo),Un(e),null;case 10:return Hf(e.type._context),Un(e),null;case 17:return ui(e.type)&&$c(),Un(e),null;case 19:if(jt(Qt),u=e.memoizedState,u===null)return Un(e),null;if(r=(e.flags&128)!==0,g=u.rendering,g===null)if(r)Za(u,!1);else{if(yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(g=su(t),g!==null){for(e.flags|=128,Za(u,!1),r=g.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)u=n,t=r,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,t=g.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Qt,Qt.current&1|2),e.child}t=t.sibling}u.tail!==null&&sn()>ua&&(e.flags|=128,r=!0,Za(u,!1),e.lanes=4194304)}else{if(!r)if(t=su(g),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Za(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Zt)return Un(e),null}else 2*sn()-u.renderingStartTime>ua&&n!==1073741824&&(e.flags|=128,r=!0,Za(u,!1),e.lanes=4194304);u.isBackwards?(g.sibling=e.child,e.child=g):(n=u.last,n!==null?n.sibling=g:e.child=g,u.last=g)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=sn(),e.sibling=null,n=Qt.current,kt(Qt,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return i1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wi&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function qw(t,e){switch(Bf(e),e.tag){case 1:return ui(e.type)&&$c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),jt(ci),jt(jn),Zf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gf(e),null;case 13:if(jt(Qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jt(Qt),null;case 4:return la(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return i1(),null;case 24:return null;default:return null}}var Ic=!1,Hn=!1,$w=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function Fd(t,e,n){try{n()}catch(r){en(t,e,r)}}var sp=!1;function Jw(t,e){if(vd=Xc,t=Nm(),Pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var g=0,w=-1,C=-1,y=0,N=0,A=t,R=null;t:for(;;){for(var H;A!==n||l!==0&&A.nodeType!==3||(w=g+l),A!==u||r!==0&&A.nodeType!==3||(C=g+r),A.nodeType===3&&(g+=A.nodeValue.length),(H=A.firstChild)!==null;)R=A,A=H;for(;;){if(A===t)break t;if(R===n&&++y===l&&(w=g),R===u&&++N===r&&(C=g),(H=A.nextSibling)!==null)break;A=R,R=A.parentNode}A=H}n=w===-1||C===-1?null:{start:w,end:C}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},Xc=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var Z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var W=Z.memoizedProps,me=Z.memoizedState,U=e.stateNode,P=U.getSnapshotBeforeUpdate(e.elementType===e.type?W:er(e.type,W),me);U.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(q){en(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return Z=sp,sp=!1,Z}function ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&t)===t){var u=l.destroy;l.destroy=void 0,u!==void 0&&Fd(e,n,u)}l=l.next}while(l!==r)}}function Wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A_(t){var e=t.alternate;e!==null&&(t.alternate=null,A_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[Al],delete e[Ad],delete e[Pw],delete e[kw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I_(t){return t.tag===5||t.tag===3||t.tag===4}function op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qc));else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}function Hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hd(t,e,n),t=t.sibling;t!==null;)Hd(t,e,n),t=t.sibling}var Rn=null,tr=!1;function hs(t,e,n){for(n=n.child;n!==null;)T_(t,e,n),n=n.sibling}function T_(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Lu,n)}catch{}switch(n.tag){case 5:Hn||Wo(n,e);case 6:var r=Rn,l=tr;Rn=null,hs(t,e,n),Rn=r,tr=l,Rn!==null&&(tr?(t=Rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(tr?(t=Rn,n=n.stateNode,t.nodeType===8?Rh(t.parentNode,n):t.nodeType===1&&Rh(t,n),wl(t)):Rh(Rn,n.stateNode));break;case 4:r=Rn,l=tr,Rn=n.stateNode.containerInfo,tr=!0,hs(t,e,n),Rn=r,tr=l;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var u=l,g=u.destroy;u=u.tag,g!==void 0&&(u&2||u&4)&&Fd(n,e,g),l=l.next}while(l!==r)}hs(t,e,n);break;case 1:if(!Hn&&(Wo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(w){en(n,e,w)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(Hn=(r=Hn)||n.memoizedState!==null,hs(t,e,n),Hn=r):hs(t,e,n);break;default:hs(t,e,n)}}function ap(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $w),e.forEach(function(r){var l=lv.bind(null,t,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Ji(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var u=t,g=e,w=g;e:for(;w!==null;){switch(w.tag){case 5:Rn=w.stateNode,tr=!1;break e;case 3:Rn=w.stateNode.containerInfo,tr=!0;break e;case 4:Rn=w.stateNode.containerInfo,tr=!0;break e}w=w.return}if(Rn===null)throw Error(de(160));T_(u,g,l),Rn=null,tr=!1;var C=l.alternate;C!==null&&(C.return=null),l.return=null}catch(y){en(l,e,y)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N_(e,t),e=e.sibling}function N_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ji(e,t),vr(t),r&4){try{ll(3,t,t.return),Wu(3,t)}catch(W){en(t,t.return,W)}try{ll(5,t,t.return)}catch(W){en(t,t.return,W)}}break;case 1:Ji(e,t),vr(t),r&512&&n!==null&&Wo(n,n.return);break;case 5:if(Ji(e,t),vr(t),r&512&&n!==null&&Wo(n,n.return),t.flags&32){var l=t.stateNode;try{ml(l,"")}catch(W){en(t,t.return,W)}}if(r&4&&(l=t.stateNode,l!=null)){var u=t.memoizedProps,g=n!==null?n.memoizedProps:u,w=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{w==="input"&&u.type==="radio"&&u.name!=null&&Qg(l,u),hd(w,g);var y=hd(w,u);for(g=0;g<C.length;g+=2){var N=C[g],A=C[g+1];N==="style"?em(l,A):N==="dangerouslySetInnerHTML"?$g(l,A):N==="children"?ml(l,A):Cf(l,N,A,y)}switch(w){case"input":od(l,u);break;case"textarea":Kg(l,u);break;case"select":var R=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!u.multiple;var H=u.value;H!=null?Yo(l,!!u.multiple,H,!1):R!==!!u.multiple&&(u.defaultValue!=null?Yo(l,!!u.multiple,u.defaultValue,!0):Yo(l,!!u.multiple,u.multiple?[]:"",!1))}l[Al]=u}catch(W){en(t,t.return,W)}}break;case 6:if(Ji(e,t),vr(t),r&4){if(t.stateNode===null)throw Error(de(162));l=t.stateNode,u=t.memoizedProps;try{l.nodeValue=u}catch(W){en(t,t.return,W)}}break;case 3:if(Ji(e,t),vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(e.containerInfo)}catch(W){en(t,t.return,W)}break;case 4:Ji(e,t),vr(t);break;case 13:Ji(e,t),vr(t),l=t.child,l.flags&8192&&(u=l.memoizedState!==null,l.stateNode.isHidden=u,!u||l.alternate!==null&&l.alternate.memoizedState!==null||(t1=sn())),r&4&&ap(t);break;case 22:if(N=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(y=Hn)||N,Ji(e,t),Hn=y):Ji(e,t),vr(t),r&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!N&&t.mode&1)for(Se=t,N=t.child;N!==null;){for(A=Se=N;Se!==null;){switch(R=Se,H=R.child,R.tag){case 0:case 11:case 14:case 15:ll(4,R,R.return);break;case 1:Wo(R,R.return);var Z=R.stateNode;if(typeof Z.componentWillUnmount=="function"){r=R,n=R.return;try{e=r,Z.props=e.memoizedProps,Z.state=e.memoizedState,Z.componentWillUnmount()}catch(W){en(r,n,W)}}break;case 5:Wo(R,R.return);break;case 22:if(R.memoizedState!==null){cp(A);continue}}H!==null?(H.return=R,Se=H):cp(A)}N=N.sibling}e:for(N=null,A=t;;){if(A.tag===5){if(N===null){N=A;try{l=A.stateNode,y?(u=l.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(w=A.stateNode,C=A.memoizedProps.style,g=C!=null&&C.hasOwnProperty("display")?C.display:null,w.style.display=Jg("display",g))}catch(W){en(t,t.return,W)}}}else if(A.tag===6){if(N===null)try{A.stateNode.nodeValue=y?"":A.memoizedProps}catch(W){en(t,t.return,W)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;N===A&&(N=null),A=A.return}N===A&&(N=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Ji(e,t),vr(t),r&4&&ap(t);break;case 21:break;default:Ji(e,t),vr(t)}}function vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I_(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ml(l,""),r.flags&=-33);var u=op(t);Hd(t,u,l);break;case 3:case 4:var g=r.stateNode.containerInfo,w=op(t);Ud(t,w,g);break;default:throw Error(de(161))}}catch(C){en(t,t.return,C)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ev(t,e,n){Se=t,b_(t)}function b_(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var l=Se,u=l.child;if(l.tag===22&&r){var g=l.memoizedState!==null||Ic;if(!g){var w=l.alternate,C=w!==null&&w.memoizedState!==null||Hn;w=Ic;var y=Hn;if(Ic=g,(Hn=C)&&!y)for(Se=l;Se!==null;)g=Se,C=g.child,g.tag===22&&g.memoizedState!==null?up(l):C!==null?(C.return=g,Se=C):up(l);for(;u!==null;)Se=u,b_(u),u=u.sibling;Se=l,Ic=w,Hn=y}lp(t)}else l.subtreeFlags&8772&&u!==null?(u.return=l,Se=u):lp(t)}}function lp(t){for(;Se!==null;){var e=Se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||Wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(n===null)r.componentDidMount();else{var l=e.elementType===e.type?n.memoizedProps:er(e.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&G0(e,u,r);break;case 3:var g=e.updateQueue;if(g!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G0(e,g,n)}break;case 5:var w=e.stateNode;if(n===null&&e.flags&4){n=w;var C=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&n.focus();break;case"img":C.src&&(n.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var y=e.alternate;if(y!==null){var N=y.memoizedState;if(N!==null){var A=N.dehydrated;A!==null&&wl(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}Hn||e.flags&512&&zd(e)}catch(R){en(e,e.return,R)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function cp(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function up(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wu(4,e)}catch(C){en(e,n,C)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var l=e.return;try{r.componentDidMount()}catch(C){en(e,l,C)}}var u=e.return;try{zd(e)}catch(C){en(e,u,C)}break;case 5:var g=e.return;try{zd(e)}catch(C){en(e,g,C)}}}catch(C){en(e,e.return,C)}if(e===t){Se=null;break}var w=e.sibling;if(w!==null){w.return=e.return,Se=w;break}Se=e.return}}var tv=Math.ceil,lu=qr.ReactCurrentDispatcher,Jf=qr.ReactCurrentOwner,Wi=qr.ReactCurrentBatchConfig,_t=0,Mn=null,un=null,Dn=0,wi=0,Vo=ks(0),yn=0,Ol=null,co=0,Vu=0,e1=0,cl=null,si=null,t1=0,ua=1/0,Fr=null,cu=!1,Wd=null,Ss=null,Tc=!1,ys=null,uu=0,ul=0,Vd=null,Uc=-1,Hc=0;function Jn(){return _t&6?sn():Uc!==-1?Uc:Uc=sn()}function As(t){return t.mode&1?_t&2&&Dn!==0?Dn&-Dn:Fw.transition!==null?(Hc===0&&(Hc=dm()),Hc):(t=It,t!==0||(t=window.event,t=t===void 0?16:xm(t.type)),t):1}function lr(t,e,n,r){if(50<ul)throw ul=0,Vd=null,Error(de(185));Vl(t,n,r),(!(_t&2)||t!==Mn)&&(t===Mn&&(!(_t&2)&&(Vu|=n),yn===4&&ms(t,Dn)),hi(t,r),n===1&&_t===0&&!(e.mode&1)&&(ua=sn()+500,zu&&Bs()))}function hi(t,e){var n=t.callbackNode;Fx(t,e);var r=Yc(t,t===Mn?Dn:0);if(r===0)n!==null&&x0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&x0(n),e===1)t.tag===0?Bw(hp.bind(null,t)):Fm(hp.bind(null,t)),Dw(function(){!(_t&6)&&Bs()}),n=null;else{switch(fm(r)){case 1:n=Tf;break;case 4:n=um;break;case 16:n=Zc;break;case 536870912:n=hm;break;default:n=Zc}n=B_(n,M_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function M_(t,e){if(Uc=-1,Hc=0,_t&6)throw Error(de(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var r=Yc(t,t===Mn?Dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hu(t,r);else{e=r;var l=_t;_t|=2;var u=R_();(Mn!==t||Dn!==e)&&(Fr=null,ua=sn()+500,io(t,e));do try{rv();break}catch(w){O_(t,w)}while(!0);Uf(),lu.current=u,_t=l,un!==null?e=0:(Mn=null,Dn=0,e=yn)}if(e!==0){if(e===2&&(l=md(t),l!==0&&(r=l,e=jd(t,l))),e===1)throw n=Ol,io(t,0),ms(t,r),hi(t,sn()),n;if(e===6)ms(t,r);else{if(l=t.current.alternate,!(r&30)&&!nv(l)&&(e=hu(t,r),e===2&&(u=md(t),u!==0&&(r=u,e=jd(t,u))),e===1))throw n=Ol,io(t,0),ms(t,r),hi(t,sn()),n;switch(t.finishedWork=l,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:Ks(t,si,Fr);break;case 3:if(ms(t,r),(r&130023424)===r&&(e=t1+500-sn(),10<e)){if(Yc(t,0)!==0)break;if(l=t.suspendedLanes,(l&r)!==r){Jn(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Sd(Ks.bind(null,t,si,Fr),e);break}Ks(t,si,Fr);break;case 4:if(ms(t,r),(r&4194240)===r)break;for(e=t.eventTimes,l=-1;0<r;){var g=31-ar(r);u=1<<g,g=e[g],g>l&&(l=g),r&=~u}if(r=l,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tv(r/1960))-r,10<r){t.timeoutHandle=Sd(Ks.bind(null,t,si,Fr),r);break}Ks(t,si,Fr);break;case 5:Ks(t,si,Fr);break;default:throw Error(de(329))}}}return hi(t,sn()),t.callbackNode===n?M_.bind(null,t):null}function jd(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(io(t,e).flags|=256),t=hu(t,e),t!==2&&(e=si,si=n,e!==null&&Gd(e)),t}function Gd(t){si===null?si=t:si.push.apply(si,t)}function nv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],u=l.getSnapshot;l=l.value;try{if(!ur(u(),l))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ms(t,e){for(e&=~e1,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ar(e),r=1<<n;t[n]=-1,e&=~r}}function hp(t){if(_t&6)throw Error(de(327));$o();var e=Yc(t,0);if(!(e&1))return hi(t,sn()),null;var n=hu(t,e);if(t.tag!==0&&n===2){var r=md(t);r!==0&&(e=r,n=jd(t,r))}if(n===1)throw n=Ol,io(t,0),ms(t,e),hi(t,sn()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,si,Fr),hi(t,sn()),null}function n1(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(ua=sn()+500,zu&&Bs())}}function uo(t){ys!==null&&ys.tag===0&&!(_t&6)&&$o();var e=_t;_t|=1;var n=Wi.transition,r=It;try{if(Wi.transition=null,It=1,t)return t()}finally{It=r,Wi.transition=n,_t=e,!(_t&6)&&Bs()}}function i1(){wi=Vo.current,jt(Vo)}function io(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Rw(n)),un!==null)for(n=un.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$c();break;case 3:la(),jt(ci),jt(jn),Zf();break;case 5:Gf(r);break;case 4:la();break;case 13:jt(Qt);break;case 19:jt(Qt);break;case 10:Hf(r.type._context);break;case 22:case 23:i1()}n=n.return}if(Mn=t,un=t=Is(t.current,null),Dn=wi=e,yn=0,Ol=null,e1=Vu=co=0,si=cl=null,eo!==null){for(e=0;e<eo.length;e++)if(n=eo[e],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,u=n.pending;if(u!==null){var g=u.next;u.next=l,r.next=g}n.pending=r}eo=null}return t}function O_(t,e){do{var n=un;try{if(Uf(),Bc.current=au,ou){for(var r=Kt.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ou=!1}if(lo=0,Tn=mn=Kt=null,al=!1,Nl=0,Jf.current=null,n===null||n.return===null){yn=1,Ol=e,un=null;break}e:{var u=t,g=n.return,w=n,C=e;if(e=Dn,w.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var y=C,N=w,A=N.tag;if(!(N.mode&1)&&(A===0||A===11||A===15)){var R=N.alternate;R?(N.updateQueue=R.updateQueue,N.memoizedState=R.memoizedState,N.lanes=R.lanes):(N.updateQueue=null,N.memoizedState=null)}var H=$0(g);if(H!==null){H.flags&=-257,J0(H,g,w,u,e),H.mode&1&&q0(u,y,e),e=H,C=y;var Z=e.updateQueue;if(Z===null){var W=new Set;W.add(C),e.updateQueue=W}else Z.add(C);break e}else{if(!(e&1)){q0(u,y,e),r1();break e}C=Error(de(426))}}else if(Zt&&w.mode&1){var me=$0(g);if(me!==null){!(me.flags&65536)&&(me.flags|=256),J0(me,g,w,u,e),Ff(ca(C,w));break e}}u=C=ca(C,w),yn!==4&&(yn=2),cl===null?cl=[u]:cl.push(u),u=g;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var U=p_(u,C,e);j0(u,U);break e;case 1:w=C;var P=u.type,k=u.stateNode;if(!(u.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ss===null||!Ss.has(k)))){u.flags|=65536,e&=-e,u.lanes|=e;var q=g_(u,w,e);j0(u,q);break e}}u=u.return}while(u!==null)}L_(n)}catch(ge){e=ge,un===n&&n!==null&&(un=n=n.return);continue}break}while(!0)}function R_(){var t=lu.current;return lu.current=au,t===null?au:t}function r1(){(yn===0||yn===3||yn===2)&&(yn=4),Mn===null||!(co&268435455)&&!(Vu&268435455)||ms(Mn,Dn)}function hu(t,e){var n=_t;_t|=2;var r=R_();(Mn!==t||Dn!==e)&&(Fr=null,io(t,e));do try{iv();break}catch(l){O_(t,l)}while(!0);if(Uf(),_t=n,lu.current=r,un!==null)throw Error(de(261));return Mn=null,Dn=0,yn}function iv(){for(;un!==null;)D_(un)}function rv(){for(;un!==null&&!bx();)D_(un)}function D_(t){var e=k_(t.alternate,t,wi);t.memoizedProps=t.pendingProps,e===null?L_(t):un=e,Jf.current=null}function L_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qw(n,e),n!==null){n.flags&=32767,un=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yn=6,un=null;return}}else if(n=Kw(n,e,wi),n!==null){un=n;return}if(e=e.sibling,e!==null){un=e;return}un=e=t}while(e!==null);yn===0&&(yn=5)}function Ks(t,e,n){var r=It,l=Wi.transition;try{Wi.transition=null,It=1,sv(t,e,n,r)}finally{Wi.transition=l,It=r}return null}function sv(t,e,n,r){do $o();while(ys!==null);if(_t&6)throw Error(de(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(zx(t,u),t===Mn&&(un=Mn=null,Dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tc||(Tc=!0,B_(Zc,function(){return $o(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Wi.transition,Wi.transition=null;var g=It;It=1;var w=_t;_t|=4,Jf.current=null,Jw(t,n),N_(n,t),Aw(Cd),Xc=!!vd,Cd=vd=null,t.current=n,ev(n),Mx(),_t=w,It=g,Wi.transition=u}else t.current=n;if(Tc&&(Tc=!1,ys=t,uu=l),u=t.pendingLanes,u===0&&(Ss=null),Dx(n.stateNode),hi(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)l=e[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(cu)throw cu=!1,t=Wd,Wd=null,t;return uu&1&&t.tag!==0&&$o(),u=t.pendingLanes,u&1?t===Vd?ul++:(ul=0,Vd=t):ul=0,Bs(),null}function $o(){if(ys!==null){var t=fm(uu),e=Wi.transition,n=It;try{if(Wi.transition=null,It=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,uu=0,_t&6)throw Error(de(331));var l=_t;for(_t|=4,Se=t.current;Se!==null;){var u=Se,g=u.child;if(Se.flags&16){var w=u.deletions;if(w!==null){for(var C=0;C<w.length;C++){var y=w[C];for(Se=y;Se!==null;){var N=Se;switch(N.tag){case 0:case 11:case 15:ll(8,N,u)}var A=N.child;if(A!==null)A.return=N,Se=A;else for(;Se!==null;){N=Se;var R=N.sibling,H=N.return;if(A_(N),N===y){Se=null;break}if(R!==null){R.return=H,Se=R;break}Se=H}}}var Z=u.alternate;if(Z!==null){var W=Z.child;if(W!==null){Z.child=null;do{var me=W.sibling;W.sibling=null,W=me}while(W!==null)}}Se=u}}if(u.subtreeFlags&2064&&g!==null)g.return=u,Se=g;else e:for(;Se!==null;){if(u=Se,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ll(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,Se=U;break e}Se=u.return}}var P=t.current;for(Se=P;Se!==null;){g=Se;var k=g.child;if(g.subtreeFlags&2064&&k!==null)k.return=g,Se=k;else e:for(g=P;Se!==null;){if(w=Se,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Wu(9,w)}}catch(ge){en(w,w.return,ge)}if(w===g){Se=null;break e}var q=w.sibling;if(q!==null){q.return=w.return,Se=q;break e}Se=w.return}}if(_t=l,Bs(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Lu,t)}catch{}r=!0}return r}finally{It=n,Wi.transition=e}}return!1}function dp(t,e,n){e=ca(n,e),e=p_(t,e,1),t=Es(t,e,1),e=Jn(),t!==null&&(Vl(t,1,e),hi(t,e))}function en(t,e,n){if(t.tag===3)dp(t,t,n);else for(;e!==null;){if(e.tag===3){dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=ca(n,t),t=g_(e,t,1),e=Es(e,t,1),t=Jn(),e!==null&&(Vl(e,1,t),hi(e,t));break}}e=e.return}}function ov(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jn(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(Dn&n)===n&&(yn===4||yn===3&&(Dn&130023424)===Dn&&500>sn()-t1?io(t,0):e1|=n),hi(t,e)}function P_(t,e){e===0&&(t.mode&1?(e=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):e=1);var n=Jn();t=Xr(t,e),t!==null&&(Vl(t,e,n),hi(t,n))}function av(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P_(t,n)}function lv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),P_(t,n)}var k_;k_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ci.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,Qw(t,e,n);oi=!!(t.flags&131072)}else oi=!1,Zt&&e.flags&1048576&&zm(e,tu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zc(t,e),t=e.pendingProps;var l=sa(e,jn.current);qo(e,n),l=Xf(null,e,r,t,l,n);var u=Qf();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ui(r)?(u=!0,Jc(e)):u=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Vf(e),l.updater=Uu,e.stateNode=l,l._reactInternals=e,Od(e,r,t,n),e=Ld(null,e,r,!0,u,n)):(e.tag=0,Zt&&u&&kf(e),$n(null,e,l,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zc(t,e),t=e.pendingProps,l=r._init,r=l(r._payload),e.type=r,l=e.tag=uv(r),t=er(r,t),l){case 0:e=Dd(null,e,r,t,n);break e;case 1:e=np(null,e,r,t,n);break e;case 11:e=ep(null,e,r,t,n);break e;case 14:e=tp(null,e,r,er(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:er(r,l),Dd(t,e,r,l,n);case 1:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:er(r,l),np(t,e,r,l,n);case 3:e:{if(x_(e),t===null)throw Error(de(387));r=e.pendingProps,u=e.memoizedState,l=u.element,Vm(t,e),ru(e,r,null,n);var g=e.memoizedState;if(r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){l=ca(Error(de(423)),e),e=ip(t,e,r,n,l);break e}else if(r!==l){l=ca(Error(de(424)),e),e=ip(t,e,r,n,l);break e}else for(Ci=Cs(e.stateNode.containerInfo.firstChild),Ei=e,Zt=!0,ir=null,n=Ym(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oa(),r===l){e=Qr(t,e,n);break e}$n(t,e,r,n)}e=e.child}return e;case 5:return Xm(e),t===null&&Nd(e),r=e.type,l=e.pendingProps,u=t!==null?t.memoizedProps:null,g=l.children,Ed(r,l)?g=null:u!==null&&Ed(r,u)&&(e.flags|=32),y_(t,e),$n(t,e,g,n),e.child;case 6:return t===null&&Nd(e),null;case 13:return w_(t,e,n);case 4:return jf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aa(e,null,r,n):$n(t,e,r,n),e.child;case 11:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:er(r,l),ep(t,e,r,l,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,l=e.pendingProps,u=e.memoizedProps,g=l.value,kt(nu,r._currentValue),r._currentValue=g,u!==null)if(ur(u.value,g)){if(u.children===l.children&&!ci.current){e=Qr(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var w=u.dependencies;if(w!==null){g=u.child;for(var C=w.firstContext;C!==null;){if(C.context===r){if(u.tag===1){C=jr(-1,n&-n),C.tag=2;var y=u.updateQueue;if(y!==null){y=y.shared;var N=y.pending;N===null?C.next=C:(C.next=N.next,N.next=C),y.pending=C}}u.lanes|=n,C=u.alternate,C!==null&&(C.lanes|=n),bd(u.return,n,e),w.lanes|=n;break}C=C.next}}else if(u.tag===10)g=u.type===e.type?null:u.child;else if(u.tag===18){if(g=u.return,g===null)throw Error(de(341));g.lanes|=n,w=g.alternate,w!==null&&(w.lanes|=n),bd(g,n,e),g=u.sibling}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}$n(t,e,l.children,n),e=e.child}return e;case 9:return l=e.type,r=e.pendingProps.children,qo(e,n),l=Vi(l),r=r(l),e.flags|=1,$n(t,e,r,n),e.child;case 14:return r=e.type,l=er(r,e.pendingProps),l=er(r.type,l),tp(t,e,r,l,n);case 15:return m_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,l=e.pendingProps,l=e.elementType===r?l:er(r,l),zc(t,e),e.tag=1,ui(r)?(t=!0,Jc(e)):t=!1,qo(e,n),Gm(e,r,l),Od(e,r,l,n),Ld(null,e,r,!0,t,n);case 19:return v_(t,e,n);case 22:return __(t,e,n)}throw Error(de(156,e.tag))};function B_(t,e){return cm(t,e)}function cv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(t,e,n,r){return new cv(t,e,n,r)}function s1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uv(t){if(typeof t=="function")return s1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sf)return 11;if(t===Af)return 14}return 2}function Is(t,e){var n=t.alternate;return n===null?(n=Hi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,l,u){var g=2;if(r=t,typeof t=="function")s1(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case Do:return ro(n.children,l,u,e);case Ef:g=8,l|=8;break;case td:return t=Hi(12,n,e,l|2),t.elementType=td,t.lanes=u,t;case nd:return t=Hi(13,n,e,l),t.elementType=nd,t.lanes=u,t;case id:return t=Hi(19,n,e,l),t.elementType=id,t.lanes=u,t;case Zg:return ju(n,l,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jg:g=10;break e;case Gg:g=9;break e;case Sf:g=11;break e;case Af:g=14;break e;case fs:g=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Hi(g,n,e,l),e.elementType=t,e.type=r,e.lanes=u,e}function ro(t,e,n,r){return t=Hi(7,t,r,e),t.lanes=n,t}function ju(t,e,n,r){return t=Hi(22,t,r,e),t.elementType=Zg,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return t=Hi(6,t,null,e),t.lanes=n,t}function Hh(t,e,n){return e=Hi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hv(t,e,n,r,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vh(0),this.expirationTimes=vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function o1(t,e,n,r,l,u,g,w,C){return t=new hv(t,e,n,w,C),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Hi(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(u),t}function dv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function F_(t){if(!t)return Os;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ui(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(ui(n))return Bm(t,n,e)}return e}function z_(t,e,n,r,l,u,g,w,C){return t=o1(n,r,!0,t,l,u,g,w,C),t.context=F_(null),n=t.current,r=Jn(),l=As(n),u=jr(r,l),u.callback=e??null,Es(n,u,l),t.current.lanes=l,Vl(t,l,r),hi(t,r),t}function Gu(t,e,n,r){var l=e.current,u=Jn(),g=As(l);return n=F_(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(u,g),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(l,e,g),t!==null&&(lr(t,l,g,u),kc(t,l,g)),g}function du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function a1(t,e){fp(t,e),(t=t.alternate)&&fp(t,e)}function fv(){return null}var U_=typeof reportError=="function"?reportError:function(t){console.error(t)};function l1(t){this._internalRoot=t}Zu.prototype.render=l1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));Gu(t,e,null,null)};Zu.prototype.unmount=l1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){Gu(null,t,null,null)}),e[Yr]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var e=mm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gs.length&&e!==0&&e<gs[n].priority;n++);gs.splice(n,0,t),n===0&&ym(t)}};function c1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pp(){}function pv(t,e,n,r,l){if(l){if(typeof r=="function"){var u=r;r=function(){var y=du(g);u.call(y)}}var g=z_(e,r,t,0,null,!1,!1,"",pp);return t._reactRootContainer=g,t[Yr]=g.current,El(t.nodeType===8?t.parentNode:t),uo(),g}for(;l=t.lastChild;)t.removeChild(l);if(typeof r=="function"){var w=r;r=function(){var y=du(C);w.call(y)}}var C=o1(t,0,!1,null,null,!1,!1,"",pp);return t._reactRootContainer=C,t[Yr]=C.current,El(t.nodeType===8?t.parentNode:t),uo(function(){Gu(e,C,n,r)}),C}function Xu(t,e,n,r,l){var u=n._reactRootContainer;if(u){var g=u;if(typeof l=="function"){var w=l;l=function(){var C=du(g);w.call(C)}}Gu(e,g,t,l)}else g=pv(n,e,t,l,r);return du(g)}pm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(Nf(e,n|1),hi(e,sn()),!(_t&6)&&(ua=sn()+500,Bs()))}break;case 13:uo(function(){var r=Xr(t,1);if(r!==null){var l=Jn();lr(r,t,1,l)}}),a1(t,1)}};bf=function(t){if(t.tag===13){var e=Xr(t,134217728);if(e!==null){var n=Jn();lr(e,t,134217728,n)}a1(t,134217728)}};gm=function(t){if(t.tag===13){var e=As(t),n=Xr(t,e);if(n!==null){var r=Jn();lr(n,t,e,r)}a1(t,e)}};mm=function(){return It};_m=function(t,e){var n=It;try{return It=t,e()}finally{It=n}};fd=function(t,e,n){switch(e){case"input":if(od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var l=Fu(r);if(!l)throw Error(de(90));Xg(r),od(r,l)}}}break;case"textarea":Kg(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};im=n1;rm=uo;var gv={usingClientEntryPoint:!1,Events:[Gl,Bo,Fu,tm,nm,n1]},Ya={findFiberByHostInstance:Js,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mv={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=am(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Lu=Nc.inject(mv),Ar=Nc}catch{}}Ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv;Ii.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c1(e))throw Error(de(200));return dv(t,e,null,n)};Ii.createRoot=function(t,e){if(!c1(t))throw Error(de(299));var n=!1,r="",l=U_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=o1(t,1,!1,null,null,n,!1,r,l),t[Yr]=e.current,El(t.nodeType===8?t.parentNode:t),new l1(e)};Ii.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=am(e),t=t===null?null:t.stateNode,t};Ii.flushSync=function(t){return uo(t)};Ii.hydrate=function(t,e,n){if(!Yu(e))throw Error(de(200));return Xu(null,t,e,!0,n)};Ii.hydrateRoot=function(t,e,n){if(!c1(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,l=!1,u="",g=U_;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),e=z_(e,null,t,1,n??null,l,!1,u,g),t[Yr]=e.current,El(t),r)for(t=0;t<r.length;t++)n=r[t],l=n._getVersion,l=l(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,l]:e.mutableSourceEagerHydrationData.push(n,l);return new Zu(e)};Ii.render=function(t,e,n){if(!Yu(e))throw Error(de(200));return Xu(null,t,e,!1,n)};Ii.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(de(40));return t._reactRootContainer?(uo(function(){Xu(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Ii.unstable_batchedUpdates=n1;Ii.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yu(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Xu(t,e,n,!1,r)};Ii.version="18.2.0-next-9e3b772b8-20220608";function H_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H_)}catch(t){console.error(t)}}H_(),zg.exports=Ii;var _v=zg.exports,gp=_v;Jh.createRoot=gp.createRoot,Jh.hydrateRoot=gp.hydrateRoot;var W_={exports:{}},yv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xv=yv,wv=xv;function V_(){}function j_(){}j_.resetWarningCache=V_;var vv=function(){function t(r,l,u,g,w,C){if(C!==wv){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:j_,resetWarningCache:V_};return n.PropTypes=n,n};W_.exports=vv();var Cv=W_.exports;const Ev=Ru(Cv),mp="/Mapa-UC/assets/elevatorLogo-30_jZ6Gw.png",Sv="/Mapa-UC/assets/emergencyExit-bK8ZRk4K.png";var Zd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Oo,function(n){var r="1.9.4";function l(o){var d,m,v,S;for(m=1,v=arguments.length;m<v;m++){S=arguments[m];for(d in S)o[d]=S[d]}return o}var u=Object.create||function(){function o(){}return function(d){return o.prototype=d,new o}}();function g(o,d){var m=Array.prototype.slice;if(o.bind)return o.bind.apply(o,m.call(arguments,1));var v=m.call(arguments,2);return function(){return o.apply(d,v.length?v.concat(m.call(arguments)):arguments)}}var w=0;function C(o){return"_leaflet_id"in o||(o._leaflet_id=++w),o._leaflet_id}function y(o,d,m){var v,S,M,B;return B=function(){v=!1,S&&(M.apply(m,S),S=!1)},M=function(){v?S=arguments:(o.apply(m,arguments),setTimeout(B,d),v=!0)},M}function N(o,d,m){var v=d[1],S=d[0],M=v-S;return o===v&&m?o:((o-S)%M+M)%M+S}function A(){return!1}function R(o,d){if(d===!1)return o;var m=Math.pow(10,d===void 0?6:d);return Math.round(o*m)/m}function H(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function Z(o){return H(o).split(/\s+/)}function W(o,d){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?u(o.options):{});for(var m in d)o.options[m]=d[m];return o.options}function me(o,d,m){var v=[];for(var S in o)v.push(encodeURIComponent(m?S.toUpperCase():S)+"="+encodeURIComponent(o[S]));return(!d||d.indexOf("?")===-1?"?":"&")+v.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function P(o,d){return o.replace(U,function(m,v){var S=d[v];if(S===void 0)throw new Error("No value provided for variable "+m);return typeof S=="function"&&(S=S(d)),S})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function q(o,d){for(var m=0;m<o.length;m++)if(o[m]===d)return m;return-1}var ge="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var Q=0;function fe(o){var d=+new Date,m=Math.max(0,16-(d-Q));return Q=d+m,window.setTimeout(o,m)}var ee=window.requestAnimationFrame||ue("RequestAnimationFrame")||fe,ze=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function je(o,d,m){if(m&&ee===fe)o.call(d);else return ee.call(window,g(o,d))}function ve(o){o&&ze.call(window,o)}var qe={__proto__:null,extend:l,create:u,bind:g,get lastId(){return w},stamp:C,throttle:y,wrapNum:N,falseFn:A,formatNum:R,trim:H,splitWords:Z,setOptions:W,getParamString:me,template:P,isArray:k,indexOf:q,emptyImageUrl:ge,requestFn:ee,cancelFn:ze,requestAnimFrame:je,cancelAnimFrame:ve};function Xe(){}Xe.extend=function(o){var d=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=d.__super__=this.prototype,v=u(m);v.constructor=d,d.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(d[S]=this[S]);return o.statics&&l(d,o.statics),o.includes&&($(o.includes),l.apply(null,[v].concat(o.includes))),l(v,o),delete v.statics,delete v.includes,v.options&&(v.options=m.options?u(m.options):{},l(v.options,o.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,B=v._initHooks.length;M<B;M++)v._initHooks[M].call(this)}},d},Xe.include=function(o){var d=this.prototype.options;return l(this.prototype,o),o.options&&(this.prototype.options=d,this.mergeOptions(o.options)),this},Xe.mergeOptions=function(o){return l(this.prototype.options,o),this},Xe.addInitHook=function(o){var d=Array.prototype.slice.call(arguments,1),m=typeof o=="function"?o:function(){this[o].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function $(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var d=0;d<o.length;d++)o[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var De={on:function(o,d,m){if(typeof o=="object")for(var v in o)this._on(v,o[v],d);else{o=Z(o);for(var S=0,M=o.length;S<M;S++)this._on(o[S],d,m)}return this},off:function(o,d,m){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var v in o)this._off(v,o[v],d);else{o=Z(o);for(var S=arguments.length===1,M=0,B=o.length;M<B;M++)S?this._off(o[M]):this._off(o[M],d,m)}return this},_on:function(o,d,m,v){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(o,d,m)===!1){m===this&&(m=void 0);var S={fn:d,ctx:m};v&&(S.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(S)}},_off:function(o,d,m){var v,S,M;if(this._events&&(v=this._events[o],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,M=v.length;S<M;S++)v[S].fn=A;delete this._events[o];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var B=this._listens(o,d,m);if(B!==!1){var G=v[B];this._firingCount&&(G.fn=A,this._events[o]=v=v.slice()),v.splice(B,1)}}},fire:function(o,d,m){if(!this.listens(o,m))return this;var v=l({},d,{type:o,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var S=this._events[o];if(S){this._firingCount=this._firingCount+1||1;for(var M=0,B=S.length;M<B;M++){var G=S[M],K=G.fn;G.once&&this.off(o,K,G.ctx),K.call(G.ctx||this,v)}this._firingCount--}}return m&&this._propagateEvent(v),this},listens:function(o,d,m,v){typeof o!="string"&&console.warn('"string" type argument expected');var S=d;typeof d!="function"&&(v=!!d,S=void 0,m=void 0);var M=this._events&&this._events[o];if(M&&M.length&&this._listens(o,S,m)!==!1)return!0;if(v){for(var B in this._eventParents)if(this._eventParents[B].listens(o,d,m,v))return!0}return!1},_listens:function(o,d,m){if(!this._events)return!1;var v=this._events[o]||[];if(!d)return!!v.length;m===this&&(m=void 0);for(var S=0,M=v.length;S<M;S++)if(v[S].fn===d&&v[S].ctx===m)return S;return!1},once:function(o,d,m){if(typeof o=="object")for(var v in o)this._on(v,o[v],d,!0);else{o=Z(o);for(var S=0,M=o.length;S<M;S++)this._on(o[S],d,m,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[C(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[C(o)],this},_propagateEvent:function(o){for(var d in this._eventParents)this._eventParents[d].fire(o.type,l({layer:o.target,propagatedFrom:o.target},o),!0)}};De.addEventListener=De.on,De.removeEventListener=De.clearAllEventListeners=De.off,De.addOneTimeEventListener=De.once,De.fireEvent=De.fire,De.hasEventListeners=De.listens;var Oe=Xe.extend(De);function te(o,d,m){this.x=m?Math.round(o):o,this.y=m?Math.round(d):d}var Te=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(o){return this.clone()._add(le(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(le(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new te(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new te(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Te(this.x),this.y=Te(this.y),this},distanceTo:function(o){o=le(o);var d=o.x-this.x,m=o.y-this.y;return Math.sqrt(d*d+m*m)},equals:function(o){return o=le(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=le(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function le(o,d,m){return o instanceof te?o:k(o)?new te(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new te(o.x,o.y):new te(o,d,m)}function Le(o,d){if(o)for(var m=d?[o,d]:o,v=0,S=m.length;v<S;v++)this.extend(m[v])}Le.prototype={extend:function(o){var d,m;if(!o)return this;if(o instanceof te||typeof o[0]=="number"||"x"in o)d=m=le(o);else if(o=be(o),d=o.min,m=o.max,!d||!m)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=m.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(o){return le((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return le(this.min.x,this.max.y)},getTopRight:function(){return le(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var d,m;return typeof o[0]=="number"||o instanceof te?o=le(o):o=be(o),o instanceof Le?(d=o.min,m=o.max):d=m=o,d.x>=this.min.x&&m.x<=this.max.x&&d.y>=this.min.y&&m.y<=this.max.y},intersects:function(o){o=be(o);var d=this.min,m=this.max,v=o.min,S=o.max,M=S.x>=d.x&&v.x<=m.x,B=S.y>=d.y&&v.y<=m.y;return M&&B},overlaps:function(o){o=be(o);var d=this.min,m=this.max,v=o.min,S=o.max,M=S.x>d.x&&v.x<m.x,B=S.y>d.y&&v.y<m.y;return M&&B},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var d=this.min,m=this.max,v=Math.abs(d.x-m.x)*o,S=Math.abs(d.y-m.y)*o;return be(le(d.x-v,d.y-S),le(m.x+v,m.y+S))},equals:function(o){return o?(o=be(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function be(o,d){return!o||o instanceof Le?o:new Le(o,d)}function Et(o,d){if(o)for(var m=d?[o,d]:o,v=0,S=m.length;v<S;v++)this.extend(m[v])}Et.prototype={extend:function(o){var d=this._southWest,m=this._northEast,v,S;if(o instanceof $e)v=o,S=o;else if(o instanceof Et){if(v=o._southWest,S=o._northEast,!v||!S)return this}else return o?this.extend(ae(o)||He(o)):this;return!d&&!m?(this._southWest=new $e(v.lat,v.lng),this._northEast=new $e(S.lat,S.lng)):(d.lat=Math.min(v.lat,d.lat),d.lng=Math.min(v.lng,d.lng),m.lat=Math.max(S.lat,m.lat),m.lng=Math.max(S.lng,m.lng)),this},pad:function(o){var d=this._southWest,m=this._northEast,v=Math.abs(d.lat-m.lat)*o,S=Math.abs(d.lng-m.lng)*o;return new Et(new $e(d.lat-v,d.lng-S),new $e(m.lat+v,m.lng+S))},getCenter:function(){return new $e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $e(this.getNorth(),this.getWest())},getSouthEast:function(){return new $e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof $e||"lat"in o?o=ae(o):o=He(o);var d=this._southWest,m=this._northEast,v,S;return o instanceof Et?(v=o.getSouthWest(),S=o.getNorthEast()):v=S=o,v.lat>=d.lat&&S.lat<=m.lat&&v.lng>=d.lng&&S.lng<=m.lng},intersects:function(o){o=He(o);var d=this._southWest,m=this._northEast,v=o.getSouthWest(),S=o.getNorthEast(),M=S.lat>=d.lat&&v.lat<=m.lat,B=S.lng>=d.lng&&v.lng<=m.lng;return M&&B},overlaps:function(o){o=He(o);var d=this._southWest,m=this._northEast,v=o.getSouthWest(),S=o.getNorthEast(),M=S.lat>d.lat&&v.lat<m.lat,B=S.lng>d.lng&&v.lng<m.lng;return M&&B},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,d){return o?(o=He(o),this._southWest.equals(o.getSouthWest(),d)&&this._northEast.equals(o.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function He(o,d){return o instanceof Et?o:new Et(o,d)}function $e(o,d,m){if(isNaN(o)||isNaN(d))throw new Error("Invalid LatLng object: ("+o+", "+d+")");this.lat=+o,this.lng=+d,m!==void 0&&(this.alt=+m)}$e.prototype={equals:function(o,d){if(!o)return!1;o=ae(o);var m=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return m<=(d===void 0?1e-9:d)},toString:function(o){return"LatLng("+R(this.lat,o)+", "+R(this.lng,o)+")"},distanceTo:function(o){return wt.distance(this,ae(o))},wrap:function(){return wt.wrapLatLng(this)},toBounds:function(o){var d=180*o/40075017,m=d/Math.cos(Math.PI/180*this.lat);return He([this.lat-d,this.lng-m],[this.lat+d,this.lng+m])},clone:function(){return new $e(this.lat,this.lng,this.alt)}};function ae(o,d,m){return o instanceof $e?o:k(o)&&typeof o[0]!="object"?o.length===3?new $e(o[0],o[1],o[2]):o.length===2?new $e(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new $e(o.lat,"lng"in o?o.lng:o.lon,o.alt):d===void 0?null:new $e(o,d,m)}var $t={latLngToPoint:function(o,d){var m=this.projection.project(o),v=this.scale(d);return this.transformation._transform(m,v)},pointToLatLng:function(o,d){var m=this.scale(d),v=this.transformation.untransform(o,m);return this.projection.unproject(v)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var d=this.projection.bounds,m=this.scale(o),v=this.transformation.transform(d.min,m),S=this.transformation.transform(d.max,m);return new Le(v,S)},infinite:!1,wrapLatLng:function(o){var d=this.wrapLng?N(o.lng,this.wrapLng,!0):o.lng,m=this.wrapLat?N(o.lat,this.wrapLat,!0):o.lat,v=o.alt;return new $e(m,d,v)},wrapLatLngBounds:function(o){var d=o.getCenter(),m=this.wrapLatLng(d),v=d.lat-m.lat,S=d.lng-m.lng;if(v===0&&S===0)return o;var M=o.getSouthWest(),B=o.getNorthEast(),G=new $e(M.lat-v,M.lng-S),K=new $e(B.lat-v,B.lng-S);return new Et(G,K)}},wt=l({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(o,d){var m=Math.PI/180,v=o.lat*m,S=d.lat*m,M=Math.sin((d.lat-o.lat)*m/2),B=Math.sin((d.lng-o.lng)*m/2),G=M*M+Math.cos(v)*Math.cos(S)*B*B,K=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*K}}),hr=6378137,Gi={R:hr,MAX_LATITUDE:85.0511287798,project:function(o){var d=Math.PI/180,m=this.MAX_LATITUDE,v=Math.max(Math.min(m,o.lat),-m),S=Math.sin(v*d);return new te(this.R*o.lng*d,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(o){var d=180/Math.PI;return new $e((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*d,o.x*d/this.R)},bounds:function(){var o=hr*Math.PI;return new Le([-o,-o],[o,o])}()};function nn(o,d,m,v){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=d,this._c=m,this._d=v}nn.prototype={transform:function(o,d){return this._transform(o.clone(),d)},_transform:function(o,d){return d=d||1,o.x=d*(this._a*o.x+this._b),o.y=d*(this._c*o.y+this._d),o},untransform:function(o,d){return d=d||1,new te((o.x/d-this._b)/this._a,(o.y/d-this._d)/this._c)}};function Ni(o,d,m,v){return new nn(o,d,m,v)}var nt=l({},wt,{code:"EPSG:3857",projection:Gi,transformation:function(){var o=.5/(Math.PI*Gi.R);return Ni(o,.5,-o,.5)}()}),Zi=l({},nt,{code:"EPSG:900913"});function Gn(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function dr(o,d){var m="",v,S,M,B,G,K;for(v=0,M=o.length;v<M;v++){for(G=o[v],S=0,B=G.length;S<B;S++)K=G[S],m+=(S?"L":"M")+K.x+" "+K.y;m+=d?Ae.svg?"z":"x":""}return m||"M0 0"}var Yt=document.documentElement.style,gt="ActiveXObject"in window,it=gt&&!document.addEventListener,Tr="msLaunchUri"in navigator&&!("documentMode"in document),Ce=Ft("webkit"),fr=Ft("android"),Fs=Ft("android 2")||Ft("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Re=fr&&Ft("Google")&&se<537&&!("AudioNode"in window),Ue=!!window.opera,Bt=!Tr&&Ft("chrome"),On=Ft("gecko")&&!Ce&&!Ue&&!gt,Ze=!Bt&&Ft("safari"),hn=Ft("phantom"),fi="OTransition"in Yt,bi=navigator.platform.indexOf("Win")===0,ht=gt&&"transition"in Yt,oe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fs,at="MozPerspective"in Yt,Je=!window.L_DISABLE_3D&&(ht||oe||at)&&!fi&&!hn,dt=typeof orientation<"u"||Ft("mobile"),Nr=dt&&Ce,va=dt&&oe,Ca=!window.PointerEvent&&window.MSPointerEvent,ft=!!(window.PointerEvent||Ca),pr="ontouchstart"in window||!!window.TouchEvent,ec=!window.L_NO_TOUCH&&(pr||ft),tc=dt&&Ue,pi=dt&&On,Ea=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xn=function(){var o=!1;try{var d=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",A,d),window.removeEventListener("testPassiveEventSupport",A,d)}catch{}return o}(),es=function(){return!!document.createElement("canvas").getContext}(),ts=!!(document.createElementNS&&Gn("svg").createSVGRect),Mi=!!ts&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),sh=!ts&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var d=o.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),br=navigator.platform.indexOf("Mac")===0,Sa=navigator.platform.indexOf("Linux")===0;function Ft(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ae={ie:gt,ielt9:it,edge:Tr,webkit:Ce,android:fr,android23:Fs,androidStock:Re,opera:Ue,chrome:Bt,gecko:On,safari:Ze,phantom:hn,opera12:fi,win:bi,ie3d:ht,webkit3d:oe,gecko3d:at,any3d:Je,mobile:dt,mobileWebkit:Nr,mobileWebkit3d:va,msPointer:Ca,pointer:ft,touch:ec,touchNative:pr,mobileOpera:tc,mobileGecko:pi,retina:Ea,passiveEvents:xn,canvas:es,svg:ts,vml:sh,inlineSvg:Mi,mac:br,linux:Sa},Zn=Ae.msPointer?"MSPointerDown":"pointerdown",xe=Ae.msPointer?"MSPointerMove":"pointermove",Mr=Ae.msPointer?"MSPointerUp":"pointerup",vo=Ae.msPointer?"MSPointerCancel":"pointercancel",wn={touchstart:Zn,touchmove:xe,touchend:Mr,touchcancel:vo},Or={touchstart:gr,touchmove:Us,touchend:Us,touchcancel:Us},Yi={},zs=!1;function Oi(o,d,m){return d==="touchstart"&&Ot(),Or[d]?(m=Or[d].bind(this,m),o.addEventListener(wn[d],m,!1),m):(console.warn("wrong event specified:",d),A)}function oh(o,d,m){if(!wn[d]){console.warn("wrong event specified:",d);return}o.removeEventListener(wn[d],m,!1)}function ah(o){Yi[o.pointerId]=o}function Ri(o){Yi[o.pointerId]&&(Yi[o.pointerId]=o)}function vn(o){delete Yi[o.pointerId]}function Ot(){zs||(document.addEventListener(Zn,ah,!0),document.addEventListener(xe,Ri,!0),document.addEventListener(Mr,vn,!0),document.addEventListener(vo,vn,!0),zs=!0)}function Us(o,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var m in Yi)d.touches.push(Yi[m]);d.changedTouches=[d],o(d)}}function gr(o,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&fn(d),Us(o,d)}function Aa(o){var d={},m,v;for(v in o)m=o[v],d[v]=m&&m.bind?m.bind(o):m;return o=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var ne=200;function lh(o,d){o.addEventListener("dblclick",d);var m=0,v;function S(M){if(M.detail!==1){v=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var B=is(M);if(!(B.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!B.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var G=Date.now();G-m<=ne?(v++,v===2&&d(Aa(M))):v=1,m=G}}}return o.addEventListener("click",S),{dblclick:d,simDblclick:S}}function Gt(o,d){o.removeEventListener("dblclick",d.dblclick),o.removeEventListener("click",d.simDblclick)}var mr=j(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hs=j(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mt=Hs==="webkitTransition"||Hs==="OTransition"?Hs+"End":"transitionend";function pt(o){return typeof o=="string"?document.getElementById(o):o}function Ye(o,d){var m=o.style[d]||o.currentStyle&&o.currentStyle[d];if((!m||m==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(o,null);m=v?v[d]:null}return m==="auto"?null:m}function lt(o,d,m){var v=document.createElement(o);return v.className=d||"",m&&m.appendChild(v),v}function Nt(o){var d=o.parentNode;d&&d.removeChild(o)}function ns(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Rt(o){var d=o.parentNode;d&&d.lastChild!==o&&d.appendChild(o)}function Yn(o){var d=o.parentNode;d&&d.firstChild!==o&&d.insertBefore(o,d.firstChild)}function Ia(o,d){if(o.classList!==void 0)return o.classList.contains(d);var m=Xi(o);return m.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(m)}function Ie(o,d){if(o.classList!==void 0)for(var m=Z(d),v=0,S=m.length;v<S;v++)o.classList.add(m[v]);else if(!Ia(o,d)){var M=Xi(o);Ta(o,(M?M+" ":"")+d)}}function vt(o,d){o.classList!==void 0?o.classList.remove(d):Ta(o,H((" "+Xi(o)+" ").replace(" "+d+" "," ")))}function Ta(o,d){o.className.baseVal===void 0?o.className=d:o.className.baseVal=d}function Xi(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Qe(o,d){"opacity"in o.style?o.style.opacity=d:"filter"in o.style&&Cn(o,d)}function Cn(o,d){var m=!1,v="DXImageTransform.Microsoft.Alpha";try{m=o.filters.item(v)}catch{if(d===1)return}d=Math.round(d*100),m?(m.Enabled=d!==100,m.Opacity=d):o.style.filter+=" progid:"+v+"(opacity="+d+")"}function j(o){for(var d=document.documentElement.style,m=0;m<o.length;m++)if(o[m]in d)return o[m];return!1}function O(o,d,m){var v=d||new te(0,0);o.style[mr]=(Ae.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(m?" scale("+m+")":"")}function _e(o,d){o._leaflet_pos=d,Ae.any3d?O(o,d):(o.style.left=d.x+"px",o.style.top=d.y+"px")}function Dt(o){return o._leaflet_pos||new te(0,0)}var En,Ws,Vs;if("onselectstart"in document)En=function(){Be(window,"selectstart",fn)},Ws=function(){ye(window,"selectstart",fn)};else{var Sn=j(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);En=function(){if(Sn){var o=document.documentElement.style;Vs=o[Sn],o[Sn]="none"}},Ws=function(){Sn&&(document.documentElement.style[Sn]=Vs,Vs=void 0)}}function Ne(){Be(window,"dragstart",fn)}function bt(){ye(window,"dragstart",fn)}var js,Na;function Gs(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Rr(),js=o,Na=o.style.outlineStyle,o.style.outlineStyle="none",Be(window,"keydown",Rr))}function Rr(){js&&(js.style.outlineStyle=Na,js=void 0,Na=void 0,ye(window,"keydown",Rr))}function Co(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function ba(o){var d=o.getBoundingClientRect();return{x:d.width/o.offsetWidth||1,y:d.height/o.offsetHeight||1,boundingClientRect:d}}var on={__proto__:null,TRANSFORM:mr,TRANSITION:Hs,TRANSITION_END:mt,get:pt,getStyle:Ye,create:lt,remove:Nt,empty:ns,toFront:Rt,toBack:Yn,hasClass:Ia,addClass:Ie,removeClass:vt,setClass:Ta,getClass:Xi,setOpacity:Qe,testProp:j,setTransform:O,setPosition:_e,getPosition:Dt,get disableTextSelection(){return En},get enableTextSelection(){return Ws},disableImageDrag:Ne,enableImageDrag:bt,preventOutline:Gs,restoreOutline:Rr,getSizedParentNode:Co,getScale:ba};function Be(o,d,m,v){if(d&&typeof d=="object")for(var S in d)rn(o,S,d[S],m);else{d=Z(d);for(var M=0,B=d.length;M<B;M++)rn(o,d[M],m,v)}return this}var dn="_leaflet_events";function ye(o,d,m,v){if(arguments.length===1)nc(o),delete o[dn];else if(d&&typeof d=="object")for(var S in d)Ma(o,S,d[S],m);else if(d=Z(d),arguments.length===2)nc(o,function(G){return q(d,G)!==-1});else for(var M=0,B=d.length;M<B;M++)Ma(o,d[M],m,v);return this}function nc(o,d){for(var m in o[dn]){var v=m.split(/\d/)[0];(!d||d(v))&&Ma(o,v,null,null,m)}}var We={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rn(o,d,m,v){var S=d+C(m)+(v?"_"+C(v):"");if(o[dn]&&o[dn][S])return this;var M=function(G){return m.call(v||o,G||window.event)},B=M;!Ae.touchNative&&Ae.pointer&&d.indexOf("touch")===0?M=Oi(o,d,M):Ae.touch&&d==="dblclick"?M=lh(o,M):"addEventListener"in o?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?o.addEventListener(We[d]||d,M,Ae.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(M=function(G){G=G||window.event,Dr(o,G)&&B(G)},o.addEventListener(We[d],M,!1)):o.addEventListener(d,B,!1):o.attachEvent("on"+d,M),o[dn]=o[dn]||{},o[dn][S]=M}function Ma(o,d,m,v,S){S=S||d+C(m)+(v?"_"+C(v):"");var M=o[dn]&&o[dn][S];if(!M)return this;!Ae.touchNative&&Ae.pointer&&d.indexOf("touch")===0?oh(o,d,M):Ae.touch&&d==="dblclick"?Gt(o,M):"removeEventListener"in o?o.removeEventListener(We[d]||d,M,!1):o.detachEvent("on"+d,M),o[dn][S]=null}function Qi(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Eo(o){return rn(o,"wheel",Qi),this}function gi(o){return Be(o,"mousedown touchstart dblclick contextmenu",Qi),o._leaflet_disable_click=!0,this}function fn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function mi(o){return fn(o),Qi(o),this}function is(o){if(o.composedPath)return o.composedPath();for(var d=[],m=o.target;m;)d.push(m),m=m.parentNode;return d}function rs(o,d){if(!d)return new te(o.clientX,o.clientY);var m=ba(d),v=m.boundingClientRect;return new te((o.clientX-v.left)/m.x-d.clientLeft,(o.clientY-v.top)/m.y-d.clientTop)}var ic=Ae.linux&&Ae.chrome?window.devicePixelRatio:Ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ss(o){return Ae.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/ic:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Dr(o,d){var m=d.relatedTarget;if(!m)return!0;try{for(;m&&m!==o;)m=m.parentNode}catch{return!1}return m!==o}var Pn={__proto__:null,on:Be,off:ye,stopPropagation:Qi,disableScrollPropagation:Eo,disableClickPropagation:gi,preventDefault:fn,stop:mi,getPropagationPath:is,getMousePosition:rs,getWheelDelta:ss,isExternalTarget:Dr,addListener:Be,removeListener:ye},Oa=Oe.extend({run:function(o,d,m,v){this.stop(),this._el=o,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Dt(o),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=je(this._animate,this),this._step()},_step:function(o){var d=+new Date-this._startTime,m=this._duration*1e3;d<m?this._runFrame(this._easeOut(d/m),o):(this._runFrame(1),this._complete())},_runFrame:function(o,d){var m=this._startPos.add(this._offset.multiplyBy(o));d&&m._round(),_e(this._el,m),this.fire("step")},_complete:function(){ve(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),rt=Oe.extend({options:{crs:nt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,d){d=W(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=g(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(ae(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hs&&Ae.any3d&&!Ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Be(this._proxy,mt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,d,m){if(d=d===void 0?this._zoom:this._limitZoom(d),o=this._limitCenter(ae(o),d,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=l({animate:m.animate},m.zoom),m.pan=l({animate:m.animate,duration:m.duration},m.pan));var v=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,d,m.zoom):this._tryAnimatedPan(o,m.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(o,d,m.pan&&m.pan.noMoveStart),this},setZoom:function(o,d){return this._loaded?this.setView(this.getCenter(),o,{zoom:d}):(this._zoom=o,this)},zoomIn:function(o,d){return o=o||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,d)},zoomOut:function(o,d){return o=o||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,d)},setZoomAround:function(o,d,m){var v=this.getZoomScale(d),S=this.getSize().divideBy(2),M=o instanceof te?o:this.latLngToContainerPoint(o),B=M.subtract(S).multiplyBy(1-1/v),G=this.containerPointToLatLng(S.add(B));return this.setView(G,d,{zoom:m})},_getBoundsCenterZoom:function(o,d){d=d||{},o=o.getBounds?o.getBounds():He(o);var m=le(d.paddingTopLeft||d.padding||[0,0]),v=le(d.paddingBottomRight||d.padding||[0,0]),S=this.getBoundsZoom(o,!1,m.add(v));if(S=typeof d.maxZoom=="number"?Math.min(d.maxZoom,S):S,S===1/0)return{center:o.getCenter(),zoom:S};var M=v.subtract(m).divideBy(2),B=this.project(o.getSouthWest(),S),G=this.project(o.getNorthEast(),S),K=this.unproject(B.add(G).divideBy(2).add(M),S);return{center:K,zoom:S}},fitBounds:function(o,d){if(o=He(o),!o.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(o,d);return this.setView(m.center,m.zoom,d)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,d){return this.setView(o,this._zoom,{pan:d})},panBy:function(o,d){if(o=le(o).round(),d=d||{},!o.x&&!o.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,m,d.duration||.25,d.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,d,m){if(m=m||{},m.animate===!1||!Ae.any3d)return this.setView(o,d,m);this._stop();var v=this.project(this.getCenter()),S=this.project(o),M=this.getSize(),B=this._zoom;o=ae(o),d=d===void 0?B:d;var G=Math.max(M.x,M.y),K=G*this.getZoomScale(B,d),ie=S.distanceTo(v)||1,we=1.42,ke=we*we;function et(ln){var hc=ln?-1:1,Hy=ln?K:G,Wy=K*K-G*G+hc*ke*ke*ie*ie,Vy=2*Hy*ke*ie,gh=Wy/Vy,o0=Math.sqrt(gh*gh+1)-gh,jy=o0<1e-9?-18:Math.log(o0);return jy}function qn(ln){return(Math.exp(ln)-Math.exp(-ln))/2}function An(ln){return(Math.exp(ln)+Math.exp(-ln))/2}function Fi(ln){return qn(ln)/An(ln)}var ii=et(0);function No(ln){return G*(An(ii)/An(ii+we*ln))}function By(ln){return G*(An(ii)*Fi(ii+we*ln)-qn(ii))/ke}function Fy(ln){return 1-Math.pow(1-ln,1.5)}var zy=Date.now(),r0=(et(1)-ii)/we,Uy=m.duration?1e3*m.duration:1e3*r0*.8;function s0(){var ln=(Date.now()-zy)/Uy,hc=Fy(ln)*r0;ln<=1?(this._flyToFrame=je(s0,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(By(hc)/ie)),B),this.getScaleZoom(G/No(hc),B),{flyTo:!0})):this._move(o,d)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),s0.call(this),this},flyToBounds:function(o,d){var m=this._getBoundsCenterZoom(o,d);return this.flyTo(m.center,m.zoom,d)},setMaxBounds:function(o){return o=He(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var d=this.options.minZoom;return this.options.minZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var d=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,d){this._enforcingBounds=!0;var m=this.getCenter(),v=this._limitCenter(m,this._zoom,He(o));return m.equals(v)||this.panTo(v,d),this._enforcingBounds=!1,this},panInside:function(o,d){d=d||{};var m=le(d.paddingTopLeft||d.padding||[0,0]),v=le(d.paddingBottomRight||d.padding||[0,0]),S=this.project(this.getCenter()),M=this.project(o),B=this.getPixelBounds(),G=be([B.min.add(m),B.max.subtract(v)]),K=G.getSize();if(!G.contains(M)){this._enforcingBounds=!0;var ie=M.subtract(G.getCenter()),we=G.extend(M).getSize().subtract(K);S.x+=ie.x<0?-we.x:we.x,S.y+=ie.y<0?-we.y:we.y,this.panTo(this.unproject(S),d),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=l({animate:!1,pan:!0},o===!0?{animate:!0}:o);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),v=d.divideBy(2).round(),S=m.divideBy(2).round(),M=v.subtract(S);return!M.x&&!M.y?this:(o.animate&&o.pan?this.panBy(M):(o.pan&&this._rawPanBy(M),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=l({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=g(this._handleGeolocationResponse,this),m=g(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,m,o):navigator.geolocation.getCurrentPosition(d,m,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var d=o.code,m=o.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var d=o.coords.latitude,m=o.coords.longitude,v=new $e(d,m),S=v.toBounds(o.coords.accuracy*2),M=this._locateOptions;if(M.setView){var B=this.getBoundsZoom(S);this.setView(v,M.maxZoom?Math.min(B,M.maxZoom):B)}var G={latlng:v,bounds:S,timestamp:o.timestamp};for(var K in o.coords)typeof o.coords[K]=="number"&&(G[K]=o.coords[K]);this.fire("locationfound",G)}},addHandler:function(o,d){if(!d)return this;var m=this[o]=new d(this);return this._handlers.push(m),this.options[o]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Nt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ve(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Nt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,d){var m="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),v=lt("div",m,d||this._mapPane);return o&&(this._panes[o]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),d=this.unproject(o.getBottomLeft()),m=this.unproject(o.getTopRight());return new Et(d,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,d,m){o=He(o),m=le(m||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),M=this.getMaxZoom(),B=o.getNorthWest(),G=o.getSouthEast(),K=this.getSize().subtract(m),ie=be(this.project(G,v),this.project(B,v)).getSize(),we=Ae.any3d?this.options.zoomSnap:1,ke=K.x/ie.x,et=K.y/ie.y,qn=d?Math.max(ke,et):Math.min(ke,et);return v=this.getScaleZoom(qn,v),we&&(v=Math.round(v/(we/100))*(we/100),v=d?Math.ceil(v/we)*we:Math.floor(v/we)*we),Math.max(S,Math.min(M,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,d){var m=this._getTopLeftPoint(o,d);return new Le(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,d){var m=this.options.crs;return d=d===void 0?this._zoom:d,m.scale(o)/m.scale(d)},getScaleZoom:function(o,d){var m=this.options.crs;d=d===void 0?this._zoom:d;var v=m.zoom(o*m.scale(d));return isNaN(v)?1/0:v},project:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(ae(o),d)},unproject:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(le(o),d)},layerPointToLatLng:function(o){var d=le(o).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(o){var d=this.project(ae(o))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(He(o))},distance:function(o,d){return this.options.crs.distance(ae(o),ae(d))},containerPointToLayerPoint:function(o){return le(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return le(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var d=this.containerPointToLayerPoint(le(o));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(o)))},mouseEventToContainerPoint:function(o){return rs(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var d=this._container=pt(o);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Be(d,"scroll",this._onScroll,this),this._containerId=C(d)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ae.any3d,Ie(o,"leaflet-container"+(Ae.touch?" leaflet-touch":"")+(Ae.retina?" leaflet-retina":"")+(Ae.ielt9?" leaflet-oldie":"")+(Ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Ye(o,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_e(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(o.markerPane,"leaflet-zoom-hide"),Ie(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,d,m){_e(this._mapPane,new te(0,0));var v=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var S=this._zoom!==d;this._moveStart(S,m)._move(o,d)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(o,d){return o&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(o,d,m,v){d===void 0&&(d=this._zoom);var S=this._zoom!==d;return this._zoom=d,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),v?m&&m.pinch&&this.fire("zoom",m):((S||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ve(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){_e(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[C(this._container)]=this;var d=o?ye:Be;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Ae.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ve(this._resizeRequest),this._resizeRequest=je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,d){for(var m=[],v,S=d==="mouseout"||d==="mouseover",M=o.target||o.srcElement,B=!1;M;){if(v=this._targets[C(M)],v&&(d==="click"||d==="preclick")&&this._draggableMoved(v)){B=!0;break}if(v&&v.listens(d,!0)&&(S&&!Dr(M,o)||(m.push(v),S))||M===this._container)break;M=M.parentNode}return!m.length&&!B&&!S&&this.listens(d,!0)&&(m=[this]),m},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var d=o.target||o.srcElement;if(!(!this._loaded||d._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(d))){var m=o.type;m==="mousedown"&&Gs(d),this._fireDOMEvent(o,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,d,m){if(o.type==="click"){var v=l({},o);v.type="preclick",this._fireDOMEvent(v,v.type,m)}var S=this._findEventTargets(o,d);if(m){for(var M=[],B=0;B<m.length;B++)m[B].listens(d,!0)&&M.push(m[B]);S=M.concat(S)}if(S.length){d==="contextmenu"&&fn(o);var G=S[0],K={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ie=G.getLatLng&&(!G._radius||G._radius<=10);K.containerPoint=ie?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(o),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=ie?G.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(B=0;B<S.length;B++)if(S[B].fire(d,K,!0),K.originalEvent._stopped||S[B].options.bubblingMouseEvents===!1&&q(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,d=this._handlers.length;o<d;o++)this._handlers[o].disable()},whenReady:function(o,d){return this._loaded?o.call(d||this,{target:this}):this.on("load",o,d),this},_getMapPanePos:function(){return Dt(this._mapPane)||new te(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,d){var m=o&&d!==void 0?this._getNewPixelOrigin(o,d):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,d){var m=this.getSize()._divideBy(2);return this.project(o,d)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,d,m){var v=this._getNewPixelOrigin(m,d);return this.project(o,d)._subtract(v)},_latLngBoundsToNewLayerBounds:function(o,d,m){var v=this._getNewPixelOrigin(m,d);return be([this.project(o.getSouthWest(),d)._subtract(v),this.project(o.getNorthWest(),d)._subtract(v),this.project(o.getSouthEast(),d)._subtract(v),this.project(o.getNorthEast(),d)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,d,m){if(!m)return o;var v=this.project(o,d),S=this.getSize().divideBy(2),M=new Le(v.subtract(S),v.add(S)),B=this._getBoundsOffset(M,m,d);return Math.abs(B.x)<=1&&Math.abs(B.y)<=1?o:this.unproject(v.add(B),d)},_limitOffset:function(o,d){if(!d)return o;var m=this.getPixelBounds(),v=new Le(m.min.add(o),m.max.add(o));return o.add(this._getBoundsOffset(v,d))},_getBoundsOffset:function(o,d,m){var v=be(this.project(d.getNorthEast(),m),this.project(d.getSouthWest(),m)),S=v.min.subtract(o.min),M=v.max.subtract(o.max),B=this._rebound(S.x,-M.x),G=this._rebound(S.y,-M.y);return new te(B,G)},_rebound:function(o,d){return o+d>0?Math.round(o-d)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(d))},_limitZoom:function(o){var d=this.getMinZoom(),m=this.getMaxZoom(),v=Ae.any3d?this.options.zoomSnap:1;return v&&(o=Math.round(o/v)*v),Math.max(d,Math.min(m,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,d){var m=this._getCenterOffset(o)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,d),!0)},_createAnimProxy:function(){var o=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(d){var m=mr,v=this._proxy.style[m];O(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),v===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Nt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),d=this.getZoom();O(this._proxy,this.project(o,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,d,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(d),S=this._getCenterOffset(o)._divideBy(1-1/v);return m.animate!==!0&&!this.getSize().contains(S)?!1:(je(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(o,d,!0)},this),!0)},_animateZoom:function(o,d,m,v){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=d,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:d,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(g(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rc(o,d){return new rt(o,d)}var _i=Xe.extend({options:{position:"topright"},initialize:function(o){W(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var d=this._map;return d&&d.removeControl(this),this.options.position=o,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var d=this._container=this.onAdd(o),m=this.getPosition(),v=o._controlCorners[m];return Ie(d,"leaflet-control"),m.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Nt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Zs=function(o){return new _i(o)};rt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},d="leaflet-",m=this._controlContainer=lt("div",d+"control-container",this._container);function v(S,M){var B=d+S+" "+d+M;o[S+M]=lt("div",B,m)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Nt(this._controlCorners[o]);Nt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sc=_i.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,d,m,v){return m<v?-1:v<m?1:0}},initialize:function(o,d,m){W(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in o)this._addLayer(o[v],v);for(v in d)this._addLayer(d[v],v,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return _i.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,d){return this._addLayer(o,d),this._map?this._update():this},addOverlay:function(o,d){return this._addLayer(o,d,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var d=this._getLayer(C(o));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):vt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",d=this._container=lt("div",o),m=this.options.collapsed;d.setAttribute("aria-haspopup",!0),gi(d),Eo(d);var v=this._section=lt("section",o+"-list");m&&(this._map.on("click",this.collapse,this),Be(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=lt("a",o+"-toggle",d);S.href="#",S.title="Layers",S.setAttribute("role","button"),Be(S,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){fn(M),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=lt("div",o+"-base",v),this._separator=lt("div",o+"-separator",v),this._overlaysList=lt("div",o+"-overlays",v),d.appendChild(v)},_getLayer:function(o){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&C(this._layers[d].layer)===o)return this._layers[d]},_addLayer:function(o,d,m){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:d,overlay:m}),this.options.sortLayers&&this._layers.sort(g(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ns(this._baseLayersList),ns(this._overlaysList),this._layerControlInputs=[];var o,d,m,v,S=0;for(m=0;m<this._layers.length;m++)v=this._layers[m],this._addItem(v),d=d||v.overlay,o=o||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(o=o&&S>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=d&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var d=this._getLayer(C(o.target)),m=d.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;m&&this._map.fire(m,d)},_createRadioElement:function(o,d){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(d?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=m,v.firstChild},_addItem:function(o){var d=document.createElement("label"),m=this._map.hasLayer(o.layer),v;o.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=m):v=this._createRadioElement("leaflet-base-layers_"+C(this),m),this._layerControlInputs.push(v),v.layerId=C(o.layer),Be(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+o.name;var M=document.createElement("span");d.appendChild(M),M.appendChild(v),M.appendChild(S);var B=o.overlay?this._overlaysList:this._baseLayersList;return B.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,d,m,v=[],S=[];this._handlingClick=!0;for(var M=o.length-1;M>=0;M--)d=o[M],m=this._getLayer(d.layerId).layer,d.checked?v.push(m):d.checked||S.push(m);for(M=0;M<S.length;M++)this._map.hasLayer(S[M])&&this._map.removeLayer(S[M]);for(M=0;M<v.length;M++)this._map.hasLayer(v[M])||this._map.addLayer(v[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,d,m,v=this._map.getZoom(),S=o.length-1;S>=0;S--)d=o[S],m=this._getLayer(d.layerId).layer,d.disabled=m.options.minZoom!==void 0&&v<m.options.minZoom||m.options.maxZoom!==void 0&&v>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Be(o,"click",fn),this.expand();var d=this;setTimeout(function(){ye(o,"click",fn),d._preventClick=!1})}}),Ct=function(o,d,m){return new sc(o,d,m)},So=_i.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var d="leaflet-control-zoom",m=lt("div",d+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,d+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,d+"-out",m,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,d,m,v,S){var M=lt("a",m,v);return M.innerHTML=o,M.href="#",M.title=d,M.setAttribute("role","button"),M.setAttribute("aria-label",d),gi(M),Be(M,"click",mi),Be(M,"click",S,this),Be(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var o=this._map,d="leaflet-disabled";vt(this._zoomInButton,d),vt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Ie(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Ie(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});rt.mergeOptions({zoomControl:!0}),rt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new So,this.addControl(this.zoomControl))});var Ao=function(o){return new So(o)},Ki=_i.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var d="leaflet-control-scale",m=lt("div",d),v=this.options;return this._addScales(v,d+"-line",m),o.on(v.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),m},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,d,m){o.metric&&(this._mScale=lt("div",d,m)),o.imperial&&(this._iScale=lt("div",d,m))},_update:function(){var o=this._map,d=o.getSize().y/2,m=o.distance(o.containerPointToLatLng([0,d]),o.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(m)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var d=this._getRoundNum(o),m=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,m,d/o)},_updateImperial:function(o){var d=o*3.2808399,m,v,S;d>5280?(m=d/5280,v=this._getRoundNum(m),this._updateScale(this._iScale,v+" mi",v/m)):(S=this._getRoundNum(d),this._updateScale(this._iScale,S+" ft",S/d))},_updateScale:function(o,d,m){o.style.width=Math.round(this.options.maxWidth*m)+"px",o.innerHTML=d},_getRoundNum:function(o){var d=Math.pow(10,(Math.floor(o)+"").length-1),m=o/d;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,d*m}}),ch=function(o){return new Ki(o)},X='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ge=_i.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ae.inlineSvg?X+" ":"")+"Leaflet</a>"},initialize:function(o){W(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),gi(this._container);for(var d in o._layers)o._layers[d].getAttribution&&this.addAttribution(o._layers[d].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var d in this._attributions)this._attributions[d]&&o.push(d);var m=[];this.options.prefix&&m.push(this.options.prefix),o.length&&m.push(o.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});rt.mergeOptions({attributionControl:!0}),rt.addInitHook(function(){this.options.attributionControl&&new Ge().addTo(this)});var pn=function(o){return new Ge(o)};_i.Layers=sc,_i.Zoom=So,_i.Scale=Ki,_i.Attribution=Ge,Zs.layers=Ct,Zs.zoom=Ao,Zs.scale=ch,Zs.attribution=pn;var Xn=Xe.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xn.addTo=function(o,d){return o.addHandler(d,this),this};var oc={Events:De},ac=Ae.touch?"touchstart mousedown":"mousedown",_r=Oe.extend({options:{clickTolerance:3},initialize:function(o,d,m,v){W(this,v),this._element=o,this._dragStartTarget=d||o,this._preventOutline=m},enable:function(){this._enabled||(Be(this._dragStartTarget,ac,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_r._dragging===this&&this.finishDrag(!0),ye(this._dragStartTarget,ac,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){_r._dragging===this&&this.finishDrag();return}if(!(_r._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(_r._dragging=this,this._preventOutline&&Gs(this._element),Ne(),En(),!this._moving)){this.fire("down");var d=o.touches?o.touches[0]:o,m=Co(this._element);this._startPoint=new te(d.clientX,d.clientY),this._startPos=Dt(this._element),this._parentScale=ba(m);var v=o.type==="mousedown";Be(document,v?"mousemove":"touchmove",this._onMove,this),Be(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var d=o.touches&&o.touches.length===1?o.touches[0]:o,m=new te(d.clientX,d.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,fn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),_e(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){vt(document.body,"leaflet-dragging"),this._lastTarget&&(vt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ye(document,"mousemove touchmove",this._onMove,this),ye(document,"mouseup touchend touchcancel",this._onUp,this),bt(),Ws();var d=this._moved&&this._moving;this._moving=!1,_r._dragging=!1,d&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function lc(o,d,m){var v,S=[1,4,2,8],M,B,G,K,ie,we,ke,et;for(M=0,we=o.length;M<we;M++)o[M]._code=Pr(o[M],d);for(G=0;G<4;G++){for(ke=S[G],v=[],M=0,we=o.length,B=we-1;M<we;B=M++)K=o[M],ie=o[B],K._code&ke?ie._code&ke||(et=qi(ie,K,ke,d,m),et._code=Pr(et,d),v.push(et)):(ie._code&ke&&(et=qi(ie,K,ke,d,m),et._code=Pr(et,d),v.push(et)),v.push(K));o=v}return o}function Io(o,d){var m,v,S,M,B,G,K,ie,we;if(!o||o.length===0)throw new Error("latlngs not passed");Qn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ke=ae([0,0]),et=He(o),qn=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());qn<1700&&(ke=Xt(o));var An=o.length,Fi=[];for(m=0;m<An;m++){var ii=ae(o[m]);Fi.push(d.project(ae([ii.lat-ke.lat,ii.lng-ke.lng])))}for(G=K=ie=0,m=0,v=An-1;m<An;v=m++)S=Fi[m],M=Fi[v],B=S.y*M.x-M.y*S.x,K+=(S.x+M.x)*B,ie+=(S.y+M.y)*B,G+=B*3;G===0?we=Fi[0]:we=[K/G,ie/G];var No=d.unproject(le(we));return ae([No.lat+ke.lat,No.lng+ke.lng])}function Xt(o){for(var d=0,m=0,v=0,S=0;S<o.length;S++){var M=ae(o[S]);d+=M.lat,m+=M.lng,v++}return ae([d/v,m/v])}var Ra={__proto__:null,clipPolygon:lc,polygonCenter:Io,centroid:Xt};function zt(o,d){if(!d||!o.length)return o.slice();var m=d*d;return o=uh(o,m),o=St(o,m),o}function Ys(o,d,m){return Math.sqrt(kr(o,d,m,!0))}function Lr(o,d,m){return kr(o,d,m)}function St(o,d){var m=o.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(m);S[0]=S[m-1]=1,Me(o,S,d,0,m-1);var M,B=[];for(M=0;M<m;M++)S[M]&&B.push(o[M]);return B}function Me(o,d,m,v,S){var M=0,B,G,K;for(G=v+1;G<=S-1;G++)K=kr(o[G],o[v],o[S],!0),K>M&&(B=G,M=K);M>m&&(d[B]=1,Me(o,d,m,v,B),Me(o,d,m,B,S))}function uh(o,d){for(var m=[o[0]],v=1,S=0,M=o.length;v<M;v++)Di(o[v],o[S])>d&&(m.push(o[v]),S=v);return S<M-1&&m.push(o[M-1]),m}var Tt;function yr(o,d,m,v,S){var M=v?Tt:Pr(o,m),B=Pr(d,m),G,K,ie;for(Tt=B;;){if(!(M|B))return[o,d];if(M&B)return!1;G=M||B,K=qi(o,d,G,m,S),ie=Pr(K,m),G===M?(o=K,M=ie):(d=K,B=ie)}}function qi(o,d,m,v,S){var M=d.x-o.x,B=d.y-o.y,G=v.min,K=v.max,ie,we;return m&8?(ie=o.x+M*(K.y-o.y)/B,we=K.y):m&4?(ie=o.x+M*(G.y-o.y)/B,we=G.y):m&2?(ie=K.x,we=o.y+B*(K.x-o.x)/M):m&1&&(ie=G.x,we=o.y+B*(G.x-o.x)/M),new te(ie,we,S)}function Pr(o,d){var m=0;return o.x<d.min.x?m|=1:o.x>d.max.x&&(m|=2),o.y<d.min.y?m|=4:o.y>d.max.y&&(m|=8),m}function Di(o,d){var m=d.x-o.x,v=d.y-o.y;return m*m+v*v}function kr(o,d,m,v){var S=d.x,M=d.y,B=m.x-S,G=m.y-M,K=B*B+G*G,ie;return K>0&&(ie=((o.x-S)*B+(o.y-M)*G)/K,ie>1?(S=m.x,M=m.y):ie>0&&(S+=B*ie,M+=G*ie)),B=o.x-S,G=o.y-M,v?B*B+G*G:new te(S,M)}function Qn(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function To(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Qn(o)}function Da(o,d){var m,v,S,M,B,G,K,ie;if(!o||o.length===0)throw new Error("latlngs not passed");Qn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var we=ae([0,0]),ke=He(o),et=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());et<1700&&(we=Xt(o));var qn=o.length,An=[];for(m=0;m<qn;m++){var Fi=ae(o[m]);An.push(d.project(ae([Fi.lat-we.lat,Fi.lng-we.lng])))}for(m=0,v=0;m<qn-1;m++)v+=An[m].distanceTo(An[m+1])/2;if(v===0)ie=An[0];else for(m=0,M=0;m<qn-1;m++)if(B=An[m],G=An[m+1],S=B.distanceTo(G),M+=S,M>v){K=(M-v)/S,ie=[G.x-K*(G.x-B.x),G.y-K*(G.y-B.y)];break}var ii=d.unproject(le(ie));return ae([ii.lat+we.lat,ii.lng+we.lng])}var cc={__proto__:null,simplify:zt,pointToSegmentDistance:Ys,closestPointOnSegment:Lr,clipSegment:yr,_getEdgeIntersection:qi,_getBitCode:Pr,_sqClosestPointOnSegment:kr,isFlat:Qn,_flat:To,polylineCenter:Da},La={project:function(o){return new te(o.lng,o.lat)},unproject:function(o){return new $e(o.y,o.x)},bounds:new Le([-180,-90],[180,90])},xr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var d=Math.PI/180,m=this.R,v=o.lat*d,S=this.R_MINOR/m,M=Math.sqrt(1-S*S),B=M*Math.sin(v),G=Math.tan(Math.PI/4-v/2)/Math.pow((1-B)/(1+B),M/2);return v=-m*Math.log(Math.max(G,1e-10)),new te(o.lng*d*m,v)},unproject:function(o){for(var d=180/Math.PI,m=this.R,v=this.R_MINOR/m,S=Math.sqrt(1-v*v),M=Math.exp(-o.y/m),B=Math.PI/2-2*Math.atan(M),G=0,K=.1,ie;G<15&&Math.abs(K)>1e-7;G++)ie=S*Math.sin(B),ie=Math.pow((1-ie)/(1+ie),S/2),K=Math.PI/2-2*Math.atan(M*ie)-B,B+=K;return new $e(B*d,o.x*d/m)}},Pa={__proto__:null,LonLat:La,Mercator:xr,SphericalMercator:Gi},hh=l({},wt,{code:"EPSG:3395",projection:xr,transformation:function(){var o=.5/(Math.PI*xr.R);return Ni(o,.5,-o,.5)}()}),os=l({},wt,{code:"EPSG:4326",projection:La,transformation:Ni(1/180,1,-1/180,.5)}),dh=l({},$t,{projection:La,transformation:Ni(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,d){var m=d.lng-o.lng,v=d.lat-o.lat;return Math.sqrt(m*m+v*v)},infinite:!0});$t.Earth=wt,$t.EPSG3395=hh,$t.EPSG3857=nt,$t.EPSG900913=Zi,$t.EPSG4326=os,$t.Simple=dh;var an=Oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[C(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[C(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var d=o.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var m=this.getEvents();d.on(m,this),this.once("remove",function(){d.off(m,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});rt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var d=C(o);return this._layers[d]?this:(this._layers[d]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var d=C(o);return this._layers[d]?(this._loaded&&o.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return C(o)in this._layers},eachLayer:function(o,d){for(var m in this._layers)o.call(d,this._layers[m]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var d=0,m=o.length;d<m;d++)this.addLayer(o[d])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[C(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var d=C(o);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,d=-1/0,m=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;o=S.minZoom===void 0?o:Math.min(o,S.minZoom),d=S.maxZoom===void 0?d:Math.max(d,S.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=o===1/0?void 0:o,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $i=an.extend({initialize:function(o,d){W(this,d),this._layers={};var m,v;if(o)for(m=0,v=o.length;m<v;m++)this.addLayer(o[m])},addLayer:function(o){var d=this.getLayerId(o);return this._layers[d]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var d=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(o){var d=typeof o=="number"?o:this.getLayerId(o);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var d=Array.prototype.slice.call(arguments,1),m,v;for(m in this._layers)v=this._layers[m],v[o]&&v[o].apply(v,d);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,d){for(var m in this._layers)o.call(d,this._layers[m]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return C(o)}}),ni=function(o,d){return new $i(o,d)},Li=$i.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),$i.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),$i.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new Et;for(var d in this._layers){var m=this._layers[d];o.extend(m.getBounds?m.getBounds():m.getLatLng())}return o}}),Pi=function(o,d){return new Li(o,d)},as=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){W(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,d){var m=this._getIconUrl(o);if(!m){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(m,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(v,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(o,d){var m=this.options,v=m[d+"Size"];typeof v=="number"&&(v=[v,v]);var S=le(v),M=le(d==="shadow"&&m.shadowAnchor||m.iconAnchor||S&&S.divideBy(2,!0));o.className="leaflet-marker-"+d+" "+(m.className||""),M&&(o.style.marginLeft=-M.x+"px",o.style.marginTop=-M.y+"px"),S&&(o.style.width=S.x+"px",o.style.height=S.y+"px")},_createImg:function(o,d){return d=d||document.createElement("img"),d.src=o,d},_getIconUrl:function(o){return Ae.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function ka(o){return new as(o)}var Xs=as.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Xs.imagePath!="string"&&(Xs.imagePath=this._detectIconPath()),(this.options.imagePath||Xs.imagePath)+as.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var d=function(m,v,S){var M=v.exec(m);return M&&M[S]};return o=d(o,/^url\((['"])?(.+)\1\)$/,2),o&&d(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=lt("div","leaflet-default-icon-path",document.body),d=Ye(o,"background-image")||Ye(o,"backgroundImage");if(document.body.removeChild(o),d=this._stripUrl(d),d)return d;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Ba=Xn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new _r(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var d=this._marker,m=d._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,M=Dt(d._icon),B=m.getPixelBounds(),G=m.getPixelOrigin(),K=be(B.min._subtract(G).add(S),B.max._subtract(G).subtract(S));if(!K.contains(M)){var ie=le((Math.max(K.max.x,M.x)-K.max.x)/(B.max.x-K.max.x)-(Math.min(K.min.x,M.x)-K.min.x)/(B.min.x-K.min.x),(Math.max(K.max.y,M.y)-K.max.y)/(B.max.y-K.max.y)-(Math.min(K.min.y,M.y)-K.min.y)/(B.min.y-K.min.y)).multiplyBy(v);m.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),_e(d._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=je(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(ve(this._panRequest),this._panRequest=je(this._adjustPan.bind(this,o)))},_onDrag:function(o){var d=this._marker,m=d._shadow,v=Dt(d._icon),S=d._map.layerPointToLatLng(v);m&&_e(m,v),d._latlng=S,o.latlng=S,o.oldLatLng=this._oldLatLng,d.fire("move",o).fire("drag",o)},_onDragEnd:function(o){ve(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Kn=an.extend({options:{icon:new Xs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,d){W(this,d),this._latlng=ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var d=this._latlng;return this._latlng=ae(o),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=o.icon.createIcon(this._icon),v=!1;m!==this._icon&&(this._icon&&this._removeIcon(),v=!0,o.title&&(m.title=o.title),m.tagName==="IMG"&&(m.alt=o.alt||"")),Ie(m,d),o.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(m,"focus",this._panOnFocus,this);var S=o.icon.createShadow(this._shadow),M=!1;S!==this._shadow&&(this._removeShadow(),M=!0),S&&(Ie(S,d),S.alt=""),this._shadow=S,o.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&M&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(this._icon,"focus",this._panOnFocus,this),Nt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Nt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&_e(this._icon,o),this._shadow&&_e(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ba)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ba(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Qe(this._icon,o),this._shadow&&Qe(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var d=this.options.icon.options,m=d.iconSize?le(d.iconSize):le(0,0),v=d.iconAnchor?le(d.iconAnchor):le(0,0);o.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:m.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fh(o,d){return new Kn(o,d)}var ki=an.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return W(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wr=ki.extend({options:{fill:!0,radius:10},initialize:function(o,d){W(this,d),this._latlng=ae(o),this._radius=this.options.radius},setLatLng:function(o){var d=this._latlng;return this._latlng=ae(o),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var d=o&&o.radius||this._radius;return ki.prototype.setStyle.call(this,o),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,d=this._radiusY||o,m=this._clickTolerance(),v=[o+m,d+m];this._pxBounds=new Le(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ut(o,d){return new wr(o,d)}var ls=wr.extend({initialize:function(o,d,m){if(typeof d=="number"&&(d=l({},m,{radius:d})),W(this,d),this._latlng=ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new Et(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ki.prototype.setStyle,_project:function(){var o=this._latlng.lng,d=this._latlng.lat,m=this._map,v=m.options.crs;if(v.distance===wt.distance){var S=Math.PI/180,M=this._mRadius/wt.R/S,B=m.project([d+M,o]),G=m.project([d-M,o]),K=B.add(G).divideBy(2),ie=m.unproject(K).lat,we=Math.acos((Math.cos(M*S)-Math.sin(d*S)*Math.sin(ie*S))/(Math.cos(d*S)*Math.cos(ie*S)))/S;(isNaN(we)||we===0)&&(we=M/Math.cos(Math.PI/180*d)),this._point=K.subtract(m.getPixelOrigin()),this._radius=isNaN(we)?0:K.x-m.project([ie,o-we]).x,this._radiusY=K.y-B.y}else{var ke=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(ke).x}this._updateBounds()}});function I(o,d,m){return new ls(o,d,m)}var i=ki.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,d){W(this,d),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var d=1/0,m=null,v=kr,S,M,B=0,G=this._parts.length;B<G;B++)for(var K=this._parts[B],ie=1,we=K.length;ie<we;ie++){S=K[ie-1],M=K[ie];var ke=v(o,S,M,!0);ke<d&&(d=ke,m=v(o,S,M))}return m&&(m.distance=Math.sqrt(d)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Da(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,d){return d=d||this._defaultShape(),o=ae(o),d.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new Et,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Qn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var d=[],m=Qn(o),v=0,S=o.length;v<S;v++)m?(d[v]=ae(o[v]),this._bounds.extend(d[v])):d[v]=this._convertLatLngs(o[v]);return d},_project:function(){var o=new Le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),d=new te(o,o);this._rawPxBounds&&(this._pxBounds=new Le([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(o,d,m){var v=o[0]instanceof $e,S=o.length,M,B;if(v){for(B=[],M=0;M<S;M++)B[M]=this._map.latLngToLayerPoint(o[M]),m.extend(B[M]);d.push(B)}else for(M=0;M<S;M++)this._projectLatlngs(o[M],d,m)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,m,v,S,M,B,G,K;for(m=0,S=0,M=this._rings.length;m<M;m++)for(K=this._rings[m],v=0,B=K.length;v<B-1;v++)G=yr(K[v],K[v+1],o,v,!0),G&&(d[S]=d[S]||[],d[S].push(G[0]),(G[1]!==K[v+1]||v===B-2)&&(d[S].push(G[1]),S++))}},_simplifyPoints:function(){for(var o=this._parts,d=this.options.smoothFactor,m=0,v=o.length;m<v;m++)o[m]=zt(o[m],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,d){var m,v,S,M,B,G,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(m=0,M=this._parts.length;m<M;m++)for(G=this._parts[m],v=0,B=G.length,S=B-1;v<B;S=v++)if(!(!d&&v===0)&&Ys(o,G[S],G[v])<=K)return!0;return!1}});function s(o,d){return new i(o,d)}i._flat=To;var a=i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Io(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var d=i.prototype._convertLatLngs.call(this,o),m=d.length;return m>=2&&d[0]instanceof $e&&d[0].equals(d[m-1])&&d.pop(),d},_setLatLngs:function(o){i.prototype._setLatLngs.call(this,o),Qn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Qn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,d=this.options.weight,m=new te(d,d);if(o=new Le(o.min.subtract(m),o.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,M;v<S;v++)M=lc(this._rings[v],o,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var d=!1,m,v,S,M,B,G,K,ie;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(M=0,K=this._parts.length;M<K;M++)for(m=this._parts[M],B=0,ie=m.length,G=ie-1;B<ie;G=B++)v=m[B],S=m[G],v.y>o.y!=S.y>o.y&&o.x<(S.x-v.x)*(o.y-v.y)/(S.y-v.y)+v.x&&(d=!d);return d||i.prototype._containsPoint.call(this,o,!0)}});function c(o,d){return new a(o,d)}var h=Li.extend({initialize:function(o,d){W(this,d),this._layers={},o&&this.addData(o)},addData:function(o){var d=k(o)?o:o.features,m,v,S;if(d){for(m=0,v=d.length;m<v;m++)S=d[m],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var M=this.options;if(M.filter&&!M.filter(o))return this;var B=f(o,M);return B?(B.feature=D(o),B.defaultOptions=B.options,this.resetStyle(B),M.onEachFeature&&M.onEachFeature(o,B),this.addLayer(B)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=l({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(d){this._setLayerStyle(d,o)},this)},_setLayerStyle:function(o,d){o.setStyle&&(typeof d=="function"&&(d=d(o.feature)),o.setStyle(d))}});function f(o,d){var m=o.type==="Feature"?o.geometry:o,v=m?m.coordinates:null,S=[],M=d&&d.pointToLayer,B=d&&d.coordsToLatLng||_,G,K,ie,we;if(!v&&!m)return null;switch(m.type){case"Point":return G=B(v),p(M,o,G,d);case"MultiPoint":for(ie=0,we=v.length;ie<we;ie++)G=B(v[ie]),S.push(p(M,o,G,d));return new Li(S);case"LineString":case"MultiLineString":return K=x(v,m.type==="LineString"?0:1,B),new i(K,d);case"Polygon":case"MultiPolygon":return K=x(v,m.type==="Polygon"?1:2,B),new a(K,d);case"GeometryCollection":for(ie=0,we=m.geometries.length;ie<we;ie++){var ke=f({geometry:m.geometries[ie],type:"Feature",properties:o.properties},d);ke&&S.push(ke)}return new Li(S);case"FeatureCollection":for(ie=0,we=m.features.length;ie<we;ie++){var et=f(m.features[ie],d);et&&S.push(et)}return new Li(S);default:throw new Error("Invalid GeoJSON object.")}}function p(o,d,m,v){return o?o(d,m):new Kn(m,v&&v.markersInheritOptions&&v)}function _(o){return new $e(o[1],o[0],o[2])}function x(o,d,m){for(var v=[],S=0,M=o.length,B;S<M;S++)B=d?x(o[S],d-1,m):(m||_)(o[S]),v.push(B);return v}function E(o,d){return o=ae(o),o.alt!==void 0?[R(o.lng,d),R(o.lat,d),R(o.alt,d)]:[R(o.lng,d),R(o.lat,d)]}function T(o,d,m,v){for(var S=[],M=0,B=o.length;M<B;M++)S.push(d?T(o[M],Qn(o[M])?0:d-1,m,v):E(o[M],v));return!d&&m&&S.length>0&&S.push(S[0].slice()),S}function b(o,d){return o.feature?l({},o.feature,{geometry:d}):D(d)}function D(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var F={toGeoJSON:function(o){return b(this,{type:"Point",coordinates:E(this.getLatLng(),o)})}};Kn.include(F),ls.include(F),wr.include(F),i.include({toGeoJSON:function(o){var d=!Qn(this._latlngs),m=T(this._latlngs,d?1:0,!1,o);return b(this,{type:(d?"Multi":"")+"LineString",coordinates:m})}}),a.include({toGeoJSON:function(o){var d=!Qn(this._latlngs),m=d&&!Qn(this._latlngs[0]),v=T(this._latlngs,m?2:d?1:0,!0,o);return d||(v=[v]),b(this,{type:(m?"Multi":"")+"Polygon",coordinates:v})}}),$i.include({toMultiPoint:function(o){var d=[];return this.eachLayer(function(m){d.push(m.toGeoJSON(o).geometry.coordinates)}),b(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(o){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(o);var m=d==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var M=S.toGeoJSON(o);if(m)v.push(M.geometry);else{var B=D(M);B.type==="FeatureCollection"?v.push.apply(v,B.features):v.push(B)}}}),m?b(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function z(o,d){return new h(o,d)}var V=z,Y=an.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,d,m){this._url=o,this._bounds=He(d),W(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Nt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Rt(this._image),this},bringToBack:function(){return this._map&&Yn(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=He(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",d=this._image=o?this._url:lt("img");if(Ie(d,"leaflet-image-layer"),this._zoomAnimated&&Ie(d,"leaflet-zoom-animated"),this.options.className&&Ie(d,this.options.className),d.onselectstart=A,d.onmousemove=A,d.onload=g(this.fire,this,"load"),d.onerror=g(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(o){var d=this._map.getZoomScale(o.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;O(this._image,m,d)},_reset:function(){var o=this._image,d=new Le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=d.getSize();_e(o,d.min),o.style.width=m.x+"px",o.style.height=m.y+"px"},_updateOpacity:function(){Qe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),ce=function(o,d,m){return new Y(o,d,m)},he=Y.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",d=this._image=o?this._url:lt("video");if(Ie(d,"leaflet-image-layer"),this._zoomAnimated&&Ie(d,"leaflet-zoom-animated"),this.options.className&&Ie(d,this.options.className),d.onselectstart=A,d.onmousemove=A,d.onloadeddata=g(this.fire,this,"load"),o){for(var m=d.getElementsByTagName("source"),v=[],S=0;S<m.length;S++)v.push(m[S].src);this._url=m.length>0?v:[d.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var B=lt("source");B.src=this._url[M],d.appendChild(B)}}});function re(o,d,m){return new he(o,d,m)}var Ke=Y.extend({_initImage:function(){var o=this._image=this._url;Ie(o,"leaflet-image-layer"),this._zoomAnimated&&Ie(o,"leaflet-zoom-animated"),this.options.className&&Ie(o,this.options.className),o.onselectstart=A,o.onmousemove=A}});function Ve(o,d,m){return new Ke(o,d,m)}var Ut=an.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,d){o&&(o instanceof $e||k(o))?(this._latlng=ae(o),W(this,d)):(W(this,o),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Qe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Qe(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Qe(this._container,0),this._removeTimeout=setTimeout(g(Nt,void 0,this._container),200)):Nt(this._container),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rt(this._container),this},bringToBack:function(){return this._map&&Yn(this._container),this},_prepareOpen:function(o){var d=this._source;if(!d._map)return!1;if(d instanceof Li){d=null;var m=this._source._layers;for(var v in m)if(m[v]._map){d=m[v];break}if(!d)return!1;this._source=d}if(!o)if(d.getCenter)o=d.getCenter();else if(d.getLatLng)o=d.getLatLng();else if(d.getBounds)o=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")o.innerHTML=d;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),d=le(this.options.offset),m=this._getAnchor();this._zoomAnimated?_e(this._container,o.add(m)):d=d.add(o).add(m);var v=this._containerBottom=-d.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});rt.include({_initOverlay:function(o,d,m,v){var S=d;return S instanceof o||(S=new o(v).setContent(d)),m&&S.setLatLng(m),S}}),an.include({_initOverlay:function(o,d,m,v){var S=m;return S instanceof o?(W(S,v),S._source=this):(S=d&&!v?d:new o(v,this),S.setContent(m)),S}});var kn=Ut.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Ut.prototype.openOn.call(this,o)},onAdd:function(o){Ut.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ki||this._source.on("preclick",Qi))},onRemove:function(o){Ut.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ki||this._source.off("preclick",Qi))},getEvents:function(){var o=Ut.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",d=this._container=lt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=lt("div",o+"-content-wrapper",d);if(this._contentNode=lt("div",o+"-content",m),gi(d),Eo(this._contentNode),Be(d,"contextmenu",Qi),this._tipContainer=lt("div",o+"-tip-container",d),this._tip=lt("div",o+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=lt("a",o+"-close-button",d);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Be(v,"click",function(S){fn(S),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,d=o.style;d.width="",d.whiteSpace="nowrap";var m=o.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),d.width=m+1+"px",d.whiteSpace="",d.height="";var v=o.offsetHeight,S=this.options.maxHeight,M="leaflet-popup-scrolled";S&&v>S?(d.height=S+"px",Ie(o,M)):vt(o,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),m=this._getAnchor();_e(this._container,d.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,d=parseInt(Ye(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+d,v=this._containerWidth,S=new te(this._containerLeft,-m-this._containerBottom);S._add(Dt(this._container));var M=o.layerPointToContainerPoint(S),B=le(this.options.autoPanPadding),G=le(this.options.autoPanPaddingTopLeft||B),K=le(this.options.autoPanPaddingBottomRight||B),ie=o.getSize(),we=0,ke=0;M.x+v+K.x>ie.x&&(we=M.x+v-ie.x+K.x),M.x-we-G.x<0&&(we=M.x-G.x),M.y+m+K.y>ie.y&&(ke=M.y+m-ie.y+K.y),M.y-ke-G.y<0&&(ke=M.y-G.y),(we||ke)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([we,ke]))}},_getAnchor:function(){return le(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bn=function(o,d){return new kn(o,d)};rt.mergeOptions({closePopupOnClick:!0}),rt.include({openPopup:function(o,d,m){return this._initOverlay(kn,o,d,m).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),an.include({bindPopup:function(o,d){return this._popup=this._initOverlay(kn,this._popup,o,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Li||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){mi(o);var d=o.layer||o.target;if(this._popup._source===d&&!(d instanceof ki)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=d,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var yt=Ut.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Ut.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Ut.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Ut.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",d=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var d,m,v=this._map,S=this._container,M=v.latLngToContainerPoint(v.getCenter()),B=v.layerPointToContainerPoint(o),G=this.options.direction,K=S.offsetWidth,ie=S.offsetHeight,we=le(this.options.offset),ke=this._getAnchor();G==="top"?(d=K/2,m=ie):G==="bottom"?(d=K/2,m=0):G==="center"?(d=K/2,m=ie/2):G==="right"?(d=0,m=ie/2):G==="left"?(d=K,m=ie/2):B.x<M.x?(G="right",d=0,m=ie/2):(G="left",d=K+(we.x+ke.x)*2,m=ie/2),o=o.subtract(le(d,m,!0)).add(we).add(ke),vt(S,"leaflet-tooltip-right"),vt(S,"leaflet-tooltip-left"),vt(S,"leaflet-tooltip-top"),vt(S,"leaflet-tooltip-bottom"),Ie(S,"leaflet-tooltip-"+G),_e(S,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Qe(this._container,o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(d)},_getAnchor:function(){return le(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gn=function(o,d){return new yt(o,d)};rt.include({openTooltip:function(o,d,m){return this._initOverlay(yt,o,d,m).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),an.include({bindTooltip:function(o,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yt,this._tooltip,o,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var d=o?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[d](m),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Li||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&(Be(d,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Be(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var d=o.latlng,m,v;this._tooltip.options.sticky&&o.originalEvent&&(m=this._map.mouseEventToContainerPoint(o.originalEvent),v=this._map.containerPointToLayerPoint(m),d=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(d)}});var Fn=as.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var d=o&&o.tagName==="DIV"?o:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ns(d),d.appendChild(m.html)):d.innerHTML=m.html!==!1?m.html:"",m.bgPos){var v=le(m.bgPos);d.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function cs(o){return new Fn(o)}as.Default=Xs;var Bi=an.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){W(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Nt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof te?o:new te(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var d=this.getPane().children,m=-o(-1/0,1/0),v=0,S=d.length,M;v<S;v++)M=d[v].style.zIndex,d[v]!==this._container&&M&&(m=o(m,+M));isFinite(m)&&(this.options.zIndex=m+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ae.ielt9){Qe(this._container,this.options.opacity);var o=+new Date,d=!1,m=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var M=Math.min(1,(o-S.loaded)/200);Qe(S.el,M),M<1?d=!0:(S.active?m=!0:this._onOpaqueTile(S),S.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),d&&(ve(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,d=this.options.maxZoom;if(o!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===o?(this._levels[m].el.style.zIndex=d-Math.abs(o-m),this._onUpdateLevel(m)):(Nt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var v=this._levels[o],S=this._map;return v||(v=this._levels[o]={},v.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=d,v.origin=S.project(S.unproject(S.getPixelOrigin()),o).round(),v.zoom=o,this._setZoomTransform(v,S.getCenter(),S.getZoom()),A(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var o,d,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)d=this._tiles[o],d.retain=d.current;for(o in this._tiles)if(d=this._tiles[o],d.current&&!d.active){var v=d.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var d in this._tiles)this._tiles[d].coords.z===o&&this._removeTile(d)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Nt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,d,m,v){var S=Math.floor(o/2),M=Math.floor(d/2),B=m-1,G=new te(+S,+M);G.z=+B;var K=this._tileCoordsToKey(G),ie=this._tiles[K];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),B>v?this._retainParent(S,M,B,v):!1)},_retainChildren:function(o,d,m,v){for(var S=2*o;S<2*o+2;S++)for(var M=2*d;M<2*d+2;M++){var B=new te(S,M);B.z=m+1;var G=this._tileCoordsToKey(B),K=this._tiles[G];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);m+1<v&&this._retainChildren(S,M,m+1,v)}},_resetView:function(o){var d=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var d=this.options;return d.minNativeZoom!==void 0&&o<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<o?d.maxNativeZoom:o},_setView:function(o,d,m,v){var S=Math.round(d);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var M=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||M)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(o),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(o,d)},_setZoomTransforms:function(o,d){for(var m in this._levels)this._setZoomTransform(this._levels[m],o,d)},_setZoomTransform:function(o,d,m){var v=this._map.getZoomScale(m,o.zoom),S=o.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(d,m)).round();Ae.any3d?O(o.el,S,v):_e(o.el,S)},_resetGrid:function(){var o=this._map,d=o.options.crs,m=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,d.wrapLng[0]],v).x/m.x),Math.ceil(o.project([0,d.wrapLng[1]],v).x/m.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([d.wrapLat[0],0],v).y/m.x),Math.ceil(o.project([d.wrapLat[1],0],v).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var d=this._map,m=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),v=d.getZoomScale(m,this._tileZoom),S=d.project(o,this._tileZoom).floor(),M=d.getSize().divideBy(v*2);return new Le(S.subtract(M),S.add(M))},_update:function(o){var d=this._map;if(d){var m=this._clampZoom(d.getZoom());if(o===void 0&&(o=d.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(o),S=this._pxBoundsToTileRange(v),M=S.getCenter(),B=[],G=this.options.keepBuffer,K=new Le(S.getBottomLeft().subtract([G,-G]),S.getTopRight().add([G,-G]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var we=this._tiles[ie].coords;(we.z!==this._tileZoom||!K.contains(new te(we.x,we.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(o,m);return}for(var ke=S.min.y;ke<=S.max.y;ke++)for(var et=S.min.x;et<=S.max.x;et++){var qn=new te(et,ke);if(qn.z=this._tileZoom,!!this._isValidTile(qn)){var An=this._tiles[this._tileCoordsToKey(qn)];An?An.current=!0:B.push(qn)}}if(B.sort(function(ii,No){return ii.distanceTo(M)-No.distanceTo(M)}),B.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fi=document.createDocumentFragment();for(et=0;et<B.length;et++)this._addTile(B[et],Fi);this._level.el.appendChild(Fi)}}}},_isValidTile:function(o){var d=this._map.options.crs;if(!d.infinite){var m=this._globalTileRange;if(!d.wrapLng&&(o.x<m.min.x||o.x>m.max.x)||!d.wrapLat&&(o.y<m.min.y||o.y>m.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(o);return He(this.options.bounds).overlaps(v)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var d=this._map,m=this.getTileSize(),v=o.scaleBy(m),S=v.add(m),M=d.unproject(v,o.z),B=d.unproject(S,o.z);return[M,B]},_tileCoordsToBounds:function(o){var d=this._tileCoordsToNwSe(o),m=new Et(d[0],d[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var d=o.split(":"),m=new te(+d[0],+d[1]);return m.z=+d[2],m},_removeTile:function(o){var d=this._tiles[o];d&&(Nt(d.el),delete this._tiles[o],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Ie(o,"leaflet-tile");var d=this.getTileSize();o.style.width=d.x+"px",o.style.height=d.y+"px",o.onselectstart=A,o.onmousemove=A,Ae.ielt9&&this.options.opacity<1&&Qe(o,this.options.opacity)},_addTile:function(o,d){var m=this._getTilePos(o),v=this._tileCoordsToKey(o),S=this.createTile(this._wrapCoords(o),g(this._tileReady,this,o));this._initTile(S),this.createTile.length<2&&je(g(this._tileReady,this,o,null,S)),_e(S,m),this._tiles[v]={el:S,coords:o,current:!0},d.appendChild(S),this.fire("tileloadstart",{tile:S,coords:o})},_tileReady:function(o,d,m){d&&this.fire("tileerror",{error:d,tile:m,coords:o});var v=this._tileCoordsToKey(o);m=this._tiles[v],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Qe(m.el,0),ve(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),d||(Ie(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ae.ielt9||!this._map._fadeAnimated?je(this._pruneTiles,this):setTimeout(g(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var d=new te(this._wrapX?N(o.x,this._wrapX):o.x,this._wrapY?N(o.y,this._wrapY):o.y);return d.z=o.z,d},_pxBoundsToTileRange:function(o){var d=this.getTileSize();return new Le(o.min.unscaleBy(d).floor(),o.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function ph(o){return new Bi(o)}var us=Bi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,d){this._url=o,d=W(this,d),d.detectRetina&&Ae.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,d){return this._url===o&&d===void 0&&(d=!0),this._url=o,d||this.redraw(),this},createTile:function(o,d){var m=document.createElement("img");return Be(m,"load",g(this._tileOnLoad,this,d,m)),Be(m,"error",g(this._tileOnError,this,d,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(o),m},getTileUrl:function(o){var d={r:Ae.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-o.y;this.options.tms&&(d.y=m),d["-y"]=m}return P(this._url,l(d,this.options))},_tileOnLoad:function(o,d){Ae.ielt9?setTimeout(g(o,this,null,d),0):o(null,d)},_tileOnError:function(o,d,m){var v=this.options.errorTileUrl;v&&d.getAttribute("src")!==v&&(d.src=v),o(m,d)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,d=this.options.maxZoom,m=this.options.zoomReverse,v=this.options.zoomOffset;return m&&(o=d-o),o+v},_getSubdomain:function(o){var d=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var o,d;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(d=this._tiles[o].el,d.onload=A,d.onerror=A,!d.complete)){d.src=ge;var m=this._tiles[o].coords;Nt(d),delete this._tiles[o],this.fire("tileabort",{tile:d,coords:m})}},_removeTile:function(o){var d=this._tiles[o];if(d)return d.el.setAttribute("src",ge),Bi.prototype._removeTile.call(this,o)},_tileReady:function(o,d,m){if(!(!this._map||m&&m.getAttribute("src")===ge))return Bi.prototype._tileReady.call(this,o,d,m)}});function G1(o,d){return new us(o,d)}var Z1=us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,d){this._url=o;var m=l({},this.defaultWmsParams);for(var v in d)v in this.options||(m[v]=d[v]);d=W(this,d);var S=d.detectRetina&&Ae.retina?2:1,M=this.getTileSize();m.width=M.x*S,m.height=M.y*S,this.wmsParams=m},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,us.prototype.onAdd.call(this,o)},getTileUrl:function(o){var d=this._tileCoordsToNwSe(o),m=this._crs,v=be(m.project(d[0]),m.project(d[1])),S=v.min,M=v.max,B=(this._wmsVersion>=1.3&&this._crs===os?[S.y,S.x,M.y,M.x]:[S.x,S.y,M.x,M.y]).join(","),G=us.prototype.getTileUrl.call(this,o);return G+me(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+B},setParams:function(o,d){return l(this.wmsParams,o),d||this.redraw(),this}});function Ry(o,d){return new Z1(o,d)}us.WMS=Z1,G1.wms=Ry;var Br=an.extend({options:{padding:.1},initialize:function(o){W(this,o),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,d){var m=this._map.getZoomScale(d,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,d),M=v.multiplyBy(-m).add(S).subtract(this._map._getNewPixelOrigin(o,d));Ae.any3d?O(this._container,M,m):_e(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,d=this._map.getSize(),m=this._map.containerPointToLayerPoint(d.multiplyBy(-o)).round();this._bounds=new Le(m,m.add(d.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Y1=Br.extend({options:{tolerance:0},getEvents:function(){var o=Br.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Br.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Be(o,"mousemove",this._onMouseMove,this),Be(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Be(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){ve(this._redrawRequest),delete this._ctx,Nt(this._container),ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var d in this._layers)o=this._layers[d],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var o=this._bounds,d=this._container,m=o.getSize(),v=Ae.retina?2:1;_e(d,o.min),d.width=v*m.x,d.height=v*m.y,d.style.width=m.x+"px",d.style.height=m.y+"px",Ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Br.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[C(o)]=o;var d=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var d=o._order,m=d.next,v=d.prev;m?m.prev=v:this._drawLast=v,v?v.next=m:this._drawFirst=m,delete o._order,delete this._layers[C(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var d=o.options.dashArray.split(/[, ]+/),m=[],v,S;for(S=0;S<d.length;S++){if(v=Number(d[S]),isNaN(v))return;m.push(v)}o.options._dashArray=m}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||je(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var d=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Le,this._redrawBounds.extend(o._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(o._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var d=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,d=this._redrawBounds;if(this._ctx.save(),d){var m=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)o=v.layer,(!d||o._pxBounds&&o._pxBounds.intersects(d))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,d){if(this._drawing){var m,v,S,M,B=o._parts,G=B.length,K=this._ctx;if(G){for(K.beginPath(),m=0;m<G;m++){for(v=0,S=B[m].length;v<S;v++)M=B[m][v],K[v?"lineTo":"moveTo"](M.x,M.y);d&&K.closePath()}this._fillStroke(K,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var d=o._point,m=this._ctx,v=Math.max(Math.round(o._radius),1),S=(Math.max(Math.round(o._radiusY),1)||v)/v;S!==1&&(m.save(),m.scale(1,S)),m.beginPath(),m.arc(d.x,d.y/S,v,0,Math.PI*2,!1),S!==1&&m.restore(),this._fillStroke(m,o)}},_fillStroke:function(o,d){var m=d.options;m.fill&&(o.globalAlpha=m.fillOpacity,o.fillStyle=m.fillColor||m.color,o.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(o.setLineDash&&o.setLineDash(d.options&&d.options._dashArray||[]),o.globalAlpha=m.opacity,o.lineWidth=m.weight,o.strokeStyle=m.color,o.lineCap=m.lineCap,o.lineJoin=m.lineJoin,o.stroke())},_onClick:function(o){for(var d=this._map.mouseEventToLayerPoint(o),m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(d)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(m))&&(v=m);this._fireEvent(v?[v]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,d)}},_handleMouseOut:function(o){var d=this._hoveredLayer;d&&(vt(this._container,"leaflet-interactive"),this._fireEvent([d],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,d){if(!this._mouseHoverThrottled){for(var m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(d)&&(v=m);v!==this._hoveredLayer&&(this._handleMouseOut(o),v&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([v],o,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(g(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,d,m){this._map._fireDOMEvent(d,m||d.type,o)},_bringToFront:function(o){var d=o._order;if(d){var m=d.next,v=d.prev;if(m)m.prev=v;else return;v?v.next=m:m&&(this._drawFirst=m),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(o)}},_bringToBack:function(o){var d=o._order;if(d){var m=d.next,v=d.prev;if(v)v.next=m;else return;m?m.prev=v:v&&(this._drawLast=v),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(o)}}});function X1(o){return Ae.canvas?new Y1(o):null}var Fa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Dy={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Br.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var d=o._container=Fa("shape");Ie(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",o._path=Fa("path"),d.appendChild(o._path),this._updateStyle(o),this._layers[C(o)]=o},_addPath:function(o){var d=o._container;this._container.appendChild(d),o.options.interactive&&o.addInteractiveTarget(d)},_removePath:function(o){var d=o._container;Nt(d),o.removeInteractiveTarget(d),delete this._layers[C(o)]},_updateStyle:function(o){var d=o._stroke,m=o._fill,v=o.options,S=o._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(d||(d=o._stroke=Fa("stroke")),S.appendChild(d),d.weight=v.weight+"px",d.color=v.color,d.opacity=v.opacity,v.dashArray?d.dashStyle=k(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=v.lineCap.replace("butt","flat"),d.joinstyle=v.lineJoin):d&&(S.removeChild(d),o._stroke=null),v.fill?(m||(m=o._fill=Fa("fill")),S.appendChild(m),m.color=v.fillColor||v.color,m.opacity=v.fillOpacity):m&&(S.removeChild(m),o._fill=null)},_updateCircle:function(o){var d=o._point.round(),m=Math.round(o._radius),v=Math.round(o._radiusY||m);this._setPath(o,o._empty()?"M0 0":"AL "+d.x+","+d.y+" "+m+","+v+" 0,"+65535*360)},_setPath:function(o,d){o._path.v=d},_bringToFront:function(o){Rt(o._container)},_bringToBack:function(o){Yn(o._container)}},uc=Ae.vml?Fa:Gn,za=Br.extend({_initContainer:function(){this._container=uc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=uc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Nt(this._container),ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var o=this._bounds,d=o.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,m.setAttribute("width",d.x),m.setAttribute("height",d.y)),_e(m,o.min),m.setAttribute("viewBox",[o.min.x,o.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(o){var d=o._path=uc("path");o.options.className&&Ie(d,o.options.className),o.options.interactive&&Ie(d,"leaflet-interactive"),this._updateStyle(o),this._layers[C(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Nt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[C(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var d=o._path,m=o.options;d&&(m.stroke?(d.setAttribute("stroke",m.color),d.setAttribute("stroke-opacity",m.opacity),d.setAttribute("stroke-width",m.weight),d.setAttribute("stroke-linecap",m.lineCap),d.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?d.setAttribute("stroke-dasharray",m.dashArray):d.removeAttribute("stroke-dasharray"),m.dashOffset?d.setAttribute("stroke-dashoffset",m.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),m.fill?(d.setAttribute("fill",m.fillColor||m.color),d.setAttribute("fill-opacity",m.fillOpacity),d.setAttribute("fill-rule",m.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(o,d){this._setPath(o,dr(o._parts,d))},_updateCircle:function(o){var d=o._point,m=Math.max(Math.round(o._radius),1),v=Math.max(Math.round(o._radiusY),1)||m,S="a"+m+","+v+" 0 1,0 ",M=o._empty()?"M0 0":"M"+(d.x-m)+","+d.y+S+m*2+",0 "+S+-m*2+",0 ";this._setPath(o,M)},_setPath:function(o,d){o._path.setAttribute("d",d)},_bringToFront:function(o){Rt(o._path)},_bringToBack:function(o){Yn(o._path)}});Ae.vml&&za.include(Dy);function Q1(o){return Ae.svg||Ae.vml?new za(o):null}rt.include({getRenderer:function(o){var d=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var d=this._paneRenderers[o];return d===void 0&&(d=this._createRenderer({pane:o}),this._paneRenderers[o]=d),d},_createRenderer:function(o){return this.options.preferCanvas&&X1(o)||Q1(o)}});var K1=a.extend({initialize:function(o,d){a.prototype.initialize.call(this,this._boundsToLatLngs(o),d)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=He(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Ly(o,d){return new K1(o,d)}za.create=uc,za.pointsToPath=dr,h.geometryToLayer=f,h.coordsToLatLng=_,h.coordsToLatLngs=x,h.latLngToCoords=E,h.latLngsToCoords=T,h.getFeature=b,h.asFeature=D,rt.mergeOptions({boxZoom:!0});var q1=Xn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Nt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),En(),Ne(),this._startPoint=this._map.mouseEventToContainerPoint(o),Be(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var d=new Le(this._point,this._startPoint),m=d.getSize();_e(this._box,d.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Nt(this._box),vt(this._container,"leaflet-crosshair")),Ws(),bt(),ye(document,{contextmenu:mi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(g(this._resetState,this),0);var d=new Et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});rt.addInitHook("addHandler","boxZoom",q1),rt.mergeOptions({doubleClickZoom:!0});var $1=Xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var d=this._map,m=d.getZoom(),v=d.options.zoomDelta,S=o.originalEvent.shiftKey?m-v:m+v;d.options.doubleClickZoom==="center"?d.setZoom(S):d.setZoomAround(o.containerPoint,S)}});rt.addInitHook("addHandler","doubleClickZoom",$1),rt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var J1=Xn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new _r(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vt(this._map._container,"leaflet-grab"),vt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=He(this._map.options.maxBounds);this._offsetLimit=be(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var d=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(d),this._prunePositions(d)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,d){return o-(o-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;o.x<d.min.x&&(o.x=this._viscousLimit(o.x,d.min.x)),o.y<d.min.y&&(o.y=this._viscousLimit(o.y,d.min.y)),o.x>d.max.x&&(o.x=this._viscousLimit(o.x,d.max.x)),o.y>d.max.y&&(o.y=this._viscousLimit(o.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,d=Math.round(o/2),m=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-d+m)%o+d-m,M=(v+d+m)%o-d-m,B=Math.abs(S+m)<Math.abs(M+m)?S:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=B},_onDragEnd:function(o){var d=this._map,m=d.options,v=!m.inertia||o.noInertia||this._times.length<2;if(d.fire("dragend",o),v)d.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,B=m.easeLinearity,G=S.multiplyBy(B/M),K=G.distanceTo([0,0]),ie=Math.min(m.inertiaMaxSpeed,K),we=G.multiplyBy(ie/K),ke=ie/(m.inertiaDeceleration*B),et=we.multiplyBy(-ke/2).round();!et.x&&!et.y?d.fire("moveend"):(et=d._limitOffset(et,d.options.maxBounds),je(function(){d.panBy(et,{duration:ke,easeLinearity:B,noMoveStart:!0,animate:!0})}))}}});rt.addInitHook("addHandler","dragging",J1),rt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var e0=Xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Be(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,d=document.documentElement,m=o.scrollTop||d.scrollTop,v=o.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(v,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var d=this._panKeys={},m=this.keyCodes,v,S;for(v=0,S=m.left.length;v<S;v++)d[m.left[v]]=[-1*o,0];for(v=0,S=m.right.length;v<S;v++)d[m.right[v]]=[o,0];for(v=0,S=m.down.length;v<S;v++)d[m.down[v]]=[0,o];for(v=0,S=m.up.length;v<S;v++)d[m.up[v]]=[0,-1*o]},_setZoomDelta:function(o){var d=this._zoomKeys={},m=this.keyCodes,v,S;for(v=0,S=m.zoomIn.length;v<S;v++)d[m.zoomIn[v]]=o;for(v=0,S=m.zoomOut.length;v<S;v++)d[m.zoomOut[v]]=-o},_addHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var d=o.keyCode,m=this._map,v;if(d in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(v=this._panKeys[d],o.shiftKey&&(v=le(v).multiplyBy(3)),m.options.maxBounds&&(v=m._limitOffset(le(v),m.options.maxBounds)),m.options.worldCopyJump){var S=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(v)));m.panTo(S)}else m.panBy(v)}else if(d in this._zoomKeys)m.setZoom(m.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;mi(o)}}});rt.addInitHook("addHandler","keyboard",e0),rt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var t0=Xn.extend({addHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var d=ss(o),m=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var v=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g(this._performZoom,this),v),mi(o)},_performZoom:function(){var o=this._map,d=o.getZoom(),m=this._map.options.zoomSnap||0;o._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,M=m?Math.ceil(S/m)*m:S,B=o._limitZoom(d+(this._delta>0?M:-M))-d;this._delta=0,this._startTime=null,B&&(o.options.scrollWheelZoom==="center"?o.setZoom(d+B):o.setZoomAround(this._lastMousePos,d+B))}});rt.addInitHook("addHandler","scrollWheelZoom",t0);var Py=600;rt.mergeOptions({tapHold:Ae.touchNative&&Ae.safari&&Ae.mobile,tapTolerance:15});var n0=Xn.extend({addHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var d=o.touches[0];this._startPos=this._newPos=new te(d.clientX,d.clientY),this._holdTimeout=setTimeout(g(function(){this._cancel(),this._isTapValid()&&(Be(document,"touchend",fn),Be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Py),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ye(document,"touchend",fn),ye(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)},_onMove:function(o){var d=o.touches[0];this._newPos=new te(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,d){var m=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});m._simulated=!0,d.target.dispatchEvent(m)}});rt.addInitHook("addHandler","tapHold",n0),rt.mergeOptions({touchZoom:Ae.touch,bounceAtZoomLimits:!0});var i0=Xn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var d=this._map;if(!(!o.touches||o.touches.length!==2||d._animatingZoom||this._zooming)){var m=d.mouseEventToContainerPoint(o.touches[0]),v=d.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(m.add(v)._divideBy(2))),this._startDist=m.distanceTo(v),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),fn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var d=this._map,m=d.mouseEventToContainerPoint(o.touches[0]),v=d.mouseEventToContainerPoint(o.touches[1]),S=m.distanceTo(v)/this._startDist;if(this._zoom=d.getScaleZoom(S,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&S<1||this._zoom>d.getMaxZoom()&&S>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var M=m._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&M.x===0&&M.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),ve(this._animRequest);var B=g(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=je(B,this,!0),fn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ve(this._animRequest),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});rt.addInitHook("addHandler","touchZoom",i0),rt.BoxZoom=q1,rt.DoubleClickZoom=$1,rt.Drag=J1,rt.Keyboard=e0,rt.ScrollWheelZoom=t0,rt.TapHold=n0,rt.TouchZoom=i0,n.Bounds=Le,n.Browser=Ae,n.CRS=$t,n.Canvas=Y1,n.Circle=ls,n.CircleMarker=wr,n.Class=Xe,n.Control=_i,n.DivIcon=Fn,n.DivOverlay=Ut,n.DomEvent=Pn,n.DomUtil=on,n.Draggable=_r,n.Evented=Oe,n.FeatureGroup=Li,n.GeoJSON=h,n.GridLayer=Bi,n.Handler=Xn,n.Icon=as,n.ImageOverlay=Y,n.LatLng=$e,n.LatLngBounds=Et,n.Layer=an,n.LayerGroup=$i,n.LineUtil=cc,n.Map=rt,n.Marker=Kn,n.Mixin=oc,n.Path=ki,n.Point=te,n.PolyUtil=Ra,n.Polygon=a,n.Polyline=i,n.Popup=kn,n.PosAnimation=Oa,n.Projection=Pa,n.Rectangle=K1,n.Renderer=Br,n.SVG=za,n.SVGOverlay=Ke,n.TileLayer=us,n.Tooltip=yt,n.Transformation=nn,n.Util=qe,n.VideoOverlay=he,n.bind=g,n.bounds=be,n.canvas=X1,n.circle=I,n.circleMarker=ut,n.control=Zs,n.divIcon=cs,n.extend=l,n.featureGroup=Pi,n.geoJSON=z,n.geoJson=V,n.gridLayer=ph,n.icon=ka,n.imageOverlay=ce,n.latLng=ae,n.latLngBounds=He,n.layerGroup=ni,n.map=rc,n.marker=fh,n.point=le,n.polygon=c,n.polyline=s,n.popup=Bn,n.rectangle=Ly,n.setOptions=W,n.stamp=C,n.svg=Q1,n.svgOverlay=Ve,n.tileLayer=G1,n.tooltip=gn,n.transformation=Ni,n.version=r,n.videoOverlay=re;var ky=window.L;n.noConflict=function(){return window.L=ky,this},window.L=n})})(Zd,Zd.exports);var Av=Zd.exports;const ri=Ru(Av);class Iv{constructor(e){this.V=e,this.adj=new Array(e).fill().map(()=>[]),this.parent=new Array(e).fill(-1),this.nodeCategories=new Array(e).fill("default"),this.nodeBuilding=new Array(e).fill(""),this.arrayPath=[]}addEdge(e,n,r){this.adj[e].push([n,r]),this.adj[n].push([e,r])}setNodeCategory(e,n){this.nodeCategories[e]=n}setNodeBuilding(e,n){this.nodeBuilding[e]=n}findClosestCategory(e,n,r,l){const u=new Array(this.V).fill(Number.POSITIVE_INFINITY),g=new Set;for(g.add([0,e]),u[e]=0;g.size>0;){const y=[...g].reduce((A,R)=>A[0]<R[0]?A:R);g.delete(y);const N=y[1];for(const[A,R]of this.adj[N])!r&&this.nodeCategories[A]==="elevator"||!l&&this.nodeCategories[Qu]==="emergencyExit"||u[A]>u[N]+R&&(u[A]!==Number.POSITIVE_INFINITY&&g.delete([u[A],A]),u[A]=u[N]+R,g.add([u[A],A]),this.parent[A]=N)}let w=-1,C=Number.POSITIVE_INFINITY;for(let y=0;y<this.V;y++)u[y]<C&&this.nodeCategories[y]===n&&(C=u[y],w=y);return C!==Number.POSITIVE_INFINITY?(console.log(`Closest Node of Category ${n} from Room ${e} is Room ${w} at a distance of ${C}.`),console.log("Path: "),this.printPath(w),console.log("Array Path:",this.arrayPath)):console.log(`No node of Category ${n} found from Room ${e}`),[C,w]}printPath(e){if(this.arrayPath=[],console.log(`Current Node: ${e}`),e===-1){console.log("Terminating recursion");return}this.printPath(this.parent[e]),console.log(`${e} -> `),this.arrayPath.push(Number(e))}shortestPath(e,n,r,l){const u=new Array(this.V).fill(Number.POSITIVE_INFINITY),g=new Set;for(g.add([0,e]),u[e]=0;g.size>0;){const w=[...g].reduce((y,N)=>y[0]<N[0]?y:N);g.delete(w);const C=w[1];for(const[y,N]of this.adj[C])!l&&this.nodeCategories[y]==="emergencyExit"||!r&&this.nodeCategories[y]==="elevator"||u[y]>u[C]+N&&(u[y]!==Number.POSITIVE_INFINITY&&g.delete([u[y],y]),u[y]=u[C]+N,g.add([u[y],y]),this.parent[y]=C)}u[n]===Number.POSITIVE_INFINITY?console.log(`No node found at Room ${n} from Room ${e}`):(console.log(`Room ${n} from Room ${e} is ${u[n]} units away.`),console.log("Path: "),this.printPath(n))}}function _p(t,e,n,r,l){if(J.parent=new Array(Qu).fill(-1),J.arrayPath=[],t==="enterDestination")return J.shortestPath(e,n,r,l),J.arrayPath;if(t==="enterFindFacility")return J.findClosestCategory(e,n,r,l),J.arrayPath}function yp(t,e,n,r,l){if(J.parent=new Array(Qu).fill(-1),J.arrayPath=[],t==="enterDestination")return J.shortestPath(e,n,r,l),J.nodeBuilding[J.arrayPath[0]];if(t==="enterFindFacility")return J.findClosestCategory(e,n,r,l),J.nodeBuilding[J.arrayPath[0]]}const Qu=1e4,J=new Iv(Qu);J.setNodeCategory(46,"cr");J.setNodeCategory(56,"cr");J.setNodeCategory(1,"CEA: Faculty Office");J.addEdge(0,1,1);J.addEdge(0,3,1);J.addEdge(3,2,1);J.addEdge(3,6,1);J.addEdge(4,6,1);J.addEdge(5,6,1);J.addEdge(7,6,1);J.addEdge(7,11,1);J.addEdge(12,11,1);J.addEdge(12,13,1);J.addEdge(7,8,1);J.addEdge(9,8,1);J.addEdge(10,8,1);J.addEdge(10,14,1);J.addEdge(10,16,1);J.addEdge(15,16,1);J.addEdge(19,16,1);J.addEdge(19,18,1);J.addEdge(19,20,1);J.addEdge(19,22,1);J.addEdge(21,22,1);J.addEdge(23,22,1);J.addEdge(24,22,1);J.addEdge(24,25,1);J.addEdge(26,25,1);J.addEdge(27,25,1);J.addEdge(24,28,1);J.addEdge(29,28,1);J.addEdge(30,28,1);J.addEdge(31,28,1);J.addEdge(31,33,1);J.addEdge(32,33,1);J.addEdge(34,33,1);J.addEdge(34,35,1);J.addEdge(34,37,1);J.addEdge(36,37,1);J.addEdge(38,37,1);J.addEdge(38,46,1);J.addEdge(38,47,1);J.addEdge(38,48,1);J.addEdge(38,39,1);J.addEdge(40,39,1);J.addEdge(41,39,1);J.addEdge(41,45,1);J.addEdge(41,42,1);J.addEdge(43,42,1);J.addEdge(44,43,1);J.addEdge(31,49,1);J.addEdge(50,49,1);J.addEdge(51,49,1);J.addEdge(51,52,1);J.addEdge(51,53,1);J.addEdge(54,53,1);J.addEdge(55,53,1);J.addEdge(55,56,1);J.addEdge(55,57,1);J.addEdge(58,57,1);J.addEdge(58,59,1);J.addEdge(60,53,1);J.addEdge(60,61,1);J.addEdge(60,82,1);J.addEdge(62,82,1);J.addEdge(17,82,1);J.addEdge(63,17,1);J.addEdge(17,65,1);J.addEdge(66,65,1);J.addEdge(67,65,1);J.addEdge(67,68,1);J.addEdge(67,69,1);J.addEdge(70,69,1);J.addEdge(71,69,1);J.addEdge(72,69,1);J.addEdge(72,73,1);J.addEdge(72,74,.5);J.addEdge(75,74,1);J.addEdge(76,74,.5);J.addEdge(77,76,1);J.addEdge(78,76,1);J.addEdge(78,79,1);J.addEdge(78,80,1);J.addEdge(81,80,1);J.addEdge(16,80,2);J.addEdge(77,100,1);J.addEdge(101,100,1);J.addEdge(101,102,1);J.addEdge(103,102,1);J.addEdge(104,102,1);J.addEdge(104,105,1);J.addEdge(104,106,1);J.addEdge(107,106,1);J.addEdge(108,106,1);J.addEdge(108,109,1);J.addEdge(108,110,1);J.addEdge(111,110,1);J.addEdge(112,110,1);J.addEdge(112,113,1);J.addEdge(112,114,1);J.addEdge(115,114,1);J.addEdge(116,114,1);J.addEdge(116,117,1);J.addEdge(116,118,1);J.addEdge(119,118,1);J.addEdge(119,120,1);J.addEdge(121,120,1);for(let t=0;t<=100;t++)J.setNodeBuilding(t,"science2ndFloor");for(let t=100;t<=130;t++)J.setNodeBuilding(t,"BRS2ndFloor");var Ee;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var xp=new Map([[Ee.QR_CODE,"QR_CODE"],[Ee.AZTEC,"AZTEC"],[Ee.CODABAR,"CODABAR"],[Ee.CODE_39,"CODE_39"],[Ee.CODE_93,"CODE_93"],[Ee.CODE_128,"CODE_128"],[Ee.DATA_MATRIX,"DATA_MATRIX"],[Ee.MAXICODE,"MAXICODE"],[Ee.ITF,"ITF"],[Ee.EAN_13,"EAN_13"],[Ee.EAN_8,"EAN_8"],[Ee.PDF_417,"PDF_417"],[Ee.RSS_14,"RSS_14"],[Ee.RSS_EXPANDED,"RSS_EXPANDED"],[Ee.UPC_A,"UPC_A"],[Ee.UPC_E,"UPC_E"],[Ee.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),wp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(wp||(wp={}));function Tv(t){return Object.values(Ee).includes(t)}var Rs;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Rs||(Rs={}));var nr=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Rs.SCAN_TYPE_CAMERA,Rs.SCAN_TYPE_FILE],t}(),G_=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!xp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,xp.get(e))},t}(),vp=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Yd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Yd||(Yd={}));var Z_=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Yd.UNKWOWN_ERROR}},t}(),Y_=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Er(t){return typeof t>"u"||t===null}function Nv(t,e,n){return t>n?n:t<e?e:t}var jo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),At=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Cp=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),X_=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),g=Object.keys(e),w=0,C=g;w<C.length;w++){var y=C[w];if(u.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t}(),Xd={exports:{}};(function(t,e){(function(n,r){r(e)})(Oo,function(n){function r(I){return I==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,i){I.__proto__=i}||function(I,i){for(var s in i)i.hasOwnProperty(s)&&(I[s]=i[s])};function u(I,i){l(I,i);function s(){this.constructor=I}I.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function g(I,i){var s=Object.setPrototypeOf;s?s(I,i):I.__proto__=i}function w(I,i){i===void 0&&(i=I.constructor);var s=Error.captureStackTrace;s&&s(I,i)}var C=function(I){u(i,I);function i(s){var a=this.constructor,c=I.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),g(c,a.prototype),w(c),c}return i}(Error);class y extends C{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}y.kind="Exception";class N extends y{}N.kind="ArgumentException";class A extends y{}A.kind="IllegalArgumentException";class R{constructor(i){if(this.binarizer=i,i===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,a,c){const h=this.binarizer.getLuminanceSource().crop(i,s,a,c);return new R(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class H extends y{static getChecksumInstance(){return new H}}H.kind="ChecksumException";class Z{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(i,s,a,c,h){for(;h--;)a[c++]=i[s++]}static currentTimeMillis(){return Date.now()}}class me extends y{}me.kind="IndexOutOfBoundsException";class U extends me{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}U.kind="ArrayIndexOutOfBoundsException";class P{static fill(i,s){for(let a=0,c=i.length;a<c;a++)i[a]=s}static fillWithin(i,s,a,c){P.rangeCheck(i.length,s,a);for(let h=s;h<a;h++)i[h]=c}static rangeCheck(i,s,a){if(s>a)throw new A("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new U(s);if(a>i)throw new U(a)}static asList(...i){return i}static create(i,s,a){return Array.from({length:i}).map(h=>Array.from({length:s}).fill(a))}static createInt32Array(i,s,a){return Array.from({length:i}).map(h=>Int32Array.from({length:s}).fill(a))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let a=0,c=i.length;a<c;a++)if(i[a]!==s[a])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const a of i)s=31*s+a;return s}static fillUint8Array(i,s){for(let a=0;a!==i.length;a++)i[a]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const a=new Uint8Array(s);return a.set(i),a}return i.slice(0,s)}static copyOfRange(i,s,a){const c=a-s,h=new Int32Array(c);return W.arraycopy(i,s,h,0,c),h}static binarySearch(i,s,a){a===void 0&&(a=P.numberComparator);let c=0,h=i.length-1;for(;c<=h;){const f=h+c>>1,p=a(s,i[f]);if(p>0)c=f+1;else if(p<0)h=f-1;else return f}return-c-1}static numberComparator(i,s){return i-s}}class k{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let a=31;return s=i<<16,s!==0&&(a-=16,i=s),s=i<<8,s!==0&&(a-=8,i=s),s=i<<4,s!==0&&(a-=4,i=s),s=i<<2,s!==0&&(a-=2,i=s),a-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=q.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=q.makeArray(i);W.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const a=this.bits;let c=Math.floor(i/32),h=a[c];h&=~((1<<(i&31))-1);const f=a.length;for(;h===0;){if(++c===f)return s;h=a[c]}const p=c*32+k.numberOfTrailingZeros(h);return p>s?s:p}getNextUnset(i){const s=this.size;if(i>=s)return s;const a=this.bits;let c=Math.floor(i/32),h=~a[c];h&=~((1<<(i&31))-1);const f=a.length;for(;h===0;){if(++c===f)return s;h=~a[c]}const p=c*32+k.numberOfTrailingZeros(h);return p>s?s:p}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new A;if(s===i)return;s--;const a=Math.floor(i/32),c=Math.floor(s/32),h=this.bits;for(let f=a;f<=c;f++){const p=f>a?0:i&31,x=(2<<(f<c?31:s&31))-(1<<p);h[f]|=x}}clear(){const i=this.bits.length,s=this.bits;for(let a=0;a<i;a++)s[a]=0}isRange(i,s,a){if(s<i||i<0||s>this.size)throw new A;if(s===i)return!0;s--;const c=Math.floor(i/32),h=Math.floor(s/32),f=this.bits;for(let p=c;p<=h;p++){const _=p>c?0:i&31,E=(2<<(p<h?31:s&31))-(1<<_)&4294967295;if((f[p]&E)!==(a?E:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((i>>a-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(i.get(a))}xor(i){if(this.size!==i.size)throw new A("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=i.bits[a]}toBytes(i,s,a,c){for(let h=0;h<c;h++){let f=0;for(let p=0;p<8;p++)this.get(i)&&(f|=1<<7-p),i++;s[a+h]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let h=0;h<a;h++){let f=c[h];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,i[s-h]=f}if(this.size!==a*32){const h=a*32-this.size;let f=i[0]>>>h;for(let p=1;p<a;p++){const _=i[p];f|=_<<32-h,i[p-1]=f,f=_>>>h}i[a-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof q))return!1;const s=i;return this.size===s.size&&P.equals(this.bits,s.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let i="";for(let s=0,a=this.size;s<a;s++)s&7||(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new q(this.size,this.bits.slice())}}var ge;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ge||(ge={}));var ue=ge;class Q extends y{static getFormatInstance(){return new Q}}Q.kind="FormatException";var fe;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(fe||(fe={}));class ee{constructor(i,s,a,...c){this.valueIdentifier=i,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,ee.VALUE_IDENTIFIER_TO_ECI.set(i,this),ee.NAME_TO_ECI.set(a,this);const h=this.values;for(let f=0,p=h.length;f!==p;f++){const _=h[f];ee.VALUES_TO_ECI.set(_,this)}for(const f of c)ee.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new Q("incorect value");const s=ee.VALUES_TO_ECI.get(i);if(s===void 0)throw new Q("incorect value");return s}static getCharacterSetECIByName(i){const s=ee.NAME_TO_ECI.get(i);if(s===void 0)throw new Q("incorect value");return s}equals(i){if(!(i instanceof ee))return!1;const s=i;return this.getName()===s.getName()}}ee.VALUE_IDENTIFIER_TO_ECI=new Map,ee.VALUES_TO_ECI=new Map,ee.NAME_TO_ECI=new Map,ee.Cp437=new ee(fe.Cp437,Int32Array.from([0,2]),"Cp437"),ee.ISO8859_1=new ee(fe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ee.ISO8859_2=new ee(fe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ee.ISO8859_3=new ee(fe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ee.ISO8859_4=new ee(fe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ee.ISO8859_5=new ee(fe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ee.ISO8859_6=new ee(fe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ee.ISO8859_7=new ee(fe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ee.ISO8859_8=new ee(fe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ee.ISO8859_9=new ee(fe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ee.ISO8859_10=new ee(fe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ee.ISO8859_11=new ee(fe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ee.ISO8859_13=new ee(fe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ee.ISO8859_14=new ee(fe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ee.ISO8859_15=new ee(fe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ee.ISO8859_16=new ee(fe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ee.SJIS=new ee(fe.SJIS,20,"SJIS","Shift_JIS"),ee.Cp1250=new ee(fe.Cp1250,21,"Cp1250","windows-1250"),ee.Cp1251=new ee(fe.Cp1251,22,"Cp1251","windows-1251"),ee.Cp1252=new ee(fe.Cp1252,23,"Cp1252","windows-1252"),ee.Cp1256=new ee(fe.Cp1256,24,"Cp1256","windows-1256"),ee.UnicodeBigUnmarked=new ee(fe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ee.UTF8=new ee(fe.UTF8,26,"UTF8","UTF-8"),ee.ASCII=new ee(fe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ee.Big5=new ee(fe.Big5,28,"Big5"),ee.GB18030=new ee(fe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ee.EUC_KR=new ee(fe.EUC_KR,30,"EUC_KR","EUC-KR");class ze extends y{}ze.kind="UnsupportedOperationException";class je{static decode(i,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(i,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(i,a):new TextDecoder(a).decode(i)}static shouldDecodeOnFallback(i){return!je.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(i,a):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof ee?i:ee.getCharacterSetECIByName(i)}static decodeFallback(i,s){const a=this.encodingCharacterSet(s);if(je.isDecodeFallbackSupported(a)){let c="";for(let h=0,f=i.length;h<f;h++){let p=i[h].toString(16);p.length<2&&(p="0"+p),c+="%"+p}return decodeURIComponent(c)}if(a.equals(ee.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ze(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(ee.UTF8)||i.equals(ee.ISO8859_1)||i.equals(ee.ASCII)}static encodeFallback(i){const a=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let h=0;h<a.length;h++)c.push(a[h].charCodeAt(0));return new Uint8Array(c)}}class ve{static castAsNonUtf8Char(i,s=null){const a=s?s.getName():this.ISO88591;return je.decode(new Uint8Array([i]),a)}static guessEncoding(i,s){if(s!=null&&s.get(ue.CHARACTER_SET)!==void 0)return s.get(ue.CHARACTER_SET).toString();const a=i.length;let c=!0,h=!0,f=!0,p=0,_=0,x=0,E=0,T=0,b=0,D=0,F=0,z=0,V=0,Y=0;const ce=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let he=0;he<a&&(c||h||f);he++){const re=i[he]&255;f&&(p>0?re&128?p--:f=!1:re&128&&(re&64?(p++,re&32?(p++,re&16?(p++,re&8?f=!1:E++):x++):_++):f=!1)),c&&(re>127&&re<160?c=!1:re>159&&(re<192||re===215||re===247)&&Y++),h&&(T>0?re<64||re===127||re>252?h=!1:T--:re===128||re===160||re>239?h=!1:re>160&&re<224?(b++,F=0,D++,D>z&&(z=D)):re>127?(T++,D=0,F++,F>V&&(V=F)):(D=0,F=0))}return f&&p>0&&(f=!1),h&&T>0&&(h=!1),f&&(ce||_+x+E>0)?ve.UTF8:h&&(ve.ASSUME_SHIFT_JIS||z>=3||V>=3)?ve.SHIFT_JIS:c&&h?z===2&&b===2||Y*10>=a?ve.SHIFT_JIS:ve.ISO88591:c?ve.ISO88591:h?ve.SHIFT_JIS:f?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let a=-1;function c(f,p,_,x,E,T){if(f==="%%")return"%";if(s[++a]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let b=E?parseInt(E.substr(1)):void 0,D;switch(T){case"s":D=s[a];break;case"c":D=s[a][0];break;case"f":D=parseFloat(s[a]).toFixed(f);break;case"p":D=parseFloat(s[a]).toPrecision(f);break;case"e":D=parseFloat(s[a]).toExponential(f);break;case"x":D=parseInt(s[a]).toString(b||16);break;case"d":D=parseFloat(parseInt(s[a],b||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(b);let F=parseInt(_),z=_&&_[0]+""=="0"?"0":" ";for(;D.length<F;)D=p!==void 0?D+z:z+D;return D}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,c)}static getBytes(i,s){return je.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}ve.SHIFT_JIS=ee.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=ee.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=ee.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class qe{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,a){for(let c=s;s<s+a;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class Xe{constructor(i,s,a,c){if(this.width=i,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=i),this.height=s,i<1||s<1)throw new A("Both dimensions must be greater than 0");a==null&&(a=Math.floor((i+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,a=i[0].length,c=new Xe(a,s);for(let h=0;h<s;h++){const f=i[h];for(let p=0;p<a;p++)f[p]&&c.set(p,h)}return c}static parseFromString(i,s,a){if(i===null)throw new A("stringRepresentation cannot be null");const c=new Array(i.length);let h=0,f=0,p=-1,_=0,x=0;for(;x<i.length;)if(i.charAt(x)===`
`||i.charAt(x)==="\r"){if(h>f){if(p===-1)p=h-f;else if(h-f!==p)throw new A("row lengths do not match");f=h,_++}x++}else if(i.substring(x,x+s.length)===s)x+=s.length,c[h]=!0,h++;else if(i.substring(x,x+a.length)===a)x+=a.length,c[h]=!1,h++;else throw new A("illegal character encountered: "+i.substring(x));if(h>f){if(p===-1)p=h-f;else if(h-f!==p)throw new A("row lengths do not match");_++}const E=new Xe(p,_);for(let T=0;T<h;T++)c[T]&&E.set(Math.floor(T%p),Math.floor(T/p));return E}get(i,s){const a=s*this.rowSize+Math.floor(i/32);return(this.bits[a]>>>(i&31)&1)!==0}set(i,s){const a=s*this.rowSize+Math.floor(i/32);this.bits[a]|=1<<(i&31)&4294967295}unset(i,s){const a=s*this.rowSize+Math.floor(i/32);this.bits[a]&=~(1<<(i&31)&4294967295)}flip(i,s){const a=s*this.rowSize+Math.floor(i/32);this.bits[a]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new A("input matrix dimensions do not match");const s=new q(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let h=0,f=this.height;h<f;h++){const p=h*a,_=i.getRow(h,s).getBitArray();for(let x=0;x<a;x++)c[p+x]^=_[x]}}clear(){const i=this.bits,s=i.length;for(let a=0;a<s;a++)i[a]=0}setRegion(i,s,a,c){if(s<0||i<0)throw new A("Left and top must be nonnegative");if(c<1||a<1)throw new A("Height and width must be at least 1");const h=i+a,f=s+c;if(f>this.height||h>this.width)throw new A("The region must fit inside the matrix");const p=this.rowSize,_=this.bits;for(let x=s;x<f;x++){const E=x*p;for(let T=i;T<h;T++)_[E+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new q(this.width):s.clear();const a=this.rowSize,c=this.bits,h=i*a;for(let f=0;f<a;f++)s.setBulk(f*32,c[h+f]);return s}setRow(i,s){W.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let a=new q(i),c=new q(i);for(let h=0,f=Math.floor((s+1)/2);h<f;h++)a=this.getRow(h,a),c=this.getRow(s-1-h,c),a.reverse(),c.reverse(),this.setRow(h,c),this.setRow(s-1-h,a)}getEnclosingRectangle(){const i=this.width,s=this.height,a=this.rowSize,c=this.bits;let h=i,f=s,p=-1,_=-1;for(let x=0;x<s;x++)for(let E=0;E<a;E++){const T=c[x*a+E];if(T!==0){if(x<f&&(f=x),x>_&&(_=x),E*32<h){let b=0;for(;!(T<<31-b&4294967295);)b++;E*32+b<h&&(h=E*32+b)}if(E*32+31>p){let b=31;for(;!(T>>>b);)b--;E*32+b>p&&(p=E*32+b)}}}return p<h||_<f?null:Int32Array.from([h,f,p-h+1,_-f+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/i;let h=a%i*32;const f=s[a];let p=0;for(;!(f<<31-p&4294967295);)p++;return h+=p,Int32Array.from([h,c])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/i);let h=Math.floor(a%i)*32;const f=s[a];let p=31;for(;!(f>>>p);)p--;return h+=p,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Xe))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&P.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+P.hashCode(this.bits),i}toString(i="X ",s="  ",a=`
`){return this.buildToString(i,s,a)}buildToString(i,s,a){let c=new qe;for(let h=0,f=this.height;h<f;h++){for(let p=0,_=this.width;p<_;p++)c.append(this.get(p,h)?i:s);c.append(a)}return c.toString()}clone(){return new Xe(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends y{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class De extends Z{constructor(i){super(i),this.luminances=De.EMPTY,this.buckets=new Int32Array(De.LUMINANCE_BUCKETS)}getBlackRow(i,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new q(c):s.clear(),this.initArrays(c);const h=a.getRow(i,this.luminances),f=this.buckets;for(let _=0;_<c;_++)f[(h[_]&255)>>De.LUMINANCE_SHIFT]++;const p=De.estimateBlackPoint(f);if(c<3)for(let _=0;_<c;_++)(h[_]&255)<p&&s.set(_);else{let _=h[0]&255,x=h[1]&255;for(let E=1;E<c-1;E++){const T=h[E+1]&255;(x*4-_-T)/2<p&&s.set(E),_=x,x=T}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),a=i.getHeight(),c=new Xe(s,a);this.initArrays(s);const h=this.buckets;for(let _=1;_<5;_++){const x=Math.floor(a*_/5),E=i.getRow(x,this.luminances),T=Math.floor(s*4/5);for(let b=Math.floor(s/5);b<T;b++){const D=E[b]&255;h[D>>De.LUMINANCE_SHIFT]++}}const f=De.estimateBlackPoint(h),p=i.getMatrix();for(let _=0;_<a;_++){const x=_*s;for(let E=0;E<s;E++)(p[x+E]&255)<f&&c.set(E,_)}return c}createBinarizer(i){return new De(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let a=0;a<De.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(i){const s=i.length;let a=0,c=0,h=0;for(let E=0;E<s;E++)i[E]>h&&(c=E,h=i[E]),i[E]>a&&(a=i[E]);let f=0,p=0;for(let E=0;E<s;E++){const T=E-c,b=i[E]*T*T;b>p&&(f=E,p=b)}if(c>f){const E=c;c=f,f=E}if(f-c<=s/16)throw new $;let _=f-1,x=-1;for(let E=f-1;E>c;E--){const T=E-c,b=T*T*(f-E)*(a-i[E]);b>x&&(_=E,x=b)}return _<<De.LUMINANCE_SHIFT}}De.LUMINANCE_BITS=5,De.LUMINANCE_SHIFT=8-De.LUMINANCE_BITS,De.LUMINANCE_BUCKETS=1<<De.LUMINANCE_BITS,De.EMPTY=Uint8ClampedArray.from([0]);class Oe extends De{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),a=i.getHeight();if(s>=Oe.MINIMUM_DIMENSION&&a>=Oe.MINIMUM_DIMENSION){const c=i.getMatrix();let h=s>>Oe.BLOCK_SIZE_POWER;s&Oe.BLOCK_SIZE_MASK&&h++;let f=a>>Oe.BLOCK_SIZE_POWER;a&Oe.BLOCK_SIZE_MASK&&f++;const p=Oe.calculateBlackPoints(c,h,f,s,a),_=new Xe(s,a);Oe.calculateThresholdForBlock(c,h,f,s,a,p,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new Oe(i)}static calculateThresholdForBlock(i,s,a,c,h,f,p){const _=h-Oe.BLOCK_SIZE,x=c-Oe.BLOCK_SIZE;for(let E=0;E<a;E++){let T=E<<Oe.BLOCK_SIZE_POWER;T>_&&(T=_);const b=Oe.cap(E,2,a-3);for(let D=0;D<s;D++){let F=D<<Oe.BLOCK_SIZE_POWER;F>x&&(F=x);const z=Oe.cap(D,2,s-3);let V=0;for(let ce=-2;ce<=2;ce++){const he=f[b+ce];V+=he[z-2]+he[z-1]+he[z]+he[z+1]+he[z+2]}const Y=V/25;Oe.thresholdBlock(i,F,T,Y,c,p)}}}static cap(i,s,a){return i<s?s:i>a?a:i}static thresholdBlock(i,s,a,c,h,f){for(let p=0,_=a*h+s;p<Oe.BLOCK_SIZE;p++,_+=h)for(let x=0;x<Oe.BLOCK_SIZE;x++)(i[_+x]&255)<=c&&f.set(s+x,a+p)}static calculateBlackPoints(i,s,a,c,h){const f=h-Oe.BLOCK_SIZE,p=c-Oe.BLOCK_SIZE,_=new Array(a);for(let x=0;x<a;x++){_[x]=new Int32Array(s);let E=x<<Oe.BLOCK_SIZE_POWER;E>f&&(E=f);for(let T=0;T<s;T++){let b=T<<Oe.BLOCK_SIZE_POWER;b>p&&(b=p);let D=0,F=255,z=0;for(let Y=0,ce=E*c+b;Y<Oe.BLOCK_SIZE;Y++,ce+=c){for(let he=0;he<Oe.BLOCK_SIZE;he++){const re=i[ce+he]&255;D+=re,re<F&&(F=re),re>z&&(z=re)}if(z-F>Oe.MIN_DYNAMIC_RANGE)for(Y++,ce+=c;Y<Oe.BLOCK_SIZE;Y++,ce+=c)for(let he=0;he<Oe.BLOCK_SIZE;he++)D+=i[ce+he]&255}let V=D>>Oe.BLOCK_SIZE_POWER*2;if(z-F<=Oe.MIN_DYNAMIC_RANGE&&(V=F/2,x>0&&T>0)){const Y=(_[x-1][T]+2*_[x][T-1]+_[x-1][T-1])/4;F<Y&&(V=Y)}_[x][T]=V}}return _}}Oe.BLOCK_SIZE_POWER=3,Oe.BLOCK_SIZE=1<<Oe.BLOCK_SIZE_POWER,Oe.BLOCK_SIZE_MASK=Oe.BLOCK_SIZE-1,Oe.MINIMUM_DIMENSION=Oe.BLOCK_SIZE*5,Oe.MIN_DYNAMIC_RANGE=24;class te{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,a,c){throw new ze("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ze("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ze("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new qe;for(let a=0;a<this.height;a++){const c=this.getRow(a,i);for(let h=0;h<this.width;h++){const f=c[h]&255;let p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",s.append(p)}s.append(`
`)}return s.toString()}}class Te extends te{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const a=this.delegate.getRow(i,s),c=this.getWidth();for(let h=0;h<c;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(i[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,a,c){return new Te(this.delegate.crop(i,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class le extends te{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=le.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return le.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,a){const c=new Uint8ClampedArray(s*a);for(let h=0,f=0,p=i.length;h<p;h+=4,f++){let _;if(i[h+3]===0)_=255;else{const E=i[h],T=i[h+1],b=i[h+2];_=306*E+601*T+117*b+512>>10}c[f]=_}return c}getRow(i,s){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const a=this.getWidth(),c=i*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,a,c){return super.crop(i,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=i*le.DEGREE_TO_RADIANS,h=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*f),_=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*f);return s.width=p,s.height=_,a.translate(p/2,_/2),a.rotate(c),a.drawImage(this.canvas,h/-2,f/-2),this.buffer=le.makeBufferFromCanvasImageData(s),this}invert(){return new Te(this)}}le.DEGREE_TO_RADIANS=Math.PI/180;class Le{constructor(i,s,a){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||Oo||self||window||void 0)&&(globalThis||Oo||self||window||void 0).__awaiter||function(I,i,s,a){function c(h){return h instanceof s?h:new s(function(f){f(h)})}return new(s||(s=Promise))(function(h,f){function p(E){try{x(a.next(E))}catch(T){f(T)}}function _(E){try{x(a.throw(E))}catch(T){f(T)}}function x(E){E.done?h(E.value):c(E.value).then(p,_)}x((a=a.apply(I,i||[])).next())})};class Et{constructor(i,s=500,a){this.reader=i,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of i){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const h=a.deviceId||a.id,f=a.label||`Video device ${s.length+1}`,p=a.groupId,_={deviceId:h,label:f,kind:c,groupId:p};s.push(_)}return s})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Le(s.deviceId,s.label))})}findDeviceById(i){return be(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return be(this,void 0,void 0,function*(){this.reset();let a;i?a={deviceId:{exact:i}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(i,s){return be(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(i,s){return be(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(i,s,a){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,a)})}decodeFromVideoDevice(i,s,a){return be(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,s,a)})}decodeFromConstraints(i,s,a){return be(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(i,s,a){return be(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return be(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,i),this.videoElement=a,this.stream=i,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(i){return new Promise((s,a)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const a=document.getElementById(i);if(!a)throw new N(`element with id '${i}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new N(`element with id '${i}' must be an ${s} element`);return a}decodeFromImage(i,s){if(!i&&!s)throw new N("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new N("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,a){if(i===void 0&&s===void 0)throw new N("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(i,a)}decodeFromImageElement(i){if(!i)throw new N("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(i){if(!i)throw new N("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new N("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=i,a}decodeFromVideoUrl(i){if(!i)throw new N("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=i,a}decodeFromVideoUrlContinuously(i,s){if(!i)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=i,c}_decodeOnLoadImage(i){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,a),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(h,f)=>{if(this._stopAsyncDecode){f(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(i);h(p)}catch(p){const _=s&&p instanceof $,E=(p instanceof H||p instanceof Q)&&a;if(_||E)return setTimeout(c,this._timeBetweenDecodingAttempts,h,f);f(p)}};return new Promise((h,f)=>c(h,f))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const h=c instanceof H||c instanceof Q,f=c instanceof $;(h||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,a){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),a=new le(s),c=new Oe(a);return new R(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(a=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(a=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class He{constructor(i,s,a=s==null?0:8*s.length,c,h,f=W.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=h,this.timestamp=f,this.text=i,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=h,this.resultMetadata=null,f==null?this.timestamp=W.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const a=new Array(s.length+i.length);W.arraycopy(s,0,a,0,s.length),W.arraycopy(i,0,a,s.length,i.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $e;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var ae=$e,$t;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($t||($t={}));var wt=$t;class hr{constructor(i,s,a,c,h=-1,f=-1){this.rawBytes=i,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=f,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Gi{exp(i){return this.expTable[i]}log(i){if(i===0)throw new A;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class nn{constructor(i,s){if(s.length===0)throw new A;this.field=i;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),W.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(i===1){a=0;for(let f=0,p=s.length;f!==p;f++){const _=s[f];a=Gi.addOrSubtract(a,_)}return a}a=s[0];const c=s.length,h=this.field;for(let f=1;f<c;f++)a=Gi.addOrSubtract(h.multiply(i,a),s[f]);return a}addOrSubtract(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,a=i.coefficients;if(s.length>a.length){const f=s;s=a,a=f}let c=new Int32Array(a.length);const h=a.length-s.length;W.arraycopy(a,0,c,0,h);for(let f=h;f<a.length;f++)c[f]=Gi.addOrSubtract(s[f-h],a[f]);return new nn(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=i.coefficients,h=c.length,f=new Int32Array(a+h-1),p=this.field;for(let _=0;_<a;_++){const x=s[_];for(let E=0;E<h;E++)f[_+E]=Gi.addOrSubtract(f[_+E],p.multiply(x,c[E]))}return new nn(p,f)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),h=this.coefficients;for(let f=0;f<s;f++)c[f]=a.multiply(h[f],i);return new nn(a,c)}multiplyByMonomial(i,s){if(i<0)throw new A;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,h=new Int32Array(c+i),f=this.field;for(let p=0;p<c;p++)h[p]=f.multiply(a[p],s);return new nn(f,h)}divide(i){if(!this.field.equals(i.field))throw new A("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new A("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const h=i.getCoefficient(i.getDegree()),f=s.inverse(h);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const p=c.getDegree()-i.getDegree(),_=s.multiply(c.getCoefficient(c.getDegree()),f),x=i.multiplyByMonomial(p,_),E=s.buildMonomial(p,_);a=a.addOrSubtract(E),c=c.addOrSubtract(x)}return[a,c]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(i+=" - ",a=-a):i.length>0&&(i+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class Ni extends y{}Ni.kind="ArithmeticException";class nt extends Gi{constructor(i,s,a){super(),this.primitive=i,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let h=1;for(let p=0;p<s;p++)c[p]=h,h*=2,h>=s&&(h^=i,h&=s-1);this.expTable=c;const f=new Int32Array(s);for(let p=0;p<s-1;p++)f[c[p]]=p;this.logTable=f,this.zero=new nn(this,Int32Array.from([0])),this.one=new nn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new A;if(s===0)return this.zero;const a=new Int32Array(i+1);return a[0]=s,new nn(this,a)}inverse(i){if(i===0)throw new Ni;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}nt.AZTEC_DATA_12=new nt(4201,4096,1),nt.AZTEC_DATA_10=new nt(1033,1024,1),nt.AZTEC_DATA_6=new nt(67,64,1),nt.AZTEC_PARAM=new nt(19,16,1),nt.QR_CODE_FIELD_256=new nt(285,256,0),nt.DATA_MATRIX_FIELD_256=new nt(301,256,1),nt.AZTEC_DATA_8=nt.DATA_MATRIX_FIELD_256,nt.MAXICODE_FIELD_64=nt.AZTEC_DATA_6;class Zi extends y{}Zi.kind="ReedSolomonException";class Gn extends y{}Gn.kind="IllegalStateException";class dr{constructor(i){this.field=i}decode(i,s){const a=this.field,c=new nn(a,i),h=new Int32Array(s);let f=!0;for(let D=0;D<s;D++){const F=c.evaluateAt(a.exp(D+a.getGeneratorBase()));h[h.length-1-D]=F,F!==0&&(f=!1)}if(f)return;const p=new nn(a,h),_=this.runEuclideanAlgorithm(a.buildMonomial(s,1),p,s),x=_[0],E=_[1],T=this.findErrorLocations(x),b=this.findErrorMagnitudes(E,T);for(let D=0;D<T.length;D++){const F=i.length-1-a.log(T[D]);if(F<0)throw new Zi("Bad error location");i[F]=nt.addOrSubtract(i[F],b[D])}}runEuclideanAlgorithm(i,s,a){if(i.getDegree()<s.getDegree()){const D=i;i=s,s=D}const c=this.field;let h=i,f=s,p=c.getZero(),_=c.getOne();for(;f.getDegree()>=(a/2|0);){let D=h,F=p;if(h=f,p=_,h.isZero())throw new Zi("r_{i-1} was zero");f=D;let z=c.getZero();const V=h.getCoefficient(h.getDegree()),Y=c.inverse(V);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){const ce=f.getDegree()-h.getDegree(),he=c.multiply(f.getCoefficient(f.getDegree()),Y);z=z.addOrSubtract(c.buildMonomial(ce,he)),f=f.addOrSubtract(h.multiplyByMonomial(ce,he))}if(_=z.multiply(p).addOrSubtract(F),f.getDegree()>=h.getDegree())throw new Gn("Division algorithm failed to reduce polynomial?")}const x=_.getCoefficient(0);if(x===0)throw new Zi("sigmaTilde(0) was zero");const E=c.inverse(x),T=_.multiplyScalar(E),b=f.multiplyScalar(E);return[T,b]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const h=this.field;for(let f=1;f<h.getSize()&&c<s;f++)i.evaluateAt(f)===0&&(a[c]=h.inverse(f),c++);if(c!==s)throw new Zi("Error locator degree does not match number of roots");return a}findErrorMagnitudes(i,s){const a=s.length,c=new Int32Array(a),h=this.field;for(let f=0;f<a;f++){const p=h.inverse(s[f]);let _=1;for(let x=0;x<a;x++)if(f!==x){const E=h.multiply(s[x],p),T=E&1?E&-2:E|1;_=h.multiply(_,T)}c[f]=h.multiply(i.evaluateAt(p),h.inverse(_)),h.getGeneratorBase()!==0&&(c[f]=h.multiply(c[f],p))}return c}}var Yt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Yt||(Yt={}));class gt{decode(i){this.ddata=i;let s=i.getBits(),a=this.extractBits(s),c=this.correctBits(a),h=gt.convertBoolArrayToByteArray(c),f=gt.getEncodedData(c),p=new hr(h,f,null,null);return p.setNumBits(c.length),p}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,a=Yt.UPPER,c=Yt.UPPER,h="",f=0;for(;f<s;)if(c===Yt.BINARY){if(s-f<5)break;let p=gt.readCode(i,f,5);if(f+=5,p===0){if(s-f<11)break;p=gt.readCode(i,f,11)+31,f+=11}for(let _=0;_<p;_++){if(s-f<8){f=s;break}const x=gt.readCode(i,f,8);h+=ve.castAsNonUtf8Char(x),f+=8}c=a}else{let p=c===Yt.DIGIT?4:5;if(s-f<p)break;let _=gt.readCode(i,f,p);f+=p;let x=gt.getCharacter(c,_);x.startsWith("CTRL_")?(a=c,c=gt.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=c)):(h+=x,c=a)}return h}static getTable(i){switch(i){case"L":return Yt.LOWER;case"P":return Yt.PUNCT;case"M":return Yt.MIXED;case"D":return Yt.DIGIT;case"B":return Yt.BINARY;case"U":default:return Yt.UPPER}}static getCharacter(i,s){switch(i){case Yt.UPPER:return gt.UPPER_TABLE[s];case Yt.LOWER:return gt.LOWER_TABLE[s];case Yt.MIXED:return gt.MIXED_TABLE[s];case Yt.PUNCT:return gt.PUNCT_TABLE[s];case Yt.DIGIT:return gt.DIGIT_TABLE[s];default:throw new Gn("Bad table")}}correctBits(i){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=nt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=nt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=nt.AZTEC_DATA_10):(a=12,s=nt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=i.length/a;if(h<c)throw new Q;let f=i.length%a,p=new Int32Array(h);for(let b=0;b<h;b++,f+=a)p[b]=gt.readCode(i,f,a);try{new dr(s).decode(p,h-c)}catch(b){throw new Q(b)}let _=(1<<a)-1,x=0;for(let b=0;b<c;b++){let D=p[b];if(D===0||D===_)throw new Q;(D===1||D===_-1)&&x++}let E=new Array(c*a-x),T=0;for(let b=0;b<c;b++){let D=p[b];if(D===1||D===_-1)E.fill(D>1,T,T+a-1),T+=a-1;else for(let F=a-1;F>=0;--F)E[T++]=(D&1<<F)!==0}return E}extractBits(i){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,h=new Int32Array(c),f=new Array(this.totalBitsInLayer(a,s));if(s)for(let p=0;p<h.length;p++)h[p]=p;else{let p=c+1+2*k.truncDivision(k.truncDivision(c,2)-1,15),_=c/2,x=k.truncDivision(p,2);for(let E=0;E<_;E++){let T=E+k.truncDivision(E,15);h[_-E-1]=x-T-1,h[_+E]=x+T+1}}for(let p=0,_=0;p<a;p++){let x=(a-p)*4+(s?9:12),E=p*2,T=c-1-E;for(let b=0;b<x;b++){let D=b*2;for(let F=0;F<2;F++)f[_+D+F]=i.get(h[E+F],h[E+b]),f[_+2*x+D+F]=i.get(h[E+b],h[T-F]),f[_+4*x+D+F]=i.get(h[T-F],h[T-b]),f[_+6*x+D+F]=i.get(h[T-b],h[E+F])}_+=x*8}return f}static readCode(i,s,a){let c=0;for(let h=s;h<s+a;h++)c<<=1,i[h]&&(c|=1);return c}static readByte(i,s){let a=i.length-s;return a>=8?gt.readCode(i,s,8):gt.readCode(i,s,a)<<8-a}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let a=0;a<s.length;a++)s[a]=gt.readByte(i,8*a);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class it{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,a,c){const h=i-a,f=s-c;return Math.sqrt(h*h+f*f)}static sum(i){let s=0;for(let a=0,c=i.length;a!==c;a++){const h=i[a];s+=h}return s}}class Tr{static floatToIntBits(i){return i}}Tr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ce){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Tr.floatToIntBits(this.x)+Tr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),a=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let h,f,p;if(a>=s&&a>=c?(f=i[0],h=i[1],p=i[2]):c>=a&&c>=s?(f=i[1],h=i[0],p=i[2]):(f=i[2],h=i[0],p=i[1]),this.crossProductZ(h,f,p)<0){const _=h;h=p,p=_}i[0]=h,i[1]=f,i[2]=p}static distance(i,s){return it.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,a){const c=s.x,h=s.y;return(a.x-c)*(i.y-h)-(a.y-h)*(i.x-c)}}class fr{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Fs extends fr{constructor(i,s,a,c,h){super(i,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class se{constructor(i,s,a,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=se.INIT_SIZE),a==null&&(a=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const h=s/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let i=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,h=!1,f=!0,p=!1,_=!1,x=!1,E=!1,T=!1;const b=this.width,D=this.height;for(;f;){f=!1;let F=!0;for(;(F||!_)&&s<b;)F=this.containsBlackPoint(a,c,s,!1),F?(s++,f=!0,_=!0):_||s++;if(s>=b){h=!0;break}let z=!0;for(;(z||!x)&&c<D;)z=this.containsBlackPoint(i,s,c,!0),z?(c++,f=!0,x=!0):x||c++;if(c>=D){h=!0;break}let V=!0;for(;(V||!E)&&i>=0;)V=this.containsBlackPoint(a,c,i,!1),V?(i--,f=!0,E=!0):E||i--;if(i<0){h=!0;break}let Y=!0;for(;(Y||!T)&&a>=0;)Y=this.containsBlackPoint(i,s,a,!0),Y?(a--,f=!0,T=!0):T||a--;if(a<0){h=!0;break}f&&(p=!0)}if(!h&&p){const F=s-i;let z=null;for(let he=1;z===null&&he<F;he++)z=this.getBlackPointOnSegment(i,c-he,i+he,c);if(z==null)throw new $;let V=null;for(let he=1;V===null&&he<F;he++)V=this.getBlackPointOnSegment(i,a+he,i+he,a);if(V==null)throw new $;let Y=null;for(let he=1;Y===null&&he<F;he++)Y=this.getBlackPointOnSegment(s,a+he,s-he,a);if(Y==null)throw new $;let ce=null;for(let he=1;ce===null&&he<F;he++)ce=this.getBlackPointOnSegment(s,c-he,s-he,c);if(ce==null)throw new $;return this.centerEdges(ce,z,Y,V)}else throw new $}getBlackPointOnSegment(i,s,a,c){const h=it.round(it.distance(i,s,a,c)),f=(a-i)/h,p=(c-s)/h,_=this.image;for(let x=0;x<h;x++){const E=it.round(i+x*f),T=it.round(s+x*p);if(_.get(E,T))return new Ce(E,T)}return null}centerEdges(i,s,a,c){const h=i.getX(),f=i.getY(),p=s.getX(),_=s.getY(),x=a.getX(),E=a.getY(),T=c.getX(),b=c.getY(),D=se.CORR;return h<this.width/2?[new Ce(T-D,b+D),new Ce(p+D,_+D),new Ce(x-D,E-D),new Ce(h+D,f-D)]:[new Ce(T+D,b+D),new Ce(p+D,_-D),new Ce(x-D,E+D),new Ce(h-D,f-D)]}containsBlackPoint(i,s,a,c){const h=this.image;if(c){for(let f=i;f<=s;f++)if(h.get(f,a))return!0}else for(let f=i;f<=s;f++)if(h.get(a,f))return!0;return!1}}se.INIT_SIZE=10,se.CORR=1;class Re{static checkAndNudgePoints(i,s){const a=i.getWidth(),c=i.getHeight();let h=!0;for(let f=0;f<s.length&&h;f+=2){const p=Math.floor(s[f]),_=Math.floor(s[f+1]);if(p<-1||p>a||_<-1||_>c)throw new $;h=!1,p===-1?(s[f]=0,h=!0):p===a&&(s[f]=a-1,h=!0),_===-1?(s[f+1]=0,h=!0):_===c&&(s[f+1]=c-1,h=!0)}h=!0;for(let f=s.length-2;f>=0&&h;f-=2){const p=Math.floor(s[f]),_=Math.floor(s[f+1]);if(p<-1||p>a||_<-1||_>c)throw new $;h=!1,p===-1?(s[f]=0,h=!0):p===a&&(s[f]=a-1,h=!0),_===-1?(s[f+1]=0,h=!0):_===c&&(s[f+1]=c-1,h=!0)}}}class Ue{constructor(i,s,a,c,h,f,p,_,x){this.a11=i,this.a21=s,this.a31=a,this.a12=c,this.a22=h,this.a32=f,this.a13=p,this.a23=_,this.a33=x}static quadrilateralToQuadrilateral(i,s,a,c,h,f,p,_,x,E,T,b,D,F,z,V){const Y=Ue.quadrilateralToSquare(i,s,a,c,h,f,p,_);return Ue.squareToQuadrilateral(x,E,T,b,D,F,z,V).times(Y)}transformPoints(i){const s=i.length,a=this.a11,c=this.a12,h=this.a13,f=this.a21,p=this.a22,_=this.a23,x=this.a31,E=this.a32,T=this.a33;for(let b=0;b<s;b+=2){const D=i[b],F=i[b+1],z=h*D+_*F+T;i[b]=(a*D+f*F+x)/z,i[b+1]=(c*D+p*F+E)/z}}transformPointsWithValues(i,s){const a=this.a11,c=this.a12,h=this.a13,f=this.a21,p=this.a22,_=this.a23,x=this.a31,E=this.a32,T=this.a33,b=i.length;for(let D=0;D<b;D++){const F=i[D],z=s[D],V=h*F+_*z+T;i[D]=(a*F+f*z+x)/V,s[D]=(c*F+p*z+E)/V}}static squareToQuadrilateral(i,s,a,c,h,f,p,_){const x=i-a+h-p,E=s-c+f-_;if(x===0&&E===0)return new Ue(a-i,h-a,i,c-s,f-c,s,0,0,1);{const T=a-h,b=p-h,D=c-f,F=_-f,z=T*F-b*D,V=(x*F-b*E)/z,Y=(T*E-x*D)/z;return new Ue(a-i+V*a,p-i+Y*p,i,c-s+V*c,_-s+Y*_,s,V,Y,1)}}static quadrilateralToSquare(i,s,a,c,h,f,p,_){return Ue.squareToQuadrilateral(i,s,a,c,h,f,p,_).buildAdjoint()}buildAdjoint(){return new Ue(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Ue(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Bt extends Re{sampleGrid(i,s,a,c,h,f,p,_,x,E,T,b,D,F,z,V,Y,ce,he){const re=Ue.quadrilateralToQuadrilateral(c,h,f,p,_,x,E,T,b,D,F,z,V,Y,ce,he);return this.sampleGridWithTransform(i,s,a,re)}sampleGridWithTransform(i,s,a,c){if(s<=0||a<=0)throw new $;const h=new Xe(s,a),f=new Float32Array(2*s);for(let p=0;p<a;p++){const _=f.length,x=p+.5;for(let E=0;E<_;E+=2)f[E]=E/2+.5,f[E+1]=x;c.transformPoints(f),Re.checkAndNudgePoints(i,f);try{for(let E=0;E<_;E+=2)i.get(Math.floor(f[E]),Math.floor(f[E+1]))&&h.set(E/2,p)}catch{throw new $}}return h}}class On{static setGridSampler(i){On.gridSampler=i}static getInstance(){return On.gridSampler}}On.gridSampler=new Bt;class Ze{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class hn{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(i){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new Fs(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new $;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let f=0;f<4;f++){let p=a[(this.shift+f)%4];this.compact?(c<<=7,c+=p>>1&127):(c<<=10,c+=(p>>2&992)+(p>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(i,s){let a=0;i.forEach((c,h,f)=>{let p=(c>>s-2<<1)+(c&1);a=(a<<3)+p}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(k.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new $}getCorrectedParameterData(i,s){let a,c;s?(a=7,c=2):(a=10,c=4);let h=a-c,f=new Int32Array(a);for(let _=a-1;_>=0;--_)f[_]=i&15,i>>=4;try{new dr(nt.AZTEC_PARAM).decode(f,h)}catch{throw new $}let p=0;for(let _=0;_<c;_++)p=(p<<4)+f[_];return p}getBullsEyeCorners(i){let s=i,a=i,c=i,h=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(s,f,1,-1),b=this.getFirstDifferent(a,f,1,1),D=this.getFirstDifferent(c,f,-1,1),F=this.getFirstDifferent(h,f,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(F,T)*this.nbCenterLayers/(this.distancePoint(h,s)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(T,b,D,F))break}s=T,a=b,c=D,h=F,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let p=new Ce(s.getX()+.5,s.getY()-.5),_=new Ce(a.getX()+.5,a.getY()+.5),x=new Ce(c.getX()-.5,c.getY()+.5),E=new Ce(h.getX()-.5,h.getY()-.5);return this.expandSquare([p,_,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,a,c;try{let p=new se(this.image).detect();i=p[0],s=p[1],a=p[2],c=p[3]}catch{let _=this.image.getWidth()/2,x=this.image.getHeight()/2;i=this.getFirstDifferent(new Ze(_+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ze(_+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ze(_-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ze(_-7,x-7),!1,-1,-1).toResultPoint()}let h=it.round((i.getX()+c.getX()+s.getX()+a.getX())/4),f=it.round((i.getY()+c.getY()+s.getY()+a.getY())/4);try{let p=new se(this.image,15,h,f).detect();i=p[0],s=p[1],a=p[2],c=p[3]}catch{i=this.getFirstDifferent(new Ze(h+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ze(h+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ze(h-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ze(h-7,f-7),!1,-1,-1).toResultPoint()}return h=it.round((i.getX()+c.getX()+s.getX()+a.getX())/4),f=it.round((i.getY()+c.getY()+s.getY()+a.getY())/4),new Ze(h,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,a,c,h){let f=On.getInstance(),p=this.getDimension(),_=p/2-this.nbCenterLayers,x=p/2+this.nbCenterLayers;return f.sampleGrid(i,p,p,_,_,x,_,x,x,_,x,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(i,s,a){let c=0,h=this.distanceResultPoint(i,s),f=h/a,p=i.getX(),_=i.getY(),x=f*(s.getX()-i.getX())/h,E=f*(s.getY()-i.getY())/h;for(let T=0;T<a;T++)this.image.get(it.round(p+T*x),it.round(_+T*E))&&(c|=1<<a-T-1);return c}isWhiteOrBlackRectangle(i,s,a,c){let h=3;i=new Ze(i.getX()-h,i.getY()+h),s=new Ze(s.getX()-h,s.getY()-h),a=new Ze(a.getX()+h,a.getY()-h),c=new Ze(c.getX()+h,c.getY()+h);let f=this.getColor(c,i);if(f===0)return!1;let p=this.getColor(i,s);return p!==f||(p=this.getColor(s,a),p!==f)?!1:(p=this.getColor(a,c),p===f)}getColor(i,s){let a=this.distancePoint(i,s),c=(s.getX()-i.getX())/a,h=(s.getY()-i.getY())/a,f=0,p=i.getX(),_=i.getY(),x=this.image.get(i.getX(),i.getY()),E=Math.ceil(a);for(let b=0;b<E;b++)p+=c,_+=h,this.image.get(it.round(p),it.round(_))!==x&&f++;let T=f/a;return T>.1&&T<.9?0:T<=.1===x?1:-1}getFirstDifferent(i,s,a,c){let h=i.getX()+a,f=i.getY()+c;for(;this.isValid(h,f)&&this.image.get(h,f)===s;)h+=a,f+=c;for(h-=a,f-=c;this.isValid(h,f)&&this.image.get(h,f)===s;)h+=a;for(h-=a;this.isValid(h,f)&&this.image.get(h,f)===s;)f+=c;return f-=c,new Ze(h,f)}expandSquare(i,s,a){let c=a/(2*s),h=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),p=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,x=new Ce(p+c*h,_+c*f),E=new Ce(p-c*h,_-c*f);h=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),p=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let T=new Ce(p+c*h,_+c*f),b=new Ce(p-c*h,_-c*f);return[x,T,E,b]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=it.round(i.getX()),a=it.round(i.getY());return this.isValid(s,a)}distancePoint(i,s){return it.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return it.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class fi{decode(i,s=null){let a=null,c=new hn(i.getBlackMatrix()),h=null,f=null;try{let E=c.detectMirror(!1);h=E.getPoints(),this.reportFoundResultPoints(s,h),f=new gt().decode(E)}catch(E){a=E}if(f==null)try{let E=c.detectMirror(!0);h=E.getPoints(),this.reportFoundResultPoints(s,h),f=new gt().decode(E)}catch(E){throw a??E}let p=new He(f.getText(),f.getRawBytes(),f.getNumBits(),h,ae.AZTEC,W.currentTimeMillis()),_=f.getByteSegments();_!=null&&p.putMetadata(wt.BYTE_SEGMENTS,_);let x=f.getECLevel();return x!=null&&p.putMetadata(wt.ERROR_CORRECTION_LEVEL,x),p}reportFoundResultPoints(i,s){if(i!=null){let a=i.get(ue.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,h,f)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class bi extends Et{constructor(i=500){super(new fi,i)}}class ht{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(ue.TRY_HARDER)===!0&&i.isRotateSupported()){const h=i.rotateCounterClockwise(),f=this.doDecode(h,s),p=f.getResultMetadata();let _=270;p!==null&&p.get(wt.ORIENTATION)===!0&&(_=_+p.get(wt.ORIENTATION)%360),f.putMetadata(wt.ORIENTATION,_);const x=f.getResultPoints();if(x!==null){const E=h.getHeight();for(let T=0;T<x.length;T++)x[T]=new Ce(E-x[T].getY()-1,x[T].getX())}return f}else throw new $}}reset(){}doDecode(i,s){const a=i.getWidth(),c=i.getHeight();let h=new q(a);const f=s&&s.get(ue.TRY_HARDER)===!0,p=Math.max(1,c>>(f?8:5));let _;f?_=c:_=15;const x=Math.trunc(c/2);for(let E=0;E<_;E++){const T=Math.trunc((E+1)/2),b=(E&1)===0,D=x+p*(b?T:-T);if(D<0||D>=c)break;try{h=i.getBlackRow(D,h)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(h.reverse(),s&&s.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;s.forEach((V,Y)=>z.set(Y,V)),z.delete(ue.NEED_RESULT_POINT_CALLBACK),s=z}try{const z=this.decodeRow(D,h,s);if(F===1){z.putMetadata(wt.ORIENTATION,180);const V=z.getResultPoints();V!==null&&(V[0]=new Ce(a-V[0].getX()-1,V[0].getY()),V[1]=new Ce(a-V[1].getX()-1,V[1].getY()))}return z}catch{}}}throw new $}static recordPattern(i,s,a){const c=a.length;for(let x=0;x<c;x++)a[x]=0;const h=i.getSize();if(s>=h)throw new $;let f=!i.get(s),p=0,_=s;for(;_<h;){if(i.get(_)!==f)a[p]++;else{if(++p===c)break;a[p]=1,f=!f}_++}if(!(p===c||p===c-1&&_===h))throw new $}static recordPatternInReverse(i,s,a){let c=a.length,h=i.get(s);for(;s>0&&c>=0;)i.get(--s)!==h&&(c--,h=!h);if(c>=0)throw new $;ht.recordPattern(i,s+1,a)}static patternMatchVariance(i,s,a){const c=i.length;let h=0,f=0;for(let x=0;x<c;x++)h+=i[x],f+=s[x];if(h<f)return Number.POSITIVE_INFINITY;const p=h/f;a*=p;let _=0;for(let x=0;x<c;x++){const E=i[x],T=s[x]*p,b=E>T?E-T:T-E;if(b>a)return Number.POSITIVE_INFINITY;_+=b}return _/h}}class oe extends ht{static findStartPattern(i){const s=i.getSize(),a=i.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),f=a,p=!1;const _=6;for(let x=a;x<s;x++)if(i.get(x)!==p)h[c]++;else{if(c===_-1){let E=oe.MAX_AVG_VARIANCE,T=-1;for(let b=oe.CODE_START_A;b<=oe.CODE_START_C;b++){const D=ht.patternMatchVariance(h,oe.CODE_PATTERNS[b],oe.MAX_INDIVIDUAL_VARIANCE);D<E&&(E=D,T=b)}if(T>=0&&i.isRange(Math.max(0,f-(x-f)/2),f,!1))return Int32Array.from([f,x,T]);f+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,p=!p}throw new $}static decodeCode(i,s,a){ht.recordPattern(i,a,s);let c=oe.MAX_AVG_VARIANCE,h=-1;for(let f=0;f<oe.CODE_PATTERNS.length;f++){const p=oe.CODE_PATTERNS[f],_=this.patternMatchVariance(s,p,oe.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,h=f)}if(h>=0)return h;throw new $}decodeRow(i,s,a){const c=a&&a.get(ue.ASSUME_GS1)===!0,h=oe.findStartPattern(s),f=h[2];let p=0;const _=new Uint8Array(20);_[p++]=f;let x;switch(f){case oe.CODE_START_A:x=oe.CODE_CODE_A;break;case oe.CODE_START_B:x=oe.CODE_CODE_B;break;case oe.CODE_START_C:x=oe.CODE_CODE_C;break;default:throw new Q}let E=!1,T=!1,b="",D=h[0],F=h[1];const z=Int32Array.from([0,0,0,0,0,0]);let V=0,Y=0,ce=f,he=0,re=!0,Ke=!1,Ve=!1;for(;!E;){const Bi=T;switch(T=!1,V=Y,Y=oe.decodeCode(s,z,F),_[p++]=Y,Y!==oe.CODE_STOP&&(re=!0),Y!==oe.CODE_STOP&&(he++,ce+=he*Y),D=F,F+=z.reduce((ph,us)=>ph+us,0),Y){case oe.CODE_START_A:case oe.CODE_START_B:case oe.CODE_START_C:throw new Q}switch(x){case oe.CODE_CODE_A:if(Y<64)Ve===Ke?b+=String.fromCharCode(32+Y):b+=String.fromCharCode(32+Y+128),Ve=!1;else if(Y<96)Ve===Ke?b+=String.fromCharCode(Y-64):b+=String.fromCharCode(Y+64),Ve=!1;else switch(Y!==oe.CODE_STOP&&(re=!1),Y){case oe.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_A:!Ke&&Ve?(Ke=!0,Ve=!1):Ke&&Ve?(Ke=!1,Ve=!1):Ve=!0;break;case oe.CODE_SHIFT:T=!0,x=oe.CODE_CODE_B;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_B:if(Y<96)Ve===Ke?b+=String.fromCharCode(32+Y):b+=String.fromCharCode(32+Y+128),Ve=!1;else switch(Y!==oe.CODE_STOP&&(re=!1),Y){case oe.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_B:!Ke&&Ve?(Ke=!0,Ve=!1):Ke&&Ve?(Ke=!1,Ve=!1):Ve=!0;break;case oe.CODE_SHIFT:T=!0,x=oe.CODE_CODE_A;break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_C:x=oe.CODE_CODE_C;break;case oe.CODE_STOP:E=!0;break}break;case oe.CODE_CODE_C:if(Y<100)Y<10&&(b+="0"),b+=Y;else switch(Y!==oe.CODE_STOP&&(re=!1),Y){case oe.CODE_FNC_1:c&&(b.length===0?b+="]C1":b+="");break;case oe.CODE_CODE_A:x=oe.CODE_CODE_A;break;case oe.CODE_CODE_B:x=oe.CODE_CODE_B;break;case oe.CODE_STOP:E=!0;break}break}Bi&&(x=x===oe.CODE_CODE_A?oe.CODE_CODE_B:oe.CODE_CODE_A)}const Ut=F-D;if(F=s.getNextUnset(F),!s.isRange(F,Math.min(s.getSize(),F+(F-D)/2),!1))throw new $;if(ce-=he*V,ce%103!==V)throw new H;const kn=b.length;if(kn===0)throw new $;kn>0&&re&&(x===oe.CODE_CODE_C?b=b.substring(0,kn-2):b=b.substring(0,kn-1));const Bn=(h[1]+h[0])/2,yt=D+Ut/2,gn=_.length,Fn=new Uint8Array(gn);for(let Bi=0;Bi<gn;Bi++)Fn[Bi]=_[Bi];const cs=[new Ce(Bn,i),new Ce(yt,i)];return new He(b,Fn,0,cs,ae.CODE_128,new Date().getTime())}}oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],oe.MAX_AVG_VARIANCE=.25,oe.MAX_INDIVIDUAL_VARIANCE=.7,oe.CODE_SHIFT=98,oe.CODE_CODE_C=99,oe.CODE_CODE_B=100,oe.CODE_CODE_A=101,oe.CODE_FNC_1=102,oe.CODE_FNC_2=97,oe.CODE_FNC_3=96,oe.CODE_FNC_4_A=101,oe.CODE_FNC_4_B=100,oe.CODE_START_A=103,oe.CODE_START_B=104,oe.CODE_START_C=105,oe.CODE_STOP=106;class at extends ht{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=at.findAsteriskPattern(s,c),f=s.getNextSet(h[1]),p=s.getSize(),_,x;do{at.recordPattern(s,f,c);let z=at.toNarrowWidePattern(c);if(z<0)throw new $;_=at.patternToChar(z),this.decodeRowResult+=_,x=f;for(let V of c)f+=V;f=s.getNextSet(f)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let z of c)E+=z;let T=f-x-E;if(f!==p&&T*2<E)throw new $;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,V=0;for(let Y=0;Y<z;Y++)V+=at.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Y));if(this.decodeRowResult.charAt(z)!==at.ALPHABET_STRING.charAt(V%43))throw new H;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new $;let b;this.extendedMode?b=at.decodeExtended(this.decodeRowResult):b=this.decodeRowResult;let D=(h[1]+h[0])/2,F=x+E/2;return new He(b,null,0,[new Ce(D,i),new Ce(F,i)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let a=i.getSize(),c=i.getNextSet(0),h=0,f=c,p=!1,_=s.length;for(let x=c;x<a;x++)if(i.get(x)!==p)s[h]++;else{if(h===_-1){if(this.toNarrowWidePattern(s)===at.ASTERISK_ENCODING&&i.isRange(Math.max(0,f-Math.floor((x-f)/2)),f,!1))return[f,x];f+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,p=!p}throw new $}static toNarrowWidePattern(i){let s=i.length,a=0,c;do{let h=2147483647;for(let _ of i)_<h&&_>a&&(h=_);a=h,c=0;let f=0,p=0;for(let _=0;_<s;_++){let x=i[_];x>a&&(p|=1<<s-1-_,c++,f+=x)}if(c===3){for(let _=0;_<s&&c>0;_++){let x=i[_];if(x>a&&(c--,x*2>=f))return-1}return p}}while(c>3);return-1}static patternToChar(i){for(let s=0;s<at.CHARACTER_ENCODINGS.length;s++)if(at.CHARACTER_ENCODINGS[s]===i)return at.ALPHABET_STRING.charAt(s);if(i===at.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(i){let s=i.length,a="";for(let c=0;c<s;c++){let h=i.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let f=i.charAt(c+1),p="\0";switch(h){case"+":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)+32);else throw new Q;break;case"$":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)-64);else throw new Q;break;case"%":if(f>="A"&&f<="E")p=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")p=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")p=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")p="\0";else if(f==="V")p="@";else if(f==="W")p="`";else if(f==="X"||f==="Y"||f==="Z")p="";else throw new Q;break;case"/":if(f>="A"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")p=":";else throw new Q;break}a+=p,c++}else a+=h}return a}}at.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",at.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],at.ASTERISK_ENCODING=148;class Je extends ht{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,a){let c=this.decodeStart(s),h=this.decodeEnd(s),f=new qe;Je.decodeMiddle(s,c[1],h[0],f);let p=f.toString(),_=null;a!=null&&(_=a.get(ue.ALLOWED_LENGTHS)),_==null&&(_=Je.DEFAULT_ALLOWED_LENGTHS);let x=p.length,E=!1,T=0;for(let F of _){if(x===F){E=!0;break}F>T&&(T=F)}if(!E&&x>T&&(E=!0),!E)throw new Q;const b=[new Ce(c[1],i),new Ce(h[0],i)];return new He(p,null,0,b,ae.ITF,new Date().getTime())}static decodeMiddle(i,s,a,c){let h=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(h.fill(0),f.fill(0),p.fill(0);s<a;){ht.recordPattern(i,s,h);for(let x=0;x<5;x++){let E=2*x;f[x]=h[E],p[x]=h[E+1]}let _=Je.decodeDigit(f);c.append(_.toString()),_=this.decodeDigit(p),c.append(_.toString()),h.forEach(function(x){s+=x})}}decodeStart(i){let s=Je.skipWhiteSpace(i),a=Je.findGuardPattern(i,s,Je.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(i,a[0]),a}validateQuietZone(i,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!i.get(c);c--)a--;if(a!==0)throw new $}static skipWhiteSpace(i){const s=i.getSize(),a=i.getNextSet(0);if(a===s)throw new $;return a}decodeEnd(i){i.reverse();try{let s=Je.skipWhiteSpace(i),a;try{a=Je.findGuardPattern(i,s,Je.END_PATTERN_REVERSED[0])}catch(h){h instanceof $&&(a=Je.findGuardPattern(i,s,Je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,a[0]);let c=a[0];return a[0]=i.getSize()-a[1],a[1]=i.getSize()-c,a}finally{i.reverse()}}static findGuardPattern(i,s,a){let c=a.length,h=new Int32Array(c),f=i.getSize(),p=!1,_=0,x=s;h.fill(0);for(let E=s;E<f;E++)if(i.get(E)!==p)h[_]++;else{if(_===c-1){if(ht.patternMatchVariance(h,a,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return[x,E];x+=h[0]+h[1],W.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,p=!p}throw new $}static decodeDigit(i){let s=Je.MAX_AVG_VARIANCE,a=-1,c=Je.PATTERNS.length;for(let h=0;h<c;h++){let f=Je.PATTERNS[h],p=ht.patternMatchVariance(i,f,Je.MAX_INDIVIDUAL_VARIANCE);p<s?(s=p,a=h):p===s&&(a=-1)}if(a>=0)return a%10;throw new $}}Je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Je.MAX_AVG_VARIANCE=.38,Je.MAX_INDIVIDUAL_VARIANCE=.5,Je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Je.START_PATTERN=Int32Array.from([1,1,1,1]),Je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class dt extends ht{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,a,c=0,h=Int32Array.from([0,0,0]);for(;!s;){h=Int32Array.from([0,0,0]),a=dt.findGuardPattern(i,c,!1,this.START_END_PATTERN,h);let f=a[0];c=a[1];let p=f-(c-f);p>=0&&(s=i.isRange(p,f,!1))}return a}static checkChecksum(i){return dt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let a=parseInt(i.charAt(s-1),10);return dt.getStandardUPCEANChecksum(i.substring(0,s-1))===a}static getStandardUPCEANChecksum(i){let s=i.length,a=0;for(let c=s-1;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new Q;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new Q;a+=h}return(1e3-a)%10}static decodeEnd(i,s){return dt.findGuardPattern(i,s,!1,dt.START_END_PATTERN,new Int32Array(dt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,a,c){return this.findGuardPattern(i,s,a,c,new Int32Array(c.length))}static findGuardPattern(i,s,a,c,h){let f=i.getSize();s=a?i.getNextUnset(s):i.getNextSet(s);let p=0,_=s,x=c.length,E=a;for(let T=s;T<f;T++)if(i.get(T)!==E)h[p]++;else{if(p===x-1){if(ht.patternMatchVariance(h,c,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return Int32Array.from([_,T]);_+=h[0]+h[1];let b=h.slice(2,h.length-1);for(let D=0;D<p-1;D++)h[D]=b[D];h[p-1]=0,h[p]=0,p--}else p++;h[p]=1,E=!E}throw new $}static decodeDigit(i,s,a,c){this.recordPattern(i,a,s);let h=this.MAX_AVG_VARIANCE,f=-1,p=c.length;for(let _=0;_<p;_++){let x=c[_],E=ht.patternMatchVariance(s,x,dt.MAX_INDIVIDUAL_VARIANCE);E<h&&(h=E,f=_)}if(f>=0)return f;throw new $}}dt.MAX_AVG_VARIANCE=.48,dt.MAX_INDIVIDUAL_VARIANCE=.7,dt.START_END_PATTERN=Int32Array.from([1,1,1]),dt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),dt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),dt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Nr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),f=c.toString(),p=Nr.parseExtensionString(f),_=[new Ce((a[0]+a[1])/2,i),new Ce(h,i)],x=new He(f,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&x.putAllMetadata(p),x}decodeMiddle(i,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f=s[1],p=0;for(let x=0;x<5&&f<h;x++){let E=dt.decodeDigit(i,c,f,dt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let T of c)f+=T;E>=10&&(p|=1<<4-x),x!==4&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(a.length!==5)throw new $;let _=this.determineCheckDigit(p);if(Nr.extensionChecksum(a.toString())!==_)throw new $;return f}static extensionChecksum(i){let s=i.length,a=0;for(let c=s-2;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new $}static parseExtensionString(i){if(i.length!==5)return null;let s=Nr.parseExtension5String(i);return s==null?null:new Map([[wt.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(i.substring(1)),c=(a/100).toString(),h=a%100,f=h<10?"0"+h:h.toString();return s+c+"."+f}}class va{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),f=c.toString(),p=va.parseExtensionString(f),_=[new Ce((a[0]+a[1])/2,i),new Ce(h,i)],x=new He(f,null,0,_,ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&x.putAllMetadata(p),x}decodeMiddle(i,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f=s[1],p=0;for(let _=0;_<2&&f<h;_++){let x=dt.decodeDigit(i,c,f,dt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let E of c)f+=E;x>=10&&(p|=1<<1-_),_!==1&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(a.length!==2)throw new $;if(parseInt(a.toString())%4!==p)throw new $;return f}static parseExtensionString(i){return i.length!==2?null:new Map([[wt.ISSUE_NUMBER,parseInt(i)]])}}class Ca{static decodeRow(i,s,a){let c=dt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Nr().decodeRow(i,s,c)}catch{return new va().decodeRow(i,s,c)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ft extends dt{constructor(){super(),this.decodeRowStringBuffer="",ft.L_AND_G_PATTERNS=ft.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=ft.L_PATTERNS[i-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];ft.L_AND_G_PATTERNS[i]=a}}decodeRow(i,s,a){let c=ft.findStartGuardPattern(s),h=a==null?null:a.get(ue.NEED_RESULT_POINT_CALLBACK);if(h!=null){const re=new Ce((c[0]+c[1])/2,i);h.foundPossibleResultPoint(re)}let f=this.decodeMiddle(s,c,this.decodeRowStringBuffer),p=f.rowOffset,_=f.resultString;if(h!=null){const re=new Ce(p,i);h.foundPossibleResultPoint(re)}let x=this.decodeEnd(s,p);if(h!=null){const re=new Ce((x[0]+x[1])/2,i);h.foundPossibleResultPoint(re)}let E=x[1],T=E+(E-x[0]);if(T>=s.getSize()||!s.isRange(E,T,!1))throw new $;let b=_.toString();if(b.length<8)throw new Q;if(!ft.checkChecksum(b))throw new H;let D=(c[1]+c[0])/2,F=(x[1]+x[0])/2,z=this.getBarcodeFormat(),V=[new Ce(D,i),new Ce(F,i)],Y=new He(b,null,0,V,z,new Date().getTime()),ce=0;try{let re=Ca.decodeRow(i,s,x[1]);Y.putMetadata(wt.UPC_EAN_EXTENSION,re.getText()),Y.putAllMetadata(re.getResultMetadata()),Y.addResultPoints(re.getResultPoints()),ce=re.getText().length}catch{}let he=a==null?null:a.get(ue.ALLOWED_EAN_EXTENSIONS);if(he!=null){let re=!1;for(let Ke in he)if(ce.toString()===Ke){re=!0;break}if(!re)throw new $}return Y}decodeEnd(i,s){return ft.findGuardPattern(i,s,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return ft.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let a=parseInt(i.charAt(s-1),10);return ft.getStandardUPCEANChecksum(i.substring(0,s-1))===a}static getStandardUPCEANChecksum(i){let s=i.length,a=0;for(let c=s-1;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new Q;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=i.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new Q;a+=h}return(1e3-a)%10}}class pr extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f=s[1],p=0;for(let x=0;x<6&&f<h;x++){let E=ft.decodeDigit(i,c,f,ft.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let T of c)f+=T;E>=10&&(p|=1<<5-x)}a=pr.determineFirstDigit(a,p),f=ft.findGuardPattern(i,f,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&f<h;x++){let E=ft.decodeDigit(i,c,f,ft.L_PATTERNS);a+=String.fromCharCode(48+E);for(let T of c)f+=T}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(i,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return i=String.fromCharCode(48+a)+i,i;throw new $}}pr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ec extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f=s[1];for(let _=0;_<4&&f<h;_++){let x=ft.decodeDigit(i,c,f,ft.L_PATTERNS);a+=String.fromCharCode(48+x);for(let E of c)f+=E}f=ft.findGuardPattern(i,f,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&f<h;_++){let x=ft.decodeDigit(i,c,f,ft.L_PATTERNS);a+=String.fromCharCode(48+x);for(let E of c)f+=E}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ae.EAN_8}}class tc extends ft{constructor(){super(...arguments),this.ean13Reader=new pr}getBarcodeFormat(){return ae.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,a))}decodeMiddle(i,s,a){return this.ean13Reader.decodeMiddle(i,s,a)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let a=new He(s.substring(1),null,null,i.getResultPoints(),ae.UPC_A);return i.getResultMetadata()!=null&&a.putAllMetadata(i.getResultMetadata()),a}else throw new $}reset(){this.ean13Reader.reset()}}class pi extends ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,a){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=i.getSize();let f=s[1],p=0;for(let x=0;x<6&&f<h;x++){const E=pi.decodeDigit(i,c,f,pi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let T of c)f+=T;E>=10&&(p|=1<<5-x)}let _=pi.determineNumSysAndCheckDigit(a,p);return{rowOffset:f,resultString:_}}decodeEnd(i,s){return pi.findGuardPatternWithoutCounters(i,s,!0,pi.MIDDLE_END_PATTERN)}checkChecksum(i){return ft.checkChecksum(pi.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let h=String.fromCharCode(48+a),f=String.fromCharCode(48+c);return h+i+f}throw $.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new qe;a.append(i.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return i.length>=8&&a.append(i.charAt(7)),a.toString()}}pi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ea extends ht{constructor(i){super();let s=i==null?null:i.get(ue.POSSIBLE_FORMATS),a=[];r(s)?(a.push(new pr),a.push(new tc),a.push(new ec),a.push(new pi)):(s.indexOf(ae.EAN_13)>-1&&a.push(new pr),s.indexOf(ae.UPC_A)>-1&&a.push(new tc),s.indexOf(ae.EAN_8)>-1&&a.push(new ec),s.indexOf(ae.UPC_E)>-1&&a.push(new pi)),this.readers=a}decodeRow(i,s,a){for(let c of this.readers)try{const h=c.decodeRow(i,s,a),f=h.getBarcodeFormat()===ae.EAN_13&&h.getText().charAt(0)==="0",p=a==null?null:a.get(ue.POSSIBLE_FORMATS),_=p==null||p.includes(ae.UPC_A);if(f&&_){const x=h.getRawBytes(),E=new He(h.getText().substring(1),x,x?x.length:null,h.getResultPoints(),ae.UPC_A);return E.putAllMetadata(h.getResultMetadata()),E}return h}catch{}throw new $}reset(){for(let i of this.readers)i.reset()}}class xn extends ht{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let a=0;a<s.length;a++)if(ht.patternMatchVariance(i,s[a],xn.MAX_INDIVIDUAL_VARIANCE)<xn.MAX_AVG_VARIANCE)return a;throw new $}static count(i){return it.sum(new Int32Array(i))}static increment(i,s){let a=0,c=s[0];for(let h=1;h<i.length;h++)s[h]>c&&(c=s[h],a=h);i[a]++}static decrement(i,s){let a=0,c=s[0];for(let h=1;h<i.length;h++)s[h]<c&&(c=s[h],a=h);i[a]--}static isFinderPattern(i){let s=i[0]+i[1],a=s+i[2]+i[3],c=s/a;if(c>=xn.MIN_FINDER_PATTERN_RATIO&&c<=xn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let p of i)p>f&&(f=p),p<h&&(h=p);return f<10*h}return!1}}xn.MAX_AVG_VARIANCE=.2,xn.MAX_INDIVIDUAL_VARIANCE=.45,xn.MIN_FINDER_PATTERN_RATIO=9.5/12,xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class es{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof es))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ts{constructor(i,s,a,c,h){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Ce(a,h)),this.resultPoints.push(new Ce(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof ts))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class Mi{constructor(){}static getRSSvalue(i,s,a){let c=0;for(let _ of i)c+=_;let h=0,f=0,p=i.length;for(let _=0;_<p-1;_++){let x;for(x=1,f|=1<<_;x<i[_];x++,f&=~(1<<_)){let E=Mi.combins(c-x-1,p-_-2);if(a&&f===0&&c-x-(p-_-1)>=p-_-1&&(E-=Mi.combins(c-x-(p-_),p-_-2)),p-_-1>1){let T=0;for(let b=c-x-(p-_-2);b>s;b--)T+=Mi.combins(c-x-b-1,p-_-3);E-=T*(p-1-_)}else c-x>s&&E--;h+=E}c-=x}return h}static combins(i,s){let a,c;i-s>s?(c=s,a=i-s):(c=i-s,a=s);let h=1,f=1;for(let p=i;p>a;p--)h*=p,f<=c&&(h/=f,f++);for(;f<=c;)h/=f,f++;return h}}class sh{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new q(a),h=0,p=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)p&1<<_&&c.set(h),h++;for(let _=1;_<i.length;++_){let x=i[_],E=x.getLeftChar().getValue();for(let T=11;T>=0;--T)E&1<<T&&c.set(h),h++;if(x.getRightChar()!=null){let T=x.getRightChar().getValue();for(let b=11;b>=0;--b)T&1<<b&&c.set(h),h++}}return c}}class br{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Sa{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Ft extends Sa{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Ft.FNC1}}Ft.FNC1="$";class Ae extends Sa{constructor(i,s,a){super(i),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zn extends Sa{constructor(i,s,a){if(super(i),s<0||s>10||a<0||a>10)throw new Q;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zn.FNC1}isAnyFNC1(){return this.firstDigit===Zn.FNC1||this.secondDigit===Zn.FNC1}}Zn.FNC1=10;class xe{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new $;let s=i.substring(0,2);for(let h of xe.TWO_DIGIT_DATA_LENGTH)if(h[0]===s)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(2,h[2],i):xe.processFixedAI(2,h[1],i);if(i.length<3)throw new $;let a=i.substring(0,3);for(let h of xe.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(3,h[2],i):xe.processFixedAI(3,h[1],i);for(let h of xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,h[2],i):xe.processFixedAI(4,h[1],i);if(i.length<4)throw new $;let c=i.substring(0,4);for(let h of xe.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,h[2],i):xe.processFixedAI(4,h[1],i);throw new $}static processFixedAI(i,s,a){if(a.length<i)throw new $;let c=a.substring(0,i);if(a.length<i+s)throw new $;let h=a.substring(i,i+s),f=a.substring(i+s),p="("+c+")"+h,_=xe.parseFieldsInGeneralPurpose(f);return _==null?p:p+_}static processVariableAI(i,s,a){let c=a.substring(0,i),h;a.length<i+s?h=a.length:h=i+s;let f=a.substring(i,h),p=a.substring(h),_="("+c+")"+f,x=xe.parseFieldsInGeneralPurpose(p);return x==null?_:_+x}}xe.VARIABLE_LENGTH=[],xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xe.VARIABLE_LENGTH,20],["22",xe.VARIABLE_LENGTH,29],["30",xe.VARIABLE_LENGTH,8],["37",xe.VARIABLE_LENGTH,8],["90",xe.VARIABLE_LENGTH,30],["91",xe.VARIABLE_LENGTH,30],["92",xe.VARIABLE_LENGTH,30],["93",xe.VARIABLE_LENGTH,30],["94",xe.VARIABLE_LENGTH,30],["95",xe.VARIABLE_LENGTH,30],["96",xe.VARIABLE_LENGTH,30],["97",xe.VARIABLE_LENGTH,3],["98",xe.VARIABLE_LENGTH,30],["99",xe.VARIABLE_LENGTH,30]],xe.THREE_DIGIT_DATA_LENGTH=[["240",xe.VARIABLE_LENGTH,30],["241",xe.VARIABLE_LENGTH,30],["242",xe.VARIABLE_LENGTH,6],["250",xe.VARIABLE_LENGTH,30],["251",xe.VARIABLE_LENGTH,30],["253",xe.VARIABLE_LENGTH,17],["254",xe.VARIABLE_LENGTH,20],["400",xe.VARIABLE_LENGTH,30],["401",xe.VARIABLE_LENGTH,30],["402",17],["403",xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xe.VARIABLE_LENGTH,20],["421",xe.VARIABLE_LENGTH,15],["422",3],["423",xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xe.VARIABLE_LENGTH,15],["391",xe.VARIABLE_LENGTH,18],["392",xe.VARIABLE_LENGTH,15],["393",xe.VARIABLE_LENGTH,18],["703",xe.VARIABLE_LENGTH,30]],xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xe.VARIABLE_LENGTH,20],["8003",xe.VARIABLE_LENGTH,30],["8004",xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xe.VARIABLE_LENGTH,30],["8008",xe.VARIABLE_LENGTH,12],["8018",18],["8020",xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xe.VARIABLE_LENGTH,70],["8200",xe.VARIABLE_LENGTH,70]];class Mr{constructor(i){this.buffer=new qe,this.information=i}decodeAllCodes(i,s){let a=s,c=null;do{let h=this.decodeGeneralPurposeField(a,c),f=xe.parseFieldsInGeneralPurpose(h.getNewString());if(f!=null&&i.append(f),h.isRemaining()?c=""+h.getRemainingValue():c=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(i,4);return h===0?new Zn(this.information.getSize(),Zn.FNC1,Zn.FNC1):new Zn(this.information.getSize(),h-1,Zn.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),a=(s-8)/11,c=(s-8)%11;return new Zn(i+7,a,c)}extractNumericValueFromBitArray(i,s){return Mr.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,a){let c=0;for(let h=0;h<a;++h)i.get(s+h)&&(c|=1<<a-h-1);return c}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ae(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ae(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(a!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new Ae(this.current.getPosition(),this.buffer.toString()):s=new Ae(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new br(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new Ae(this.current.getPosition(),this.buffer.toString());return new br(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new br(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Ae(this.current.getPosition(),this.buffer.toString());return new br(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new br(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Ae(this.current.getPosition(),this.buffer.toString());return new br(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new br(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Ft(i+5,Ft.FNC1);if(s>=5&&s<15)return new Ft(i+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<90)return new Ft(i+7,""+(a+1));if(a>=90&&a<116)return new Ft(i+7,""+(a+7));let c=this.extractNumericValueFromBitArray(i,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new Q}return new Ft(i+8,h)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,6);return a>=16&&a<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Ft(i+5,Ft.FNC1);if(s>=5&&s<15)return new Ft(i+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(i,6);if(a>=32&&a<58)return new Ft(i+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Gn("Decoding invalid alphanumeric value: "+a)}return new Ft(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class vo{constructor(i){this.information=i,this.generalDecoder=new Mr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends vo{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let a=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,a)}encodeCompressedGtinWithoutAI(i,s,a){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);h/100===0&&i.append("0"),h/10===0&&i.append("0"),i.append(h)}wn.appendCheckDigit(i,a)}static appendCheckDigit(i,s){let a=0;for(let c=0;c<13;c++){let h=i.charAt(c+s).charCodeAt(0)-48;a+=c&1?h:3*h}a=10-a%10,a===10&&(a=0),i.append(a)}}wn.GTIN_SIZE=40;class Or extends wn{constructor(i){super(i)}parseInformation(){let i=new qe;i.append("(01)");let s=i.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE,4);return i.append(a),this.encodeCompressedGtinWithoutAI(i,Or.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,Or.HEADER_SIZE+44)}}Or.HEADER_SIZE=4;class Yi extends vo{constructor(i){super(i)}parseInformation(){let i=new qe;return this.getGeneralDecoder().decodeAllCodes(i,Yi.HEADER_SIZE)}}Yi.HEADER_SIZE=5;class zs extends wn{constructor(i){super(i)}encodeCompressedWeight(i,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(i,c);let h=this.checkWeight(c),f=1e5;for(let p=0;p<5;++p)h/f===0&&i.append("0"),f/=10;i.append(h)}}class Oi extends zs{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Oi.HEADER_SIZE+zs.GTIN_SIZE+Oi.WEIGHT_SIZE)throw new $;let i=new qe;return this.encodeCompressedGtin(i,Oi.HEADER_SIZE),this.encodeCompressedWeight(i,Oi.HEADER_SIZE+zs.GTIN_SIZE,Oi.WEIGHT_SIZE),i.toString()}}Oi.HEADER_SIZE=5,Oi.WEIGHT_SIZE=15;class oh extends Oi{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class ah extends Oi{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Ri extends wn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Ri.HEADER_SIZE+wn.GTIN_SIZE)throw new $;let i=new qe;this.encodeCompressedGtin(i,Ri.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ri.HEADER_SIZE+wn.GTIN_SIZE,Ri.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Ri.HEADER_SIZE+wn.GTIN_SIZE+Ri.LAST_DIGIT_SIZE,null);return i.append(a.getNewString()),i.toString()}}Ri.HEADER_SIZE=8,Ri.LAST_DIGIT_SIZE=2;class vn extends wn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<vn.HEADER_SIZE+wn.GTIN_SIZE)throw new $;let i=new qe;this.encodeCompressedGtin(i,vn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+wn.GTIN_SIZE,vn.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+wn.GTIN_SIZE+vn.LAST_DIGIT_SIZE,vn.FIRST_THREE_DIGITS_SIZE);a/100==0&&i.append("0"),a/10==0&&i.append("0"),i.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(vn.HEADER_SIZE+wn.GTIN_SIZE+vn.LAST_DIGIT_SIZE+vn.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}vn.HEADER_SIZE=8,vn.LAST_DIGIT_SIZE=2,vn.FIRST_THREE_DIGITS_SIZE=10;class Ot extends zs{constructor(i,s,a){super(i),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE+Ot.DATE_SIZE)throw new $;let i=new qe;return this.encodeCompressedGtin(i,Ot.HEADER_SIZE),this.encodeCompressedWeight(i,Ot.HEADER_SIZE+Ot.GTIN_SIZE,Ot.WEIGHT_SIZE),this.encodeCompressedDate(i,Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Ot.DATE_SIZE);if(a==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=a%32;a/=32;let h=a%12+1;a/=12;let f=a;f/10==0&&i.append("0"),i.append(f),h/10==0&&i.append("0"),i.append(h),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}Ot.HEADER_SIZE=8,Ot.WEIGHT_SIZE=20,Ot.DATE_SIZE=16;function Us(I){try{if(I.get(1))return new Or(I);if(!I.get(2))return new Yi(I);switch(Mr.extractNumericValueFromBitArray(I,1,4)){case 4:return new oh(I);case 5:return new ah(I)}switch(Mr.extractNumericValueFromBitArray(I,1,5)){case 12:return new Ri(I);case 13:return new vn(I)}switch(Mr.extractNumericValueFromBitArray(I,1,7)){case 56:return new Ot(I,"310","11");case 57:return new Ot(I,"320","11");case 58:return new Ot(I,"310","13");case 59:return new Ot(I,"320","13");case 60:return new Ot(I,"310","15");case 61:return new Ot(I,"320","15");case 62:return new Ot(I,"310","17");case 63:return new Ot(I,"320","17")}}catch(i){throw console.log(i),new Gn("unknown decoder: "+I)}}class gr{constructor(i,s,a,c){this.leftchar=i,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof gr?gr.equalsOrNull(i.leftchar,s.leftchar)&&gr.equalsOrNull(i.rightchar,s.rightchar)&&gr.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:gr.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Aa{constructor(i,s,a){this.pairs=i,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof Aa?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let a;return i.forEach((c,h)=>{s.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class ne extends xn{constructor(i){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,a){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(i,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(h){if(h instanceof $){if(!this.pairs.length)throw new $;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new $}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(i);h.push(c);try{return this.checkRows(h,a+1)}catch(f){this.verbose&&console.log(f)}}throw new $}static isValidSequence(i){for(let s of ne.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let a=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(i,s){let a=0,c=!1,h=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>i){h=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),a++}h||c||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Aa(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let a of s)if(a.getPairs().length!==i.length){for(let c of a.getPairs())for(let h of i)if(gr.equals(c,h))break}}static isPartialRow(i,s){for(let a of s){let c=!0;for(let h of i){let f=!1;for(let p of a.getPairs())if(h.equals(p)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=sh.buildBitArray(i),c=Us(s).parseInformation(),h=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints(),p=[h[0],h[1],f[0],f[1]];return new He(c,null,null,p,ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),a=i.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),h=2;for(let p=1;p<this.pairs.size();++p){let _=this.pairs.get(p);c+=_.getLeftChar().getChecksumPortion(),h++;let x=_.getRightChar();x!=null&&(c+=x.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==s.getValue()}static getNextSecondBar(i,s){let a;return i.get(s)?(a=i.getNextUnset(s),a=i.getNextSet(a)):(a=i.getNextSet(s),a=i.getNextUnset(a)),a}retrieveNextPair(i,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let h,f=!0,p=-1;do this.findNextPair(i,s,p),h=this.parseFoundFinderPattern(i,a,c),h==null?p=ne.getNextSecondBar(i,this.startEnd[0]):f=!1;while(f);let _=this.decodeDataCharacter(i,h,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new $;let x;try{x=this.decodeDataCharacter(i,h,c,!1)}catch(E){x=null,this.verbose&&console.log(E)}return new gr(_,x,h,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),f;a>=0?f=a:this.isEmptyPair(s)?f=0:f=s[s.length-1].getFinderPattern().getStartEnd()[1];let p=s.length%2!=0;this.startFromEven&&(p=!p);let _=!1;for(;f<h&&(_=!i.get(f),!!_);)f++;let x=0,E=f;for(let T=f;T<h;T++)if(i.get(T)!=_)c[x]++;else{if(x==3){if(p&&ne.reverseCounters(c),ne.isFinderPattern(c)){this.startEnd[0]=E,this.startEnd[1]=T;return}p&&ne.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,_=!_}throw new $}static reverseCounters(i){let s=i.length;for(let a=0;a<s/2;++a){let c=i[a];i[a]=i[s-a-1],i[s-a-1]=c}}parseFoundFinderPattern(i,s,a){let c,h,f;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!i.get(x);)x--;x++,c=this.startEnd[0]-x,h=x,f=this.startEnd[1]}else h=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let p=this.getDecodeFinderCounters();W.arraycopy(p,0,p,1,p.length-1),p[0]=c;let _;try{_=this.parseFinderValue(p,ne.FINDER_PATTERNS)}catch{return null}return new ts(_,[h,f],h,f,s)}decodeDataCharacter(i,s,a,c){let h=this.getDataCharacterCounters();for(let yt=0;yt<h.length;yt++)h[yt]=0;if(c)ne.recordPatternInReverse(i,s.getStartEnd()[0],h);else{ne.recordPattern(i,s.getStartEnd()[1],h);for(let yt=0,gn=h.length-1;yt<gn;yt++,gn--){let Fn=h[yt];h[yt]=h[gn],h[gn]=Fn}}let f=17,p=it.sum(new Int32Array(h))/f,_=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(p-_)/_>.3)throw new $;let x=this.getOddCounts(),E=this.getEvenCounts(),T=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let yt=0;yt<h.length;yt++){let gn=1*h[yt]/p,Fn=gn+.5;if(Fn<1){if(gn<.3)throw new $;Fn=1}else if(Fn>8){if(gn>8.7)throw new $;Fn=8}let cs=yt/2;yt&1?(E[cs]=Fn,b[cs]=gn-Fn):(x[cs]=Fn,T[cs]=gn-Fn)}this.adjustOddEvenCounts(f);let D=4*s.getValue()+(a?0:2)+(c?0:1)-1,F=0,z=0;for(let yt=x.length-1;yt>=0;yt--){if(ne.isNotA1left(s,a,c)){let gn=ne.WEIGHTS[D][2*yt];z+=x[yt]*gn}F+=x[yt]}let V=0;for(let yt=E.length-1;yt>=0;yt--)if(ne.isNotA1left(s,a,c)){let gn=ne.WEIGHTS[D][2*yt+1];V+=E[yt]*gn}let Y=z+V;if(F&1||F>13||F<4)throw new $;let ce=(13-F)/2,he=ne.SYMBOL_WIDEST[ce],re=9-he,Ke=Mi.getRSSvalue(x,he,!0),Ve=Mi.getRSSvalue(E,re,!1),Ut=ne.EVEN_TOTAL_SUBSET[ce],kn=ne.GSUM[ce],Bn=Ke*Ut+Ve+kn;return new es(Bn,Y)}static isNotA1left(i,s,a){return!(i.getValue()==0&&s&&a)}adjustOddEvenCounts(i){let s=it.sum(new Int32Array(this.getOddCounts())),a=it.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;s>13?h=!0:s<4&&(c=!0);let f=!1,p=!1;a>13?p=!0:a<4&&(f=!0);let _=s+a-i,x=(s&1)==1,E=(a&1)==0;if(_==1)if(x){if(E)throw new $;h=!0}else{if(!E)throw new $;p=!0}else if(_==-1)if(x){if(E)throw new $;c=!0}else{if(!E)throw new $;f=!0}else if(_==0){if(x){if(!E)throw new $;s<a?(c=!0,p=!0):(h=!0,f=!0)}else if(E)throw new $}else throw new $;if(c){if(h)throw new $;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new $;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class lh extends es{constructor(i,s,a){super(i,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,a){const c=this.decodePair(s,!1,i,a);Gt.addOrTally(this.possibleLeftPairs,c),s.reverse();let h=this.decodePair(s,!0,i,a);Gt.addOrTally(this.possibleRightPairs,h),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Gt.checkChecksum(f,p))return Gt.constructResult(f,p)}throw new $}static addOrTally(i,s){if(s==null)return;let a=!1;for(let c of i)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let a=4537077*i.getValue()+s.getValue(),c=new String(a).toString(),h=new qe;for(let x=13-c.length;x>0;x--)h.append("0");h.append(c);let f=0;for(let x=0;x<13;x++){let E=h.charAt(x).charCodeAt(0)-48;f+=x&1?E:3*E}f=10-f%10,f===10&&(f=0),h.append(f.toString());let p=i.getFinderPattern().getResultPoints(),_=s.getFinderPattern().getResultPoints();return new He(h.toString(),null,0,[p[0],p[1],_[0],_[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(i,s){let a=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(i,s,a,c){try{let h=this.findFinderPattern(i,s),f=this.parseFoundFinderPattern(i,a,s,h),p=c==null?null:c.get(ue.NEED_RESULT_POINT_CALLBACK);if(p!=null){let E=(h[0]+h[1])/2;s&&(E=i.getSize()-1-E),p.foundPossibleResultPoint(new Ce(E,a))}let _=this.decodeDataCharacter(i,f,!0),x=this.decodeDataCharacter(i,f,!1);return new lh(1597*_.getValue()+x.getValue(),_.getChecksumPortion()+4*x.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(i,s,a){let c=this.getDataCharacterCounters();for(let V=0;V<c.length;V++)c[V]=0;if(a)ht.recordPatternInReverse(i,s.getStartEnd()[0],c);else{ht.recordPattern(i,s.getStartEnd()[1]+1,c);for(let V=0,Y=c.length-1;V<Y;V++,Y--){let ce=c[V];c[V]=c[Y],c[Y]=ce}}let h=a?16:15,f=it.sum(new Int32Array(c))/h,p=this.getOddCounts(),_=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let V=0;V<c.length;V++){let Y=c[V]/f,ce=Math.floor(Y+.5);ce<1?ce=1:ce>8&&(ce=8);let he=Math.floor(V/2);V&1?(_[he]=ce,E[he]=Y-ce):(p[he]=ce,x[he]=Y-ce)}this.adjustOddEvenCounts(a,h);let T=0,b=0;for(let V=p.length-1;V>=0;V--)b*=9,b+=p[V],T+=p[V];let D=0,F=0;for(let V=_.length-1;V>=0;V--)D*=9,D+=_[V],F+=_[V];let z=b+3*D;if(a){if(T&1||T>12||T<4)throw new $;let V=(12-T)/2,Y=Gt.OUTSIDE_ODD_WIDEST[V],ce=9-Y,he=Mi.getRSSvalue(p,Y,!1),re=Mi.getRSSvalue(_,ce,!0),Ke=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[V],Ve=Gt.OUTSIDE_GSUM[V];return new es(he*Ke+re+Ve,z)}else{if(F&1||F>10||F<4)throw new $;let V=(10-F)/2,Y=Gt.INSIDE_ODD_WIDEST[V],ce=9-Y,he=Mi.getRSSvalue(p,Y,!0),re=Mi.getRSSvalue(_,ce,!1),Ke=Gt.INSIDE_ODD_TOTAL_SUBSET[V],Ve=Gt.INSIDE_GSUM[V];return new es(re*Ke+he+Ve,z)}}findFinderPattern(i,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=i.getSize(),h=!1,f=0;for(;f<c&&(h=!i.get(f),s!==h);)f++;let p=0,_=f;for(let x=f;x<c;x++)if(i.get(x)!==h)a[p]++;else{if(p===3){if(xn.isFinderPattern(a))return[_,x];_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,h=!h}throw new $}parseFoundFinderPattern(i,s,a,c){let h=i.get(c[0]),f=c[0]-1;for(;f>=0&&h!==i.get(f);)f--;f++;const p=c[0]-f,_=this.getDecodeFinderCounters(),x=new Int32Array(_.length);W.arraycopy(_,0,x,1,_.length-1),x[0]=p;const E=this.parseFinderValue(x,Gt.FINDER_PATTERNS);let T=f,b=c[1];return a&&(T=i.getSize()-1-T,b=i.getSize()-1-b),new ts(E,[f,c[1]],T,b,s)}adjustOddEvenCounts(i,s){let a=it.sum(new Int32Array(this.getOddCounts())),c=it.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1,p=!1,_=!1;i?(a>12?f=!0:a<4&&(h=!0),c>12?_=!0:c<4&&(p=!0)):(a>11?f=!0:a<5&&(h=!0),c>10?_=!0:c<4&&(p=!0));let x=a+c-s,E=(a&1)===(i?1:0),T=(c&1)===1;if(x===1)if(E){if(T)throw new $;f=!0}else{if(!T)throw new $;_=!0}else if(x===-1)if(E){if(T)throw new $;h=!0}else{if(!T)throw new $;p=!0}else if(x===0){if(E){if(!T)throw new $;a<c?(h=!0,_=!0):(f=!0,p=!0)}else if(T)throw new $}else throw new $;if(h){if(f)throw new $;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(_)throw new $;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class mr extends ht{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const a=i?i.get(ue.POSSIBLE_FORMATS):null,c=i&&i.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ae.EAN_13)||a.includes(ae.UPC_A)||a.includes(ae.EAN_8)||a.includes(ae.UPC_E))&&this.readers.push(new Ea(i)),a.includes(ae.CODE_39)&&this.readers.push(new at(c)),a.includes(ae.CODE_128)&&this.readers.push(new oe),a.includes(ae.ITF)&&this.readers.push(new Je),a.includes(ae.RSS_14)&&this.readers.push(new Gt),a.includes(ae.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new Ea(i)),this.readers.push(new at),this.readers.push(new Ea(i)),this.readers.push(new oe),this.readers.push(new Je),this.readers.push(new Gt),this.readers.push(new ne(this.verbose)))}decodeRow(i,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,s,a)}catch{}throw new $}reset(){this.readers.forEach(i=>i.reset())}}class Hs extends Et{constructor(i=500,s){super(new mr(s),i,s)}}class mt{constructor(i,s,a){this.ecCodewords=i,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class pt{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(i,s,a,c,h,f){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=f;let p=0;const _=f.getECCodewords(),x=f.getECBlocks();for(let E of x)p+=E.getCount()*(E.getDataCodewords()+_);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if(i&1||s&1)throw new Q;for(let a of Ye.VERSIONS)if(a.symbolSizeRows===i&&a.symbolSizeColumns===s)return a;throw new Q}toString(){return""+this.versionNumber}static buildVersions(){return[new Ye(1,10,10,8,8,new mt(5,new pt(1,3))),new Ye(2,12,12,10,10,new mt(7,new pt(1,5))),new Ye(3,14,14,12,12,new mt(10,new pt(1,8))),new Ye(4,16,16,14,14,new mt(12,new pt(1,12))),new Ye(5,18,18,16,16,new mt(14,new pt(1,18))),new Ye(6,20,20,18,18,new mt(18,new pt(1,22))),new Ye(7,22,22,20,20,new mt(20,new pt(1,30))),new Ye(8,24,24,22,22,new mt(24,new pt(1,36))),new Ye(9,26,26,24,24,new mt(28,new pt(1,44))),new Ye(10,32,32,14,14,new mt(36,new pt(1,62))),new Ye(11,36,36,16,16,new mt(42,new pt(1,86))),new Ye(12,40,40,18,18,new mt(48,new pt(1,114))),new Ye(13,44,44,20,20,new mt(56,new pt(1,144))),new Ye(14,48,48,22,22,new mt(68,new pt(1,174))),new Ye(15,52,52,24,24,new mt(42,new pt(2,102))),new Ye(16,64,64,14,14,new mt(56,new pt(2,140))),new Ye(17,72,72,16,16,new mt(36,new pt(4,92))),new Ye(18,80,80,18,18,new mt(48,new pt(4,114))),new Ye(19,88,88,20,20,new mt(56,new pt(4,144))),new Ye(20,96,96,22,22,new mt(68,new pt(4,174))),new Ye(21,104,104,24,24,new mt(56,new pt(6,136))),new Ye(22,120,120,18,18,new mt(68,new pt(6,175))),new Ye(23,132,132,20,20,new mt(62,new pt(8,163))),new Ye(24,144,144,22,22,new mt(62,new pt(8,156),new pt(2,155))),new Ye(25,8,18,6,16,new mt(7,new pt(1,5))),new Ye(26,8,32,6,14,new mt(11,new pt(1,10))),new Ye(27,12,26,10,24,new mt(14,new pt(1,16))),new Ye(28,12,36,10,16,new mt(18,new pt(1,22))),new Ye(29,16,36,14,16,new mt(24,new pt(1,32))),new Ye(30,16,48,14,22,new mt(28,new pt(1,49)))]}}Ye.VERSIONS=Ye.buildVersions();class lt{constructor(i){const s=i.getHeight();if(s<8||s>144||s&1)throw new Q;this.version=lt.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),a=i.getWidth();return Ye.getVersionForDimensions(s,a)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const h=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let p=!1,_=!1,x=!1,E=!1;do if(a===h&&c===0&&!p)i[s++]=this.readCorner1(h,f)&255,a-=2,c+=2,p=!0;else if(a===h-2&&c===0&&f&3&&!_)i[s++]=this.readCorner2(h,f)&255,a-=2,c+=2,_=!0;else if(a===h+4&&c===2&&!(f&7)&&!x)i[s++]=this.readCorner3(h,f)&255,a-=2,c+=2,x=!0;else if(a===h-2&&c===0&&(f&7)===4&&!E)i[s++]=this.readCorner4(h,f)&255,a-=2,c+=2,E=!0;else{do a<h&&c>=0&&!this.readMappingMatrix.get(c,a)&&(i[s++]=this.readUtah(a,c,h,f)&255),a-=2,c+=2;while(a>=0&&c<f);a+=1,c+=3;do a>=0&&c<f&&!this.readMappingMatrix.get(c,a)&&(i[s++]=this.readUtah(a,c,h,f)&255),a+=2,c-=2;while(a<h&&c>=0);a+=3,c+=1}while(a<h||c<f);if(s!==this.version.getTotalCodewords())throw new Q;return i}readModule(i,s,a,c){return i<0&&(i+=a,s+=4-(a+4&7)),s<0&&(s+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,a,c){let h=0;return this.readModule(i-2,s-2,a,c)&&(h|=1),h<<=1,this.readModule(i-2,s-1,a,c)&&(h|=1),h<<=1,this.readModule(i-1,s-2,a,c)&&(h|=1),h<<=1,this.readModule(i-1,s-1,a,c)&&(h|=1),h<<=1,this.readModule(i-1,s,a,c)&&(h|=1),h<<=1,this.readModule(i,s-2,a,c)&&(h|=1),h<<=1,this.readModule(i,s-1,a,c)&&(h|=1),h<<=1,this.readModule(i,s,a,c)&&(h|=1),h}readCorner1(i,s){let a=0;return this.readModule(i-1,0,i,s)&&(a|=1),a<<=1,this.readModule(i-1,1,i,s)&&(a|=1),a<<=1,this.readModule(i-1,2,i,s)&&(a|=1),a<<=1,this.readModule(0,s-2,i,s)&&(a|=1),a<<=1,this.readModule(0,s-1,i,s)&&(a|=1),a<<=1,this.readModule(1,s-1,i,s)&&(a|=1),a<<=1,this.readModule(2,s-1,i,s)&&(a|=1),a<<=1,this.readModule(3,s-1,i,s)&&(a|=1),a}readCorner2(i,s){let a=0;return this.readModule(i-3,0,i,s)&&(a|=1),a<<=1,this.readModule(i-2,0,i,s)&&(a|=1),a<<=1,this.readModule(i-1,0,i,s)&&(a|=1),a<<=1,this.readModule(0,s-4,i,s)&&(a|=1),a<<=1,this.readModule(0,s-3,i,s)&&(a|=1),a<<=1,this.readModule(0,s-2,i,s)&&(a|=1),a<<=1,this.readModule(0,s-1,i,s)&&(a|=1),a<<=1,this.readModule(1,s-1,i,s)&&(a|=1),a}readCorner3(i,s){let a=0;return this.readModule(i-1,0,i,s)&&(a|=1),a<<=1,this.readModule(i-1,s-1,i,s)&&(a|=1),a<<=1,this.readModule(0,s-3,i,s)&&(a|=1),a<<=1,this.readModule(0,s-2,i,s)&&(a|=1),a<<=1,this.readModule(0,s-1,i,s)&&(a|=1),a<<=1,this.readModule(1,s-3,i,s)&&(a|=1),a<<=1,this.readModule(1,s-2,i,s)&&(a|=1),a<<=1,this.readModule(1,s-1,i,s)&&(a|=1),a}readCorner4(i,s){let a=0;return this.readModule(i-3,0,i,s)&&(a|=1),a<<=1,this.readModule(i-2,0,i,s)&&(a|=1),a<<=1,this.readModule(i-1,0,i,s)&&(a|=1),a<<=1,this.readModule(0,s-2,i,s)&&(a|=1),a<<=1,this.readModule(0,s-1,i,s)&&(a|=1),a<<=1,this.readModule(1,s-1,i,s)&&(a|=1),a<<=1,this.readModule(2,s-1,i,s)&&(a|=1),a<<=1,this.readModule(3,s-1,i,s)&&(a|=1),a}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new A("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),f=s/c|0,p=a/h|0,_=f*c,x=p*h,E=new Xe(x,_);for(let T=0;T<f;++T){const b=T*c;for(let D=0;D<p;++D){const F=D*h;for(let z=0;z<c;++z){const V=T*(c+2)+1+z,Y=b+z;for(let ce=0;ce<h;++ce){const he=D*(h+2)+1+ce;if(i.get(he,V)){const re=F+ce;E.set(re,Y)}}}}}return E}}class Nt{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const a=s.getECBlocks();let c=0;const h=a.getECBlocks();for(let z of h)c+=z.getCount();const f=new Array(c);let p=0;for(let z of h)for(let V=0;V<z.getCount();V++){const Y=z.getDataCodewords(),ce=a.getECCodewords()+Y;f[p++]=new Nt(Y,new Uint8Array(ce))}const x=f[0].codewords.length-a.getECCodewords(),E=x-1;let T=0;for(let z=0;z<E;z++)for(let V=0;V<p;V++)f[V].codewords[z]=i[T++];const b=s.getVersionNumber()===24,D=b?8:p;for(let z=0;z<D;z++)f[z].codewords[x-1]=i[T++];const F=f[0].codewords.length;for(let z=x;z<F;z++)for(let V=0;V<p;V++){const Y=b?(V+8)%p:V,ce=b&&Y>7?z-1:z;f[Y].codewords[ce]=i[T++]}if(T!==i.length)throw new A;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ns{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new A(""+i);let s=0,a=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(a>0){const f=8-a,p=i<f?i:f,_=f-p,x=255>>8-p<<_;s=(h[c]&x)>>_,i-=p,a+=p,a===8&&(a=0,c++)}if(i>0){for(;i>=8;)s=s<<8|h[c]&255,c++,i-=8;if(i>0){const f=8-i,p=255>>f<<f;s=s<<i|(h[c]&p)>>f,a+=i}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Rt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rt||(Rt={}));class Yn{static decode(i){const s=new ns(i),a=new qe,c=new qe,h=new Array;let f=Rt.ASCII_ENCODE;do if(f===Rt.ASCII_ENCODE)f=this.decodeAsciiSegment(s,a,c);else{switch(f){case Rt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Rt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Rt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Rt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Rt.BASE256_ENCODE:this.decodeBase256Segment(s,a,h);break;default:throw new Q}f=Rt.ASCII_ENCODE}while(f!==Rt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new hr(i,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(i,s,a){let c=!1;do{let h=i.readBits(8);if(h===0)throw new Q;if(h<=128)return c&&(h+=128),s.append(String.fromCharCode(h-1)),Rt.ASCII_ENCODE;if(h===129)return Rt.PAD_ENCODE;if(h<=229){const f=h-130;f<10&&s.append("0"),s.append(""+f)}else switch(h){case 230:return Rt.C40_ENCODE;case 231:return Rt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Rt.ANSIX12_ENCODE;case 239:return Rt.TEXT_ENCODE;case 240:return Rt.EDIFACT_ENCODE;case 241:break;default:if(h!==254||i.available()!==0)throw new Q;break}}while(i.available()>0);return Rt.ASCII_ENCODE}static decodeC40Segment(i,s){let a=!1;const c=[];let h=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let p=0;p<3;p++){const _=c[p];switch(h){case 0:if(_<3)h=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[_];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new Q;break;case 1:a?(s.append(String.fromCharCode(_+128)),a=!1):s.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[_];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(_){case 27:s.append("");break;case 30:a=!0;break;default:throw new Q}h=0;break;case 3:a?(s.append(String.fromCharCode(_+224)),a=!1):s.append(String.fromCharCode(_+96)),h=0;break;default:throw new Q}}}while(i.available()>0)}static decodeTextSegment(i,s){let a=!1,c=[],h=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),c);for(let p=0;p<3;p++){const _=c[p];switch(h){case 0:if(_<3)h=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[_];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new Q;break;case 1:a?(s.append(String.fromCharCode(_+128)),a=!1):s.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[_];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(_){case 27:s.append("");break;case 30:a=!0;break;default:throw new Q}h=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[_];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x),h=0}else throw new Q;break;default:throw new Q}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const a=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),a);for(let h=0;h<3;h++){const f=a[h];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else if(f<40)s.append(String.fromCharCode(f+51));else throw new Q;break}}}while(i.available()>0)}static parseTwoBytes(i,s,a){let c=(i<<8)+s-1,h=Math.floor(c/1600);a[0]=h,c-=h*1600,h=Math.floor(c/40),a[1]=h,a[2]=c-h*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let a=0;a<4;a++){let c=i.readBits(6);if(c===31){const h=8-i.getBitOffset();h!==8&&i.readBits(h);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,s,a){let c=1+i.getByteOffset();const h=this.unrandomize255State(i.readBits(8),c++);let f;if(h===0?f=i.available()/8|0:h<250?f=h:f=250*(h-249)+this.unrandomize255State(i.readBits(8),c++),f<0)throw new Q;const p=new Uint8Array(f);for(let _=0;_<f;_++){if(i.available()<8)throw new Q;p[_]=this.unrandomize255State(i.readBits(8),c++)}a.push(p);try{s.append(je.decode(p,ve.ISO88591))}catch(_){throw new Gn("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,s){const a=149*s%255+1,c=i-a;return c>=0?c:c+256}}Yn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yn.TEXT_SHIFT2_SET_CHARS=Yn.C40_SHIFT2_SET_CHARS,Yn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ia{constructor(){this.rsDecoder=new dr(nt.DATA_MATRIX_FIELD_256)}decode(i){const s=new lt(i),a=s.getVersion(),c=s.readCodewords(),h=Nt.getDataBlocks(c,a);let f=0;for(let x of h)f+=x.getNumDataCodewords();const p=new Uint8Array(f),_=h.length;for(let x=0;x<_;x++){const E=h[x],T=E.getCodewords(),b=E.getNumDataCodewords();this.correctErrors(T,b);for(let D=0;D<b;D++)p[D*_+x]=T[D]}return Yn.decode(p)}correctErrors(i,s){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-s)}catch{throw new H}for(let c=0;c<s;c++)i[c]=a[c]}}class Ie{constructor(i){this.image=i,this.rectangleDetector=new se(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new $;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],h=s[2],f=s[3];let p=this.transitionsBetween(a,f)+1,_=this.transitionsBetween(h,f)+1;(p&1)===1&&(p+=1),(_&1)===1&&(_+=1),4*p<7*_&&4*_<7*p&&(p=_=Math.max(p,_));let x=Ie.sampleGrid(this.image,a,c,h,f,p,_);return new fr(x,[a,c,h,f])}static shiftPoint(i,s,a){let c=(s.getX()-i.getX())/(a+1),h=(s.getY()-i.getY())/(a+1);return new Ce(i.getX()+c,i.getY()+h)}static moveAway(i,s,a){let c=i.getX(),h=i.getY();return c<s?c-=1:c+=1,h<a?h-=1:h+=1,new Ce(c,h)}detectSolid1(i){let s=i[0],a=i[1],c=i[3],h=i[2],f=this.transitionsBetween(s,a),p=this.transitionsBetween(a,c),_=this.transitionsBetween(c,h),x=this.transitionsBetween(h,s),E=f,T=[h,s,a,c];return E>p&&(E=p,T[0]=s,T[1]=a,T[2]=c,T[3]=h),E>_&&(E=_,T[0]=a,T[1]=c,T[2]=h,T[3]=s),E>x&&(T[0]=c,T[1]=h,T[2]=s,T[3]=a),T}detectSolid2(i){let s=i[0],a=i[1],c=i[2],h=i[3],f=this.transitionsBetween(s,h),p=Ie.shiftPoint(a,c,(f+1)*4),_=Ie.shiftPoint(c,a,(f+1)*4),x=this.transitionsBetween(p,s),E=this.transitionsBetween(_,h);return x<E?(i[0]=s,i[1]=a,i[2]=c,i[3]=h):(i[0]=a,i[1]=c,i[2]=h,i[3]=s),i}correctTopRight(i){let s=i[0],a=i[1],c=i[2],h=i[3],f=this.transitionsBetween(s,h),p=this.transitionsBetween(a,h),_=Ie.shiftPoint(s,a,(p+1)*4),x=Ie.shiftPoint(c,a,(f+1)*4);f=this.transitionsBetween(_,h),p=this.transitionsBetween(x,h);let E=new Ce(h.getX()+(c.getX()-a.getX())/(f+1),h.getY()+(c.getY()-a.getY())/(f+1)),T=new Ce(h.getX()+(s.getX()-a.getX())/(p+1),h.getY()+(s.getY()-a.getY())/(p+1));if(!this.isValid(E))return this.isValid(T)?T:null;if(!this.isValid(T))return E;let b=this.transitionsBetween(_,E)+this.transitionsBetween(x,E),D=this.transitionsBetween(_,T)+this.transitionsBetween(x,T);return b>D?E:T}shiftToModuleCenter(i){let s=i[0],a=i[1],c=i[2],h=i[3],f=this.transitionsBetween(s,h)+1,p=this.transitionsBetween(c,h)+1,_=Ie.shiftPoint(s,a,p*4),x=Ie.shiftPoint(c,a,f*4);f=this.transitionsBetween(_,h)+1,p=this.transitionsBetween(x,h)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let E=(s.getX()+a.getX()+c.getX()+h.getX())/4,T=(s.getY()+a.getY()+c.getY()+h.getY())/4;s=Ie.moveAway(s,E,T),a=Ie.moveAway(a,E,T),c=Ie.moveAway(c,E,T),h=Ie.moveAway(h,E,T);let b,D;return _=Ie.shiftPoint(s,a,p*4),_=Ie.shiftPoint(_,h,f*4),b=Ie.shiftPoint(a,s,p*4),b=Ie.shiftPoint(b,c,f*4),x=Ie.shiftPoint(c,h,p*4),x=Ie.shiftPoint(x,a,f*4),D=Ie.shiftPoint(h,c,p*4),D=Ie.shiftPoint(D,s,f*4),[_,b,x,D]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,a,c,h,f,p){return On.getInstance().sampleGrid(i,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,s.getX(),s.getY(),h.getX(),h.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(i,s){let a=Math.trunc(i.getX()),c=Math.trunc(i.getY()),h=Math.trunc(s.getX()),f=Math.trunc(s.getY()),p=Math.abs(f-c)>Math.abs(h-a);if(p){let z=a;a=c,c=z,z=h,h=f,f=z}let _=Math.abs(h-a),x=Math.abs(f-c),E=-_/2,T=c<f?1:-1,b=a<h?1:-1,D=0,F=this.image.get(p?c:a,p?a:c);for(let z=a,V=c;z!==h;z+=b){let Y=this.image.get(p?V:z,p?z:V);if(Y!==F&&(D++,F=Y),E+=x,E>0){if(V===f)break;V+=T,E-=_}}return D}}class vt{constructor(){this.decoder=new Ia}decode(i,s=null){let a,c;if(s!=null&&s.has(ue.PURE_BARCODE)){const x=vt.extractPureBits(i.getBlackMatrix());a=this.decoder.decode(x),c=vt.NO_POINTS}else{const x=new Ie(i.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),c=x.getPoints()}const h=a.getRawBytes(),f=new He(a.getText(),h,8*h.length,c,ae.DATA_MATRIX,W.currentTimeMillis()),p=a.getByteSegments();p!=null&&f.putMetadata(wt.BYTE_SEGMENTS,p);const _=a.getECLevel();return _!=null&&f.putMetadata(wt.ERROR_CORRECTION_LEVEL,_),f}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(s==null||a==null)throw new $;const c=this.moduleSize(s,i);let h=s[1];const f=a[1];let p=s[0];const x=(a[0]-p+1)/c,E=(f-h+1)/c;if(x<=0||E<=0)throw new $;const T=c/2;h+=T,p+=T;const b=new Xe(x,E);for(let D=0;D<E;D++){const F=h+D*c;for(let z=0;z<x;z++)i.get(p+z*c,F)&&b.set(z,D)}return b}static moduleSize(i,s){const a=s.getWidth();let c=i[0];const h=i[1];for(;c<a&&s.get(c,h);)c++;if(c===a)throw new $;const f=c-i[0];if(f===0)throw new $;return f}}vt.NO_POINTS=[];class Ta extends Et{constructor(i=500){super(new vt,i)}}var Xi;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Xi||(Xi={}));class Qe{constructor(i,s,a){this.value=i,this.stringValue=s,this.bits=a,Qe.FOR_BITS.set(a,this),Qe.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Qe.L;case"M":return Qe.M;case"Q":return Qe.Q;case"H":return Qe.H;default:throw new N(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Qe))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=Qe.FOR_BITS.size)throw new A;return Qe.FOR_BITS.get(i)}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.L=new Qe(Xi.L,"L",1),Qe.M=new Qe(Xi.M,"M",0),Qe.Q=new Qe(Xi.Q,"Q",3),Qe.H=new Qe(Xi.H,"H",2);class Cn{constructor(i){this.errorCorrectionLevel=Qe.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return k.bitCount(i^s)}static decodeFormatInformation(i,s){const a=Cn.doDecodeFormatInformation(i,s);return a!==null?a:Cn.doDecodeFormatInformation(i^Cn.FORMAT_INFO_MASK_QR,s^Cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const h of Cn.FORMAT_INFO_DECODE_LOOKUP){const f=h[0];if(f===i||f===s)return new Cn(h[1]);let p=Cn.numBitsDiffering(i,f);p<a&&(c=h[1],a=p),i!==s&&(p=Cn.numBitsDiffering(s,f),p<a&&(c=h[1],a=p))}return a<=3?new Cn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Cn))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Cn.FORMAT_INFO_MASK_QR=21522,Cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class j{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const a of s)i+=a.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(i,s,...a){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const h=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const p of f)c+=p.getCount()*(p.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new Q;try{return this.getVersionForNumber((i-17)/4)}catch{throw new Q}}static getVersionForNumber(i){if(i<1||i>40)throw new A;return _e.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<_e.VERSION_DECODE_INFO.length;c++){const h=_e.VERSION_DECODE_INFO[c];if(h===i)return _e.getVersionForNumber(c+7);const f=Cn.numBitsDiffering(i,h);f<s&&(a=c+7,s=f)}return s<=3?_e.getVersionForNumber(a):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new Xe(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const h=this.alignmentPatternCenters[c]-2;for(let f=0;f<a;f++)c===0&&(f===0||f===a-1)||c===a-1&&f===0||s.setRegion(this.alignmentPatternCenters[f]-2,h,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new j(7,new O(1,19)),new j(10,new O(1,16)),new j(13,new O(1,13)),new j(17,new O(1,9))),new _e(2,Int32Array.from([6,18]),new j(10,new O(1,34)),new j(16,new O(1,28)),new j(22,new O(1,22)),new j(28,new O(1,16))),new _e(3,Int32Array.from([6,22]),new j(15,new O(1,55)),new j(26,new O(1,44)),new j(18,new O(2,17)),new j(22,new O(2,13))),new _e(4,Int32Array.from([6,26]),new j(20,new O(1,80)),new j(18,new O(2,32)),new j(26,new O(2,24)),new j(16,new O(4,9))),new _e(5,Int32Array.from([6,30]),new j(26,new O(1,108)),new j(24,new O(2,43)),new j(18,new O(2,15),new O(2,16)),new j(22,new O(2,11),new O(2,12))),new _e(6,Int32Array.from([6,34]),new j(18,new O(2,68)),new j(16,new O(4,27)),new j(24,new O(4,19)),new j(28,new O(4,15))),new _e(7,Int32Array.from([6,22,38]),new j(20,new O(2,78)),new j(18,new O(4,31)),new j(18,new O(2,14),new O(4,15)),new j(26,new O(4,13),new O(1,14))),new _e(8,Int32Array.from([6,24,42]),new j(24,new O(2,97)),new j(22,new O(2,38),new O(2,39)),new j(22,new O(4,18),new O(2,19)),new j(26,new O(4,14),new O(2,15))),new _e(9,Int32Array.from([6,26,46]),new j(30,new O(2,116)),new j(22,new O(3,36),new O(2,37)),new j(20,new O(4,16),new O(4,17)),new j(24,new O(4,12),new O(4,13))),new _e(10,Int32Array.from([6,28,50]),new j(18,new O(2,68),new O(2,69)),new j(26,new O(4,43),new O(1,44)),new j(24,new O(6,19),new O(2,20)),new j(28,new O(6,15),new O(2,16))),new _e(11,Int32Array.from([6,30,54]),new j(20,new O(4,81)),new j(30,new O(1,50),new O(4,51)),new j(28,new O(4,22),new O(4,23)),new j(24,new O(3,12),new O(8,13))),new _e(12,Int32Array.from([6,32,58]),new j(24,new O(2,92),new O(2,93)),new j(22,new O(6,36),new O(2,37)),new j(26,new O(4,20),new O(6,21)),new j(28,new O(7,14),new O(4,15))),new _e(13,Int32Array.from([6,34,62]),new j(26,new O(4,107)),new j(22,new O(8,37),new O(1,38)),new j(24,new O(8,20),new O(4,21)),new j(22,new O(12,11),new O(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new j(30,new O(3,115),new O(1,116)),new j(24,new O(4,40),new O(5,41)),new j(20,new O(11,16),new O(5,17)),new j(24,new O(11,12),new O(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new j(22,new O(5,87),new O(1,88)),new j(24,new O(5,41),new O(5,42)),new j(30,new O(5,24),new O(7,25)),new j(24,new O(11,12),new O(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new j(24,new O(5,98),new O(1,99)),new j(28,new O(7,45),new O(3,46)),new j(24,new O(15,19),new O(2,20)),new j(30,new O(3,15),new O(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new j(28,new O(1,107),new O(5,108)),new j(28,new O(10,46),new O(1,47)),new j(28,new O(1,22),new O(15,23)),new j(28,new O(2,14),new O(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new j(30,new O(5,120),new O(1,121)),new j(26,new O(9,43),new O(4,44)),new j(28,new O(17,22),new O(1,23)),new j(28,new O(2,14),new O(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new j(28,new O(3,113),new O(4,114)),new j(26,new O(3,44),new O(11,45)),new j(26,new O(17,21),new O(4,22)),new j(26,new O(9,13),new O(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new j(28,new O(3,107),new O(5,108)),new j(26,new O(3,41),new O(13,42)),new j(30,new O(15,24),new O(5,25)),new j(28,new O(15,15),new O(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new j(28,new O(4,116),new O(4,117)),new j(26,new O(17,42)),new j(28,new O(17,22),new O(6,23)),new j(30,new O(19,16),new O(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new j(28,new O(2,111),new O(7,112)),new j(28,new O(17,46)),new j(30,new O(7,24),new O(16,25)),new j(24,new O(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new j(30,new O(4,121),new O(5,122)),new j(28,new O(4,47),new O(14,48)),new j(30,new O(11,24),new O(14,25)),new j(30,new O(16,15),new O(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new j(30,new O(6,117),new O(4,118)),new j(28,new O(6,45),new O(14,46)),new j(30,new O(11,24),new O(16,25)),new j(30,new O(30,16),new O(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new j(26,new O(8,106),new O(4,107)),new j(28,new O(8,47),new O(13,48)),new j(30,new O(7,24),new O(22,25)),new j(30,new O(22,15),new O(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new j(28,new O(10,114),new O(2,115)),new j(28,new O(19,46),new O(4,47)),new j(28,new O(28,22),new O(6,23)),new j(30,new O(33,16),new O(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new j(30,new O(8,122),new O(4,123)),new j(28,new O(22,45),new O(3,46)),new j(30,new O(8,23),new O(26,24)),new j(30,new O(12,15),new O(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new j(30,new O(3,117),new O(10,118)),new j(28,new O(3,45),new O(23,46)),new j(30,new O(4,24),new O(31,25)),new j(30,new O(11,15),new O(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new j(30,new O(7,116),new O(7,117)),new j(28,new O(21,45),new O(7,46)),new j(30,new O(1,23),new O(37,24)),new j(30,new O(19,15),new O(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new j(30,new O(5,115),new O(10,116)),new j(28,new O(19,47),new O(10,48)),new j(30,new O(15,24),new O(25,25)),new j(30,new O(23,15),new O(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new j(30,new O(13,115),new O(3,116)),new j(28,new O(2,46),new O(29,47)),new j(30,new O(42,24),new O(1,25)),new j(30,new O(23,15),new O(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new j(30,new O(17,115)),new j(28,new O(10,46),new O(23,47)),new j(30,new O(10,24),new O(35,25)),new j(30,new O(19,15),new O(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new j(30,new O(17,115),new O(1,116)),new j(28,new O(14,46),new O(21,47)),new j(30,new O(29,24),new O(19,25)),new j(30,new O(11,15),new O(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new j(30,new O(13,115),new O(6,116)),new j(28,new O(14,46),new O(23,47)),new j(30,new O(44,24),new O(7,25)),new j(30,new O(59,16),new O(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new j(30,new O(12,121),new O(7,122)),new j(28,new O(12,47),new O(26,48)),new j(30,new O(39,24),new O(14,25)),new j(30,new O(22,15),new O(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new j(30,new O(6,121),new O(14,122)),new j(28,new O(6,47),new O(34,48)),new j(30,new O(46,24),new O(10,25)),new j(30,new O(2,15),new O(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new j(30,new O(17,122),new O(4,123)),new j(28,new O(29,46),new O(14,47)),new j(30,new O(49,24),new O(10,25)),new j(30,new O(24,15),new O(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new j(30,new O(4,122),new O(18,123)),new j(28,new O(13,46),new O(32,47)),new j(30,new O(48,24),new O(14,25)),new j(30,new O(42,15),new O(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new j(30,new O(20,117),new O(4,118)),new j(28,new O(40,47),new O(7,48)),new j(30,new O(43,24),new O(22,25)),new j(30,new O(10,15),new O(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new j(30,new O(19,118),new O(6,119)),new j(28,new O(18,47),new O(31,48)),new j(30,new O(34,24),new O(34,25)),new j(30,new O(20,15),new O(61,16)))];var Dt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Dt||(Dt={}));class En{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&i.flip(c,a)}}En.values=new Map([[Dt.DATA_MASK_000,new En(Dt.DATA_MASK_000,(I,i)=>(I+i&1)===0)],[Dt.DATA_MASK_001,new En(Dt.DATA_MASK_001,(I,i)=>(I&1)===0)],[Dt.DATA_MASK_010,new En(Dt.DATA_MASK_010,(I,i)=>i%3===0)],[Dt.DATA_MASK_011,new En(Dt.DATA_MASK_011,(I,i)=>(I+i)%3===0)],[Dt.DATA_MASK_100,new En(Dt.DATA_MASK_100,(I,i)=>(Math.floor(I/2)+Math.floor(i/3)&1)===0)],[Dt.DATA_MASK_101,new En(Dt.DATA_MASK_101,(I,i)=>I*i%6===0)],[Dt.DATA_MASK_110,new En(Dt.DATA_MASK_110,(I,i)=>I*i%6<3)],[Dt.DATA_MASK_111,new En(Dt.DATA_MASK_111,(I,i)=>(I+i+I*i%3&1)===0)]]);class Ws{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new Q;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let h=0;h<6;h++)i=this.copyBit(h,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let h=5;h>=0;h--)i=this.copyBit(8,h,i);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let h=s-1;h>=c;h--)a=this.copyBit(8,h,a);for(let h=s-8;h<s;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=Cn.decodeFormatInformation(i,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return _e.getVersionForNumber(s);let a=0;const c=i-11;for(let f=5;f>=0;f--)for(let p=i-9;p>=c;p--)a=this.copyBit(p,f,a);let h=_e.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;a=0;for(let f=5;f>=0;f--)for(let p=i-9;p>=c;p--)a=this.copyBit(f,p,a);if(h=_e.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===i)return this.parsedVersion=h,h;throw new Q}copyBit(i,s,a){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?a<<1|1:a<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),a=En.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const h=s.buildFunctionPattern();let f=!0;const p=new Uint8Array(s.getTotalCodewords());let _=0,x=0,E=0;for(let T=c-1;T>0;T-=2){T===6&&T--;for(let b=0;b<c;b++){const D=f?c-1-b:b;for(let F=0;F<2;F++)h.get(T-F,D)||(E++,x<<=1,this.bitMatrix.get(T-F,D)&&(x|=1),E===8&&(p[_++]=x,E=0,x=0))}f=!f}if(_!==s.getTotalCodewords())throw new Q;return p}remask(){if(this.parsedFormatInfo===null)return;const i=En.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,a=i.getWidth();s<a;s++)for(let c=s+1,h=i.getHeight();c<h;c++)i.get(s,c)!==i.get(c,s)&&(i.flip(c,s),i.flip(s,c))}}class Vs{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,a){if(i.length!==s.getTotalCodewords())throw new A;const c=s.getECBlocksForLevel(a);let h=0;const f=c.getECBlocks();for(const F of f)h+=F.getCount();const p=new Array(h);let _=0;for(const F of f)for(let z=0;z<F.getCount();z++){const V=F.getDataCodewords(),Y=c.getECCodewordsPerBlock()+V;p[_++]=new Vs(V,new Uint8Array(Y))}const x=p[0].codewords.length;let E=p.length-1;for(;E>=0&&p[E].codewords.length!==x;)E--;E++;const T=x-c.getECCodewordsPerBlock();let b=0;for(let F=0;F<T;F++)for(let z=0;z<_;z++)p[z].codewords[F]=i[b++];for(let F=E;F<_;F++)p[F].codewords[T]=i[b++];const D=p[0].codewords.length;for(let F=T;F<D;F++)for(let z=0;z<_;z++){const V=z<E?F:F+1;p[z].codewords[V]=i[b++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Sn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Sn||(Sn={}));class Ne{constructor(i,s,a,c){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Ne.FOR_BITS.set(c,this),Ne.FOR_VALUE.set(i,this)}static forBits(i){const s=Ne.FOR_BITS.get(i);if(s===void 0)throw new A;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ne))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Ne.FOR_BITS=new Map,Ne.FOR_VALUE=new Map,Ne.TERMINATOR=new Ne(Sn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ne.NUMERIC=new Ne(Sn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ne.ALPHANUMERIC=new Ne(Sn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ne.STRUCTURED_APPEND=new Ne(Sn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ne.BYTE=new Ne(Sn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ne.ECI=new Ne(Sn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ne.KANJI=new Ne(Sn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ne.FNC1_FIRST_POSITION=new Ne(Sn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ne.FNC1_SECOND_POSITION=new Ne(Sn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ne.HANZI=new Ne(Sn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bt{static decode(i,s,a,c){const h=new ns(i);let f=new qe;const p=new Array;let _=-1,x=-1;try{let E=null,T=!1,b;do{if(h.available()<4)b=Ne.TERMINATOR;else{const D=h.readBits(4);b=Ne.forBits(D)}switch(b){case Ne.TERMINATOR:break;case Ne.FNC1_FIRST_POSITION:case Ne.FNC1_SECOND_POSITION:T=!0;break;case Ne.STRUCTURED_APPEND:if(h.available()<16)throw new Q;_=h.readBits(8),x=h.readBits(8);break;case Ne.ECI:const D=bt.parseECIValue(h);if(E=ee.getCharacterSetECIByValue(D),E===null)throw new Q;break;case Ne.HANZI:const F=h.readBits(4),z=h.readBits(b.getCharacterCountBits(s));F===bt.GB2312_SUBSET&&bt.decodeHanziSegment(h,f,z);break;default:const V=h.readBits(b.getCharacterCountBits(s));switch(b){case Ne.NUMERIC:bt.decodeNumericSegment(h,f,V);break;case Ne.ALPHANUMERIC:bt.decodeAlphanumericSegment(h,f,V,T);break;case Ne.BYTE:bt.decodeByteSegment(h,f,V,E,p,c);break;case Ne.KANJI:bt.decodeKanjiSegment(h,f,V);break;default:throw new Q}break}}while(b!==Ne.TERMINATOR)}catch{throw new Q}return new hr(i,f.toString(),p.length===0?null:p,a===null?null:a.toString(),_,x)}static decodeHanziSegment(i,s,a){if(a*13>i.available())throw new Q;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const f=i.readBits(13);let p=f/96<<8&4294967295|f%96;p<959?p+=41377:p+=42657,c[h]=p>>8&255,c[h+1]=p&255,h+=2,a--}try{s.append(je.decode(c,ve.GB2312))}catch(f){throw new Q(f)}}static decodeKanjiSegment(i,s,a){if(a*13>i.available())throw new Q;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const f=i.readBits(13);let p=f/192<<8&4294967295|f%192;p<7936?p+=33088:p+=49472,c[h]=p>>8,c[h+1]=p,h+=2,a--}try{s.append(je.decode(c,ve.SHIFT_JIS))}catch(f){throw new Q(f)}}static decodeByteSegment(i,s,a,c,h,f){if(8*a>i.available())throw new Q;const p=new Uint8Array(a);for(let x=0;x<a;x++)p[x]=i.readBits(8);let _;c===null?_=ve.guessEncoding(p,f):_=c.getName();try{s.append(je.decode(p,_))}catch(x){throw new Q(x)}h.push(p)}static toAlphaNumericChar(i){if(i>=bt.ALPHANUMERIC_CHARS.length)throw new Q;return bt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,a,c){const h=s.length();for(;a>1;){if(i.available()<11)throw new Q;const f=i.readBits(11);s.append(bt.toAlphaNumericChar(Math.floor(f/45))),s.append(bt.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(i.available()<6)throw new Q;s.append(bt.toAlphaNumericChar(i.readBits(6)))}if(c)for(let f=h;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(i,s,a){for(;a>=3;){if(i.available()<10)throw new Q;const c=i.readBits(10);if(c>=1e3)throw new Q;s.append(bt.toAlphaNumericChar(Math.floor(c/100))),s.append(bt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(bt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(i.available()<7)throw new Q;const c=i.readBits(7);if(c>=100)throw new Q;s.append(bt.toAlphaNumericChar(Math.floor(c/10))),s.append(bt.toAlphaNumericChar(c%10))}else if(a===1){if(i.available()<4)throw new Q;const c=i.readBits(4);if(c>=10)throw new Q;s.append(bt.toAlphaNumericChar(c))}}static parseECIValue(i){const s=i.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=i.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=i.readBits(16);return(s&31)<<16&4294967295|a}throw new Q}}bt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bt.GB2312_SUBSET=1;class js{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class Na{constructor(){this.rsDecoder=new dr(nt.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(Xe.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const a=new Ws(i);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(h){c=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,s);return h.setOther(new js(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(i,s){const a=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),h=i.readCodewords(),f=Vs.getDataBlocks(h,a,c);let p=0;for(const E of f)p+=E.getNumDataCodewords();const _=new Uint8Array(p);let x=0;for(const E of f){const T=E.getCodewords(),b=E.getNumDataCodewords();this.correctErrors(T,b);for(let D=0;D<b;D++)_[x++]=T[D]}return bt.decode(_,a,c,s)}correctErrors(i,s){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-s)}catch{throw new H}for(let c=0;c<s;c++)i[c]=a[c]}}class Gs extends Ce{constructor(i,s,a){super(i,s),this.estimatedModuleSize=a}aboutEquals(i,s,a){if(Math.abs(s-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,s,a){const c=(this.getX()+s)/2,h=(this.getY()+i)/2,f=(this.estimatedModuleSize+a)/2;return new Gs(c,h,f)}}class Rr{constructor(i,s,a,c,h,f,p){this.image=i,this.startX=s,this.startY=a,this.width=c,this.height=h,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,a=this.width,c=i+a,h=this.startY+s/2,f=new Int32Array(3),p=this.image;for(let _=0;_<s;_++){const x=h+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));f[0]=0,f[1]=0,f[2]=0;let E=i;for(;E<c&&!p.get(E,x);)E++;let T=0;for(;E<c;){if(p.get(E,x))if(T===1)f[1]++;else if(T===2){if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,x,E);if(b!==null)return b}f[0]=f[2],f[1]=1,f[2]=0,T=1}else f[++T]++;else T===1&&T++,f[T]++;E++}if(this.foundPatternCross(f)){const b=this.handlePossibleCenter(f,x,c);if(b!==null)return b}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-i[c])>=a)return!1;return!0}crossCheckVertical(i,s,a,c){const h=this.image,f=h.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let _=i;for(;_>=0&&h.get(s,_)&&p[1]<=a;)p[1]++,_--;if(_<0||p[1]>a)return NaN;for(;_>=0&&!h.get(s,_)&&p[0]<=a;)p[0]++,_--;if(p[0]>a)return NaN;for(_=i+1;_<f&&h.get(s,_)&&p[1]<=a;)p[1]++,_++;if(_===f||p[1]>a)return NaN;for(;_<f&&!h.get(s,_)&&p[2]<=a;)p[2]++,_++;if(p[2]>a)return NaN;const x=p[0]+p[1]+p[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(p)?Rr.centerFromEnd(p,_):NaN}handlePossibleCenter(i,s,a){const c=i[0]+i[1]+i[2],h=Rr.centerFromEnd(i,a),f=this.crossCheckVertical(s,h,2*i[1],c);if(!isNaN(f)){const p=(i[0]+i[1]+i[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(p,f,h))return x.combineEstimate(f,h,p);const _=new Gs(h,f,p);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Co extends Ce{constructor(i,s,a,c){super(i,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,a){if(Math.abs(s-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,s,a){const c=this.count+1,h=(this.count*this.getX()+s)/c,f=(this.count*this.getY()+i)/c,p=(this.count*this.estimatedModuleSize+a)/c;return new Co(h,f,p,c)}}class ba{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class on{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(ue.TRY_HARDER)!==void 0,a=i!=null&&i.get(ue.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),f=c.getWidth();let p=Math.floor(3*h/(4*on.MAX_MODULES));(p<on.MIN_SKIP||s)&&(p=on.MIN_SKIP);let _=!1;const x=new Int32Array(5);for(let T=p-1;T<h&&!_;T+=p){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let b=0;for(let D=0;D<f;D++)if(c.get(D,T))(b&1)===1&&b++,x[b]++;else if(b&1)x[b]++;else if(b===4)if(on.foundPatternCross(x)){if(this.handlePossibleCenter(x,T,D,a)===!0)if(p=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>x[2]&&(T+=z-x[2]-p,D=f-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,b=3;continue}b=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,b=3;else x[++b]++;on.foundPatternCross(x)&&this.handlePossibleCenter(x,T,f,a)===!0&&(p=x[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return Ce.orderBestPatterns(E),new ba(E)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let h=0;h<5;h++){const f=i[h];if(f===0)return!1;s+=f}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-i[0])<c&&Math.abs(a-i[1])<c&&Math.abs(3*a-i[2])<3*c&&Math.abs(a-i[3])<c&&Math.abs(a-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,a,c){const h=this.getCrossCheckStateCount();let f=0;const p=this.image;for(;i>=f&&s>=f&&p.get(s-f,i-f);)h[2]++,f++;if(i<f||s<f)return!1;for(;i>=f&&s>=f&&!p.get(s-f,i-f)&&h[1]<=a;)h[1]++,f++;if(i<f||s<f||h[1]>a)return!1;for(;i>=f&&s>=f&&p.get(s-f,i-f)&&h[0]<=a;)h[0]++,f++;if(h[0]>a)return!1;const _=p.getHeight(),x=p.getWidth();for(f=1;i+f<_&&s+f<x&&p.get(s+f,i+f);)h[2]++,f++;if(i+f>=_||s+f>=x)return!1;for(;i+f<_&&s+f<x&&!p.get(s+f,i+f)&&h[3]<a;)h[3]++,f++;if(i+f>=_||s+f>=x||h[3]>=a)return!1;for(;i+f<_&&s+f<x&&p.get(s+f,i+f)&&h[4]<a;)h[4]++,f++;if(h[4]>=a)return!1;const E=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(E-c)<2*c&&on.foundPatternCross(h)}crossCheckVertical(i,s,a,c){const h=this.image,f=h.getHeight(),p=this.getCrossCheckStateCount();let _=i;for(;_>=0&&h.get(s,_);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(s,_)&&p[1]<=a;)p[1]++,_--;if(_<0||p[1]>a)return NaN;for(;_>=0&&h.get(s,_)&&p[0]<=a;)p[0]++,_--;if(p[0]>a)return NaN;for(_=i+1;_<f&&h.get(s,_);)p[2]++,_++;if(_===f)return NaN;for(;_<f&&!h.get(s,_)&&p[3]<a;)p[3]++,_++;if(_===f||p[3]>=a)return NaN;for(;_<f&&h.get(s,_)&&p[4]<a;)p[4]++,_++;if(p[4]>=a)return NaN;const x=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(x-c)>=2*c?NaN:on.foundPatternCross(p)?on.centerFromEnd(p,_):NaN}crossCheckHorizontal(i,s,a,c){const h=this.image,f=h.getWidth(),p=this.getCrossCheckStateCount();let _=i;for(;_>=0&&h.get(_,s);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(_,s)&&p[1]<=a;)p[1]++,_--;if(_<0||p[1]>a)return NaN;for(;_>=0&&h.get(_,s)&&p[0]<=a;)p[0]++,_--;if(p[0]>a)return NaN;for(_=i+1;_<f&&h.get(_,s);)p[2]++,_++;if(_===f)return NaN;for(;_<f&&!h.get(_,s)&&p[3]<a;)p[3]++,_++;if(_===f||p[3]>=a)return NaN;for(;_<f&&h.get(_,s)&&p[4]<a;)p[4]++,_++;if(p[4]>=a)return NaN;const x=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(x-c)>=c?NaN:on.foundPatternCross(p)?on.centerFromEnd(p,_):NaN}handlePossibleCenter(i,s,a,c){const h=i[0]+i[1]+i[2]+i[3]+i[4];let f=on.centerFromEnd(i,a),p=this.crossCheckVertical(s,Math.floor(f),i[2],h);if(!isNaN(p)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(p),i[2],h),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(p),Math.floor(f),i[2],h)))){const _=h/7;let x=!1;const E=this.possibleCenters;for(let T=0,b=E.length;T<b;T++){const D=E[T];if(D.aboutEquals(_,p,f)){E[T]=D.combineEstimate(p,f,_),x=!0;break}}if(!x){const T=new Co(f,p,_);E.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=on.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=on.CENTER_QUORUM&&(i++,s+=f.getEstimatedModuleSize());if(i<3)return!1;const c=s/a;let h=0;for(const f of this.possibleCenters)h+=Math.abs(f.getEstimatedModuleSize()-c);return h<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new $;const s=this.possibleCenters;let a;if(i>3){let c=0,h=0;for(const _ of this.possibleCenters){const x=_.getEstimatedModuleSize();c+=x,h+=x*x}a=c/i;let f=Math.sqrt(h/i-a*a);s.sort((_,x)=>{const E=Math.abs(x.getEstimatedModuleSize()-a),T=Math.abs(_.getEstimatedModuleSize()-a);return E<T?-1:E>T?1:0});const p=Math.max(.2*a,f);for(let _=0;_<s.length&&s.length>3;_++){const x=s[_];Math.abs(x.getEstimatedModuleSize()-a)>p&&(s.splice(_,1),_--)}}if(s.length>3){let c=0;for(const h of s)c+=h.getEstimatedModuleSize();a=c/s.length,s.sort((h,f)=>{if(f.getCount()===h.getCount()){const p=Math.abs(f.getEstimatedModuleSize()-a),_=Math.abs(h.getEstimatedModuleSize()-a);return p<_?1:p>_?-1:0}else return f.getCount()-h.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}on.CENTER_QUORUM=2,on.MIN_SKIP=3,on.MAX_MODULES=57;class Be{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(ue.NEED_RESULT_POINT_CALLBACK);const a=new on(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(a)}processFinderPatternInfo(i){const s=i.getTopLeft(),a=i.getTopRight(),c=i.getBottomLeft(),h=this.calculateModuleSize(s,a,c);if(h<1)throw new $("No pattern found in proccess finder.");const f=Be.computeDimension(s,a,c,h),p=_e.getProvisionalVersionForDimension(f),_=p.getDimensionForVersion()-7;let x=null;if(p.getAlignmentPatternCenters().length>0){const D=a.getX()-s.getX()+c.getX(),F=a.getY()-s.getY()+c.getY(),z=1-3/_,V=Math.floor(s.getX()+z*(D-s.getX())),Y=Math.floor(s.getY()+z*(F-s.getY()));for(let ce=4;ce<=16;ce<<=1)try{x=this.findAlignmentInRegion(h,V,Y,ce);break}catch(he){if(!(he instanceof $))throw he}}const E=Be.createTransform(s,a,c,x,f),T=Be.sampleGrid(this.image,E,f);let b;return x===null?b=[c,s,a]:b=[c,s,a,x],new fr(T,b)}static createTransform(i,s,a,c,h){const f=h-3.5;let p,_,x,E;return c!==null?(p=c.getX(),_=c.getY(),x=f-3,E=x):(p=s.getX()-i.getX()+a.getX(),_=s.getY()-i.getY()+a.getY(),x=f,E=f),Ue.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,x,E,3.5,f,i.getX(),i.getY(),s.getX(),s.getY(),p,_,a.getX(),a.getY())}static sampleGrid(i,s,a){return On.getInstance().sampleGridWithTransform(i,a,a,s)}static computeDimension(i,s,a,c){const h=it.round(Ce.distance(i,s)/c),f=it.round(Ce.distance(i,a)/c);let p=Math.floor((h+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new $("Dimensions could be not found.")}return p}calculateModuleSize(i,s,a){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,a))/2}calculateModuleSizeOneWay(i,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,a,c){let h=this.sizeOfBlackWhiteBlackRun(i,s,a,c),f=1,p=i-(a-i);p<0?(f=i/(i-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(p-i),p=this.image.getWidth()-1);let _=Math.floor(s-(c-s)*f);return f=1,_<0?(f=s/(s-_),_=0):_>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(_-s),_=this.image.getHeight()-1),p=Math.floor(i+(p-i)*f),h+=this.sizeOfBlackWhiteBlackRun(i,s,p,_),h-1}sizeOfBlackWhiteBlackRun(i,s,a,c){const h=Math.abs(c-s)>Math.abs(a-i);if(h){let D=i;i=s,s=D,D=a,a=c,c=D}const f=Math.abs(a-i),p=Math.abs(c-s);let _=-f/2;const x=i<a?1:-1,E=s<c?1:-1;let T=0;const b=a+x;for(let D=i,F=s;D!==b;D+=x){const z=h?F:D,V=h?D:F;if(T===1===this.image.get(z,V)){if(T===2)return it.distance(D,F,i,s);T++}if(_+=p,_>0){if(F===c)break;F+=E,_-=f}}return T===2?it.distance(a+x,c,i,s):NaN}findAlignmentInRegion(i,s,a,c){const h=Math.floor(c*i),f=Math.max(0,s-h),p=Math.min(this.image.getWidth()-1,s+h);if(p-f<i*3)throw new $("Alignment top exceeds estimated module size.");const _=Math.max(0,a-h),x=Math.min(this.image.getHeight()-1,a+h);if(x-_<i*3)throw new $("Alignment bottom exceeds estimated module size.");return new Rr(this.image,f,_,p-f,x-_,i,this.resultPointCallback).find()}}class dn{constructor(){this.decoder=new Na}getDecoder(){return this.decoder}decode(i,s){let a,c;if(s!=null&&s.get(ue.PURE_BARCODE)!==void 0){const _=dn.extractPureBits(i.getBlackMatrix());a=this.decoder.decodeBitMatrix(_,s),c=dn.NO_POINTS}else{const _=new Be(i.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(_.getBits(),s),c=_.getPoints()}a.getOther()instanceof js&&a.getOther().applyMirroredCorrection(c);const h=new He(a.getText(),a.getRawBytes(),void 0,c,ae.QR_CODE,void 0),f=a.getByteSegments();f!==null&&h.putMetadata(wt.BYTE_SEGMENTS,f);const p=a.getECLevel();return p!==null&&h.putMetadata(wt.ERROR_CORRECTION_LEVEL,p),a.hasStructuredAppend()&&(h.putMetadata(wt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(wt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(s===null||a===null)throw new $;const c=this.moduleSize(s,i);let h=s[1],f=a[1],p=s[0],_=a[0];if(p>=_||h>=f)throw new $;if(f-h!==_-p&&(_=p+(f-h),_>=i.getWidth()))throw new $;const x=Math.round((_-p+1)/c),E=Math.round((f-h+1)/c);if(x<=0||E<=0)throw new $;if(E!==x)throw new $;const T=Math.floor(c/2);h+=T,p+=T;const b=p+Math.floor((x-1)*c)-_;if(b>0){if(b>T)throw new $;p-=b}const D=h+Math.floor((E-1)*c)-f;if(D>0){if(D>T)throw new $;h-=D}const F=new Xe(x,E);for(let z=0;z<E;z++){const V=h+Math.floor(z*c);for(let Y=0;Y<x;Y++)i.get(p+Math.floor(Y*c),V)&&F.set(Y,z)}return F}static moduleSize(i,s){const a=s.getHeight(),c=s.getWidth();let h=i[0],f=i[1],p=!0,_=0;for(;h<c&&f<a;){if(p!==s.get(h,f)){if(++_===5)break;p=!p}h++,f++}if(h===c||f===a)throw new $;return(h-i[0])/7}}dn.NO_POINTS=new Array;class ye{PDF417Common(){}static getBitCountSum(i){return it.sum(i)}static toIntArray(i){if(i==null||!i.length)return ye.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let a=0;for(const c of i)s[a++]=c;return s}static getCodeword(i){const s=P.binarySearch(ye.SYMBOL_TABLE,i&262143);return s<0?-1:(ye.CODEWORD_TABLE[s]-1)%ye.NUMBER_OF_CODEWORDS}}ye.NUMBER_OF_CODEWORDS=929,ye.MAX_CODEWORDS_IN_BARCODE=ye.NUMBER_OF_CODEWORDS-1,ye.MIN_ROWS_IN_BARCODE=3,ye.MAX_ROWS_IN_BARCODE=90,ye.MODULES_IN_CODEWORD=17,ye.MODULES_IN_STOP_PATTERN=18,ye.BARS_IN_MODULE=8,ye.EMPTY_INT_ARRAY=new Int32Array([]),ye.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ye.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class nc{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(i,s,a){let c=i.getBlackMatrix(),h=We.detect(a,c);return h.length||(c=c.clone(),c.rotate180(),h=We.detect(a,c)),new nc(c,h)}static detect(i,s){const a=new Array;let c=0,h=0,f=!1;for(;c<s.getHeight();){const p=We.findVertices(s,c,h);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,h=0;for(const _ of a)_[1]!=null&&(c=Math.trunc(Math.max(c,_[1].getY()))),_[3]!=null&&(c=Math.max(c,Math.trunc(_[3].getY())));c+=We.ROW_STEP;continue}if(f=!0,a.push(p),!i)break;p[2]!=null?(h=Math.trunc(p[2].getX()),c=Math.trunc(p[2].getY())):(h=Math.trunc(p[4].getX()),c=Math.trunc(p[4].getY()))}return a}static findVertices(i,s,a){const c=i.getHeight(),h=i.getWidth(),f=new Array(8);return We.copyToResult(f,We.findRowsWithPattern(i,c,h,s,a,We.START_PATTERN),We.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),We.copyToResult(f,We.findRowsWithPattern(i,c,h,s,a,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),f}static copyToResult(i,s,a){for(let c=0;c<a.length;c++)i[a[c]]=s[c]}static findRowsWithPattern(i,s,a,c,h,f){const p=new Array(4);let _=!1;const x=new Int32Array(f.length);for(;c<s;c+=We.ROW_STEP){let T=We.findGuardPattern(i,h,c,a,!1,f,x);if(T!=null){for(;c>0;){const b=We.findGuardPattern(i,h,--c,a,!1,f,x);if(b!=null)T=b;else{c++;break}}p[0]=new Ce(T[0],c),p[1]=new Ce(T[1],c),_=!0;break}}let E=c+1;if(_){let T=0,b=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;E<s;E++){const D=We.findGuardPattern(i,b[0],E,a,!1,f,x);if(D!=null&&Math.abs(b[0]-D[0])<We.MAX_PATTERN_DRIFT&&Math.abs(b[1]-D[1])<We.MAX_PATTERN_DRIFT)b=D,T=0;else{if(T>We.SKIPPED_ROW_COUNT_MAX)break;T++}}E-=T+1,p[2]=new Ce(b[0],E),p[3]=new Ce(b[1],E)}return E-c<We.BARCODE_MIN_HEIGHT&&P.fill(p,null),p}static findGuardPattern(i,s,a,c,h,f,p){P.fillWithin(p,0,p.length,0);let _=s,x=0;for(;i.get(_,a)&&_>0&&x++<We.MAX_PIXEL_DRIFT;)_--;let E=_,T=0,b=f.length;for(let D=h;E<c;E++)if(i.get(E,a)!==D)p[T]++;else{if(T===b-1){if(We.patternMatchVariance(p,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([_,E]);_+=p[0]+p[1],W.arraycopy(p,2,p,0,T-1),p[T-1]=0,p[T]=0,T--}else T++;p[T]=1,D=!D}return T===b-1&&We.patternMatchVariance(p,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([_,E-1]):null}static patternMatchVariance(i,s,a){let c=i.length,h=0,f=0;for(let x=0;x<c;x++)h+=i[x],f+=s[x];if(h<f)return 1/0;let p=h/f;a*=p;let _=0;for(let x=0;x<c;x++){let E=i[x],T=s[x]*p,b=E>T?E-T:T-E;if(b>a)return 1/0;_+=b}return _/h}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class rn{constructor(i,s){if(s.length===0)throw new A;this.field=i;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),W.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(i,s),this.coefficients[c]);return s}add(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,a=i.coefficients;if(s.length>a.length){let f=s;s=a,a=f}let c=new Int32Array(a.length),h=a.length-s.length;W.arraycopy(a,0,c,0,h);for(let f=h;f<a.length;f++)c[f]=this.field.add(s[f-h],a[f]);return new rn(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof rn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new rn(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=i.coefficients,h=c.length,f=new Int32Array(a+h-1);for(let p=0;p<a;p++){let _=s[p];for(let x=0;x<h;x++)f[p+x]=this.field.add(f[p+x],this.field.multiply(_,c[x]))}return new rn(this.field,f)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let a=0;a<i;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new rn(this.field,s)}multiplyScalar(i){if(i===0)return new rn(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],i);return new rn(this.field,a)}multiplyByMonomial(i,s){if(i<0)throw new A;if(s===0)return new rn(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+i);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],s);return new rn(this.field,c)}toString(){let i=new qe;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(i.append(" - "),a=-a):i.length()>0&&i.append(" + "),(s===0||a!==1)&&i.append(a),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Ma{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new A;return this.logTable[i]}inverse(i){if(i===0)throw new Ni;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Qi extends Ma{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let a=1;for(let c=0;c<i;c++)this.expTable[c]=a,a=a*s%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new rn(this,new Int32Array([0])),this.one=new rn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new A;if(s===0)return this.zero;let a=new Int32Array(i+1);return a[0]=s,new rn(this,a)}}Qi.PDF417_GF=new Qi(ye.NUMBER_OF_CODEWORDS,3);class Eo{constructor(){this.field=Qi.PDF417_GF}decode(i,s,a){let c=new rn(this.field,i),h=new Int32Array(s),f=!1;for(let F=s;F>0;F--){let z=c.evaluateAt(this.field.exp(F));h[s-F]=z,z!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(a!=null)for(const F of a){let z=this.field.exp(i.length-1-F),V=new rn(this.field,new Int32Array([this.field.subtract(0,z),1]));p=p.multiply(V)}let _=new rn(this.field,h),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),_,s),E=x[0],T=x[1],b=this.findErrorLocations(E),D=this.findErrorMagnitudes(T,E,b);for(let F=0;F<b.length;F++){let z=i.length-1-this.field.log(b[F]);if(z<0)throw H.getChecksumInstance();i[z]=this.field.subtract(i[z],D[F])}return b.length}runEuclideanAlgorithm(i,s,a){if(i.getDegree()<s.getDegree()){let b=i;i=s,s=b}let c=i,h=s,f=this.field.getZero(),p=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let b=c,D=f;if(c=h,f=p,c.isZero())throw H.getChecksumInstance();h=b;let F=this.field.getZero(),z=c.getCoefficient(c.getDegree()),V=this.field.inverse(z);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let Y=h.getDegree()-c.getDegree(),ce=this.field.multiply(h.getCoefficient(h.getDegree()),V);F=F.add(this.field.buildMonomial(Y,ce)),h=h.subtract(c.multiplyByMonomial(Y,ce))}p=F.multiply(f).subtract(D).negative()}let _=p.getCoefficient(0);if(_===0)throw H.getChecksumInstance();let x=this.field.inverse(_),E=p.multiply(x),T=h.multiply(x);return[E,T]}findErrorLocations(i){let s=i.getDegree(),a=new Int32Array(s),c=0;for(let h=1;h<this.field.getSize()&&c<s;h++)i.evaluateAt(h)===0&&(a[c]=this.field.inverse(h),c++);if(c!==s)throw H.getChecksumInstance();return a}findErrorMagnitudes(i,s,a){let c=s.getDegree(),h=new Int32Array(c);for(let x=1;x<=c;x++)h[c-x]=this.field.multiply(x,s.getCoefficient(x));let f=new rn(this.field,h),p=a.length,_=new Int32Array(p);for(let x=0;x<p;x++){let E=this.field.inverse(a[x]),T=this.field.subtract(0,i.evaluateAt(E)),b=this.field.inverse(f.evaluateAt(E));_[x]=this.field.multiply(T,b)}return _}}class gi{constructor(i,s,a,c,h){i instanceof gi?this.constructor_2(i):this.constructor_1(i,s,a,c,h)}constructor_1(i,s,a,c,h){const f=s==null||a==null,p=c==null||h==null;if(f&&p)throw new $;f?(s=new Ce(0,c.getY()),a=new Ce(0,h.getY())):p&&(c=new Ce(i.getWidth()-1,s.getY()),h=new Ce(i.getWidth()-1,a.getY())),this.image=i,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new gi(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,a){let c=this.topLeft,h=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(i>0){let _=a?this.topLeft:this.topRight,x=Math.trunc(_.getY()-i);x<0&&(x=0);let E=new Ce(_.getX(),x);a?c=E:f=E}if(s>0){let _=a?this.bottomLeft:this.bottomRight,x=Math.trunc(_.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let E=new Ce(_.getX(),x);a?h=E:p=E}return new gi(this.image,c,h,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fn{constructor(i,s,a,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class mi{constructor(){this.buffer=""}static form(i,s){let a=-1;function c(f,p,_,x,E,T){if(f==="%%")return"%";if(s[++a]===void 0)return;f=x?parseInt(x.substr(1)):void 0;let b=E?parseInt(E.substr(1)):void 0,D;switch(T){case"s":D=s[a];break;case"c":D=s[a][0];break;case"f":D=parseFloat(s[a]).toFixed(f);break;case"p":D=parseFloat(s[a]).toPrecision(f);break;case"e":D=parseFloat(s[a]).toExponential(f);break;case"x":D=parseInt(s[a]).toString(b||16);break;case"d":D=parseFloat(parseInt(s[a],b||10).toPrecision(f)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(b);let F=parseInt(_),z=_&&_[0]+""=="0"?"0":" ";for(;D.length<F;)D=p!==void 0?D+z:z+D;return D}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(h,c)}format(i,...s){this.buffer+=mi.form(i,s)}toString(){return this.buffer}}class is{constructor(i){this.boundingBox=new gi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let a=1;a<is.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(i)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(i)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new mi;let s=0;for(const a of this.codewords){if(a==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return i.toString()}}is.MAX_NEARBY_DISTANCE=5;class rs{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[a,c]of this.values.entries()){const h={getKey:()=>a,getValue:()=>c};h.getValue()>i?(i=h.getValue(),s=[],s.push(h.getKey())):h.getValue()===i&&s.push(h.getKey())}return ye.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class ic extends is{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(h.getY())),_=-1,x=1,E=0;for(let T=f;T<p;T++){if(s[T]==null)continue;let b=s[T],D=b.getRowNumber()-_;if(D===0)E++;else if(D===1)x=Math.max(x,E),E=1,_=b.getRowNumber();else if(D<0||b.getRowNumber()>=i.getRowCount()||D>T)s[T]=null;else{let F;x>2?F=(x-2)*D:F=D;let z=F>=T;for(let V=1;V<=F&&!z;V++)z=s[T-V]!=null;z?s[T]=null:(_=b.getRowNumber(),E=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.getCodewords(),_=-1;for(let x=h;x<f;x++){if(p[x]==null)continue;let E=p[x];E.setRowNumberAsRowIndicatorColumn();let T=E.getRowNumber()-_;T===0||(T===1?_=E.getRowNumber():E.getRowNumber()>=i.getRowCount()?p[x]=null:_=E.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new rs,a=new rs,c=new rs,h=new rs;for(let p of i){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let _=p.getValue()%30,x=p.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(_*3+1);break;case 1:h.setValue(_/3),c.setValue(_%3);break;case 2:s.setValue(_+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<ye.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>ye.MAX_ROWS_IN_BARCODE)return null;let f=new fn(s.getValue()[0],a.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,s){for(let a=0;a<i.length;a++){let c=i[a];if(i[a]==null)continue;let h=c.getValue()%30,f=c.getRowNumber();if(f>s.getRowCount()){i[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:h*3+1!==s.getRowCountUpperPart()&&(i[a]=null);break;case 1:(Math.trunc(h/3)!==s.getErrorCorrectionLevel()||h%3!==s.getRowCountLowerPart())&&(i[a]=null);break;case 2:h+1!==s.getColumnCount()&&(i[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ss{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=ye.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++)if(i[a]!=null&&s[a]!=null&&i[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[a];h!=null&&(h.setRowNumber(i[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let f=this.barcodeColumnCount+1;f>0&&h<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[a];p!=null&&(h=ss.adjustRowNumberIfValid(c,h,p),p.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let f=1;f<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[a];p!=null&&(h=ss.adjustRowNumberIfValid(c,h,p),p.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(i)?(a.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,a){if(!this.detectionResultColumns[i-1])return;let c=a[s],h=this.detectionResultColumns[i-1].getCodewords(),f=h;this.detectionResultColumns[i+1]!=null&&(f=this.detectionResultColumns[i+1].getCodewords());let p=new Array(14);p[2]=h[s],p[3]=f[s],s>0&&(p[0]=a[s-1],p[4]=h[s-1],p[5]=f[s-1]),s>1&&(p[8]=a[s-2],p[10]=h[s-2],p[11]=f[s-2]),s<a.length-1&&(p[1]=a[s+1],p[6]=h[s+1],p[7]=f[s+1]),s<a.length-2&&(p[9]=a[s+2],p[12]=h[s+2],p[13]=f[s+2]);for(let _ of p)if(ss.adjustRowNumber(c,_))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new mi;for(let a=0;a<i.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[a];if(h==null){s.format("    |   ");continue}s.format(" %3d|%3d",h.getRowNumber(),h.getValue())}s.format("%n")}return s.toString()}}class Dr{constructor(i,s,a,c){this.rowNumber=Dr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Dr.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Dr.BARCODE_ROW_UNKNOWN=-1;class Pn{static initialize(){for(let i=0;i<ye.SYMBOL_TABLE.length;i++){let s=ye.SYMBOL_TABLE[i],a=s&1;for(let c=0;c<ye.BARS_IN_MODULE;c++){let h=0;for(;(s&1)===a;)h+=1,s>>=1;a=s&1,Pn.RATIOS_TABLE[i]||(Pn.RATIOS_TABLE[i]=new Array(ye.BARS_IN_MODULE)),Pn.RATIOS_TABLE[i][ye.BARS_IN_MODULE-c-1]=Math.fround(h/ye.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=Pn.getDecodedCodewordValue(Pn.sampleBitCounts(i));return s!==-1?s:Pn.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=it.sum(i),a=new Int32Array(ye.BARS_IN_MODULE),c=0,h=0;for(let f=0;f<ye.MODULES_IN_CODEWORD;f++){let p=s/(2*ye.MODULES_IN_CODEWORD)+f*s/ye.MODULES_IN_CODEWORD;h+i[c]<=p&&(h+=i[c],c++),a[c]++}return a}static getDecodedCodewordValue(i){let s=Pn.getBitValue(i);return ye.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let a=0;a<i.length;a++)for(let c=0;c<i[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=it.sum(i),a=new Array(ye.BARS_IN_MODULE);if(s>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(i[f]/s);let c=Tr.MAX_VALUE,h=-1;this.bSymbolTableReady||Pn.initialize();for(let f=0;f<Pn.RATIOS_TABLE.length;f++){let p=0,_=Pn.RATIOS_TABLE[f];for(let x=0;x<ye.BARS_IN_MODULE;x++){let E=Math.fround(_[x]-a[x]);if(p+=Math.fround(E*E),p>=c)break}p<c&&(c=p,h=ye.SYMBOL_TABLE[f])}return h}}Pn.bSymbolTableReady=!1,Pn.RATIOS_TABLE=new Array(ye.SYMBOL_TABLE.length).map(I=>new Array(ye.BARS_IN_MODULE));class Oa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class rt{static parseLong(i,s=void 0){return parseInt(i,s)}}class rc extends y{}rc.kind="NullPointerException";class _i{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,a){if(i==null)throw new rc;if(s<0||s>i.length||a<0||s+a>i.length||s+a<0)throw new me;if(a===0)return;for(let c=0;c<a;c++)this.write(i[s+c])}flush(){}close(){}}class Zs extends y{}class sc extends _i{constructor(i=32){if(super(),this.count=0,i<0)throw new A("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let a=this.buf.length<<1;if(a-i<0&&(a=i),a<0){if(i<0)throw new Zs;a=k.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,a)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,a){if(s<0||s>i.length||a<0||s+a-i.length>0)throw new me;this.ensureCapacity(this.count+a),W.arraycopy(i,s,this.buf,this.count,a),this.count+=a}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Ct;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ct||(Ct={}));function So(){if(typeof window<"u")return window.BigInt||null;if(typeof Oo<"u")return Oo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ao;function Ki(I){if(typeof Ao>"u"&&(Ao=So()),Ao===null)throw new Error("BigInt is not supported!");return Ao(I)}function ch(){let I=[];I[0]=Ki(1);let i=Ki(900);I[1]=i;for(let s=2;s<16;s++)I[s]=I[s-1]*i;return I}class X{static decode(i,s){let a=new qe(""),c=ee.ISO8859_1;a.enableDecoding(c);let h=1,f=i[h++],p=new Oa;for(;h<i[0];){switch(f){case X.TEXT_COMPACTION_MODE_LATCH:h=X.textCompaction(i,h,a);break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:h=X.byteCompaction(f,i,c,h,a);break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h++]);break;case X.NUMERIC_COMPACTION_MODE_LATCH:h=X.numericCompaction(i,h,a);break;case X.ECI_CHARSET:ee.getCharacterSetECIByValue(i[h++]);break;case X.ECI_GENERAL_PURPOSE:h+=2;break;case X.ECI_USER_DEFINED:h++;break;case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=X.decodeMacroBlock(i,h,p);break;case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:throw new Q;default:h--,h=X.textCompaction(i,h,a);break}if(h<i.length)f=i[h++];else throw Q.getFormatInstance()}if(a.length()===0)throw Q.getFormatInstance();let _=new hr(null,a.toString(),null,s);return _.setOther(p),_}static decodeMacroBlock(i,s,a){if(s+X.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw Q.getFormatInstance();let c=new Int32Array(X.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<X.NUMBER_OF_SEQUENCE_CODEWORDS;p++,s++)c[p]=i[s];a.setSegmentIndex(k.parseInt(X.decodeBase900toBase10(c,X.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new qe;s=X.textCompaction(i,s,h),a.setFileId(h.toString());let f=-1;for(i[s]===X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<i[0];)switch(i[s]){case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new qe;s=X.textCompaction(i,s+1,p),a.setFileName(p.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new qe;s=X.textCompaction(i,s+1,_),a.setSender(_.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new qe;s=X.textCompaction(i,s+1,x),a.setAddressee(x.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new qe;s=X.numericCompaction(i,s+1,E),a.setSegmentCount(k.parseInt(E.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new qe;s=X.numericCompaction(i,s+1,T),a.setTimestamp(rt.parseLong(T.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let b=new qe;s=X.numericCompaction(i,s+1,b),a.setChecksum(k.parseInt(b.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new qe;s=X.numericCompaction(i,s+1,D),a.setFileSize(rt.parseLong(D.toString()));break;default:throw Q.getFormatInstance()}break;case X.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw Q.getFormatInstance()}if(f!==-1){let p=s-f;a.isLastSegment()&&p--,a.setOptionalData(P.copyOfRange(i,f,f+p))}return s}static textCompaction(i,s,a){let c=new Int32Array((i[0]-s)*2),h=new Int32Array((i[0]-s)*2),f=0,p=!1;for(;s<i[0]&&!p;){let _=i[s++];if(_<X.TEXT_COMPACTION_MODE_LATCH)c[f]=_/30,c[f+1]=_%30,f+=2;else switch(_){case X.TEXT_COMPACTION_MODE_LATCH:c[f++]=X.TEXT_COMPACTION_MODE_LATCH;break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,p=!0;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[s++],h[f]=_,f++;break}}return X.decodeTextCompaction(c,h,f,a),s}static decodeTextCompaction(i,s,a,c){let h=Ct.ALPHA,f=Ct.ALPHA,p=0;for(;p<a;){let _=i[p],x="";switch(h){case Ct.ALPHA:if(_<26)x=String.fromCharCode(65+_);else switch(_){case 26:x=" ";break;case X.LL:h=Ct.LOWER;break;case X.ML:h=Ct.MIXED;break;case X.PS:f=h,h=Ct.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[p]);break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break;case Ct.LOWER:if(_<26)x=String.fromCharCode(97+_);else switch(_){case 26:x=" ";break;case X.AS:f=h,h=Ct.ALPHA_SHIFT;break;case X.ML:h=Ct.MIXED;break;case X.PS:f=h,h=Ct.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[p]);break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break;case Ct.MIXED:if(_<X.PL)x=X.MIXED_CHARS[_];else switch(_){case X.PL:h=Ct.PUNCT;break;case 26:x=" ";break;case X.LL:h=Ct.LOWER;break;case X.AL:h=Ct.ALPHA;break;case X.PS:f=h,h=Ct.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[p]);break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break;case Ct.PUNCT:if(_<X.PAL)x=X.PUNCT_CHARS[_];else switch(_){case X.PAL:h=Ct.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[p]);break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(h=f,_<26)x=String.fromCharCode(65+_);else switch(_){case 26:x=" ";break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(h=f,_<X.PAL)x=X.PUNCT_CHARS[_];else switch(_){case X.PAL:h=Ct.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[p]);break;case X.TEXT_COMPACTION_MODE_LATCH:h=Ct.ALPHA;break}break}x!==""&&c.append(x),p++}}static byteCompaction(i,s,a,c,h){let f=new sc,p=0,_=0,x=!1;switch(i){case X.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),T=s[c++];for(;c<s[0]&&!x;)switch(E[p++]=T,_=900*_+T,T=s[c++],T){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(p%5===0&&p>0){for(let b=0;b<6;++b)f.write(Number(Ki(_)>>Ki(8*(5-b))));_=0,p=0}break}c===s[0]&&T<X.TEXT_COMPACTION_MODE_LATCH&&(E[p++]=T);for(let b=0;b<p;b++)f.write(E[b]);break;case X.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!x;){let b=s[c++];if(b<X.TEXT_COMPACTION_MODE_LATCH)p++,_=900*_+b;else switch(b){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(p%5===0&&p>0){for(let D=0;D<6;++D)f.write(Number(Ki(_)>>Ki(8*(5-D))));_=0,p=0}}break}return h.append(je.decode(f.toByteArray(),a)),c}static numericCompaction(i,s,a){let c=0,h=!1,f=new Int32Array(X.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!h;){let p=i[s++];if(s===i[0]&&(h=!0),p<X.TEXT_COMPACTION_MODE_LATCH)f[c]=p,c++;else switch(p){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,h=!0;break}(c%X.MAX_NUMERIC_CODEWORDS===0||p===X.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(a.append(X.decodeBase900toBase10(f,c)),c=0)}return s}static decodeBase900toBase10(i,s){let a=Ki(0);for(let h=0;h<s;h++)a+=X.EXP900[s-h-1]*Ki(i[h]);let c=a.toString();if(c.charAt(0)!=="1")throw new Q;return c.substring(1)}}X.TEXT_COMPACTION_MODE_LATCH=900,X.BYTE_COMPACTION_MODE_LATCH=901,X.NUMERIC_COMPACTION_MODE_LATCH=902,X.BYTE_COMPACTION_MODE_LATCH_6=924,X.ECI_USER_DEFINED=925,X.ECI_GENERAL_PURPOSE=926,X.ECI_CHARSET=927,X.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,X.MACRO_PDF417_TERMINATOR=922,X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,X.MAX_NUMERIC_CODEWORDS=15,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,X.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,X.PL=25,X.LL=27,X.AS=27,X.ML=28,X.AL=28,X.PS=29,X.PAL=29,X.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,X.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",X.EXP900=So()?ch():[],X.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ge{constructor(){}static decode(i,s,a,c,h,f,p){let _=new gi(i,s,a,c,h),x=null,E=null,T;for(let F=!0;;F=!1){if(s!=null&&(x=Ge.getRowIndicatorColumn(i,_,s,!0,f,p)),c!=null&&(E=Ge.getRowIndicatorColumn(i,_,c,!1,f,p)),T=Ge.merge(x,E),T==null)throw $.getNotFoundInstance();let z=T.getBoundingBox();if(F&&z!=null&&(z.getMinY()<_.getMinY()||z.getMaxY()>_.getMaxY()))_=z;else break}T.setBoundingBox(_);let b=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,x),T.setDetectionResultColumn(b,E);let D=x!=null;for(let F=1;F<=b;F++){let z=D?F:b-F;if(T.getDetectionResultColumn(z)!==void 0)continue;let V;z===0||z===b?V=new ic(_,z===0):V=new is(_),T.setDetectionResultColumn(z,V);let Y=-1,ce=Y;for(let he=_.getMinY();he<=_.getMaxY();he++){if(Y=Ge.getStartColumn(T,z,he,D),Y<0||Y>_.getMaxX()){if(ce===-1)continue;Y=ce}let re=Ge.detectCodeword(i,_.getMinX(),_.getMaxX(),D,Y,he,f,p);re!=null&&(V.setCodeword(he,re),ce=Y,f=Math.min(f,re.getWidth()),p=Math.max(p,re.getWidth()))}}return Ge.createDecoderResult(T)}static merge(i,s){if(i==null&&s==null)return null;let a=Ge.getBarcodeMetadata(i,s);if(a==null)return null;let c=gi.merge(Ge.adjustBoundingBox(i),Ge.adjustBoundingBox(s));return new ss(a,c)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let a=Ge.getMax(s),c=0;for(let p of s)if(c+=a-p,p>0)break;let h=i.getCodewords();for(let p=0;c>0&&h[p]==null;p++)c--;let f=0;for(let p=s.length-1;p>=0&&(f+=a-s[p],!(s[p]>0));p--);for(let p=h.length-1;f>0&&h[p]==null;p--)f--;return i.getBoundingBox().addMissingRows(c,f,i.isLeft())}static getMax(i){let s=-1;for(let a of i)s=Math.max(s,a);return s}static getBarcodeMetadata(i,s){let a;if(i==null||(a=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(i,s,a,c,h,f){let p=new ic(s,c);for(let _=0;_<2;_++){let x=_===0?1:-1,E=Math.trunc(Math.trunc(a.getX()));for(let T=Math.trunc(Math.trunc(a.getY()));T<=s.getMaxY()&&T>=s.getMinY();T+=x){let b=Ge.detectCodeword(i,0,i.getWidth(),c,E,T,h,f);b!=null&&(p.setCodeword(T,b),c?E=b.getStartX():E=b.getEndX())}}return p}static adjustCodewordCount(i,s){let a=s[0][1],c=a.getValue(),h=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ge.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(h<1||h>ye.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();a.setValue(h)}else c[0]!==h&&a.setValue(h)}static createDecoderResult(i){let s=Ge.createBarcodeMatrix(i);Ge.adjustCodewordCount(i,s);let a=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),h=[],f=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let x=0;x<i.getBarcodeColumnCount();x++){let E=s[_][x+1].getValue(),T=_*i.getBarcodeColumnCount()+x;E.length===0?a.push(T):E.length===1?c[T]=E[0]:(f.push(T),h.push(E))}let p=new Array(h.length);for(let _=0;_<p.length;_++)p[_]=h[_];return Ge.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,ye.toIntArray(a),ye.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(i,s,a,c,h){let f=new Int32Array(c.length),p=100;for(;p-- >0;){for(let _=0;_<f.length;_++)s[c[_]]=h[_][f[_]];try{return Ge.decodeCodewords(s,i,a)}catch(_){if(!(_ instanceof H))throw _}if(f.length===0)throw H.getChecksumInstance();for(let _=0;_<f.length;_++)if(f[_]<h[_].length-1){f[_]++;break}else if(f[_]=0,_===f.length-1)throw H.getChecksumInstance()}throw H.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let h=0;h<s[c].length;h++)s[c][h]=new rs;let a=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let f=h.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][a].setValue(h.getValue())}}}a++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,a,c){let h=c?1:-1,f=null;if(Ge.isValidBarcodeColumn(i,s-h)&&(f=i.getDetectionResultColumn(s-h).getCodeword(a)),f!=null)return c?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(s).getCodewordNearby(a),f!=null)return c?f.getStartX():f.getEndX();if(Ge.isValidBarcodeColumn(i,s-h)&&(f=i.getDetectionResultColumn(s-h).getCodewordNearby(a)),f!=null)return c?f.getEndX():f.getStartX();let p=0;for(;Ge.isValidBarcodeColumn(i,s-h);){s-=h;for(let _ of i.getDetectionResultColumn(s).getCodewords())if(_!=null)return(c?_.getEndX():_.getStartX())+h*p*(_.getEndX()-_.getStartX());p++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,a,c,h,f,p,_){h=Ge.adjustCodewordStartColumn(i,s,a,c,h,f);let x=Ge.getModuleBitCount(i,s,a,c,h,f);if(x==null)return null;let E,T=it.sum(x);if(c)E=h+T;else{for(let F=0;F<x.length/2;F++){let z=x[F];x[F]=x[x.length-1-F],x[x.length-1-F]=z}E=h,h=E-T}if(!Ge.checkCodewordSkew(T,p,_))return null;let b=Pn.getDecodedValue(x),D=ye.getCodeword(b);return D===-1?null:new Dr(h,E,Ge.getCodewordBucketNumber(b),D)}static getModuleBitCount(i,s,a,c,h,f){let p=h,_=new Int32Array(8),x=0,E=c?1:-1,T=c;for(;(c?p<a:p>=s)&&x<_.length;)i.get(p,f)===T?(_[x]++,p+=E):(x++,T=!T);return x===_.length||p===(c?a:s)&&x===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,a,c,h,f){let p=h,_=c?-1:1;for(let x=0;x<2;x++){for(;(c?p>=s:p<a)&&c===i.get(p,f);){if(Math.abs(h-p)>Ge.CODEWORD_SKEW_SIZE)return h;p+=_}_=-_,c=!c}return p}static checkCodewordSkew(i,s,a){return s-Ge.CODEWORD_SKEW_SIZE<=i&&i<=a+Ge.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,a){if(i.length===0)throw Q.getFormatInstance();let c=1<<s+1,h=Ge.correctErrors(i,a,c);Ge.verifyCodewordCount(i,c);let f=X.decode(i,""+s);return f.setErrorsCorrected(h),f.setErasures(a.length),f}static correctErrors(i,s,a){if(s!=null&&s.length>a/2+Ge.MAX_ERRORS||a<0||a>Ge.MAX_EC_CODEWORDS)throw H.getChecksumInstance();return Ge.errorCorrection.decode(i,a,s)}static verifyCodewordCount(i,s){if(i.length<4)throw Q.getFormatInstance();let a=i[0];if(a>i.length)throw Q.getFormatInstance();if(a===0)if(s<i.length)i[0]=i.length-s;else throw Q.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((i&1)!==a&&(a=i&1,c--,c<0));)s[c]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ge.getCodewordBucketNumber(Ge.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new mi;for(let a=0;a<i.length;a++){s.format("Row %2d: ",a);for(let c=0;c<i[a].length;c++){let h=i[a][c];h.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}s.format("%n")}return s.toString()}}Ge.CODEWORD_SKEW_SIZE=2,Ge.MAX_ERRORS=3,Ge.MAX_EC_CODEWORDS=512,Ge.errorCorrection=new Eo;class pn{decode(i,s=null){let a=pn.decode(i,s,!1);if(a==null||a.length===0||a[0]==null)throw $.getNotFoundInstance();return a[0]}decodeMultiple(i,s=null){try{return pn.decode(i,s,!0)}catch(a){throw a instanceof Q||a instanceof H?$.getNotFoundInstance():a}}static decode(i,s,a){const c=new Array,h=We.detectMultiple(i,s,a);for(const f of h.getPoints()){const p=Ge.decode(h.getBits(),f[4],f[5],f[6],f[7],pn.getMinCodewordWidth(f),pn.getMaxCodewordWidth(f)),_=new He(p.getText(),p.getRawBytes(),void 0,f,ae.PDF_417);_.putMetadata(wt.ERROR_CORRECTION_LEVEL,p.getECLevel());const x=p.getOther();x!=null&&_.putMetadata(wt.PDF417_EXTRA_METADATA,x),c.push(_)}return c.map(f=>f)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?k.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(pn.getMaxWidth(i[0],i[4]),pn.getMaxWidth(i[6],i[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.max(pn.getMaxWidth(i[1],i[5]),pn.getMaxWidth(i[7],i[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(pn.getMinWidth(i[0],i[4]),pn.getMinWidth(i[6],i[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.min(pn.getMinWidth(i[1],i[5]),pn.getMinWidth(i[7],i[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}reset(){}}class Xn extends y{}Xn.kind="ReaderException";class oc{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!r(i)&&i.get(ue.TRY_HARDER)===!0,a=r(i)?null:i.get(ue.POSSIBLE_FORMATS),c=new Array;if(!r(a)){const h=a.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);h&&!s&&c.push(new mr(i,this.verbose)),a.includes(ae.QR_CODE)&&c.push(new dn),a.includes(ae.DATA_MATRIX)&&c.push(new vt),a.includes(ae.AZTEC)&&c.push(new fi),a.includes(ae.PDF_417)&&c.push(new pn),h&&s&&c.push(new mr(i,this.verbose))}c.length===0&&(s||c.push(new mr(i,this.verbose)),c.push(new dn),c.push(new vt),c.push(new fi),c.push(new pn),s&&c.push(new mr(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Xn("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(a){if(a instanceof Xn)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class ac extends Et{constructor(i=null,s=500){const a=new oc;a.setHints(i),super(a,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class _r extends Et{constructor(i=500){super(new pn,i)}}class lc extends Et{constructor(i=500){super(new dn,i)}}var Io;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Io||(Io={}));var Xt=Io;class Ra{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new nn(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let a=s[s.length-1];const c=this.field;for(let h=s.length;h<=i;h++){const f=a.multiply(new nn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));s.push(f),a=f}}return s[i]}encode(i,s){if(s===0)throw new A("No error correction bytes");const a=i.length-s;if(a<=0)throw new A("No data bytes provided");const c=this.buildGenerator(s),h=new Int32Array(a);W.arraycopy(i,0,h,0,a);let f=new nn(this.field,h);f=f.multiplyByMonomial(s,1);const _=f.divide(c)[1].getCoefficients(),x=s-_.length;for(let E=0;E<x;E++)i[a+E]=0;W.arraycopy(_,0,i,a+x,_.length)}}class zt{constructor(){}static applyMaskPenaltyRule1(i){return zt.applyMaskPenaltyRule1Internal(i,!0)+zt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const a=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let f=0;f<h-1;f++){const p=a[f];for(let _=0;_<c-1;_++){const x=p[_];x===p[_+1]&&x===a[f+1][_]&&x===a[f+1][_+1]&&s++}}return zt.N2*s}static applyMaskPenaltyRule3(i){let s=0;const a=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let f=0;f<h;f++)for(let p=0;p<c;p++){const _=a[f];p+6<c&&_[p]===1&&_[p+1]===0&&_[p+2]===1&&_[p+3]===1&&_[p+4]===1&&_[p+5]===0&&_[p+6]===1&&(zt.isWhiteHorizontal(_,p-4,p)||zt.isWhiteHorizontal(_,p+7,p+11))&&s++,f+6<h&&a[f][p]===1&&a[f+1][p]===0&&a[f+2][p]===1&&a[f+3][p]===1&&a[f+4][p]===1&&a[f+5][p]===0&&a[f+6][p]===1&&(zt.isWhiteVertical(a,p,f-4,f)||zt.isWhiteVertical(a,p,f+7,f+11))&&s++}return s*zt.N3}static isWhiteHorizontal(i,s,a){s=Math.max(s,0),a=Math.min(a,i.length);for(let c=s;c<a;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,s,a,c){a=Math.max(a,0),c=Math.min(c,i.length);for(let h=a;h<c;h++)if(i[h][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const a=i.getArray(),c=i.getWidth(),h=i.getHeight();for(let _=0;_<h;_++){const x=a[_];for(let E=0;E<c;E++)x[E]===1&&s++}const f=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*zt.N4}static getDataMaskBit(i,s,a){let c,h;switch(i){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:h=a*s,c=(h&1)+h%3;break;case 6:h=a*s,c=(h&1)+h%3&1;break;case 7:h=a*s,c=h%3+(a+s&1)&1;break;default:throw new A("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,s){let a=0;const c=s?i.getHeight():i.getWidth(),h=s?i.getWidth():i.getHeight(),f=i.getArray();for(let p=0;p<c;p++){let _=0,x=-1;for(let E=0;E<h;E++){const T=s?f[p][E]:f[E][p];T===x?_++:(_>=5&&(a+=zt.N1+(_-5)),_=1,x=T)}_>=5&&(a+=zt.N1+(_-5))}return a}}zt.N1=3,zt.N2=3,zt.N3=40,zt.N4=10;class Ys{constructor(i,s){this.width=i,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(i);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,a){this.bytes[s][i]=a}setBoolean(i,s,a){this.bytes[s][i]=a?1:0}clear(i){for(const s of this.bytes)P.fill(s,i)}equals(i){if(!(i instanceof Ys))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a],f=s.bytes[a];for(let p=0,_=this.width;p<_;++p)if(h[p]!==f[p])return!1}return!0}toString(){const i=new qe;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let h=0,f=this.width;h<f;++h)switch(c[h]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Lr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new qe;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Lr.NUM_MASK_PATTERNS}}Lr.NUM_MASK_PATTERNS=8;class St extends y{}St.kind="WriterException";class Me{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,a,c,h){Me.clearMatrix(h),Me.embedBasicPatterns(a,h),Me.embedTypeInfo(s,c,h),Me.maybeEmbedVersionInfo(a,h),Me.embedDataBits(i,c,h)}static embedBasicPatterns(i,s){Me.embedPositionDetectionPatternsAndSeparators(s),Me.embedDarkDotAtLeftBottomCorner(s),Me.maybeEmbedPositionAdjustmentPatterns(i,s),Me.embedTimingPatterns(s)}static embedTypeInfo(i,s,a){const c=new q;Me.makeTypeInfoBits(i,s,c);for(let h=0,f=c.getSize();h<f;++h){const p=c.get(c.getSize()-1-h),_=Me.TYPE_INFO_COORDINATES[h],x=_[0],E=_[1];if(a.setBoolean(x,E,p),h<8){const T=a.getWidth()-h-1;a.setBoolean(T,8,p)}else{const b=a.getHeight()-7+(h-8);a.setBoolean(8,b,p)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const a=new q;Me.makeVersionInfoBits(i,a);let c=6*3-1;for(let h=0;h<6;++h)for(let f=0;f<3;++f){const p=a.get(c);c--,s.setBoolean(h,s.getHeight()-11+f,p),s.setBoolean(s.getHeight()-11+f,h,p)}}static embedDataBits(i,s,a){let c=0,h=-1,f=a.getWidth()-1,p=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<a.getHeight();){for(let _=0;_<2;++_){const x=f-_;if(!Me.isEmpty(a.get(x,p)))continue;let E;c<i.getSize()?(E=i.get(c),++c):E=!1,s!==255&&zt.getDataMaskBit(s,x,p)&&(E=!E),a.setBoolean(x,p,E)}p+=h}h=-h,p+=h,f-=2}if(c!==i.getSize())throw new St("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-k.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new A("0 polynomial");const a=Me.findMSBSet(s);for(i<<=a-1;Me.findMSBSet(i)>=a;)i^=s<<Me.findMSBSet(i)-a;return i}static makeTypeInfoBits(i,s,a){if(!Lr.isValidMaskPattern(s))throw new St("Invalid mask pattern");const c=i.getBits()<<3|s;a.appendBits(c,5);const h=Me.calculateBCHCode(c,Me.TYPE_INFO_POLY);a.appendBits(h,10);const f=new q;if(f.appendBits(Me.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new St("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const a=Me.calculateBCHCode(i.getVersionNumber(),Me.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new St("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const a=(s+1)%2;Me.isEmpty(i.get(s,6))&&i.setNumber(s,6,a),Me.isEmpty(i.get(6,s))&&i.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new St;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,a){for(let c=0;c<8;++c){if(!Me.isEmpty(a.get(i+c,s)))throw new St;a.setNumber(i+c,s,0)}}static embedVerticalSeparationPattern(i,s,a){for(let c=0;c<7;++c){if(!Me.isEmpty(a.get(i,s+c)))throw new St;a.setNumber(i,s+c,0)}}static embedPositionAdjustmentPattern(i,s,a){for(let c=0;c<5;++c){const h=Me.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)a.setNumber(i+f,s+c,h[f])}}static embedPositionDetectionPattern(i,s,a){for(let c=0;c<7;++c){const h=Me.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)a.setNumber(i+f,s+c,h[f])}}static embedPositionDetectionPatternsAndSeparators(i){const s=Me.POSITION_DETECTION_PATTERN[0].length;Me.embedPositionDetectionPattern(0,0,i),Me.embedPositionDetectionPattern(i.getWidth()-s,0,i),Me.embedPositionDetectionPattern(0,i.getWidth()-s,i);const a=8;Me.embedHorizontalSeparationPattern(0,a-1,i),Me.embedHorizontalSeparationPattern(i.getWidth()-a,a-1,i),Me.embedHorizontalSeparationPattern(0,i.getWidth()-a,i);const c=7;Me.embedVerticalSeparationPattern(c,0,i),Me.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),Me.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const a=i.getVersionNumber()-1,c=Me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,f=c.length;h!==f;h++){const p=c[h];if(p>=0)for(let _=0;_!==f;_++){const x=c[_];x>=0&&Me.isEmpty(s.get(x,p))&&Me.embedPositionAdjustmentPattern(x-2,p-2,s)}}}}Me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Me.VERSION_INFO_POLY=7973,Me.TYPE_INFO_POLY=1335,Me.TYPE_INFO_MASK_PATTERN=21522;class uh{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Tt{constructor(){}static calculateMaskPenalty(i){return zt.applyMaskPenaltyRule1(i)+zt.applyMaskPenaltyRule2(i)+zt.applyMaskPenaltyRule3(i)+zt.applyMaskPenaltyRule4(i)}static encode(i,s,a=null){let c=Tt.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(Xt.CHARACTER_SET)!==void 0;h&&(c=a.get(Xt.CHARACTER_SET).toString());const f=this.chooseMode(i,c),p=new q;if(f===Ne.BYTE&&(h||Tt.DEFAULT_BYTE_MODE_ENCODING!==c)){const he=ee.getCharacterSetECIByName(c);he!==void 0&&this.appendECI(he,p)}this.appendModeInfo(f,p);const _=new q;this.appendBytes(i,f,_,c);let x;if(a!==null&&a.get(Xt.QR_VERSION)!==void 0){const he=Number.parseInt(a.get(Xt.QR_VERSION).toString(),10);x=_e.getVersionForNumber(he);const re=this.calculateBitsNeeded(f,p,_,x);if(!this.willFit(re,x,s))throw new St("Data too big for requested version")}else x=this.recommendVersion(s,f,p,_);const E=new q;E.appendBitArray(p);const T=f===Ne.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(T,x,f,E),E.appendBitArray(_);const b=x.getECBlocksForLevel(s),D=x.getTotalCodewords()-b.getTotalECCodewords();this.terminateBits(D,E);const F=this.interleaveWithECBytes(E,x.getTotalCodewords(),D,b.getNumBlocks()),z=new Lr;z.setECLevel(s),z.setMode(f),z.setVersion(x);const V=x.getDimensionForVersion(),Y=new Ys(V,V),ce=this.chooseMaskPattern(F,s,x,Y);return z.setMaskPattern(ce),Me.buildMatrix(F,s,x,ce,Y),z.setMatrix(Y),z}static recommendVersion(i,s,a,c){const h=this.calculateBitsNeeded(s,a,c,_e.getVersionForNumber(1)),f=this.chooseVersion(h,i),p=this.calculateBitsNeeded(s,a,c,f);return this.chooseVersion(p,i)}static calculateBitsNeeded(i,s,a,c){return s.getSize()+i.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(i){return i<Tt.ALPHANUMERIC_TABLE.length?Tt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(ee.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Ne.KANJI;let a=!1,c=!1;for(let h=0,f=i.length;h<f;++h){const p=i.charAt(h);if(Tt.isDigit(p))a=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)c=!0;else return Ne.BYTE}return c?Ne.ALPHANUMERIC:a?Ne.NUMERIC:Ne.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=je.encode(i,ee.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const h=s[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(i,s,a,c){let h=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<Lr.NUM_MASK_PATTERNS;p++){Me.buildMatrix(i,s,a,p,c);let _=this.calculateMaskPenalty(c);_<h&&(h=_,f=p)}return f}static chooseVersion(i,s){for(let a=1;a<=40;a++){const c=_e.getVersionForNumber(a);if(Tt.willFit(i,c,s))return c}throw new St("Data too big")}static willFit(i,s,a){const c=s.getTotalCodewords(),f=s.getECBlocksForLevel(a).getTotalECCodewords(),p=c-f,_=(i+7)/8;return p>=_}static terminateBits(i,s){const a=i*8;if(s.getSize()>a)throw new St("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let f=0;f<4&&s.getSize()<a;++f)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let f=c;f<8;f++)s.appendBit(!1);const h=i-s.getSizeInBytes();for(let f=0;f<h;++f)s.appendBits(f&1?17:236,8);if(s.getSize()!==a)throw new St("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,a,c,h,f){if(c>=a)throw new St("Block ID too large");const p=i%a,_=a-p,x=Math.floor(i/a),E=x+1,T=Math.floor(s/a),b=T+1,D=x-T,F=E-b;if(D!==F)throw new St("EC bytes mismatch");if(a!==_+p)throw new St("RS blocks mismatch");if(i!==(T+D)*_+(b+F)*p)throw new St("Total bytes mismatch");c<_?(h[0]=T,f[0]=D):(h[0]=b,f[0]=F)}static interleaveWithECBytes(i,s,a,c){if(i.getSizeInBytes()!==a)throw new St("Number of bits and data bytes does not match");let h=0,f=0,p=0;const _=new Array;for(let E=0;E<c;++E){const T=new Int32Array(1),b=new Int32Array(1);Tt.getNumDataBytesAndNumECBytesForBlockID(s,a,c,E,T,b);const D=T[0],F=new Uint8Array(D);i.toBytes(8*h,F,0,D);const z=Tt.generateECBytes(F,b[0]);_.push(new uh(F,z)),f=Math.max(f,D),p=Math.max(p,z.length),h+=T[0]}if(a!==h)throw new St("Data bytes does not match offset");const x=new q;for(let E=0;E<f;++E)for(const T of _){const b=T.getDataBytes();E<b.length&&x.appendBits(b[E],8)}for(let E=0;E<p;++E)for(const T of _){const b=T.getErrorCorrectionBytes();E<b.length&&x.appendBits(b[E],8)}if(s!==x.getSizeInBytes())throw new St("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(i,s){const a=i.length,c=new Int32Array(a+s);for(let f=0;f<a;f++)c[f]=i[f]&255;new Ra(nt.QR_CODE_FIELD_256).encode(c,s);const h=new Uint8Array(s);for(let f=0;f<s;f++)h[f]=c[a+f];return h}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,a,c){const h=a.getCharacterCountBits(s);if(i>=1<<h)throw new St(i+" is bigger than "+((1<<h)-1));c.appendBits(i,h)}static appendBytes(i,s,a,c){switch(s){case Ne.NUMERIC:Tt.appendNumericBytes(i,a);break;case Ne.ALPHANUMERIC:Tt.appendAlphanumericBytes(i,a);break;case Ne.BYTE:Tt.append8BitBytes(i,a,c);break;case Ne.KANJI:Tt.appendKanjiBytes(i,a);break;default:throw new St("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=Tt.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const a=i.length;let c=0;for(;c<a;){const h=Tt.getDigit(i.charAt(c));if(c+2<a){const f=Tt.getDigit(i.charAt(c+1)),p=Tt.getDigit(i.charAt(c+2));s.appendBits(h*100+f*10+p,10),c+=3}else if(c+1<a){const f=Tt.getDigit(i.charAt(c+1));s.appendBits(h*10+f,7),c+=2}else s.appendBits(h,4),c++}}static appendAlphanumericBytes(i,s){const a=i.length;let c=0;for(;c<a;){const h=Tt.getAlphanumericCode(i.charCodeAt(c));if(h===-1)throw new St;if(c+1<a){const f=Tt.getAlphanumericCode(i.charCodeAt(c+1));if(f===-1)throw new St;s.appendBits(h*45+f,11),c+=2}else s.appendBits(h,6),c++}}static append8BitBytes(i,s,a){let c;try{c=je.encode(i,a)}catch(h){throw new St(h)}for(let h=0,f=c.length;h!==f;h++){const p=c[h];s.appendBits(p,8)}}static appendKanjiBytes(i,s){let a;try{a=je.encode(i,ee.SJIS)}catch(h){throw new St(h)}const c=a.length;for(let h=0;h<c;h+=2){const f=a[h]&255,p=a[h+1]&255,_=f<<8&4294967295|p;let x=-1;if(_>=33088&&_<=40956?x=_-33088:_>=57408&&_<=60351&&(x=_-49472),x===-1)throw new St("Invalid byte sequence");const E=(x>>8)*192+(x&255);s.appendBits(E,13)}}static appendECI(i,s){s.appendBits(Ne.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}Tt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Tt.DEFAULT_BYTE_MODE_ENCODING=ee.UTF8.getName();class yr{write(i,s,a,c=null){if(i.length===0)throw new A("Found empty contents");if(s<0||a<0)throw new A("Requested dimensions are too small: "+s+"x"+a);let h=Qe.L,f=yr.QUIET_ZONE_SIZE;c!==null&&(c.get(Xt.ERROR_CORRECTION)!==void 0&&(h=Qe.fromString(c.get(Xt.ERROR_CORRECTION).toString())),c.get(Xt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Xt.MARGIN).toString(),10)));const p=Tt.encode(i,h,c);return this.renderResult(p,s,a,f)}writeToDom(i,s,a,c,h=null){typeof i=="string"&&(i=document.querySelector(i));const f=this.write(s,a,c,h);i&&i.appendChild(f)}renderResult(i,s,a,c){const h=i.getMatrix();if(h===null)throw new Gn;const f=h.getWidth(),p=h.getHeight(),_=f+c*2,x=p+c*2,E=Math.max(s,_),T=Math.max(a,x),b=Math.min(Math.floor(E/_),Math.floor(T/x)),D=Math.floor((E-f*b)/2),F=Math.floor((T-p*b)/2),z=this.createSVGElement(E,T);for(let V=0,Y=F;V<p;V++,Y+=b)for(let ce=0,he=D;ce<f;ce++,he+=b)if(h.get(ce,V)===1){const re=this.createSvgRectElement(he,Y,b,b);z.appendChild(re)}return z}createSVGElement(i,s){const a=document.createElementNS(yr.SVG_NS,"svg");return a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(i,s,a,c){const h=document.createElementNS(yr.SVG_NS,"rect");return h.setAttributeNS(null,"x",i.toString()),h.setAttributeNS(null,"y",s.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}yr.QUIET_ZONE_SIZE=4,yr.SVG_NS="http://www.w3.org/2000/svg";class qi{encode(i,s,a,c,h){if(i.length===0)throw new A("Found empty contents");if(s!==ae.QR_CODE)throw new A("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new A(`Requested dimensions are too small: ${a}x${c}`);let f=Qe.L,p=qi.QUIET_ZONE_SIZE;h!==null&&(h.get(Xt.ERROR_CORRECTION)!==void 0&&(f=Qe.fromString(h.get(Xt.ERROR_CORRECTION).toString())),h.get(Xt.MARGIN)!==void 0&&(p=Number.parseInt(h.get(Xt.MARGIN).toString(),10)));const _=Tt.encode(i,f,h);return qi.renderResult(_,a,c,p)}static renderResult(i,s,a,c){const h=i.getMatrix();if(h===null)throw new Gn;const f=h.getWidth(),p=h.getHeight(),_=f+c*2,x=p+c*2,E=Math.max(s,_),T=Math.max(a,x),b=Math.min(Math.floor(E/_),Math.floor(T/x)),D=Math.floor((E-f*b)/2),F=Math.floor((T-p*b)/2),z=new Xe(E,T);for(let V=0,Y=F;V<p;V++,Y+=b)for(let ce=0,he=D;ce<f;ce++,he+=b)h.get(ce,V)===1&&z.setRegion(he,Y,b,b);return z}}qi.QUIET_ZONE_SIZE=4;class Pr{encode(i,s,a,c,h){let f;switch(s){case ae.QR_CODE:f=new qi;break;default:throw new A("No encoder available for format "+s)}return f.encode(i,s,a,c,h)}}class Di extends te{constructor(i,s,a,c,h,f,p,_){if(super(f,p),this.yuvData=i,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=h,c+f>s||h+p>a)throw new A("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(f,p)}getRow(i,s){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(i+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=i*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return W.arraycopy(this.yuvData,h,c,0,a),c;for(let f=0;f<s;f++){const p=f*i;W.arraycopy(this.yuvData,h,c,p,i),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,s,a,c){return new Di(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,a,c,!1)}renderThumbnail(){const i=this.getWidth()/Di.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Di.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(i*s),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){const p=f*i;for(let _=0;_<i;_++){const x=c[h+_*Di.THUMBNAIL_SCALE_FACTOR]&255;a[p+_]=4278190080|x*65793}h+=this.dataWidth*Di.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Di.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Di.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const a=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<s;c++,h+=this.dataWidth){const f=h+i/2;for(let p=h,_=h+i-1;p<f;p++,_--){const x=a[p];a[p]=a[_],a[_]=x}}}invert(){return new Te(this)}}Di.THUMBNAIL_SCALE_FACTOR=2;class kr extends te{constructor(i,s,a,c,h,f,p){if(super(s,a),this.dataWidth=c,this.dataHeight=h,this.left=f,this.top=p,i.BYTES_PER_ELEMENT===4){const _=s*a,x=new Uint8ClampedArray(_);for(let E=0;E<_;E++){const T=i[E],b=T>>16&255,D=T>>7&510,F=T&255;x[E]=(b+D+F)/4&255}this.luminances=x}else this.luminances=i;if(c===void 0&&(this.dataWidth=s),h===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new A("Requested row is outside the image: "+i);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(i+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=i*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return W.arraycopy(this.luminances,h,c,0,a),c;for(let f=0;f<s;f++){const p=f*i;W.arraycopy(this.luminances,h,c,p,i),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,s,a,c){return new kr(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new Te(this)}}class Qn extends ee{static forName(i){return this.getCharacterSetECIByName(i)}}class To{}To.ISO_8859_1=ee.ISO8859_1;class Da{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class cc{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class La{constructor(i){this.previous=i}getPrevious(){return this.previous}}class xr extends La{constructor(i,s,a){super(i),this.value=s,this.bitCount=a}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new xr(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xr(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+k.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Pa extends xr{constructor(i,s,a){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(i,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):a===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(i,s){return new Pa(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function hh(I,i,s){return new Pa(I,i,s)}function os(I,i,s){return new xr(I,i,s)}const dh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],an=0,$i=1,ni=2,Li=3,Pi=4,as=new xr(null,0,0),ka=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Xs(I){for(let i of I)P.fill(i,-1);return I[an][Pi]=0,I[$i][Pi]=0,I[$i][an]=28,I[Li][Pi]=0,I[ni][Pi]=0,I[ni][an]=15,I}const Ba=Xs(P.createInt32Array(6,6));class Kn{constructor(i,s,a,c){this.token=i,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let a=this.bitCount,c=this.token;if(i!==this.mode){let f=ka[this.mode][i];c=os(c,f&65535,f>>16),a+=f>>16}let h=i===ni?4:5;return c=os(c,s,h),new Kn(c,i,0,a+h)}shiftAndAppend(i,s){let a=this.token,c=this.mode===ni?4:5;return a=os(a,Ba[this.mode][i],c),a=os(a,s,5),new Kn(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===Pi||this.mode===ni){let p=ka[a][an];s=os(s,p&65535,p>>16),c+=p>>16,a=an}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Kn(s,a,this.binaryShiftByteCount+1,c+h);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=hh(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Kn(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(ka[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Kn.calculateBinaryShiftCost(i)-Kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new q;for(const c of s)c.appendTo(a,i);return a}toString(){return ve.format("%s bits=%d bytes=%d",dh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Kn.INITIAL_STATE=new Kn(as,an,0,0);function fh(I){const i=ve.getCharCode(" "),s=ve.getCharCode("."),a=ve.getCharCode(",");I[an][i]=1;const c=ve.getCharCode("Z"),h=ve.getCharCode("A");for(let b=h;b<=c;b++)I[an][b]=b-h+2;I[$i][i]=1;const f=ve.getCharCode("z"),p=ve.getCharCode("a");for(let b=p;b<=f;b++)I[$i][b]=b-p+2;I[ni][i]=1;const _=ve.getCharCode("9"),x=ve.getCharCode("0");for(let b=x;b<=_;b++)I[ni][b]=b-x+2;I[ni][a]=12,I[ni][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let b=0;b<E.length;b++)I[Li][ve.getCharCode(E[b])]=b;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<T.length;b++)ve.getCharCode(T[b])>0&&(I[Pi][ve.getCharCode(T[b])]=b);return I}const ki=fh(P.createInt32Array(5,256));class wr{constructor(i){this.text=i}encode(){const i=ve.getCharCode(" "),s=ve.getCharCode(`
`);let a=cc.singletonList(Kn.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let f,p=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case ve.getCharCode("\r"):f=p===s?2:0;break;case ve.getCharCode("."):f=p===i?3:0;break;case ve.getCharCode(","):f=p===i?4:0;break;case ve.getCharCode(":"):f=p===i?5:0;break;default:f=0}f>0?(a=wr.updateStateListForPair(a,h,f),h++):a=this.updateStateListForChar(a,h)}return cc.min(a,(h,f)=>h.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const a=[];for(let c of i)this.updateStateForChar(c,s,a);return wr.simplifyStates(a)}updateStateForChar(i,s,a){let c=this.text[s]&255,h=ki[i.getMode()][c]>0,f=null;for(let p=0;p<=Pi;p++){let _=ki[p][c];if(_>0){if(f==null&&(f=i.endBinaryShift(s)),!h||p===i.getMode()||p===ni){const x=f.latchAndAppend(p,_);a.push(x)}if(!h&&Ba[i.getMode()][p]>=0){const x=f.shiftAndAppend(p,_);a.push(x)}}}if(i.getBinaryShiftByteCount()>0||ki[i.getMode()][c]===0){let p=i.addBinaryShiftChar(s);a.push(p)}}static updateStateListForPair(i,s,a){const c=[];for(let h of i)this.updateStateForPair(h,s,a,c);return this.simplifyStates(c)}static updateStateForPair(i,s,a,c){let h=i.endBinaryShift(s);if(c.push(h.latchAndAppend(Pi,a)),i.getMode()!==Pi&&c.push(h.shiftAndAppend(Pi,a)),a===3||a===4){let f=h.latchAndAppend(ni,16-a).latchAndAppend(ni,1);c.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(f)}}static simplifyStates(i){let s=[];for(const a of i){let c=!0;for(const h of s){if(h.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(h)&&(s=s.filter(f=>f!==h))}c&&s.push(a)}return s}}class ut{constructor(){}static encodeBytes(i){return ut.encode(i,ut.DEFAULT_EC_PERCENT,ut.DEFAULT_AZTEC_LAYERS)}static encode(i,s,a){let c=new wr(i).encode(),h=k.truncDivision(c.getSize()*s,100)+11,f=c.getSize()+h,p,_,x,E,T;if(a!==ut.DEFAULT_AZTEC_LAYERS){if(p=a<0,_=Math.abs(a),_>(p?ut.MAX_NB_BITS_COMPACT:ut.MAX_NB_BITS))throw new A(ve.format("Illegal value %s for layers",a));x=ut.totalBitsInLayer(_,p),E=ut.WORD_SIZE[_];let re=x-x%E;if(T=ut.stuffBits(c,E),T.getSize()+h>re)throw new A("Data to large for user specified layer");if(p&&T.getSize()>E*64)throw new A("Data to large for user specified layer")}else{E=0,T=null;for(let re=0;;re++){if(re>ut.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(p=re<=3,_=p?re+1:re,x=ut.totalBitsInLayer(_,p),f>x)continue;(T==null||E!==ut.WORD_SIZE[_])&&(E=ut.WORD_SIZE[_],T=ut.stuffBits(c,E));let Ke=x-x%E;if(!(p&&T.getSize()>E*64)&&T.getSize()+h<=Ke)break}}let b=ut.generateCheckWords(T,x,E),D=T.getSize()/E,F=ut.generateModeMessage(p,_,D),z=(p?11:14)+_*4,V=new Int32Array(z),Y;if(p){Y=z;for(let re=0;re<V.length;re++)V[re]=re}else{Y=z+1+2*k.truncDivision(k.truncDivision(z,2)-1,15);let re=k.truncDivision(z,2),Ke=k.truncDivision(Y,2);for(let Ve=0;Ve<re;Ve++){let Ut=Ve+k.truncDivision(Ve,15);V[re-Ve-1]=Ke-Ut-1,V[re+Ve]=Ke+Ut+1}}let ce=new Xe(Y);for(let re=0,Ke=0;re<_;re++){let Ve=(_-re)*4+(p?9:12);for(let Ut=0;Ut<Ve;Ut++){let kn=Ut*2;for(let Bn=0;Bn<2;Bn++)b.get(Ke+kn+Bn)&&ce.set(V[re*2+Bn],V[re*2+Ut]),b.get(Ke+Ve*2+kn+Bn)&&ce.set(V[re*2+Ut],V[z-1-re*2-Bn]),b.get(Ke+Ve*4+kn+Bn)&&ce.set(V[z-1-re*2-Bn],V[z-1-re*2-Ut]),b.get(Ke+Ve*6+kn+Bn)&&ce.set(V[z-1-re*2-Ut],V[re*2+Bn])}Ke+=Ve*8}if(ut.drawModeMessage(ce,p,Y,F),p)ut.drawBullsEye(ce,k.truncDivision(Y,2),5);else{ut.drawBullsEye(ce,k.truncDivision(Y,2),7);for(let re=0,Ke=0;re<k.truncDivision(z,2)-1;re+=15,Ke+=16)for(let Ve=k.truncDivision(Y,2)&1;Ve<Y;Ve+=2)ce.set(k.truncDivision(Y,2)-Ke,Ve),ce.set(k.truncDivision(Y,2)+Ke,Ve),ce.set(Ve,k.truncDivision(Y,2)-Ke),ce.set(Ve,k.truncDivision(Y,2)+Ke)}let he=new Da;return he.setCompact(p),he.setSize(Y),he.setLayers(_),he.setCodeWords(D),he.setMatrix(ce),he}static drawBullsEye(i,s,a){for(let c=0;c<a;c+=2)for(let h=s-c;h<=s+c;h++)i.set(h,s-c),i.set(h,s+c),i.set(s-c,h),i.set(s+c,h);i.set(s-a,s-a),i.set(s-a+1,s-a),i.set(s-a,s-a+1),i.set(s+a,s-a),i.set(s+a,s-a+1),i.set(s+a,s+a-1)}static generateModeMessage(i,s,a){let c=new q;return i?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=ut.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=ut.generateCheckWords(c,40,4)),c}static drawModeMessage(i,s,a,c){let h=k.truncDivision(a,2);if(s)for(let f=0;f<7;f++){let p=h-3+f;c.get(f)&&i.set(p,h-5),c.get(f+7)&&i.set(h+5,p),c.get(20-f)&&i.set(p,h+5),c.get(27-f)&&i.set(h-5,p)}else for(let f=0;f<10;f++){let p=h-5+f+k.truncDivision(f,5);c.get(f)&&i.set(p,h-7),c.get(f+10)&&i.set(h+7,p),c.get(29-f)&&i.set(p,h+7),c.get(39-f)&&i.set(h-7,p)}}static generateCheckWords(i,s,a){let c=i.getSize()/a,h=new Ra(ut.getGF(a)),f=k.truncDivision(s,a),p=ut.bitsToWords(i,a,f);h.encode(p,f-c);let _=s%a,x=new q;x.appendBits(0,_);for(const E of Array.from(p))x.appendBits(E,a);return x}static bitsToWords(i,s,a){let c=new Int32Array(a),h,f;for(h=0,f=i.getSize()/s;h<f;h++){let p=0;for(let _=0;_<s;_++)p|=i.get(h*s+_)?1<<s-_-1:0;c[h]=p}return c}static getGF(i){switch(i){case 4:return nt.AZTEC_PARAM;case 6:return nt.AZTEC_DATA_6;case 8:return nt.AZTEC_DATA_8;case 10:return nt.AZTEC_DATA_10;case 12:return nt.AZTEC_DATA_12;default:throw new A("Unsupported word size "+i)}}static stuffBits(i,s){let a=new q,c=i.getSize(),h=(1<<s)-2;for(let f=0;f<c;f+=s){let p=0;for(let _=0;_<s;_++)(f+_>=c||i.get(f+_))&&(p|=1<<s-1-_);(p&h)===h?(a.appendBits(p&h,s),f--):p&h?a.appendBits(p,s):(a.appendBits(p|1,s),f--)}return a}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}ut.DEFAULT_EC_PERCENT=33,ut.DEFAULT_AZTEC_LAYERS=0,ut.MAX_NB_BITS=32,ut.MAX_NB_BITS_COMPACT=4,ut.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ls{encode(i,s,a,c){return this.encodeWithHints(i,s,a,c,null)}encodeWithHints(i,s,a,c,h){let f=To.ISO_8859_1,p=ut.DEFAULT_EC_PERCENT,_=ut.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Xt.CHARACTER_SET)&&(f=Qn.forName(h.get(Xt.CHARACTER_SET).toString())),h.has(Xt.ERROR_CORRECTION)&&(p=k.parseInt(h.get(Xt.ERROR_CORRECTION).toString())),h.has(Xt.AZTEC_LAYERS)&&(_=k.parseInt(h.get(Xt.AZTEC_LAYERS).toString()))),ls.encodeLayers(i,s,a,c,f,p,_)}static encodeLayers(i,s,a,c,h,f,p){if(s!==ae.AZTEC)throw new A("Can only encode AZTEC, but got "+s);let _=ut.encode(ve.getBytes(i,h),f,p);return ls.renderResult(_,a,c)}static renderResult(i,s,a){let c=i.getMatrix();if(c==null)throw new Gn;let h=c.getWidth(),f=c.getHeight(),p=Math.max(s,h),_=Math.max(a,f),x=Math.min(p/h,_/f),E=(p-h*x)/2,T=(_-f*x)/2,b=new Xe(p,_);for(let D=0,F=T;D<f;D++,F+=x)for(let z=0,V=E;z<h;z++,V+=x)c.get(z,D)&&b.setRegion(V,F,x,x);return b}}n.AbstractExpandedDecoder=vo,n.ArgumentException=N,n.ArithmeticException=Ni,n.AztecCode=Da,n.AztecCodeReader=fi,n.AztecCodeWriter=ls,n.AztecDecoder=gt,n.AztecDetector=hn,n.AztecDetectorResult=Fs,n.AztecEncoder=ut,n.AztecHighLevelEncoder=wr,n.AztecPoint=Ze,n.BarcodeFormat=ae,n.Binarizer=Z,n.BinaryBitmap=R,n.BitArray=q,n.BitMatrix=Xe,n.BitSource=ns,n.BrowserAztecCodeReader=bi,n.BrowserBarcodeReader=Hs,n.BrowserCodeReader=Et,n.BrowserDatamatrixCodeReader=Ta,n.BrowserMultiFormatReader=ac,n.BrowserPDF417Reader=_r,n.BrowserQRCodeReader=lc,n.BrowserQRCodeSvgWriter=yr,n.CharacterSetECI=ee,n.ChecksumException=H,n.Code128Reader=oe,n.Code39Reader=at,n.DataMatrixDecodedBitStreamParser=Yn,n.DataMatrixReader=vt,n.DecodeHintType=ue,n.DecoderResult=hr,n.DefaultGridSampler=Bt,n.DetectorResult=fr,n.EAN13Reader=pr,n.EncodeHintType=Xt,n.Exception=y,n.FormatException=Q,n.GenericGF=nt,n.GenericGFPoly=nn,n.GlobalHistogramBinarizer=De,n.GridSampler=Re,n.GridSamplerInstance=On,n.HTMLCanvasElementLuminanceSource=le,n.HybridBinarizer=Oe,n.ITFReader=Je,n.IllegalArgumentException=A,n.IllegalStateException=Gn,n.InvertedLuminanceSource=Te,n.LuminanceSource=te,n.MathUtils=it,n.MultiFormatOneDReader=mr,n.MultiFormatReader=oc,n.MultiFormatWriter=Pr,n.NotFoundException=$,n.OneDReader=ht,n.PDF417DecodedBitStreamParser=X,n.PDF417DecoderErrorCorrection=Eo,n.PDF417Reader=pn,n.PDF417ResultMetadata=Oa,n.PerspectiveTransform=Ue,n.PlanarYUVLuminanceSource=Di,n.QRCodeByteMatrix=Ys,n.QRCodeDataMask=En,n.QRCodeDecodedBitStreamParser=bt,n.QRCodeDecoderErrorCorrectionLevel=Qe,n.QRCodeDecoderFormatInformation=Cn,n.QRCodeEncoder=Tt,n.QRCodeEncoderQRCode=Lr,n.QRCodeMaskUtil=zt,n.QRCodeMatrixUtil=Me,n.QRCodeMode=Ne,n.QRCodeReader=dn,n.QRCodeVersion=_e,n.QRCodeWriter=qi,n.RGBLuminanceSource=kr,n.RSS14Reader=Gt,n.RSSExpandedReader=ne,n.ReaderException=Xn,n.ReedSolomonDecoder=dr,n.ReedSolomonEncoder=Ra,n.ReedSolomonException=Zi,n.Result=He,n.ResultMetadataType=wt,n.ResultPoint=Ce,n.StringUtils=ve,n.UnsupportedOperationException=ze,n.VideoInputDevice=Le,n.WhiteRectangleDetector=se,n.WriterException=St,n.ZXingArrays=P,n.ZXingCharset=Qn,n.ZXingInteger=k,n.ZXingStandardCharsets=To,n.ZXingStringBuilder=qe,n.ZXingStringEncoding=je,n.ZXingSystem=W,n.createAbstractExpandedDecoder=Us,Object.defineProperty(n,"__esModule",{value:!0})})})(Xd,Xd.exports);var Wt=Xd.exports;const bv=Ru(Wt),Mv=Gy({__proto__:null,default:bv},[Wt]);var Ep=function(){function t(e,n,r){if(this.formatMap=new Map([[Ee.QR_CODE,Wt.BarcodeFormat.QR_CODE],[Ee.AZTEC,Wt.BarcodeFormat.AZTEC],[Ee.CODABAR,Wt.BarcodeFormat.CODABAR],[Ee.CODE_39,Wt.BarcodeFormat.CODE_39],[Ee.CODE_93,Wt.BarcodeFormat.CODE_93],[Ee.CODE_128,Wt.BarcodeFormat.CODE_128],[Ee.DATA_MATRIX,Wt.BarcodeFormat.DATA_MATRIX],[Ee.MAXICODE,Wt.BarcodeFormat.MAXICODE],[Ee.ITF,Wt.BarcodeFormat.ITF],[Ee.EAN_13,Wt.BarcodeFormat.EAN_13],[Ee.EAN_8,Wt.BarcodeFormat.EAN_8],[Ee.PDF_417,Wt.BarcodeFormat.PDF_417],[Ee.RSS_14,Wt.BarcodeFormat.RSS_14],[Ee.RSS_EXPANDED,Wt.BarcodeFormat.RSS_EXPANDED],[Ee.UPC_A,Wt.BarcodeFormat.UPC_A],[Ee.UPC_E,Wt.BarcodeFormat.UPC_E],[Ee.UPC_EAN_EXTENSION,Wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Mv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(e),u=new Map;u.set(Wt.DecodeHintType.POSSIBLE_FORMATS,l),u.set(Wt.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,l){try{r(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new Wt.MultiFormatReader(this.verbose,this.hints),r=new Wt.HTMLCanvasElementLuminanceSource(e),l=new Wt.BinaryBitmap(new Wt.HybridBinarizer(r)),u=n.decode(l);return{text:u.text,format:G_.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Ov=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},Rv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Sp=function(){function t(e,n,r){if(this.formatMap=new Map([[Ee.QR_CODE,"qr_code"],[Ee.AZTEC,"aztec"],[Ee.CODABAR,"codabar"],[Ee.CODE_39,"code_39"],[Ee.CODE_93,"code_93"],[Ee.CODE_128,"code_128"],[Ee.DATA_MATRIX,"data_matrix"],[Ee.ITF,"itf"],[Ee.EAN_13,"ean_13"],[Ee.EAN_8,"ean_8"],[Ee.PDF_417,"pdf417"],[Ee.UPC_A,"upc_a"],[Ee.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Ov(this,void 0,void 0,function(){var n,r;return Rv(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:G_.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,l=0,u=e;l<u.length;l++){var g=u[l],w=g.boundingBox.width*g.boundingBox.height;w>r&&(r=w,n=g)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,l=e;r<l.length;r++){var u=l[r];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,l){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Ap=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},Ip=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Dv=function(){function t(e,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Sp.isSupported()?(this.primaryDecoder=new Sp(e,r,l),this.secondaryDecoder=new Ep(e,r,l)):this.primaryDecoder=new Ep(e,r,l)}return t.prototype.decodeAsync=function(e){return Ap(this,void 0,void 0,function(){var n;return Ip(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Ap(this,void 0,void 0,function(){var n,r;return Ip(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),u1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fu=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},pu=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Q_=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),Lv=function(t){u1(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Q_),Pv=function(t){u1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(Lv),kv=function(t){u1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Q_),Bv=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Pv(this.track)},t.prototype.torchFeature=function(){return new kv(this.track)},t}(),Fv=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,l){return fu(this,void 0,void 0,function(){var u,g;return pu(this,function(w){switch(w.label){case 0:return u=new t(e,n,l),r.aspectRatio?(g={aspectRatio:r.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:w.sent(),w.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return fu(this,void 0,void 0,function(){return pu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var l=e.mediaStream.getVideoTracks(),u=l.length,g=0;e.mediaStream.getVideoTracks().forEach(function(w){e.mediaStream.removeTrack(w),w.stop(),++g,g>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Bv(this.getFirstTrackOrFail())},t}(),zv=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return fu(this,void 0,void 0,function(){return pu(this,function(l){return[2,Fv.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return fu(this,void 0,void 0,function(){var n,r;return pu(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new t(r)]}})})},t}(),Tp=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},Np=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Uv=function(){function t(){}return t.failIfNotSupported=function(){return Tp(this,void 0,void 0,function(){return Np(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Tp(this,void 0,void 0,function(){return Np(this,function(n){return[2,zv.create(e)]})})},t}(),Hv=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},Wv=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Vv=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=jo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=jo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Hv(this,void 0,void 0,function(){var e,n,r,l,u,g,w;return Wv(this,function(C){switch(C.label){case 0:return e=function(y){for(var N=y.getVideoTracks(),A=0,R=N;A<R.length;A++){var H=R[A];H.enabled=!1,H.stop(),y.removeTrack(H)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=C.sent(),l=[],u=0,g=r;u<g.length;u++)w=g[u],w.kind==="videoinput"&&l.push({id:w.deviceId,label:w.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(u){for(var g=[],w=0,C=u;w<C.length;w++){var y=C[w];y.kind==="video"&&g.push({id:y.id,label:y.label})}e(g)},l=MediaStreamTrack;l.getSources(r)})},t}(),Jt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Jt||(Jt={}));var jv=function(){function t(){this.state=Jt.NOT_STARTED,this.onGoingTransactionNewState=Jt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Jt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Jt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Jt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Jt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Jt.UNKNOWN:throw"Transition from unknown is not allowed";case Jt.NOT_STARTED:this.failIfNewStateIs(e,[Jt.PAUSED]);break;case Jt.SCANNING:break;case Jt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,l=n;r<l.length;r++){var u=l[r];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),Gv=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Jt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Jt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Jt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Jt.PAUSED},t}(),Zv=function(){function t(){}return t.create=function(){return new Gv(new jv)},t}(),Yv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(r[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yi=function(t){Yv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(nr),Xv=function(){function t(e,n){this.logger=n,this.fps=yi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=yi.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?X_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Er(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),bp=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Y_(this.verbose),this.qrcode=new Dv(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Zv.create()}return t.prototype.start=function(e,n,r,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var w=Xv.create(n,this.logger);this.clearElement();var C=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=C,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:yi.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var A=this,R=this.stateManagerProxy.startTransition(Jt.SCANNING);return new Promise(function(H,Z){var W=y?w.videoConstraints:A.createVideoConstraints(e);if(!W){R.cancel(),Z("videoConstraints should be defined");return}var me={};(!y||w.aspectRatio)&&(me.aspectRatio=w.aspectRatio);var U={onRenderSurfaceReady:function(P,k){A.setupUi(P,k,w),A.isScanning=!0,A.foreverScan(w,r,g)}};Uv.failIfNotSupported().then(function(P){P.create(W).then(function(k){return k.render(u.element,me,U).then(function(q){A.renderedCamera=q,R.execute(),H(null)}).catch(function(q){R.cancel(),Z(q)})}).catch(function(k){R.cancel(),Z(jo.errorGettingUserMedia(k))})}).catch(function(P){R.cancel(),Z(jo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Jt.PAUSED),this.showPausedState(),(Er(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Jt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Jt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var u=document.getElementById(yi.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Er(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var w=g.width,C=g.height,y=document.getElementById(r.elementId),N=y.clientWidth?y.clientWidth:yi.DEFAULT_WIDTH,A=Math.max(y.clientHeight?y.clientHeight:C,yi.FILE_SCAN_MIN_HEIGHT),R=r.computeCanvasDrawConfig(w,C,N,A);if(n){var H=r.createCanvasElement(N,A,"qr-canvas-visible");H.style.display="inline-block",y.appendChild(H);var Z=H.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=N,Z.canvas.height=A,Z.drawImage(g,0,0,w,C,R.x,R.y,R.width,R.height)}var W=yi.FILE_SCAN_HIDDEN_CANVAS_PADDING,me=Math.max(g.width,R.width),U=Math.max(g.height,R.height),P=me+2*W,k=U+2*W,q=r.createCanvasElement(P,k);y.appendChild(q);var ge=q.getContext("2d");if(!ge)throw"Unable to get 2d context from canvas";ge.canvas.width=P,ge.canvas.height=k,ge.drawImage(g,0,0,w,C,W,W,me,U);try{r.qrcode.decodeRobustlyAsync(q).then(function(ue){l(vp.createFromQrcodeResult(ue))}).catch(u)}catch(ue){u("QR code parse error, error = ".concat(ue))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Vv.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!X_.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ee.QR_CODE,Ee.AZTEC,Ee.CODABAR,Ee.CODE_39,Ee.CODE_93,Ee.CODE_128,Ee.DATA_MATRIX,Ee.MAXICODE,Ee.ITF,Ee.EAN_13,Ee.EAN_8,Ee.PDF_417,Ee.RSS_14,Ee.RSS_EXPANDED,Ee.UPC_A,Ee.UPC_E,Ee.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,u=e.formatsToSupport;l<u.length;l++){var g=u[l];Tv(g)?r.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Er(e))return!0;if(!Er(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Er(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Er(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var l=this,u=r.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(e,n,u),w=function(y){if(y<yi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(yi.MIN_QR_BOX_SIZE,"px.")},C=function(y){return y>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};w(g.width),w(g.height),g.width=C(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var l=Er(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=r.isShadedBoxEnabled()&&u.height<=n,w={x:0,y:0,width:e,height:n},C=g?this.getShadedRegionBounds(e,n,u):w,y=this.createCanvasElement(C.width,C.height),N={willReadFrequently:!0},A=y.getContext("2d",N);A.canvas.width=C.width,A.canvas.height=C.height,this.element.append(y),g&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=A,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=jo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,vp.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var u=jo.codeParseError(l);return n(u,Z_.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,w=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*g,y=this.qrRegion.height*w,N=this.qrRegion.x*g,A=this.qrRegion.y*w;this.context.drawImage(u,N,A,C,y,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,r)},l.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(H){!H&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){R()})):R()}).catch(function(H){l.logger.logError("Error happend while scanning context",H),R()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},u="exact",g=function(Z){if(Z in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Z,"'")},w=Object.keys(e);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var C=Object.keys(e)[0];if(C!==n&&C!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(C===n){var y=e.facingMode;if(typeof y=="string"){if(g(y))return{facingMode:y}}else if(typeof y=="object")if(u in y){if(g(y["".concat(u)]))return{facingMode:{exact:y["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var N=typeof y;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(u in A)return{deviceId:{exact:A["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var R=typeof A;throw"Invalid type of 'deviceId' = ".concat(R)}}}var H=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(H)},t.prototype.computeCanvasDrawConfig=function(e,n,r,l){if(e<=r&&n<=l){var u=(r-e)/2,g=(l-n)/2;return{x:u,y:g,width:e,height:n}}else{var w=e,C=n;return e>r&&(n=r/e*n,e=r),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(C)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?yi.BORDER_SHADER_MATCH_COLOR:yi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var l=e,u=n,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=Er(r)?"qr-canvas":r,g},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,l){if(!(n-l.width<1||r-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-l.width)/2,w=(r-l.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(yi.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var C=5,y=40;this.insertShaderBorders(u,y,C,-C,null,0,!0),this.insertShaderBorders(u,y,C,-C,null,0,!1),this.insertShaderBorders(u,y,C,null,-C,0,!0),this.insertShaderBorders(u,y,C,null,-C,0,!1),this.insertShaderBorders(u,C,y+C,-C,null,-C,!0),this.insertShaderBorders(u,C,y+C,null,-C,-C,!0),this.insertShaderBorders(u,C,y+C,-C,null,-C,!1),this.insertShaderBorders(u,C,y+C,null,-C,-C,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,r,l,u,g,w){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=yi.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(n,"px"),C.style.height="".concat(r,"px"),l!==null&&(C.style.top="".concat(l,"px")),u!==null&&(C.style.bottom="".concat(u,"px")),w?C.style.left="".concat(g,"px"):C.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),e.appendChild(C)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),h1="data:image/svg+xml;base64,",Qv=h1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Kv=h1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Mp=h1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Op=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),$v=function(){function t(){this.data=Op.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Op.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),Jv=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Cp.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Cp.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),eC=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Mp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=qv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Mp,this.infoIcon.style.opacity="0.6")},t}(),tC=function(){function t(){var e=this;this.infoDiv=new Jv,this.infoIcon=new eC(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),nC=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},iC=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Rp=function(){function t(){}return t.hasPermissions=function(){return nC(this,void 0,void 0,function(){var e,n,r,l;return iC(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=u.sent(),n=0,r=e;n<r.length;n++)if(l=r[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),ds=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(e){return e===Rs.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Rs.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return nr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=nr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,l=e;r<l.length;r++){var u=l[r];if(!nr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return e},t}(),vi=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Wr=function(){function t(){}return t.createElement=function(e,n){var r=document.createElement(e);return r.id=n,r.classList.add(vi.ALL_ELEMENT_CLASS),e==="button"&&r.setAttribute("type","button"),r},t}(),K_=function(t,e,n,r){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(N){try{y(r.next(N))}catch(A){g(A)}}function C(N){try{y(r.throw(N))}catch(A){g(A)}}function y(N){N.done?u(N.value):l(N.value).then(w,C)}y((r=r.apply(t,e||[])).next())})},q_=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(N){return C([y,N])}}function C(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(N){y=[6,N],l=0}finally{r=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Dp=function(){function t(e,n,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return K_(this,void 0,void 0,function(){var e,n;return q_(this,function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=r.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?At.torchOffButton():At.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var r=e?At.torchOnFailedMessage():At.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),rC=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Wr.createElement("button",vi.TORCH_BUTTON_ID),this.torchController=new Dp(e,this,n)}return t.prototype.render=function(e,n){var r=this;this.torchButton.innerText=At.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return K_(r,void 0,void 0,function(){return q_(this,function(g){switch(g.label){case 0:return[4,l.torchController.flipState()];case 1:return g.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(vi.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(vi.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(vi.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(vi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Dp(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=At.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,l){var u=new t(n,l);return u.render(e,r),u},t}(),sC=function(){function t(e,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Wr.createElement("button",vi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(w){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Wr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(w){if(!(w==null||w.target==null)){var C=w.target;if(!(C.files&&C.files.length===0)){var y=C.files,N=y[0],A=N.name;u.setImageNameToButton(A),r(N)}}});var g=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(g),this.fileBasedScanRegion.addEventListener("dragenter",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(w){w.stopPropagation(),w.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var C=w.dataTransfer;if(C){var y=C.files;if(!y||y.length===0)return;for(var N=!1,A=0;A<y.length;++A){var R=y.item(A);if(R){var H=/image.*/;if(R.type.match(H)){N=!0;var Z=R.name;u.setImageNameToButton(Z),r(R),g.innerText=At.dragAndDropMessage();break}}}N||(g.innerText=At.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=At.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var r=e.substring(0,8),l=e.length,u=e.substring(l-8,l);e="".concat(r,"....").concat(u)}var g=At.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=g},t.prototype.setInitialValueToButton=function(){var e=At.fileSelectionChooseImage()+" - "+At.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var l=new t(e,n,r);return l},t}(),oC=function(){function t(e){this.selectElement=Wr.createElement("select",vi.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var l=At.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,g=0,w=this.cameras;g<w.length;g++){var C=w[g],y=C.id,N=C.label==null?y:C.label;(!N||N==="")&&(N=[At.anonymousCameraPrefix(),u++].join(" "));var A=document.createElement("option");A.value=y,A.innerText=N,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,r=this.options;n<r.length;n++){var l=r[n];if(l.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),aC=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Wr.createElement("input",vi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=At.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=At.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,r,l){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}(),xi;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(xi||(xi={}));function lC(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function cC(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var uC=function(){function t(e,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new ds(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Y_(this.verbose),this.persistedDataManager=new $v,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,g){if(e)e(u,g);else{if(r.lastMatchFound===u)return;r.lastMatchFound=u,r.setHeaderMessage(At.lastMatch(u),xi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,g){n&&n(u,g)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new bp(this.getScanRegionId(),cC(this.config,this.verbose))},t.prototype.pause=function(e){(Er(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var r=document.getElementById(e.elementId);r&&(r.innerHTML="",e.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,l){if(!e.html5Qrcode){r();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(u){if(!e.html5Qrcode){r();return}e.html5Qrcode.clear(),n(),r()}).catch(function(u){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(e.html5Qrcode.clear(),n(),r())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=nr.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!nr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=nr.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=nr.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:nr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:nr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:nr.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),ds.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",e.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var r=new tC;r.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,r){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(At.cameraPermissionRequesting());var u=function(){r||l.createPermissionButton(e,n)};bp.getCameras().then(function(g){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),g&&g.length>0?(e.removeChild(n),l.renderCameraSelection(g)):(l.setHeaderMessage(At.noCameraFound(),xi.STATUS_WARNING),u())}).catch(function(g){l.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:u(),l.setHeaderMessage(g,xi.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var r=this,l=Wr.createElement("button",this.getCameraPermissionButtonId());l.innerText=At.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,r.createCameraListUi(e,n,l)}),n.appendChild(l)},t.prototype.createPermissionsUi=function(e,n){var r=this;if(ds.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Rp.hasPermissions().then(function(l){l?r.createCameraListUi(e,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n))}).catch(function(l){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=ds.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var l=document.createElement("div");l.style.textAlign="center",r.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,l),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=ds.isFileScanType(this.currentScanType),r=this,l=function(u){if(!r.html5Qrcode)throw"html5Qrcode not defined";ds.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(At.loadingImage()),r.html5Qrcode.scanFileV2(u,!0).then(function(g){r.resetHeaderMessage(),r.qrCodeSuccessCallback(g.decodedText,g)}).catch(function(g){r.setHeaderMessage(g,xi.STATUS_WARNING),r.qrCodeErrorCallback(g,Z_.createFrom(g))}))};this.fileSelectionUi=sC.create(e,n,l)},t.prototype.renderCameraSelection=function(e){var n=this,r=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=aC.create(l,!1),g=function(W){var me=W.zoomFeature();if(me.isSupported()){u.setOnCameraZoomValueChangeCallback(function(P){me.apply(P)});var U=1;n.config.defaultZoomValueIfSupported&&(U=n.config.defaultZoomValueIfSupported),U=Nv(U,me.min(),me.max()),u.setValues(me.min(),me.max(),U,me.step()),u.show()}},w=oC.create(l,e),C=document.createElement("span"),y=Wr.createElement("button",vi.CAMERA_START_BUTTON_ID);y.innerText=At.scanButtonStartScanningText(),C.appendChild(y);var N=Wr.createElement("button",vi.CAMERA_STOP_BUTTON_ID);N.innerText=At.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,C.appendChild(N);var A,R=function(W){if(!W.torchFeature().isSupported()){A&&A.hide();return}A?A.updateTorchCapability(W.torchFeature()):A=rC.create(C,W.torchFeature(),{display:"none",marginLeft:"5px"},function(me){r.setHeaderMessage(me,xi.STATUS_WARNING)}),A.show()};l.appendChild(C);var H=function(W){W||(y.style.display="none"),y.innerText=At.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,W&&(y.style.display="inline-block")};if(y.addEventListener("click",function(W){y.innerText=At.scanButtonScanningStarting(),w.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var me=w.getValue();r.persistedDataManager.setLastUsedCameraId(me),r.html5Qrcode.start(me,lC(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(U){N.disabled=!1,N.style.display="inline-block",H(!1);var P=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&R(P),n.config.showZoomSliderIfSupported===!0&&g(P)}).catch(function(U){r.showHideScanTypeSwapLink(!0),w.enable(),H(!0),r.setHeaderMessage(U,xi.STATUS_WARNING)})}),w.hasSingleItem()&&y.click(),N.addEventListener("click",function(W){if(!r.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,r.html5Qrcode.stop().then(function(me){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),w.enable(),y.disabled=!1,N.style.display="none",y.style.display="inline-block",A&&(A.reset(),A.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(me){N.disabled=!1,r.setHeaderMessage(me,xi.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var Z=r.persistedDataManager.getLastUsedCameraId();w.hasValue(Z)?(w.setValue(Z),y.click()):r.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=At.textIfCameraScanSelected(),r=At.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var g=Wr.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=ds.isCameraScanType(this.currentScanType)?n:r,g.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,ds.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),g.innerText=r,e.currentScanType=Rs.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),g.innerText=n,e.currentScanType=Rs.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),u.appendChild(g),l.appendChild(u)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Rp.hasPermissions().then(function(r){if(r){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=xi.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",n){case xi.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case xi.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case xi.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Qv,this.cameraScanImage.alt=At.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Kv,this.fileScanImage.alt=At.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return vi.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return vi.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const hC="/Mapa-UC/assets/classroomLogo-caNNTX4V.png",dC="/Mapa-UC/assets/science2ndFloor-V0xmBrTj.png",fC="/Mapa-UC/assets/leaveButton--kz3Hal_.png",pC="/Mapa-UC/assets/BRS2ndFloorPlan-z5xEVZ6a.png";function gC(t){let e=[];return t=="science2ndFloor"?e=[{id:0,lat:6.53,lon:.55,label:"classroom"},{id:1,lat:6.15,lon:.55,label:"classroom"},{id:2,lat:6.8,lon:1.08,label:"classroom",roomID:"S213"},{lat:7.4,lon:.9,title:"",building:"Science",floor:"2nd Floor",node:2},{id:3,lat:6.53,lon:1.08},{id:6,lat:6.53,lon:1.9},{id:5,lat:6.3,lon:1.9,label:"classroom"},{id:4,lat:6.8,lon:1.9,label:"classroom"},{id:7,lat:6.53,lon:2.35},{id:8,lat:6.53,lon:2.48},{id:9,lat:6.3,lon:2.48,label:"classroom"},{id:10,lat:6.53,lon:2.63},{id:14,lat:7.15,lon:2.63,label:"classroom"},{id:11,lat:7.65,lon:2.35,label:"classroom"},{id:12,lat:7.65,lon:2.63},{id:13,lat:7.49,lon:2.63,label:"classroom"},{id:15,lat:6.8,lon:2.88,label:"classroom"},{id:16,lat:6.53,lon:2.88},{id:19,lat:6.53,lon:3.4},{id:18,lat:6.8,lon:3.4,label:"classroom"},{id:20,lat:6.3,lon:3.4,label:"classroom"},{id:22,lat:6.53,lon:4.2},{id:23,lat:6.3,lon:4.2,label:"classroom"},{id:21,lat:6.8,lon:4.2,label:"classroom"},{id:24,lat:6.53,lon:4.73},{id:25,lat:7.82,lon:4.73},{id:26,lat:7.82,lon:4.825,label:"classroom"},{id:27,lat:7.82,lon:4.6,label:"classroom"},{id:28,lat:6.53,lon:5.4},{id:29,lat:6.8,lon:5.4,label:"classroom"},{id:30,lat:6.3,lon:5.4,label:"classroom"},{id:31,lat:6.53,lon:6.02},{id:33,lat:6.53,lon:6.4},{id:34,lat:6.53,lon:6.57},{id:32,lat:6.8,lon:6.4,label:"classroom"},{id:35,lat:6.3,lon:6.57,label:"classroom"},{id:37,lat:6.53,lon:6.9},{id:36,lat:6.8,lon:6.9,label:"classroom"},{id:38,lat:6.53,lon:7.22},{id:39,lat:6.53,lon:7.5},{id:48,lat:5.1,lon:7.22,label:"classroom"},{id:47,lat:5.6,lon:7.31,label:"classroom"},{id:46,lat:6.05,lon:7.4,label:"classroom"},{id:40,lat:6.8,lon:7.5,label:"classroom"},{id:41,lat:6.53,lon:7.75},{id:42,lat:6.67,lon:7.75,label:"classroom"},{id:45,lat:6.4,lon:7.795,label:"classroom"},{id:43,lat:6.67,lon:8.04,label:"classroom"},{id:44,lat:6.8,lon:8.04,label:"classroom"},{id:49,lat:4.95,lon:6.02},{id:50,lat:4.95,lon:6.09,label:"classroom"},{id:51,lat:4.2,lon:6.02},{id:52,lat:4.2,lon:6.09,label:"classroom"},{id:53,lat:3.6,lon:6.02},{id:54,lat:3.35,lon:6.02,label:"classroom"},{id:55,lat:3.6,lon:6.4},{id:56,lat:3.13,lon:6.4,label:"classroom"},{id:57,lat:3.73,lon:6.4},{id:58,lat:3.73,lon:7.2},{id:59,lat:3.42,lon:7.2,label:"classroom"},{id:60,lat:3.6,lon:5.65,label:"classroom"},{id:61,lat:3.84,lon:5.65,label:"classroom"},{id:62,lat:3.35,lon:5.35,label:"classroom"},{id:63,lat:3.6,lon:5.65},{id:17,lat:3.6,lon:5.15},{id:64,lat:3.84,lon:5.15,label:"classroom"},{id:66,lat:3.35,lon:4.75,label:"classroom"},{id:82,lat:3.6,lon:5.35},{id:68,lat:3.84,lon:4.6,label:"classroom"},{id:67,lat:3.6,lon:4.6},{id:65,lat:3.6,lon:4.75},{id:71,lat:3.35,lon:4,label:"classroom"},{id:69,lat:3.6,lon:4},{id:70,lat:3.84,lon:4,label:"classroom"},{id:73,lat:3.27,lon:3.43,label:"classroom"},{id:75,lat:3.27,lon:3.145,label:"classroom"},{id:74,lat:3.6,lon:3.145},{id:72,lat:3.6,lon:3.43},{id:76,lat:3.6,lon:2.88},{id:77,lat:3.15,lon:2.6,label:"leaveButton",destination:"BRS2ndFloor"},{id:78,lat:4.2,lon:2.88},{id:79,lat:4.2,lon:2.94,label:"classroom"},{id:80,lat:4.95,lon:2.88},{id:81,lat:4.95,lon:2.94,label:"classroom"}]:t=="BRS2ndFloor"&&(e=[{id:100,lat:8.55,lon:9.65,label:"leaveButton",destination:"science2ndFloor"},{id:101,lat:5.25,lon:9.65},{id:102,lat:5.25,lon:8.1},{id:103,lat:5.6,lon:8.1,label:"classroom"},{id:104,lat:5.25,lon:7.7},{id:105,lat:4.95,lon:7.7,label:"classroom"},{id:106,lat:5.25,lon:5.7},{id:107,lat:5.6,lon:5.7,label:"classroom"},{id:108,lat:5.25,lon:4.7},{id:109,lat:4.95,lon:4.7,label:"classroom"},{id:110,lat:5.25,lon:4.17},{id:111,lat:5.8,lon:4.17,label:"classroom"},{id:112,lat:5.25,lon:3.1},{id:113,lat:5.6,lon:3.1,label:"classroom"},{id:114,lat:5.25,lon:1.9},{id:115,lat:5.6,lon:1.9,label:"classroom"},{id:116,lat:5.25,lon:1.6},{id:117,lat:4.95,lon:1.6,label:"classroom"},{id:118,lat:5.25,lon:.7},{id:119,lat:6.9,lon:.7},{id:120,lat:6.9,lon:1.9},{id:121,lat:6.5,lon:1.9,label:"classroom"}]),e}var Lp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe=function(t,e){if(!t)throw ya(e)},ya=function(t){return new Error("Firebase Database ("+$_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},mC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const l=t[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=t[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=t[n++],g=t[n++],w=t[n++],C=((l&7)<<18|(u&63)<<12|(g&63)<<6|w&63)-65536;e[r++]=String.fromCharCode(55296+(C>>10)),e[r++]=String.fromCharCode(56320+(C&1023))}else{const u=t[n++],g=t[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|g&63)}}return e.join("")},d1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<t.length;l+=3){const u=t[l],g=l+1<t.length,w=g?t[l+1]:0,C=l+2<t.length,y=C?t[l+2]:0,N=u>>2,A=(u&3)<<4|w>>4;let R=(w&15)<<2|y>>6,H=y&63;C||(H=64,g||(R=64)),r.push(n[N],n[A],n[R],n[H])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<t.length;){const u=n[t.charAt(l++)],w=l<t.length?n[t.charAt(l)]:0;++l;const y=l<t.length?n[t.charAt(l)]:64;++l;const A=l<t.length?n[t.charAt(l)]:64;if(++l,u==null||w==null||y==null||A==null)throw new _C;const R=u<<2|w>>4;if(r.push(R),y!==64){const H=w<<4&240|y>>2;if(r.push(H),A!==64){const Z=y<<6&192|A;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(t){const e=J_(t);return d1.encodeByteArray(e,!0)},gu=function(t){return e2(t).replace(/\./g,"")},Qd=function(t){try{return d1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){return t2(void 0,t)}function t2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!xC(n)||(t[n]=t2(t[n],e[n]));return t}function xC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=()=>wC().__FIREBASE_DEFAULTS__,CC=()=>{if(typeof process>"u"||typeof Lp>"u")return;const t=Lp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qd(t[1]);return e&&JSON.parse(e)},n2=()=>{try{return vC()||CC()||EC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SC=t=>{var e,n;return(n=(e=n2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AC=t=>{const e=SC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i2=()=>{var t;return(t=n2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const g=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gu(JSON.stringify(n)),gu(JSON.stringify(g)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(TC())}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s2(){return $_.NODE_ADMIN===!0}function bC(){try{return typeof indexedDB=="object"}catch{return!1}}function MC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="FirebaseError";class Yl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OC,Object.setPrototypeOf(this,Yl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,o2.prototype.create)}}class o2{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],g=u?RC(u,r):"Error",w=`${this.serviceName}: ${g} (${l}).`;return new Yl(l,w,r)}}function RC(t,e){return t.replace(DC,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const DC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return JSON.parse(t)}function bn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=function(t){let e={},n={},r={},l="";try{const u=t.split(".");e=Rl(Qd(u[0])||""),n=Rl(Qd(u[1])||""),l=u[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:l}},LC=function(t){const e=a2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},PC=function(t){const e=a2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ha(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Pp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mu(t,e,n){const r={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=e.call(n,t[l],l,t));return r}function Kd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=t[l],g=e[l];if(kp(u)&&kp(g)){if(!Kd(u,g))return!1}else if(u!==g)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function kp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let A=0;A<16;A++)r[A]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let A=0;A<16;A++)r[A]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let A=16;A<80;A++){const R=r[A-3]^r[A-8]^r[A-14]^r[A-16];r[A]=(R<<1|R>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],g=this.chain_[2],w=this.chain_[3],C=this.chain_[4],y,N;for(let A=0;A<80;A++){A<40?A<20?(y=w^u&(g^w),N=1518500249):(y=u^g^w,N=1859775393):A<60?(y=u&g|w&(u|g),N=2400959708):(y=u^g^w,N=3395469782);const R=(l<<5|l>>>27)+y+C+N+r[A]&4294967295;C=w,w=g,g=(u<<30|u>>>2)&4294967295,u=l,l=R}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+g&4294967295,this.chain_[3]=this.chain_[3]+w&4294967295,this.chain_[4]=this.chain_[4]+C&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let l=0;const u=this.buf_;let g=this.inbuf_;for(;l<n;){if(g===0)for(;l<=r;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(u[g]=e.charCodeAt(l),++g,++l,g===this.blockSize){this.compress_(u),g=0;break}}else for(;l<n;)if(u[g]=e[l],++g,++l,g===this.blockSize){this.compress_(u),g=0;break}}this.inbuf_=g,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[r]=this.chain_[l]>>u&255,++r;return e}}function l2(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let l=t.charCodeAt(r);if(l>=55296&&l<=56319){const u=l-55296;r++,pe(r<t.length,"Surrogate pair missing trail surrogate.");const g=t.charCodeAt(r)-56320;l=65536+(u<<10)+g}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Ku=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return t&&t._delegate?t._delegate:t}class Dl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new f1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HC(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,g]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(u);r===w&&g.resolve(l)}return l}onInit(e,n){var r;const l=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(l))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(l,u);const g=this.instances.get(l);return g&&e(g,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UC(t){return t===qs?void 0:t}function HC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const VC={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},jC=Lt.INFO,GC={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},ZC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),l=GC[e];if(l)console[l](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c2{constructor(e){this.name=e,this._logLevel=jC,this._logHandler=ZC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const YC=(t,e)=>e.some(n=>t instanceof n);let Bp,Fp;function XC(){return Bp||(Bp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QC(){return Fp||(Fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u2=new WeakMap,qd=new WeakMap,h2=new WeakMap,Wh=new WeakMap,p1=new WeakMap;function KC(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",u),t.removeEventListener("error",g)},u=()=>{n(Ts(t.result)),l()},g=()=>{r(t.error),l()};t.addEventListener("success",u),t.addEventListener("error",g)});return e.then(n=>{n instanceof IDBCursor&&u2.set(n,t)}).catch(()=>{}),p1.set(e,t),e}function qC(t){if(qd.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",g),t.removeEventListener("abort",g)},u=()=>{n(),l()},g=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",u),t.addEventListener("error",g),t.addEventListener("abort",g)});qd.set(t,e)}let $d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $C(t){$d=t($d)}function JC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vh(this),e,...n);return h2.set(r,e.sort?e.sort():[e]),Ts(r)}:QC().includes(t)?function(...e){return t.apply(Vh(this),e),Ts(u2.get(this))}:function(...e){return Ts(t.apply(Vh(this),e))}}function eE(t){return typeof t=="function"?JC(t):(t instanceof IDBTransaction&&qC(t),YC(t,XC())?new Proxy(t,$d):t)}function Ts(t){if(t instanceof IDBRequest)return KC(t);if(Wh.has(t))return Wh.get(t);const e=eE(t);return e!==t&&(Wh.set(t,e),p1.set(e,t)),e}const Vh=t=>p1.get(t);function tE(t,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const g=indexedDB.open(t,e),w=Ts(g);return r&&g.addEventListener("upgradeneeded",C=>{r(Ts(g.result),C.oldVersion,C.newVersion,Ts(g.transaction),C)}),n&&g.addEventListener("blocked",C=>n(C.oldVersion,C.newVersion,C)),w.then(C=>{u&&C.addEventListener("close",()=>u()),l&&C.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),w}const nE=["get","getKey","getAll","getAllKeys","count"],iE=["put","add","delete","clear"],jh=new Map;function zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=iE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||nE.includes(n)))return;const u=async function(g,...w){const C=this.transaction(g,l?"readwrite":"readonly");let y=C.store;return r&&(y=y.index(w.shift())),(await Promise.all([y[n](...w),l&&C.done]))[0]};return jh.set(e,u),u}$C(t=>({...t,get:(e,n,r)=>zp(e,n)||t.get(e,n,r),has:(e,n)=>!!zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",Up="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new c2("@firebase/app"),oE="@firebase/app-compat",aE="@firebase/analytics-compat",lE="@firebase/analytics",cE="@firebase/app-check-compat",uE="@firebase/app-check",hE="@firebase/auth",dE="@firebase/auth-compat",fE="@firebase/database",pE="@firebase/database-compat",gE="@firebase/functions",mE="@firebase/functions-compat",_E="@firebase/installations",yE="@firebase/installations-compat",xE="@firebase/messaging",wE="@firebase/messaging-compat",vE="@firebase/performance",CE="@firebase/performance-compat",EE="@firebase/remote-config",SE="@firebase/remote-config-compat",AE="@firebase/storage",IE="@firebase/storage-compat",TE="@firebase/firestore",NE="@firebase/firestore-compat",bE="firebase",ME="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="[DEFAULT]",OE={[Jd]:"fire-core",[oE]:"fire-core-compat",[lE]:"fire-analytics",[aE]:"fire-analytics-compat",[uE]:"fire-app-check",[cE]:"fire-app-check-compat",[hE]:"fire-auth",[dE]:"fire-auth-compat",[fE]:"fire-rtdb",[pE]:"fire-rtdb-compat",[gE]:"fire-fn",[mE]:"fire-fn-compat",[_E]:"fire-iid",[yE]:"fire-iid-compat",[xE]:"fire-fcm",[wE]:"fire-fcm-compat",[vE]:"fire-perf",[CE]:"fire-perf-compat",[EE]:"fire-rc",[SE]:"fire-rc-compat",[AE]:"fire-gcs",[IE]:"fire-gcs-compat",[TE]:"fire-fst",[NE]:"fire-fst-compat","fire-js":"fire-js",[bE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,tf=new Map;function RE(t,e){try{t.container.addComponent(e)}catch(n){ho.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yu(t){const e=t.name;if(tf.has(e))return ho.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,t);for(const n of _u.values())RE(n,t);return!0}function DE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ns=new o2("app","Firebase",LE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=ME;function d2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ef,automaticDataCollectionEnabled:!1},e),l=r.name;if(typeof l!="string"||!l)throw Ns.create("bad-app-name",{appName:String(l)});if(n||(n=i2()),!n)throw Ns.create("no-options");const u=_u.get(l);if(u){if(Kd(n,u.options)&&Kd(r,u.config))return u;throw Ns.create("duplicate-app",{appName:l})}const g=new WC(l);for(const C of tf.values())g.addComponent(C);const w=new PE(n,r,g);return _u.set(l,w),w}function BE(t=ef){const e=_u.get(t);if(!e&&t===ef&&i2())return d2();if(!e)throw Ns.create("no-app",{appName:t});return e}function Jo(t,e,n){var r;let l=(r=OE[t])!==null&&r!==void 0?r:t;n&&(l+=`-${n}`);const u=l.match(/\s|\//),g=e.match(/\s|\//);if(u||g){const w=[`Unable to register library "${l}" with version "${e}":`];u&&w.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&g&&w.push("and"),g&&w.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ho.warn(w.join(" "));return}yu(new Dl(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="firebase-heartbeat-database",zE=1,Ll="firebase-heartbeat-store";let Gh=null;function f2(){return Gh||(Gh=tE(FE,zE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function UE(t){try{const n=(await f2()).transaction(Ll),r=await n.objectStore(Ll).get(p2(t));return await n.done,r}catch(e){if(e instanceof Yl)ho.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ho.warn(n.message)}}}async function Hp(t,e){try{const r=(await f2()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,p2(t)),await r.done}catch(n){if(n instanceof Yl)ho.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ho.warn(r.message)}}}function p2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=1024,WE=30*24*60*60*1e3;class VE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Wp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(g=>g.date===u)))return this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(g=>{const w=new Date(g.date).valueOf();return Date.now()-w<=WE}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wp(),{heartbeatsToSend:r,unsentEntries:l}=jE(this._heartbeatsCache.heartbeats),u=gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}}function Wp(){return new Date().toISOString().substring(0,10)}function jE(t,e=HE){const n=[];let r=t.slice();for(const l of t){const u=n.find(g=>g.agent===l.agent);if(u){if(u.dates.push(l.date),Vp(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Vp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bC()?MC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Hp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Hp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Vp(t){return gu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){yu(new Dl("platform-logger",e=>new rE(e),"PRIVATE")),yu(new Dl("heartbeat",e=>new VE(e),"PRIVATE")),Jo(Jd,Up,t),Jo(Jd,Up,"esm2017"),Jo("fire-js","")}ZE("");var YE="firebase",XE="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jo(YE,XE,"app");var jp={};const Gp="@firebase/database",Zp="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g2="";function QE(t){g2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Rl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return $r(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KE(e)}}catch{}return new qE},no=m2("localStorage"),nf=m2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new c2("@firebase/database"),$E=function(){let t=1;return function(){return t++}}(),_2=function(t){const e=FC(t),n=new BC;n.update(e);const r=n.digest();return d1.encodeByteArray(r)},Xl=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Xl.apply(null,r):typeof r=="object"?e+=bn(r):e+=r,e+=" "}return e};let so=null,Yp=!0;const JE=function(t,e){pe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ea.logLevel=Lt.VERBOSE,so=ea.log.bind(ea),e&&nf.set("logging_enabled",!0)):typeof t=="function"?so=t:(so=null,nf.remove("logging_enabled"))},Wn=function(...t){if(Yp===!0&&(Yp=!1,so===null&&nf.get("logging_enabled")===!0&&JE(!0)),so){const e=Xl.apply(null,t);so(e)}},Ql=function(t){return function(...e){Wn(t,...e)}},rf=function(...t){const e="FIREBASE INTERNAL ERROR: "+Xl(...t);ea.error(e)},Kr=function(...t){const e=`FIREBASE FATAL ERROR: ${Xl(...t)}`;throw ea.error(e),new Error(e)},Si=function(...t){const e="FIREBASE WARNING: "+Xl(...t);ea.warn(e)},e3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Si("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},y2=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},t3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},da="[MIN_NAME]",fo="[MAX_NAME]",xa=function(t,e){if(t===e)return 0;if(t===da||e===fo)return-1;if(e===da||t===fo)return 1;{const n=Xp(t),r=Xp(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},n3=function(t,e){return t===e?0:t<e?-1:1},Xa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bn(e))},g1=function(t){if(typeof t!="object"||t===null)return bn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=bn(e[r]),n+=":",n+=g1(t[e[r]]);return n+="}",n},x2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let l=0;l<n;l+=e)l+e>n?r.push(t.substring(l,n)):r.push(t.substring(l,l+e));return r};function di(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const w2=function(t){pe(!y2(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let l,u,g,w,C;t===0?(u=0,g=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(w=Math.min(Math.floor(Math.log(t)/Math.LN2),r),u=w+r,g=Math.round(t*Math.pow(2,n-w)-Math.pow(2,n))):(u=0,g=Math.round(t/Math.pow(2,1-r-n))));const y=[];for(C=n;C;C-=1)y.push(g%2?1:0),g=Math.floor(g/2);for(C=e;C;C-=1)y.push(u%2?1:0),u=Math.floor(u/2);y.push(l?1:0),y.reverse();const N=y.join("");let A="";for(C=0;C<64;C+=8){let R=parseInt(N.substr(C,8),2).toString(16);R.length===1&&(R="0"+R),A=A+R}return A.toLowerCase()},i3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},r3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function s3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const o3=new RegExp("^-?(0*)\\d{1,10}$"),a3=-2147483648,l3=2147483647,Xp=function(t){if(o3.test(t)){const e=Number(t);if(e>=a3&&e<=l3)return e}return null},Kl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Si("Exception was thrown by user callback.",n),e},Math.floor(0))}},c3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Si(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Wn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Si(e)}}class ta{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ta.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="5",v2="v",C2="s",E2="r",S2="f",A2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,I2="ls",T2="p",sf="ac",N2="websocket",b2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,r,l,u=!1,g="",w=!1,C=!1){this.secure=n,this.namespace=r,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=g,this.includeNamespaceInQueryParams=w,this.isUsingEmulator=C,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=no.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&no.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function d3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function O2(t,e,n){pe(typeof e=="string","typeof type must == string"),pe(typeof n=="object","typeof params must == object");let r;if(e===N2)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===b2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);d3(t)&&(n.ns=t.namespace);const l=[];return di(n,(u,g)=>{l.push(u+"="+g)}),r+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.counters_={}}incrementCounter(e,n=1){$r(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return yC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh={},Yh={};function _1(t){const e=t.toString();return Zh[e]||(Zh[e]=new f3),Zh[e]}function p3(t,e){const n=t.toString();return Yh[n]||(Yh[n]=e()),Yh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<r.length;++l)r[l]&&Kl(()=>{this.onMessage_(r[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="start",m3="close",_3="pLPCommand",y3="pRTLPCB",R2="id",D2="pw",L2="ser",x3="cb",w3="seg",v3="ts",C3="d",E3="dframe",P2=1870,k2=30,S3=P2-k2,A3=25e3,I3=3e4;class Go{constructor(e,n,r,l,u,g,w){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.transportSessionId=g,this.lastSessionId=w,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ql(e),this.stats_=_1(n),this.urlFn=C=>(this.appCheckToken&&(C[sf]=this.appCheckToken),O2(n,b2,C))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new g3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(I3)),t3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new y1((...u)=>{const[g,w,C,y,N]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,g===Qp)this.id=w,this.password=C;else if(g===m3)w?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(w,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+g)},(...u)=>{const[g,w]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(g,w)},()=>{this.onClosed_()},this.urlFn);const r={};r[Qp]="t",r[L2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[x3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[v2]=m1,this.transportSessionId&&(r[C2]=this.transportSessionId),this.lastSessionId&&(r[I2]=this.lastSessionId),this.applicationId&&(r[T2]=this.applicationId),this.appCheckToken&&(r[sf]=this.appCheckToken),typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(r[E2]=S2);const l=this.urlFn(r);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Go.forceAllow_=!0}static forceDisallow(){Go.forceDisallow_=!0}static isAvailable(){return Go.forceAllow_?!0:!Go.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!i3()&&!r3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=e2(n),l=x2(r,S3);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[E3]="t",r[R2]=e,r[D2]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=bn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class y1{constructor(e,n,r,l){this.onDisconnect=r,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$E(),window[_3+this.uniqueCallbackIdentifier]=e,window[y3+this.uniqueCallbackIdentifier]=n,this.myIFrame=y1.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const g="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(w){Wn("frame writing exception"),w.stack&&Wn(w.stack),Wn(w)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[R2]=this.myID,e[D2]=this.myPW,e[L2]=this.currentSerial;let n=this.urlFn(e),r="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+k2+r.length<=P2;){const g=this.pendingSegs.shift();r=r+"&"+w3+l+"="+g.seg+"&"+v3+l+"="+g.ts+"&"+C3+l+"="+g.d,l++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(r,Math.floor(A3)),u=()=>{clearTimeout(l),r()};this.addTag(e,u)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const l=r.readyState;(!l||l==="loaded"||l==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Wn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=16384,N3=45e3;let xu=null;typeof MozWebSocket<"u"?xu=MozWebSocket:typeof WebSocket<"u"&&(xu=WebSocket);class rr{constructor(e,n,r,l,u,g,w){this.connId=e,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ql(this.connId),this.stats_=_1(n),this.connURL=rr.connectionURL_(n,g,w,l,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,l,u){const g={};return g[v2]=m1,typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(g[E2]=S2),n&&(g[C2]=n),r&&(g[I2]=r),l&&(g[sf]=l),u&&(g[T2]=u),O2(e,N2,g)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,no.set("previous_websocket_failure",!0);try{let r;s2(),this.mySock=new xu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){rr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&xu!==null&&!rr.forceDisallow_}static previouslyFailed(){return no.isInMemoryStorage||no.get("previous_websocket_failure")===!0}markConnectionHealthy(){no.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Rl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(pe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=x2(n,T3);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(N3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rr.responsesRequiredToBeHealthy=2;rr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Go,rr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=rr&&rr.isAvailable();let r=n&&!rr.previouslyFailed();if(e.webSocketOnly&&(n||Si("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rr];else{const l=this.transports_=[];for(const u of Pl.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);Pl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=6e4,M3=5e3,O3=10*1024,R3=100*1024,Xh="t",Kp="d",D3="s",qp="r",L3="e",$p="o",Jp="a",eg="n",tg="p",P3="h";class k3{constructor(e,n,r,l,u,g,w,C,y,N){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=g,this.onReady_=w,this.onDisconnect_=C,this.onKill_=y,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ql("c:"+this.id+":"),this.transportManager_=new Pl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=hl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>R3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>O3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xh in e){const n=e[Xh];n===Jp?this.upgradeIfSecondaryHealthy_():n===qp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$p&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xa("t",e),r=Xa("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xa(Xh,e);if(Kp in e){const r=e[Kp];if(n===P3){const l=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===eg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===D3?this.onConnectionShutdown_(r):n===qp?this.onReset_(r):n===L3?rf("Server Error: "+r):n===$p?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),m1!==r&&Si("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(b3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(M3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(no.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{put(e,n,r,l){}merge(e,n,r,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.allowedEvents_=e,this.listeners_={},pe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let l=0;l<r.length;l++)r[l].callback.apply(r[l].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const l=this.getInitialEvent(e);l&&n.apply(r,l)}off(e,n,r){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!r||r===l[u].context)){l.splice(u,1);return}}validateEventType_(e){pe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends F2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!r2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wu}getInitialEvent(e){return pe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=32,ig=768;class Mt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[r]=this.pieces_[l],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function xt(){return new Mt("")}function st(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ds(t){return t.pieces_.length-t.pieceNum_}function Pt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Mt(t.pieces_,e)}function z2(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function B3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function U2(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function H2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Mt(e,0)}function _n(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Mt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let l=0;l<r.length;l++)r[l].length>0&&n.push(r[l])}return new Mt(n,0)}function ot(t){return t.pieceNum_>=t.pieces_.length}function ai(t,e){const n=st(t),r=st(e);if(n===null)return e;if(n===r)return ai(Pt(t),Pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function x1(t,e){if(Ds(t)!==Ds(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function sr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ds(t)>Ds(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class F3{constructor(e,n){this.errorPrefix_=n,this.parts_=U2(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ku(this.parts_[r]);W2(this)}}function z3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ku(e),W2(t)}function U3(t){const e=t.parts_.pop();t.byteLength_-=Ku(e),t.parts_.length>0&&(t.byteLength_-=1)}function W2(t){if(t.byteLength_>ig)throw new Error(t.errorPrefix_+"has a key path longer than "+ig+" bytes ("+t.byteLength_+").");if(t.parts_.length>ng)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ng+") or object contains a cycle "+$s(t))}function $s(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends F2{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new w1}getInitialEvent(e){return pe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=1e3,H3=60*5*1e3,rg=30*1e3,W3=1.3,V3=3e4,j3="server_kill",sg=3;class Gr extends B2{constructor(e,n,r,l,u,g,w,C){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=g,this.appCheckTokenProvider_=w,this.authOverride_=C,this.id=Gr.nextPersistentConnectionId_++,this.log_=Ql("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qa,this.maxReconnectDelay_=H3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!s2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");w1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const l=++this.requestNumber_,u={r:l,a:e,b:n};this.log_(bn(u)),pe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[l]=r)}get(e){this.initConnection_();const n=new f1,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:g=>{const w=g.d;g.s==="ok"?n.resolve(w):n.reject(w)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(e,n,r,l){this.initConnection_();const u=e._queryIdentifier,g=e._path.toString();this.log_("Listen called for "+g+" "+u),this.listens.has(g)||this.listens.set(g,new Map),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),pe(!this.listens.get(g).has(u),"listen() called twice for same path/queryId.");const w={onComplete:l,hashFn:n,query:e,tag:r};this.listens.get(g).set(u,w),this.connected_&&this.sendListen_(w)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+r+" for "+l);const u={p:r},g="q";e.tag&&(u.q=n._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(g,u,w=>{const C=w.d,y=w.s;Gr.warnOnListenWarnings_(C,n),(this.listens.get(r)&&this.listens.get(r).get(l))===e&&(this.log_("listen response",w),y!=="ok"&&this.removeListen_(r,l),e.onComplete&&e.onComplete(y,C))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&$r(e,"w")){const r=ha(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();Si(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||PC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=LC(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,l=>{const u=l.s,g=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,e._queryObject,n)}sendUnlisten_(e,n,r,l){this.log_("Unlisten on "+e+" for "+n);const u={p:e},g="n";l&&(u.q=r,u.t=l),this.sendRequest(g,u)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,l){const u={p:n,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,g=>{l&&setTimeout(()=>{l(g.s,g.d)},Math.floor(0))})}put(e,n,r,l){this.putInternal("p",e,n,r,l)}merge(e,n,r,l){this.putInternal("m",e,n,r,l)}putInternal(e,n,r,l,u){this.initConnection_();const g={p:n,d:r};u!==void 0&&(g.h=u),this.outstandingPuts_.push({action:e,request:g,onComplete:l}),this.outstandingPutCount_++;const w=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(w):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):rf("Unrecognized action received from server: "+bn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){pe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>V3&&(this.reconnectDelay_=Qa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*W3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Gr.nextConnectionId_++,u=this.lastSessionId;let g=!1,w=null;const C=function(){w?w.close():(g=!0,r())},y=function(A){pe(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(A)};this.realtime_={close:C,sendRequest:y};const N=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[A,R]=await Promise.all([this.authTokenProvider_.getToken(N),this.appCheckTokenProvider_.getToken(N)]);g?Wn("getToken() completed but was canceled"):(Wn("getToken() completed. Creating connection."),this.authToken_=A&&A.accessToken,this.appCheckToken_=R&&R.token,w=new k3(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,H=>{Si(H+" ("+this.repoInfo_.toString()+")"),this.interrupt(j3)},u))}catch(A){this.log_("Failed to get token: "+A),g||(this.repoInfo_.nodeAdmin&&Si(A),C())}}}interrupt(e){Wn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Pp(this.interruptReasons_)&&(this.reconnectDelay_=Qa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(u=>g1(u)).join("$"):r="default";const l=this.removeListen_(e,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const r=new Mt(e).toString();let l;if(this.listens.has(r)){const u=this.listens.get(r);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(e,n){Wn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sg&&(this.reconnectDelay_=rg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Wn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+g2.replace(/\./g,"-")]=1,r2()?e["framework.cordova"]=1:NC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wu.getInstance().currentlyOnline();return Pp(this.interruptReasons_)&&e}}Gr.nextPersistentConnectionId_=0;Gr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new tt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new tt(da,e),l=new tt(da,n);return this.compare(r,l)!==0}minPost(){return tt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc;class V2 extends $u{static get __EMPTY_NODE(){return bc}static set __EMPTY_NODE(e){bc=e}compare(e,n){return xa(e.name,n.name)}isDefinedOn(e){throw ya("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return tt.MIN}maxPost(){return new tt(fo,bc)}makePost(e,n){return pe(typeof e=="string","KeyIndex indexValue must always be a string."),new tt(e,bc)}toString(){return".key"}}const na=new V2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let g=1;for(;!e.isEmpty();)if(e=e,g=n?r(e.key,n):1,l&&(g*=-1),g<0)this.isReverse_?e=e.left:e=e.right;else if(g===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Nn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??Nn.RED,this.left=l??li.EMPTY_NODE,this.right=u??li.EMPTY_NODE}copy(e,n,r,l,u){return new Nn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return li.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,l;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return li.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Nn.RED=!0;Nn.BLACK=!1;class G3{copy(e,n,r,l,u){return this}insert(e,n,r){return new Nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class li{constructor(e,n=li.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new li(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nn.BLACK,null,null))}remove(e){return new li(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,l=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return l?l.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(l=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Mc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Mc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Mc(this.root_,null,this.comparator_,!0,e)}}li.EMPTY_NODE=new G3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t,e){return xa(t.name,e.name)}function v1(t,e){return xa(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of;function Y3(t){of=t}const j2=function(t){return typeof t=="number"?"number:"+w2(t):"string:"+t},G2=function(t){if(t.isLeafNode()){const e=t.val();pe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$r(e,".sv"),"Priority must be a string or number.")}else pe(t===of||t.isEmpty(),"priority of unexpected type.");pe(t===of||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;class In{constructor(e,n=In.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,pe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),G2(this.priorityNode_)}static set __childrenNodeConstructor(e){og=e}static get __childrenNodeConstructor(){return og}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new In(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:In.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ot(e)?this:st(e)===".priority"?this.priorityNode_:In.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:In.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=st(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(pe(r!==".priority"||Ds(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,In.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+j2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=w2(this.value_):e+=this.value_,this.lazyHash_=_2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===In.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof In.__childrenNodeConstructor?-1:(pe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,l=In.VALUE_TYPE_ORDER.indexOf(n),u=In.VALUE_TYPE_ORDER.indexOf(r);return pe(l>=0,"Unknown leaf type: "+n),pe(u>=0,"Unknown leaf type: "+r),l===u?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}In.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2,Y2;function X3(t){Z2=t}function Q3(t){Y2=t}class K3 extends $u{compare(e,n){const r=e.node.getPriority(),l=n.node.getPriority(),u=r.compareTo(l);return u===0?xa(e.name,n.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return tt.MIN}maxPost(){return new tt(fo,new In("[PRIORITY-POST]",Y2))}makePost(e,n){const r=Z2(e);return new tt(n,new In("[PRIORITY-POST]",r))}toString(){return".priority"}}const tn=new K3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=Math.log(2);class $3{constructor(e){const n=u=>parseInt(Math.log(u)/q3,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=r(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vu=function(t,e,n,r){t.sort(e);const l=function(C,y){const N=y-C;let A,R;if(N===0)return null;if(N===1)return A=t[C],R=n?n(A):A,new Nn(R,A.node,Nn.BLACK,null,null);{const H=parseInt(N/2,10)+C,Z=l(C,H),W=l(H+1,y);return A=t[H],R=n?n(A):A,new Nn(R,A.node,Nn.BLACK,Z,W)}},u=function(C){let y=null,N=null,A=t.length;const R=function(Z,W){const me=A-Z,U=A;A-=Z;const P=l(me+1,U),k=t[me],q=n?n(k):k;H(new Nn(q,k.node,W,null,P))},H=function(Z){y?(y.left=Z,y=Z):(N=Z,y=Z)};for(let Z=0;Z<C.count;++Z){const W=C.nextBitIsOne(),me=Math.pow(2,C.count-(Z+1));W?R(me,Nn.BLACK):(R(me,Nn.BLACK),R(me,Nn.RED))}return N},g=new $3(t.length),w=u(g);return new li(r||e,w)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh;const Mo={};class Vr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return pe(Mo&&tn,"ChildrenNode.ts has not been loaded"),Qh=Qh||new Vr({".priority":Mo},{".priority":tn}),Qh}get(e){const n=ha(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof li?n:null}hasIndex(e){return $r(this.indexSet_,e.toString())}addIndex(e,n){pe(e!==na,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let l=!1;const u=n.getIterator(tt.Wrap);let g=u.getNext();for(;g;)l=l||e.isDefinedOn(g.node),r.push(g),g=u.getNext();let w;l?w=vu(r,e.getCompare()):w=Mo;const C=e.toString(),y=Object.assign({},this.indexSet_);y[C]=e;const N=Object.assign({},this.indexes_);return N[C]=w,new Vr(N,y)}addToIndexes(e,n){const r=mu(this.indexes_,(l,u)=>{const g=ha(this.indexSet_,u);if(pe(g,"Missing index implementation for "+u),l===Mo)if(g.isDefinedOn(e.node)){const w=[],C=n.getIterator(tt.Wrap);let y=C.getNext();for(;y;)y.name!==e.name&&w.push(y),y=C.getNext();return w.push(e),vu(w,g.getCompare())}else return Mo;else{const w=n.get(e.name);let C=l;return w&&(C=C.remove(new tt(e.name,w))),C.insert(e,e.node)}});return new Vr(r,this.indexSet_)}removeFromIndexes(e,n){const r=mu(this.indexes_,l=>{if(l===Mo)return l;{const u=n.get(e.name);return u?l.remove(new tt(e.name,u)):l}});return new Vr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka;class Fe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&G2(this.priorityNode_),this.children_.isEmpty()&&pe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ka||(Ka=new Fe(new li(v1),null,Vr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ka}updatePriority(e){return this.children_.isEmpty()?this:new Fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ka:n}}getChild(e){const n=st(e);return n===null?this:this.getImmediateChild(n).getChild(Pt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(pe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new tt(e,n);let l,u;n.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(e,n),u=this.indexMap_.addToIndexes(r,this.children_));const g=l.isEmpty()?Ka:this.priorityNode_;return new Fe(l,g,u)}}updateChild(e,n){const r=st(e);if(r===null)return n;{pe(st(e)!==".priority"||Ds(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(Pt(e),n);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,l=0,u=!0;if(this.forEachChild(tn,(g,w)=>{n[g]=w.val(e),r++,u&&Fe.INTEGER_REGEXP_.test(g)?l=Math.max(l,Number(g)):u=!1}),!e&&u&&l<2*r){const g=[];for(const w in n)g[w]=n[w];return g}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+j2(this.getPriority().val())+":"),this.forEachChild(tn,(n,r)=>{const l=r.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":_2(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const l=this.resolveIndex_(r);if(l){const u=l.getPredecessorKey(new tt(e,n));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new tt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new tt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,tt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,tt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ql?-1:0}withIndex(e){if(e===na||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===na||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(tn),l=n.getIterator(tn);let u=r.getNext(),g=l.getNext();for(;u&&g;){if(u.name!==g.name||!u.node.equals(g.node))return!1;u=r.getNext(),g=l.getNext()}return u===null&&g===null}else return!1;else return!1}}resolveIndex_(e){return e===na?null:this.indexMap_.get(e.toString())}}Fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J3 extends Fe{constructor(){super(new li(v1),Fe.EMPTY_NODE,Vr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fe.EMPTY_NODE}isEmpty(){return!1}}const ql=new J3;Object.defineProperties(tt,{MIN:{value:new tt(da,Fe.EMPTY_NODE)},MAX:{value:new tt(fo,ql)}});V2.__EMPTY_NODE=Fe.EMPTY_NODE;In.__childrenNodeConstructor=Fe;Y3(ql);Q3(ql);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=!0;function Vn(t,e=null){if(t===null)return Fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),pe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new In(n,Vn(e))}if(!(t instanceof Array)&&eS){const n=[];let r=!1;if(di(t,(g,w)=>{if(g.substring(0,1)!=="."){const C=Vn(w);C.isEmpty()||(r=r||!C.getPriority().isEmpty(),n.push(new tt(g,C)))}}),n.length===0)return Fe.EMPTY_NODE;const u=vu(n,Z3,g=>g.name,v1);if(r){const g=vu(n,tn.getCompare());return new Fe(u,Vn(e),new Vr({".priority":g},{".priority":tn}))}else return new Fe(u,Vn(e),Vr.Default)}else{let n=Fe.EMPTY_NODE;return di(t,(r,l)=>{if($r(t,r)&&r.substring(0,1)!=="."){const u=Vn(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(r,u))}}),n.updatePriority(Vn(e))}}X3(Vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends $u{constructor(e){super(),this.indexPath_=e,pe(!ot(e)&&st(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),l=this.extractChild(n.node),u=r.compareTo(l);return u===0?xa(e.name,n.name):u}makePost(e,n){const r=Vn(e),l=Fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new tt(n,l)}maxPost(){const e=Fe.EMPTY_NODE.updateChild(this.indexPath_,ql);return new tt(fo,e)}toString(){return U2(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends $u{compare(e,n){const r=e.node.compareTo(n.node);return r===0?xa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return tt.MIN}maxPost(){return tt.MAX}makePost(e,n){const r=Vn(e);return new tt(n,r)}toString(){return".value"}}const iS=new nS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){return{type:"value",snapshotNode:t}}function fa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function kl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Bl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.index_=e}updateChild(e,n,r,l,u,g){pe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const w=e.getImmediateChild(n);return w.getChild(l).equals(r.getChild(l))&&w.isEmpty()===r.isEmpty()||(g!=null&&(r.isEmpty()?e.hasChild(n)?g.trackChildChange(kl(n,w)):pe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):w.isEmpty()?g.trackChildChange(fa(n,r)):g.trackChildChange(Bl(n,r,w))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tn,(l,u)=>{n.hasChild(l)||r.trackChildChange(kl(l,u))}),n.isLeafNode()||n.forEachChild(tn,(l,u)=>{if(e.hasChild(l)){const g=e.getImmediateChild(l);g.equals(u)||r.trackChildChange(Bl(l,u,g))}else r.trackChildChange(fa(l,u))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Fe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.indexedFilter_=new C1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fl.getStartPost_(e),this.endPost_=Fl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,l,u,g){return this.matches(new tt(n,r))||(r=Fe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,l,u,g)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Fe.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(Fe.EMPTY_NODE);const u=this;return n.forEachChild(tn,(g,w)=>{u.matches(new tt(g,w))||(l=l.updateImmediateChild(g,Fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,l,u,g){return this.rangedFilter_.matches(new tt(n,r))||(r=Fe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,l,u,g):this.fullLimitUpdateChild_(e,n,r,u,g)}updateFullNode(e,n,r){let l;if(n.isLeafNode()||n.isEmpty())l=Fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=Fe.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let g=0;for(;u.hasNext()&&g<this.limit_;){const w=u.getNext();if(this.withinDirectionalStart(w))if(this.withinDirectionalEnd(w))l=l.updateImmediateChild(w.name,w.node),g++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(Fe.EMPTY_NODE);let u;this.reverse_?u=l.getReverseIterator(this.index_):u=l.getIterator(this.index_);let g=0;for(;u.hasNext();){const w=u.getNext();g<this.limit_&&this.withinDirectionalStart(w)&&this.withinDirectionalEnd(w)?g++:l=l.updateImmediateChild(w.name,Fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,l,u){let g;if(this.reverse_){const A=this.index_.getCompare();g=(R,H)=>A(H,R)}else g=this.index_.getCompare();const w=e;pe(w.numChildren()===this.limit_,"");const C=new tt(n,r),y=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),N=this.rangedFilter_.matches(C);if(w.hasChild(n)){const A=w.getImmediateChild(n);let R=l.getChildAfterChild(this.index_,y,this.reverse_);for(;R!=null&&(R.name===n||w.hasChild(R.name));)R=l.getChildAfterChild(this.index_,R,this.reverse_);const H=R==null?1:g(R,C);if(N&&!r.isEmpty()&&H>=0)return u!=null&&u.trackChildChange(Bl(n,r,A)),w.updateImmediateChild(n,r);{u!=null&&u.trackChildChange(kl(n,A));const W=w.updateImmediateChild(n,Fe.EMPTY_NODE);return R!=null&&this.rangedFilter_.matches(R)?(u!=null&&u.trackChildChange(fa(R.name,R.node)),W.updateImmediateChild(R.name,R.node)):W}}else return r.isEmpty()?e:N&&g(y,C)>=0?(u!=null&&(u.trackChildChange(kl(y.name,y.node)),u.trackChildChange(fa(n,r))),w.updateImmediateChild(n,r).updateImmediateChild(y.name,Fe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return pe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return pe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:da}hasEnd(){return this.endSet_}getIndexEndValue(){return pe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return pe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return pe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tn}copy(){const e=new E1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oS(t){return t.loadsAllData()?new C1(t.getIndex()):t.hasLimit()?new sS(t):new Fl(t)}function ag(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tn?n="$priority":t.index_===iS?n="$value":t.index_===na?n="$key":(pe(t.index_ instanceof tS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=bn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+bn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=bn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+bn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lg(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends B2{constructor(e,n,r,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=l,this.log_=Ql("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(pe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const g=Cu.getListenId_(e,r),w={};this.listens_[g]=w;const C=ag(e._queryParams);this.restRequest_(u+".json",C,(y,N)=>{let A=N;if(y===404&&(A=null,y=null),y===null&&this.onDataUpdate_(u,A,!1,r),ha(this.listens_,g)===w){let R;y?y===401?R="permission_denied":R="rest_error:"+y:R="ok",l(R,null)}})}unlisten(e,n){const r=Cu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=ag(e._queryParams),r=e._path.toString(),l=new f1;return this.restRequest_(r+".json",n,(u,g)=>{let w=g;u===404&&(w=null,u=null),u===null?(this.onDataUpdate_(r,w,!1,null),l.resolve(w)):l.reject(new Error(w))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const g=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+kC(n);this.log_("Sending REST request for "+g);const w=new XMLHttpRequest;w.onreadystatechange=()=>{if(r&&w.readyState===4){this.log_("REST Response for "+g+" received. status:",w.status,"response:",w.responseText);let C=null;if(w.status>=200&&w.status<300){try{C=Rl(w.responseText)}catch{Si("Failed to parse JSON response for "+g+": "+w.responseText)}r(null,C)}else w.status!==401&&w.status!==404&&Si("Got unsuccessful REST response for "+g+" Status: "+w.status),r(w.status);r=null}},w.open("GET",g,!0),w.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.rootNode_=Fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(){return{value:null,children:new Map}}function Q2(t,e,n){if(ot(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=st(e);t.children.has(r)||t.children.set(r,Eu());const l=t.children.get(r);e=Pt(e),Q2(l,e,n)}}function af(t,e,n){t.value!==null?n(e,t.value):lS(t,(r,l)=>{const u=new Mt(e.toString()+"/"+r);af(l,u,n)})}function lS(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&di(this.last_,(r,l)=>{n[r]=n[r]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=10*1e3,uS=30*1e3,hS=5*60*1e3;class dS{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cS(e);const r=cg+(uS-cg)*Math.random();hl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;di(e,(l,u)=>{u>0&&$r(this.statsToReport_,l)&&(n[l]=u,r=!0)}),r&&this.server_.reportStats(n),hl(this.reportStats_.bind(this),Math.floor(Math.random()*2*hS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(or||(or={}));function K2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function S1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function A1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=or.ACK_USER_WRITE,this.source=K2()}operationForChild(e){if(ot(this.path)){if(this.affectedTree.value!=null)return pe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Mt(e));return new Su(xt(),n,this.revert)}}else return pe(st(this.path)===e,"operationForChild called for unrelated child."),new Su(Pt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.source=e,this.path=n,this.type=or.LISTEN_COMPLETE}operationForChild(e){return ot(this.path)?new zl(this.source,xt()):new zl(this.source,Pt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=or.OVERWRITE}operationForChild(e){return ot(this.path)?new po(this.source,xt(),this.snap.getImmediateChild(e)):new po(this.source,Pt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=or.MERGE}operationForChild(e){if(ot(this.path)){const n=this.children.subtree(new Mt(e));return n.isEmpty()?null:n.value?new po(this.source,xt(),n.value):new Ul(this.source,xt(),n)}else return pe(st(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ul(this.source,Pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ot(e))return this.isFullyInitialized()&&!this.filtered_;const n=st(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pS(t,e,n,r){const l=[],u=[];return e.forEach(g=>{g.type==="child_changed"&&t.index_.indexedValueChanged(g.oldSnap,g.snapshotNode)&&u.push(rS(g.childName,g.snapshotNode))}),qa(t,l,"child_removed",e,r,n),qa(t,l,"child_added",e,r,n),qa(t,l,"child_moved",u,r,n),qa(t,l,"child_changed",e,r,n),qa(t,l,"value",e,r,n),l}function qa(t,e,n,r,l,u){const g=r.filter(w=>w.type===n);g.sort((w,C)=>mS(t,w,C)),g.forEach(w=>{const C=gS(t,w,u);l.forEach(y=>{y.respondsTo(w.type)&&e.push(y.createEvent(C,t.query_))})})}function gS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mS(t,e,n){if(e.childName==null||n.childName==null)throw ya("Should only compare child_ events.");const r=new tt(e.childName,e.snapshotNode),l=new tt(n.childName,n.snapshotNode);return t.index_.compare(r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t,e){return{eventCache:t,serverCache:e}}function dl(t,e,n,r){return Ju(new go(e,n,r),t.serverCache)}function q2(t,e,n,r){return Ju(t.eventCache,new go(e,n,r))}function lf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh;const _S=()=>(Kh||(Kh=new li(n3)),Kh);class Vt{constructor(e,n=_S()){this.value=e,this.children=n}static fromObject(e){let n=new Vt(null);return di(e,(r,l)=>{n=n.set(new Mt(r),l)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:xt(),value:this.value};if(ot(e))return null;{const r=st(e),l=this.children.get(r);if(l!==null){const u=l.findRootMostMatchingPathAndValue(Pt(e),n);return u!=null?{path:_n(new Mt(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ot(e))return this;{const n=st(e),r=this.children.get(n);return r!==null?r.subtree(Pt(e)):new Vt(null)}}set(e,n){if(ot(e))return new Vt(n,this.children);{const r=st(e),u=(this.children.get(r)||new Vt(null)).set(Pt(e),n),g=this.children.insert(r,u);return new Vt(this.value,g)}}remove(e){if(ot(e))return this.children.isEmpty()?new Vt(null):new Vt(null,this.children);{const n=st(e),r=this.children.get(n);if(r){const l=r.remove(Pt(e));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new Vt(null):new Vt(this.value,u)}else return this}}get(e){if(ot(e))return this.value;{const n=st(e),r=this.children.get(n);return r?r.get(Pt(e)):null}}setTree(e,n){if(ot(e))return n;{const r=st(e),u=(this.children.get(r)||new Vt(null)).setTree(Pt(e),n);let g;return u.isEmpty()?g=this.children.remove(r):g=this.children.insert(r,u),new Vt(this.value,g)}}fold(e){return this.fold_(xt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((l,u)=>{r[l]=u.fold_(_n(e,l),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,xt(),n)}findOnPath_(e,n,r){const l=this.value?r(n,this.value):!1;if(l)return l;if(ot(e))return null;{const u=st(e),g=this.children.get(u);return g?g.findOnPath_(Pt(e),_n(n,u),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,xt(),n)}foreachOnPath_(e,n,r){if(ot(e))return this;{this.value&&r(n,this.value);const l=st(e),u=this.children.get(l);return u?u.foreachOnPath_(Pt(e),_n(n,l),r):new Vt(null)}}foreach(e){this.foreach_(xt(),e)}foreach_(e,n){this.children.inorderTraversal((r,l)=>{l.foreach_(_n(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.writeTree_=e}static empty(){return new cr(new Vt(null))}}function fl(t,e,n){if(ot(e))return new cr(new Vt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const l=r.path;let u=r.value;const g=ai(l,e);return u=u.updateChild(g,n),new cr(t.writeTree_.set(l,u))}else{const l=new Vt(n),u=t.writeTree_.setTree(e,l);return new cr(u)}}}function ug(t,e,n){let r=t;return di(n,(l,u)=>{r=fl(r,_n(e,l),u)}),r}function hg(t,e){if(ot(e))return cr.empty();{const n=t.writeTree_.setTree(e,new Vt(null));return new cr(n)}}function cf(t,e){return xo(t,e)!=null}function xo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ai(n.path,e)):null}function dg(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tn,(r,l)=>{e.push(new tt(r,l))}):t.writeTree_.children.inorderTraversal((r,l)=>{l.value!=null&&e.push(new tt(r,l.value))}),e}function bs(t,e){if(ot(e))return t;{const n=xo(t,e);return n!=null?new cr(new Vt(n)):new cr(t.writeTree_.subtree(e))}}function uf(t){return t.writeTree_.isEmpty()}function pa(t,e){return $2(xt(),t.writeTree_,e)}function $2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(pe(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):n=$2(_n(t,l),u,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(_n(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e){return ny(e,t)}function yS(t,e,n,r,l){pe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:l}),l&&(t.visibleWrites=fl(t.visibleWrites,e,n)),t.lastWriteId=r}function xS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function wS(t,e){const n=t.allWrites.findIndex(w=>w.writeId===e);pe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let l=r.visible,u=!1,g=t.allWrites.length-1;for(;l&&g>=0;){const w=t.allWrites[g];w.visible&&(g>=n&&vS(w,r.path)?l=!1:sr(r.path,w.path)&&(u=!0)),g--}if(l){if(u)return CS(t),!0;if(r.snap)t.visibleWrites=hg(t.visibleWrites,r.path);else{const w=r.children;di(w,C=>{t.visibleWrites=hg(t.visibleWrites,_n(r.path,C))})}return!0}else return!1}function vS(t,e){if(t.snap)return sr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&sr(_n(t.path,n),e))return!0;return!1}function CS(t){t.visibleWrites=J2(t.allWrites,ES,xt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ES(t){return t.visible}function J2(t,e,n){let r=cr.empty();for(let l=0;l<t.length;++l){const u=t[l];if(e(u)){const g=u.path;let w;if(u.snap)sr(n,g)?(w=ai(n,g),r=fl(r,w,u.snap)):sr(g,n)&&(w=ai(g,n),r=fl(r,xt(),u.snap.getChild(w)));else if(u.children){if(sr(n,g))w=ai(n,g),r=ug(r,w,u.children);else if(sr(g,n))if(w=ai(g,n),ot(w))r=ug(r,xt(),u.children);else{const C=ha(u.children,st(w));if(C){const y=C.getChild(Pt(w));r=fl(r,xt(),y)}}}else throw ya("WriteRecord should have .snap or .children")}}return r}function ey(t,e,n,r,l){if(!r&&!l){const u=xo(t.visibleWrites,e);if(u!=null)return u;{const g=bs(t.visibleWrites,e);if(uf(g))return n;if(n==null&&!cf(g,xt()))return null;{const w=n||Fe.EMPTY_NODE;return pa(g,w)}}}else{const u=bs(t.visibleWrites,e);if(!l&&uf(u))return n;if(!l&&n==null&&!cf(u,xt()))return null;{const g=function(y){return(y.visible||l)&&(!r||!~r.indexOf(y.writeId))&&(sr(y.path,e)||sr(e,y.path))},w=J2(t.allWrites,g,e),C=n||Fe.EMPTY_NODE;return pa(w,C)}}}function SS(t,e,n){let r=Fe.EMPTY_NODE;const l=xo(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(tn,(u,g)=>{r=r.updateImmediateChild(u,g)}),r;if(n){const u=bs(t.visibleWrites,e);return n.forEachChild(tn,(g,w)=>{const C=pa(bs(u,new Mt(g)),w);r=r.updateImmediateChild(g,C)}),dg(u).forEach(g=>{r=r.updateImmediateChild(g.name,g.node)}),r}else{const u=bs(t.visibleWrites,e);return dg(u).forEach(g=>{r=r.updateImmediateChild(g.name,g.node)}),r}}function AS(t,e,n,r,l){pe(r||l,"Either existingEventSnap or existingServerSnap must exist");const u=_n(e,n);if(cf(t.visibleWrites,u))return null;{const g=bs(t.visibleWrites,u);return uf(g)?l.getChild(n):pa(g,l.getChild(n))}}function IS(t,e,n,r){const l=_n(e,n),u=xo(t.visibleWrites,l);if(u!=null)return u;if(r.isCompleteForChild(n)){const g=bs(t.visibleWrites,l);return pa(g,r.getNode().getImmediateChild(n))}else return null}function TS(t,e){return xo(t.visibleWrites,e)}function NS(t,e,n,r,l,u,g){let w;const C=bs(t.visibleWrites,e),y=xo(C,xt());if(y!=null)w=y;else if(n!=null)w=pa(C,n);else return[];if(w=w.withIndex(g),!w.isEmpty()&&!w.isLeafNode()){const N=[],A=g.getCompare(),R=u?w.getReverseIteratorFrom(r,g):w.getIteratorFrom(r,g);let H=R.getNext();for(;H&&N.length<l;)A(H,r)!==0&&N.push(H),H=R.getNext();return N}else return[]}function bS(){return{visibleWrites:cr.empty(),allWrites:[],lastWriteId:-1}}function Au(t,e,n,r){return ey(t.writeTree,t.treePath,e,n,r)}function T1(t,e){return SS(t.writeTree,t.treePath,e)}function fg(t,e,n,r){return AS(t.writeTree,t.treePath,e,n,r)}function Iu(t,e){return TS(t.writeTree,_n(t.treePath,e))}function MS(t,e,n,r,l,u){return NS(t.writeTree,t.treePath,e,n,r,l,u)}function N1(t,e,n){return IS(t.writeTree,t.treePath,e,n)}function ty(t,e){return ny(_n(t.treePath,e),t.writeTree)}function ny(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;pe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),pe(r!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(r);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(r,Bl(r,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(r,kl(r,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(r,fa(r,e.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(r,Bl(r,e.snapshotNode,l.oldSnap));else throw ya("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const iy=new RS;class b1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new go(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return N1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mo(this.viewCache_),u=MS(this.writes_,l,n,1,r,e);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){return{filter:t}}function LS(t,e){pe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),pe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function PS(t,e,n,r,l){const u=new OS;let g,w;if(n.type===or.OVERWRITE){const y=n;y.source.fromUser?g=hf(t,e,y.path,y.snap,r,l,u):(pe(y.source.fromServer,"Unknown source."),w=y.source.tagged||e.serverCache.isFiltered()&&!ot(y.path),g=Tu(t,e,y.path,y.snap,r,l,w,u))}else if(n.type===or.MERGE){const y=n;y.source.fromUser?g=BS(t,e,y.path,y.children,r,l,u):(pe(y.source.fromServer,"Unknown source."),w=y.source.tagged||e.serverCache.isFiltered(),g=df(t,e,y.path,y.children,r,l,w,u))}else if(n.type===or.ACK_USER_WRITE){const y=n;y.revert?g=US(t,e,y.path,r,l,u):g=FS(t,e,y.path,y.affectedTree,r,l,u)}else if(n.type===or.LISTEN_COMPLETE)g=zS(t,e,n.path,r,u);else throw ya("Unknown operation type: "+n.type);const C=u.getChanges();return kS(e,g,C),{viewCache:g,changes:C}}function kS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const l=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=lf(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&n.push(X2(lf(e)))}}function ry(t,e,n,r,l,u){const g=e.eventCache;if(Iu(r,n)!=null)return e;{let w,C;if(ot(n))if(pe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=mo(e),N=y instanceof Fe?y:Fe.EMPTY_NODE,A=T1(r,N);w=t.filter.updateFullNode(e.eventCache.getNode(),A,u)}else{const y=Au(r,mo(e));w=t.filter.updateFullNode(e.eventCache.getNode(),y,u)}else{const y=st(n);if(y===".priority"){pe(Ds(n)===1,"Can't have a priority with additional path components");const N=g.getNode();C=e.serverCache.getNode();const A=fg(r,n,N,C);A!=null?w=t.filter.updatePriority(N,A):w=g.getNode()}else{const N=Pt(n);let A;if(g.isCompleteForChild(y)){C=e.serverCache.getNode();const R=fg(r,n,g.getNode(),C);R!=null?A=g.getNode().getImmediateChild(y).updateChild(N,R):A=g.getNode().getImmediateChild(y)}else A=N1(r,y,e.serverCache);A!=null?w=t.filter.updateChild(g.getNode(),y,A,N,l,u):w=g.getNode()}}return dl(e,w,g.isFullyInitialized()||ot(n),t.filter.filtersNodes())}}function Tu(t,e,n,r,l,u,g,w){const C=e.serverCache;let y;const N=g?t.filter:t.filter.getIndexedFilter();if(ot(n))y=N.updateFullNode(C.getNode(),r,null);else if(N.filtersNodes()&&!C.isFiltered()){const H=C.getNode().updateChild(n,r);y=N.updateFullNode(C.getNode(),H,null)}else{const H=st(n);if(!C.isCompleteForPath(n)&&Ds(n)>1)return e;const Z=Pt(n),me=C.getNode().getImmediateChild(H).updateChild(Z,r);H===".priority"?y=N.updatePriority(C.getNode(),me):y=N.updateChild(C.getNode(),H,me,Z,iy,null)}const A=q2(e,y,C.isFullyInitialized()||ot(n),N.filtersNodes()),R=new b1(l,A,u);return ry(t,A,n,l,R,w)}function hf(t,e,n,r,l,u,g){const w=e.eventCache;let C,y;const N=new b1(l,e,u);if(ot(n))y=t.filter.updateFullNode(e.eventCache.getNode(),r,g),C=dl(e,y,!0,t.filter.filtersNodes());else{const A=st(n);if(A===".priority")y=t.filter.updatePriority(e.eventCache.getNode(),r),C=dl(e,y,w.isFullyInitialized(),w.isFiltered());else{const R=Pt(n),H=w.getNode().getImmediateChild(A);let Z;if(ot(R))Z=r;else{const W=N.getCompleteChild(A);W!=null?z2(R)===".priority"&&W.getChild(H2(R)).isEmpty()?Z=W:Z=W.updateChild(R,r):Z=Fe.EMPTY_NODE}if(H.equals(Z))C=e;else{const W=t.filter.updateChild(w.getNode(),A,Z,R,N,g);C=dl(e,W,w.isFullyInitialized(),t.filter.filtersNodes())}}}return C}function pg(t,e){return t.eventCache.isCompleteForChild(e)}function BS(t,e,n,r,l,u,g){let w=e;return r.foreach((C,y)=>{const N=_n(n,C);pg(e,st(N))&&(w=hf(t,w,N,y,l,u,g))}),r.foreach((C,y)=>{const N=_n(n,C);pg(e,st(N))||(w=hf(t,w,N,y,l,u,g))}),w}function gg(t,e,n){return n.foreach((r,l)=>{e=e.updateChild(r,l)}),e}function df(t,e,n,r,l,u,g,w){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C=e,y;ot(n)?y=r:y=new Vt(null).setTree(n,r);const N=e.serverCache.getNode();return y.children.inorderTraversal((A,R)=>{if(N.hasChild(A)){const H=e.serverCache.getNode().getImmediateChild(A),Z=gg(t,H,R);C=Tu(t,C,new Mt(A),Z,l,u,g,w)}}),y.children.inorderTraversal((A,R)=>{const H=!e.serverCache.isCompleteForChild(A)&&R.value===null;if(!N.hasChild(A)&&!H){const Z=e.serverCache.getNode().getImmediateChild(A),W=gg(t,Z,R);C=Tu(t,C,new Mt(A),W,l,u,g,w)}}),C}function FS(t,e,n,r,l,u,g){if(Iu(l,n)!=null)return e;const w=e.serverCache.isFiltered(),C=e.serverCache;if(r.value!=null){if(ot(n)&&C.isFullyInitialized()||C.isCompleteForPath(n))return Tu(t,e,n,C.getNode().getChild(n),l,u,w,g);if(ot(n)){let y=new Vt(null);return C.getNode().forEachChild(na,(N,A)=>{y=y.set(new Mt(N),A)}),df(t,e,n,y,l,u,w,g)}else return e}else{let y=new Vt(null);return r.foreach((N,A)=>{const R=_n(n,N);C.isCompleteForPath(R)&&(y=y.set(N,C.getNode().getChild(R)))}),df(t,e,n,y,l,u,w,g)}}function zS(t,e,n,r,l){const u=e.serverCache,g=q2(e,u.getNode(),u.isFullyInitialized()||ot(n),u.isFiltered());return ry(t,g,n,r,iy,l)}function US(t,e,n,r,l,u){let g;if(Iu(r,n)!=null)return e;{const w=new b1(r,e,l),C=e.eventCache.getNode();let y;if(ot(n)||st(n)===".priority"){let N;if(e.serverCache.isFullyInitialized())N=Au(r,mo(e));else{const A=e.serverCache.getNode();pe(A instanceof Fe,"serverChildren would be complete if leaf node"),N=T1(r,A)}N=N,y=t.filter.updateFullNode(C,N,u)}else{const N=st(n);let A=N1(r,N,e.serverCache);A==null&&e.serverCache.isCompleteForChild(N)&&(A=C.getImmediateChild(N)),A!=null?y=t.filter.updateChild(C,N,A,Pt(n),w,u):e.eventCache.getNode().hasChild(N)?y=t.filter.updateChild(C,N,Fe.EMPTY_NODE,Pt(n),w,u):y=C,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(g=Au(r,mo(e)),g.isLeafNode()&&(y=t.filter.updateFullNode(y,g,u)))}return g=e.serverCache.isFullyInitialized()||Iu(r,xt())!=null,dl(e,y,g,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,l=new C1(r.getIndex()),u=oS(r);this.processor_=DS(u);const g=n.serverCache,w=n.eventCache,C=l.updateFullNode(Fe.EMPTY_NODE,g.getNode(),null),y=u.updateFullNode(Fe.EMPTY_NODE,w.getNode(),null),N=new go(C,g.isFullyInitialized(),l.filtersNodes()),A=new go(y,w.isFullyInitialized(),u.filtersNodes());this.viewCache_=Ju(A,N),this.eventGenerator_=new fS(this.query_)}get query(){return this.query_}}function WS(t){return t.viewCache_.serverCache.getNode()}function VS(t,e){const n=mo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ot(e)&&!n.getImmediateChild(st(e)).isEmpty())?n.getChild(e):null}function mg(t){return t.eventRegistrations_.length===0}function jS(t,e){t.eventRegistrations_.push(e)}function _g(t,e,n){const r=[];if(n){pe(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(u=>{const g=u.createCancelEvent(n,l);g&&r.push(g)})}if(e){let l=[];for(let u=0;u<t.eventRegistrations_.length;++u){const g=t.eventRegistrations_[u];if(!g.matches(e))l.push(g);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(u+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return r}function yg(t,e,n,r){e.type===or.MERGE&&e.source.queryId!==null&&(pe(mo(t.viewCache_),"We should always have a full cache before handling merges"),pe(lf(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,u=PS(t.processor_,l,e,n,r);return LS(t.processor_,u.viewCache),pe(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,sy(t,u.changes,u.viewCache.eventCache.getNode(),null)}function GS(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tn,(u,g)=>{r.push(fa(u,g))}),n.isFullyInitialized()&&r.push(X2(n.getNode())),sy(t,r,n.getNode(),e)}function sy(t,e,n,r){const l=r?[r]:t.eventRegistrations_;return pS(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;class ZS{constructor(){this.views=new Map}}function YS(t){pe(!Nu,"__referenceConstructor has already been defined"),Nu=t}function XS(){return pe(Nu,"Reference.ts has not been loaded"),Nu}function QS(t){return t.views.size===0}function M1(t,e,n,r){const l=e.source.queryId;if(l!==null){const u=t.views.get(l);return pe(u!=null,"SyncTree gave us an op for an invalid query."),yg(u,e,n,r)}else{let u=[];for(const g of t.views.values())u=u.concat(yg(g,e,n,r));return u}}function KS(t,e,n,r,l){const u=e._queryIdentifier,g=t.views.get(u);if(!g){let w=Au(n,l?r:null),C=!1;w?C=!0:r instanceof Fe?(w=T1(n,r),C=!1):(w=Fe.EMPTY_NODE,C=!1);const y=Ju(new go(w,C,!1),new go(r,l,!1));return new HS(e,y)}return g}function qS(t,e,n,r,l,u){const g=KS(t,e,r,l,u);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,g),jS(g,n),GS(g,n)}function $S(t,e,n,r){const l=e._queryIdentifier,u=[];let g=[];const w=Ls(t);if(l==="default")for(const[C,y]of t.views.entries())g=g.concat(_g(y,n,r)),mg(y)&&(t.views.delete(C),y.query._queryParams.loadsAllData()||u.push(y.query));else{const C=t.views.get(l);C&&(g=g.concat(_g(C,n,r)),mg(C)&&(t.views.delete(l),C.query._queryParams.loadsAllData()||u.push(C.query)))}return w&&!Ls(t)&&u.push(new(XS())(e._repo,e._path)),{removed:u,events:g}}function oy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ia(t,e){let n=null;for(const r of t.views.values())n=n||VS(r,e);return n}function ay(t,e){if(e._queryParams.loadsAllData())return eh(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ly(t,e){return ay(t,e)!=null}function Ls(t){return eh(t)!=null}function eh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu;function JS(t){pe(!bu,"__referenceConstructor has already been defined"),bu=t}function eA(){return pe(bu,"Reference.ts has not been loaded"),bu}let tA=1;class xg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vt(null),this.pendingWriteTree_=bS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nA(t,e,n,r,l){return yS(t.pendingWriteTree_,e,n,r,l),l?$l(t,new po(K2(),e,n)):[]}function Zo(t,e,n=!1){const r=xS(t.pendingWriteTree_,e);if(wS(t.pendingWriteTree_,e)){let u=new Vt(null);return r.snap!=null?u=u.set(xt(),!0):di(r.children,g=>{u=u.set(new Mt(g),!0)}),$l(t,new Su(r.path,u,n))}else return[]}function th(t,e,n){return $l(t,new po(S1(),e,n))}function iA(t,e,n){const r=Vt.fromObject(n);return $l(t,new Ul(S1(),e,r))}function rA(t,e){return $l(t,new zl(S1(),e))}function sA(t,e,n){const r=O1(t,n);if(r){const l=R1(r),u=l.path,g=l.queryId,w=ai(u,e),C=new zl(A1(g),w);return D1(t,u,C)}else return[]}function ff(t,e,n,r,l=!1){const u=e._path,g=t.syncPointTree_.get(u);let w=[];if(g&&(e._queryIdentifier==="default"||ly(g,e))){const C=$S(g,e,n,r);QS(g)&&(t.syncPointTree_=t.syncPointTree_.remove(u));const y=C.removed;if(w=C.events,!l){const N=y.findIndex(R=>R._queryParams.loadsAllData())!==-1,A=t.syncPointTree_.findOnPath(u,(R,H)=>Ls(H));if(N&&!A){const R=t.syncPointTree_.subtree(u);if(!R.isEmpty()){const H=lA(R);for(let Z=0;Z<H.length;++Z){const W=H[Z],me=W.query,U=dy(t,W);t.listenProvider_.startListening(pl(me),Mu(t,me),U.hashFn,U.onComplete)}}}!A&&y.length>0&&!r&&(N?t.listenProvider_.stopListening(pl(e),null):y.forEach(R=>{const H=t.queryToTagMap.get(nh(R));t.listenProvider_.stopListening(pl(R),H)}))}cA(t,y)}return w}function oA(t,e,n,r){const l=O1(t,r);if(l!=null){const u=R1(l),g=u.path,w=u.queryId,C=ai(g,e),y=new po(A1(w),C,n);return D1(t,g,y)}else return[]}function aA(t,e,n,r){const l=O1(t,r);if(l){const u=R1(l),g=u.path,w=u.queryId,C=ai(g,e),y=Vt.fromObject(n),N=new Ul(A1(w),C,y);return D1(t,g,N)}else return[]}function wg(t,e,n,r=!1){const l=e._path;let u=null,g=!1;t.syncPointTree_.foreachOnPath(l,(R,H)=>{const Z=ai(R,l);u=u||ia(H,Z),g=g||Ls(H)});let w=t.syncPointTree_.get(l);w?(g=g||Ls(w),u=u||ia(w,xt())):(w=new ZS,t.syncPointTree_=t.syncPointTree_.set(l,w));let C;u!=null?C=!0:(C=!1,u=Fe.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((H,Z)=>{const W=ia(Z,xt());W&&(u=u.updateImmediateChild(H,W))}));const y=ly(w,e);if(!y&&!e._queryParams.loadsAllData()){const R=nh(e);pe(!t.queryToTagMap.has(R),"View does not exist, but we have a tag");const H=uA();t.queryToTagMap.set(R,H),t.tagToQueryMap.set(H,R)}const N=I1(t.pendingWriteTree_,l);let A=qS(w,e,n,N,u,C);if(!y&&!g&&!r){const R=ay(w,e);A=A.concat(hA(t,e,R))}return A}function cy(t,e,n){const l=t.pendingWriteTree_,u=t.syncPointTree_.findOnPath(e,(g,w)=>{const C=ai(g,e),y=ia(w,C);if(y)return y});return ey(l,e,u,n,!0)}function $l(t,e){return uy(e,t.syncPointTree_,null,I1(t.pendingWriteTree_,xt()))}function uy(t,e,n,r){if(ot(t.path))return hy(t,e,n,r);{const l=e.get(xt());n==null&&l!=null&&(n=ia(l,xt()));let u=[];const g=st(t.path),w=t.operationForChild(g),C=e.children.get(g);if(C&&w){const y=n?n.getImmediateChild(g):null,N=ty(r,g);u=u.concat(uy(w,C,y,N))}return l&&(u=u.concat(M1(l,t,r,n))),u}}function hy(t,e,n,r){const l=e.get(xt());n==null&&l!=null&&(n=ia(l,xt()));let u=[];return e.children.inorderTraversal((g,w)=>{const C=n?n.getImmediateChild(g):null,y=ty(r,g),N=t.operationForChild(g);N&&(u=u.concat(hy(N,w,C,y)))}),l&&(u=u.concat(M1(l,t,r,n))),u}function dy(t,e){const n=e.query,r=Mu(t,n);return{hashFn:()=>(WS(e)||Fe.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return r?sA(t,n._path,r):rA(t,n._path);{const u=s3(l,n);return ff(t,n,null,u)}}}}function Mu(t,e){const n=nh(e);return t.queryToTagMap.get(n)}function nh(t){return t._path.toString()+"$"+t._queryIdentifier}function O1(t,e){return t.tagToQueryMap.get(e)}function R1(t){const e=t.indexOf("$");return pe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Mt(t.substr(0,e))}}function D1(t,e,n){const r=t.syncPointTree_.get(e);pe(r,"Missing sync point for query tag that we're tracking");const l=I1(t.pendingWriteTree_,e);return M1(r,n,l,null)}function lA(t){return t.fold((e,n,r)=>{if(n&&Ls(n))return[eh(n)];{let l=[];return n&&(l=oy(n)),di(r,(u,g)=>{l=l.concat(g)}),l}})}function pl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(eA())(t._repo,t._path):t}function cA(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const l=nh(r),u=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(u)}}}function uA(){return tA++}function hA(t,e,n){const r=e._path,l=Mu(t,e),u=dy(t,n),g=t.listenProvider_.startListening(pl(e),l,u.hashFn,u.onComplete),w=t.syncPointTree_.subtree(r);if(l)pe(!Ls(w.value),"If we're adding a query, it shouldn't be shadowed");else{const C=w.fold((y,N,A)=>{if(!ot(y)&&N&&Ls(N))return[eh(N).query];{let R=[];return N&&(R=R.concat(oy(N).map(H=>H.query))),di(A,(H,Z)=>{R=R.concat(Z)}),R}});for(let y=0;y<C.length;++y){const N=C[y];t.listenProvider_.stopListening(pl(N),Mu(t,N))}}return g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new L1(n)}node(){return this.node_}}class P1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_n(this.path_,e);return new P1(this.syncTree_,n)}node(){return cy(this.syncTree_,this.path_)}}const dA=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vg=function(t,e,n){if(!t||typeof t!="object")return t;if(pe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fA(t[".sv"],e,n);if(typeof t[".sv"]=="object")return pA(t[".sv"],e);pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fA=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:pe(!1,"Unexpected server value: "+t)}},pA=function(t,e,n){t.hasOwnProperty("increment")||pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&pe(!1,"Unexpected increment value: "+r);const l=e.node();if(pe(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return r;const g=l.getValue();return typeof g!="number"?r:g+r},gA=function(t,e,n,r){return k1(e,new P1(n,t),r)},mA=function(t,e,n){return k1(t,new L1(e),n)};function k1(t,e,n){const r=t.getPriority().val(),l=vg(r,e.getImmediateChild(".priority"),n);let u;if(t.isLeafNode()){const g=t,w=vg(g.getValue(),e,n);return w!==g.getValue()||l!==g.getPriority().val()?new In(w,Vn(l)):t}else{const g=t;return u=g,l!==g.getPriority().val()&&(u=u.updatePriority(new In(l))),g.forEachChild(tn,(w,C)=>{const y=k1(C,e.getImmediateChild(w),n);y!==C&&(u=u.updateImmediateChild(w,y))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function F1(t,e){let n=e instanceof Mt?e:new Mt(e),r=t,l=st(n);for(;l!==null;){const u=ha(r.node.children,l)||{children:{},childCount:0};r=new B1(l,r,u),n=Pt(n),l=st(n)}return r}function wa(t){return t.node.value}function fy(t,e){t.node.value=e,pf(t)}function py(t){return t.node.childCount>0}function _A(t){return wa(t)===void 0&&!py(t)}function ih(t,e){di(t.node.children,(n,r)=>{e(new B1(n,t,r))})}function gy(t,e,n,r){n&&!r&&e(t),ih(t,l=>{gy(l,e,!0,r)}),n&&r&&e(t)}function yA(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Jl(t){return new Mt(t.parent===null?t.name:Jl(t.parent)+"/"+t.name)}function pf(t){t.parent!==null&&xA(t.parent,t.name,t)}function xA(t,e,n){const r=_A(n),l=$r(t.node.children,e);r&&l?(delete t.node.children[e],t.node.childCount--,pf(t)):!r&&!l&&(t.node.children[e]=n.node,t.node.childCount++,pf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=/[\[\].#$\/\u0000-\u001F\u007F]/,vA=/[\[\].#$\u0000-\u001F\u007F]/,qh=10*1024*1024,my=function(t){return typeof t=="string"&&t.length!==0&&!wA.test(t)},_y=function(t){return typeof t=="string"&&t.length!==0&&!vA.test(t)},CA=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_y(t)},yy=function(t,e,n){const r=n instanceof Mt?new F3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+$s(r));if(typeof e=="function")throw new Error(t+"contains a function "+$s(r)+" with contents = "+e.toString());if(y2(e))throw new Error(t+"contains "+e.toString()+" "+$s(r));if(typeof e=="string"&&e.length>qh/3&&Ku(e)>qh)throw new Error(t+"contains a string greater than "+qh+" utf8 bytes "+$s(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(di(e,(g,w)=>{if(g===".value")l=!0;else if(g!==".priority"&&g!==".sv"&&(u=!0,!my(g)))throw new Error(t+" contains an invalid key ("+g+") "+$s(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z3(r,g),yy(t,w,r),U3(r)}),l&&u)throw new Error(t+' contains ".value" child '+$s(r)+" in addition to actual children.")}},xy=function(t,e,n,r){if(!(r&&n===void 0)&&!_y(n))throw new Error(l2(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},EA=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xy(t,e,n,r)},SA=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!my(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!CA(n))throw new Error(l2(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wy(t,e){let n=null;for(let r=0;r<e.length;r++){const l=e[r],u=l.getPath();n!==null&&!x1(u,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&t.eventLists_.push(n)}function vy(t,e,n){wy(t,n),Cy(t,r=>x1(r,e))}function wo(t,e,n){wy(t,n),Cy(t,r=>sr(r,e)||sr(e,r))}function Cy(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const l=t.eventLists_[r];if(l){const u=l.path;e(u)?(IA(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function IA(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();so&&Wn("event: "+n.toString()),Kl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="repo_interrupt",NA=25;class bA{constructor(e,n,r,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Eu(),this.transactionQueueTree_=new B1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function MA(t,e,n){if(t.stats_=_1(t.repoInfo_),t.forceRestClient_||c3())t.server_=new Cu(t.repoInfo_,(r,l,u,g)=>{Cg(t,r,l,u,g)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Eg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gr(t.repoInfo_,e,(r,l,u,g)=>{Cg(t,r,l,u,g)},r=>{Eg(t,r)},r=>{RA(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=p3(t.repoInfo_,()=>new dS(t.stats_,t.server_)),t.infoData_=new aS,t.infoSyncTree_=new xg({startListening:(r,l,u,g)=>{let w=[];const C=t.infoData_.getNode(r._path);return C.isEmpty()||(w=th(t.infoSyncTree_,r._path,C),setTimeout(()=>{g("ok")},0)),w},stopListening:()=>{}}),z1(t,"connected",!1),t.serverSyncTree_=new xg({startListening:(r,l,u,g)=>(t.server_.listen(r,u,l,(w,C)=>{const y=g(w,C);wo(t.eventQueue_,r._path,y)}),[]),stopListening:(r,l)=>{t.server_.unlisten(r,l)}})}function OA(t){const n=t.infoData_.getNode(new Mt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ey(t){return dA({timestamp:OA(t)})}function Cg(t,e,n,r,l){t.dataUpdateCount++;const u=new Mt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let g=[];if(l)if(r){const C=mu(n,y=>Vn(y));g=aA(t.serverSyncTree_,u,C,l)}else{const C=Vn(n);g=oA(t.serverSyncTree_,u,C,l)}else if(r){const C=mu(n,y=>Vn(y));g=iA(t.serverSyncTree_,u,C)}else{const C=Vn(n);g=th(t.serverSyncTree_,u,C)}let w=u;g.length>0&&(w=H1(t,u)),wo(t.eventQueue_,w,g)}function Eg(t,e){z1(t,"connected",e),e===!1&&LA(t)}function RA(t,e){di(e,(n,r)=>{z1(t,n,r)})}function z1(t,e,n){const r=new Mt("/.info/"+e),l=Vn(n);t.infoData_.updateSnapshot(r,l);const u=th(t.infoSyncTree_,r,l);wo(t.eventQueue_,r,u)}function DA(t){return t.nextWriteId_++}function LA(t){Sy(t,"onDisconnectEvents");const e=Ey(t),n=Eu();af(t.onDisconnect_,xt(),(l,u)=>{const g=gA(l,u,t.serverSyncTree_,e);Q2(n,l,g)});let r=[];af(n,xt(),(l,u)=>{r=r.concat(th(t.serverSyncTree_,l,u));const g=zA(t,l);H1(t,g)}),t.onDisconnect_=Eu(),wo(t.eventQueue_,xt(),r)}function PA(t,e,n){let r;st(e._path)===".info"?r=wg(t.infoSyncTree_,e,n):r=wg(t.serverSyncTree_,e,n),vy(t.eventQueue_,e._path,r)}function Sg(t,e,n){let r;st(e._path)===".info"?r=ff(t.infoSyncTree_,e,n):r=ff(t.serverSyncTree_,e,n),vy(t.eventQueue_,e._path,r)}function kA(t){t.persistentConnection_&&t.persistentConnection_.interrupt(TA)}function Sy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Wn(n,...e)}function Ay(t,e,n){return cy(t.serverSyncTree_,e,n)||Fe.EMPTY_NODE}function U1(t,e=t.transactionQueueTree_){if(e||rh(t,e),wa(e)){const n=Ty(t,e);pe(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&BA(t,Jl(e),n)}else py(e)&&ih(e,n=>{U1(t,n)})}function BA(t,e,n){const r=n.map(y=>y.currentWriteId),l=Ay(t,e,r);let u=l;const g=l.hash();for(let y=0;y<n.length;y++){const N=n[y];pe(N.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const A=ai(e,N.path);u=u.updateChild(A,N.currentOutputSnapshotRaw)}const w=u.val(!0),C=e;t.server_.put(C.toString(),w,y=>{Sy(t,"transaction put response",{path:C.toString(),status:y});let N=[];if(y==="ok"){const A=[];for(let R=0;R<n.length;R++)n[R].status=2,N=N.concat(Zo(t.serverSyncTree_,n[R].currentWriteId)),n[R].onComplete&&A.push(()=>n[R].onComplete(null,!0,n[R].currentOutputSnapshotResolved)),n[R].unwatcher();rh(t,F1(t.transactionQueueTree_,e)),U1(t,t.transactionQueueTree_),wo(t.eventQueue_,e,N);for(let R=0;R<A.length;R++)Kl(A[R])}else{if(y==="datastale")for(let A=0;A<n.length;A++)n[A].status===3?n[A].status=4:n[A].status=0;else{Si("transaction at "+C.toString()+" failed: "+y);for(let A=0;A<n.length;A++)n[A].status=4,n[A].abortReason=y}H1(t,e)}},g)}function H1(t,e){const n=Iy(t,e),r=Jl(n),l=Ty(t,n);return FA(t,l,r),r}function FA(t,e,n){if(e.length===0)return;const r=[];let l=[];const g=e.filter(w=>w.status===0).map(w=>w.currentWriteId);for(let w=0;w<e.length;w++){const C=e[w],y=ai(n,C.path);let N=!1,A;if(pe(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),C.status===4)N=!0,A=C.abortReason,l=l.concat(Zo(t.serverSyncTree_,C.currentWriteId,!0));else if(C.status===0)if(C.retryCount>=NA)N=!0,A="maxretry",l=l.concat(Zo(t.serverSyncTree_,C.currentWriteId,!0));else{const R=Ay(t,C.path,g);C.currentInputSnapshot=R;const H=e[w].update(R.val());if(H!==void 0){yy("transaction failed: Data returned ",H,C.path);let Z=Vn(H);typeof H=="object"&&H!=null&&$r(H,".priority")||(Z=Z.updatePriority(R.getPriority()));const me=C.currentWriteId,U=Ey(t),P=mA(Z,R,U);C.currentOutputSnapshotRaw=Z,C.currentOutputSnapshotResolved=P,C.currentWriteId=DA(t),g.splice(g.indexOf(me),1),l=l.concat(nA(t.serverSyncTree_,C.path,P,C.currentWriteId,C.applyLocally)),l=l.concat(Zo(t.serverSyncTree_,me,!0))}else N=!0,A="nodata",l=l.concat(Zo(t.serverSyncTree_,C.currentWriteId,!0))}wo(t.eventQueue_,n,l),l=[],N&&(e[w].status=2,function(R){setTimeout(R,Math.floor(0))}(e[w].unwatcher),e[w].onComplete&&(A==="nodata"?r.push(()=>e[w].onComplete(null,!1,e[w].currentInputSnapshot)):r.push(()=>e[w].onComplete(new Error(A),!1,null))))}rh(t,t.transactionQueueTree_);for(let w=0;w<r.length;w++)Kl(r[w]);U1(t,t.transactionQueueTree_)}function Iy(t,e){let n,r=t.transactionQueueTree_;for(n=st(e);n!==null&&wa(r)===void 0;)r=F1(r,n),e=Pt(e),n=st(e);return r}function Ty(t,e){const n=[];return Ny(t,e,n),n.sort((r,l)=>r.order-l.order),n}function Ny(t,e,n){const r=wa(e);if(r)for(let l=0;l<r.length;l++)n.push(r[l]);ih(e,l=>{Ny(t,l,n)})}function rh(t,e){const n=wa(e);if(n){let r=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[r]=n[l],r++);n.length=r,fy(e,n.length>0?n:void 0)}ih(e,r=>{rh(t,r)})}function zA(t,e){const n=Jl(Iy(t,e)),r=F1(t.transactionQueueTree_,e);return yA(r,l=>{$h(t,l)}),$h(t,r),gy(r,l=>{$h(t,l)}),n}function $h(t,e){const n=wa(e);if(n){const r=[];let l=[],u=-1;for(let g=0;g<n.length;g++)n[g].status===3||(n[g].status===1?(pe(u===g-1,"All SENT items should be at beginning of queue."),u=g,n[g].status=3,n[g].abortReason="set"):(pe(n[g].status===0,"Unexpected transaction status in abort"),n[g].unwatcher(),l=l.concat(Zo(t.serverSyncTree_,n[g].currentWriteId,!0)),n[g].onComplete&&r.push(n[g].onComplete.bind(null,new Error("set"),!1,null))));u===-1?fy(e,void 0):n.length=u+1,wo(t.eventQueue_,Jl(e),l);for(let g=0;g<r.length;g++)Kl(r[g])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let l=n[r];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function HA(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Si(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ag=function(t,e){const n=WA(t),r=n.namespace;n.domain==="firebase.com"&&Kr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Kr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||e3();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new M2(n.host,n.secure,r,l,e,"",r!==n.subdomain),path:new Mt(n.pathString)}},WA=function(t){let e="",n="",r="",l="",u="",g=!0,w="https",C=443;if(typeof t=="string"){let y=t.indexOf("//");y>=0&&(w=t.substring(0,y-1),t=t.substring(y+2));let N=t.indexOf("/");N===-1&&(N=t.length);let A=t.indexOf("?");A===-1&&(A=t.length),e=t.substring(0,Math.min(N,A)),N<A&&(l=UA(t.substring(N,A)));const R=HA(t.substring(Math.min(t.length,A)));y=e.indexOf(":"),y>=0?(g=w==="https"||w==="wss",C=parseInt(e.substring(y+1),10)):y=e.length;const H=e.slice(0,y);if(H.toLowerCase()==="localhost")n="localhost";else if(H.split(".").length<=2)n=H;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),n=e.substring(Z+1),u=r}"ns"in R&&(u=R.ns)}return{host:e,port:C,domain:n,subdomain:r,secure:g,scheme:w,pathString:l,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n,r,l){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bn(this.snapshot.exportVal())}}class My{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return pe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,l){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=l}get key(){return ot(this._path)?null:z2(this._path)}get ref(){return new Jr(this._repo,this._path)}get _queryIdentifier(){const e=lg(this._queryParams),n=g1(e);return n==="{}"?"default":n}get _queryObject(){return lg(this._queryParams)}isEqual(e){if(e=qu(e),!(e instanceof W1))return!1;const n=this._repo===e._repo,r=x1(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&r&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+B3(this._path)}}class Jr extends W1{constructor(e,n){super(e,n,new E1,!1)}get parent(){const e=H2(this._path);return e===null?null:new Jr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hl{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Mt(e),r=Ou(this.ref,e);return new Hl(this._node.getChild(n),r,tn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,l)=>e(new Hl(l,Ou(this.ref,r),tn)))}hasChild(e){const n=new Mt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ig(t,e){return t=qu(t),t._checkNotDeleted("ref"),e!==void 0?Ou(t._root,e):t._root}function Ou(t,e){return t=qu(t),st(t._path)===null?EA("child","path",e,!1):xy("child","path",e,!1),new Jr(t._repo,_n(t._path,e))}class V1{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new by("value",this,new Hl(e.snapshotNode,new Jr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new My(this,e,n):null}matches(e){return e instanceof V1?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class j1{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new My(this,e,n):null}createEvent(e,n){pe(e.childName!=null,"Child events should have a childName.");const r=Ou(new Jr(n._repo,n._path),e.childName),l=n._queryParams.getIndex();return new by(e.type,this,new Hl(e.snapshotNode,r,l),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof j1?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function jA(t,e,n,r,l){let u;if(typeof r=="object"&&(u=void 0,l=r),typeof r=="function"&&(u=r),l&&l.onlyOnce){const C=n,y=(N,A)=>{Sg(t._repo,t,w),C(N,A)};y.userCallback=n.userCallback,y.context=n.context,n=y}const g=new VA(n,u||void 0),w=e==="value"?new V1(g):new j1(e,g);return PA(t._repo,t,w),()=>Sg(t._repo,t,w)}function Tg(t,e,n,r){return jA(t,"value",e,n,r)}YS(Jr);JS(Jr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="FIREBASE_DATABASE_EMULATOR_HOST",gf={};let ZA=!1;function YA(t,e,n,r){t.repoInfo_=new M2(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function XA(t,e,n,r,l){let u=r||t.options.databaseURL;u===void 0&&(t.options.projectId||Kr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wn("Using default host for project ",t.options.projectId),u=`${t.options.projectId}-default-rtdb.firebaseio.com`);let g=Ag(u,l),w=g.repoInfo,C,y;typeof process<"u"&&jp&&(y=jp[GA]),y?(C=!0,u=`http://${y}?ns=${w.namespace}`,g=Ag(u,l),w=g.repoInfo):C=!g.repoInfo.secure;const N=l&&C?new ta(ta.OWNER):new h3(t.name,t.options,e);SA("Invalid Firebase Database URL",g),ot(g.path)||Kr("Database URL must point to the root of a Firebase Database (not including a child path).");const A=KA(w,t,N,new u3(t.name,n));return new qA(A,t)}function QA(t,e){const n=gf[e];(!n||n[t.key]!==t)&&Kr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),kA(t),delete n[t.key]}function KA(t,e,n,r){let l=gf[e.name];l||(l={},gf[e.name]=l);let u=l[t.toURLString()];return u&&Kr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new bA(t,ZA,n,r),l[t.toURLString()]=u,u}class qA{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(MA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jr(this._repo,xt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kr("Cannot call "+e+" on a deleted database.")}}function $A(t=BE(),e){const n=DE(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=AC("database");r&&JA(n,...r)}return n}function JA(t,e,n,r={}){t=qu(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Kr("Cannot call useEmulator() after instance has already been initialized.");const l=t._repoInternal;let u;if(l.repoInfo_.nodeAdmin)r.mockUserToken&&Kr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new ta(ta.OWNER);else if(r.mockUserToken){const g=typeof r.mockUserToken=="string"?r.mockUserToken:IC(r.mockUserToken,t.app.options.projectId);u=new ta(g)}YA(l,e,n,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){QE(kE),yu(new Dl("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return XA(r,l,u,n)},"PUBLIC").setMultipleInstances(!0)),Jo(Gp,Zp,t),Jo(Gp,Zp,"esm2017")}Gr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eI();const tI={apiKey:"AIzaSyBwM78rh1iYKCnJlW1-oYwB4dZbrRFdz-c",authDomain:"roomorientationdata.firebaseapp.com",databaseURL:"https://roomorientationdata-default-rtdb.firebaseio.com",projectId:"roomorientationdata",storageBucket:"roomorientationdata.appspot.com",messagingSenderId:"99942721154",appId:"1:99942721154:web:18939bfc42074d9316769b"},nI=d2(tI),Ng=$A(nI);function Oy({style:t}){const[e,n]=cn.useState(""),[r,l]=cn.useState(""),[u,g]=cn.useState(!1),[w,C]=cn.useState(!1),y=cn.useRef(null),[N,A]=cn.useState(!1),[R,H]=cn.useState(!1),[Z,W]=cn.useState(!1),[me,U]=cn.useState(!1),[P,k]=cn.useState(!1),[q,ge]=cn.useState(!1),[ue,Q]=cn.useState(""),[fe,ee]=cn.useState(!1),ze=()=>{console.log("tangaga"),event.preventDefault();const se=new uC("reader",{qrbox:{width:300,height:300},fps:20}),Re=Bt=>{console.log("QR Code Value Detected:",Bt),n(Bt),ee(!1),se.clear()},Ue=Bt=>{console.error(Bt)};fe?(se.clear(),ee(!1)):(ee(!0),se.render(Re,Ue))},je=se=>{const{value:Re}=se.target;Q(Re)},ve=()=>{A(!N),H(!N)},qe=()=>{W(!Z),U(!Z)};let Xe=[],$;const De=cn.useRef(null);cn.useEffect(()=>{De.current=ri.map("map",{center:[0,-.09],zoom:13,zoomControl:!1,crs:ri.CRS.EPSG3395}),De.current.setView([10,10],3);const se=()=>{g(!1),C(!1)};return document.body.addEventListener("click",se),()=>{De.current.remove(),document.body.removeEventListener("click",se)}},[]);const Oe=se=>{let Re=[{url:se,bounds:[[0,0],[10,10]]}];De.current.eachLayer(function(Ue){Ue instanceof ri.ImageOverlay&&De.current.removeLayer(Ue)}),Re.forEach(function(Ue){ri.imageOverlay(Ue.url,Ue.bounds).addTo(De.current)})};function te(se){se==="science2ndFloor"?Oe(dC):se==="BRS2ndFloor"&&Oe(pC)}const Te=se=>{le(),Le(),Et(se),Fs(se),te(se),hr(Xe)},le=()=>{De.current.eachLayer(se=>{se instanceof ri.Marker&&De.current.removeLayer(se)})},Le=()=>{De.current.eachLayer(se=>{se instanceof ri.Polyline&&De.current.removeLayer(se)})};let be=[];const Et=se=>{be=gC(se),He(De.current,be)},He=(se,Re)=>{Re.forEach(Ue=>{$e(Ue,se)})},$e=(se,Re)=>{if(!Re){console.error("Map not defined. Cannot add marker.");return}function Ue(Ze){switch(Ze){case 1:Te("science");break;case 2:Te("science2");break}}if(Object.prototype.hasOwnProperty.call(se,"label")){const Ze=ri.marker([se.lat,se.lon]).addTo(Re);se.label==="leaveButton"&&(Ze.bindPopup(`Node ${se.id}`),Ze.setIcon(ri.icon({iconUrl:fC,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]})),Ze.on("click",()=>{le(),Te(se.destination),wt(Xe,be)})),se.label==="classroom"&&(Ze.bindPopup(`Node ${se.id}`),Ze.setIcon(ri.icon({iconUrl:hC,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]}))),se.label==="elevator"&&(Ze.bindPopup(`Node ${se.id}`),Ze.setIcon(ri.icon({iconUrl:mp,iconSize:[20,20],iconAnchor:[16,16],popupAnchor:[0,-16]})),Ze.on("click",()=>{let oe=document.createElement("div");for(let at=1;at<=5;at++){let Je=document.createElement("button");Je.textContent=at,Je.addEventListener("click",()=>{Ue(at)}),oe.appendChild(Je)}Ze.getPopup().setContent(oe),Ze.openPopup()}));let hn="Your Current Location: ",fi="Your Destination: ",bi=Xe[0],ht=Xe[Xe.length-1];se.id===bi&&Ze.bindPopup(`<strong>${hn}</strong> Room: ${se.roomID}`),se.id===ht&&(Ze.bindPopup(`<strong>${fi}</strong> Room: ${se.roomID}`),Ze.openPopup())}const Bt=(Ze,hn,fi,bi)=>new Promise((ht,oe)=>{if(fi==="roomID"){const at=Ig(Ng,Ze);Tg(at,Je=>{const dt=Je.val();if(dt&&dt[hn]&&dt[hn].length>0&&dt[hn][bi]){const Nr=dt[hn][bi].roomID;ht(Nr)}else oe("No data for the specified floor or node")})}else oe("Type is not 'roomID'")});if(Object.prototype.hasOwnProperty.call(se,"title")){var On=ri.latLng(se.lat,se.lon);Bt(se.building,se.floor,"roomID",se.node).then(Ze=>{ri.marker(On,{icon:ri.divIcon({html:`<strong> Room: </strong> ${Ze}`,className:"text-below-marker"})}).addTo(Re)}).catch(Ze=>{console.error("Error:",Ze)})}wt(Xe,be)},ae=(se,Re)=>{for(let Ue=0;Ue<se.length;Ue++)for(let Bt=0;Bt<Re.length;Bt++)if(se[Ue]===Re[Bt].id)return console.log("ehe:",se[Ue]),Re[Bt].id},$t=se=>be.find(Re=>Re.id===se),wt=(se,Re)=>{const Ue=$t(ae(se,Re));Ue&&De.current.flyTo([Ue.lat,Ue.lon],8,{duration:1,easeLinearity:.5})},hr=se=>{for(let Re=0;Re<se.length-1;Re++){const Ue=$t(se[Re]),Bt=$t(se[Re+1]);Ue&&Bt&&Gi(De.current,Ue,Bt)}},Gi=(se,Re,Ue)=>{const Bt=[[Re.lat,Re.lon],[Ue.lat,Ue.lon]];ri.polyline(Bt,{weight:"4",color:"red"}).addTo(se)},nn=["S123","S214","S215","S216","S217","S218","S219","S220"],Ni=se=>{const{value:Re}=se.target;n(Re),g(Re.trim().length>0)},nt=se=>{const{value:Re}=se.target;l(Re),C(Re.trim().length>0)},Zi=(se,Re)=>{Re?(n(se),g(!1)):(l(se),C(!1))},Gn=se=>{se.preventDefault();const Re=(Ue,Bt)=>new Promise((On,Ze)=>{const hn=["1st Floor","2nd Floor"],fi=Ig(Ng,Ue);Tg(fi,bi=>{const ht=bi.val();for(let oe=0;oe<hn.length;oe++)for(let at=1;at<=2;at++)if(ht&&ht[hn[oe]]&&ht[hn[oe]][at])if(ht[hn[oe]][at].roomID===Bt.toLowerCase()||ht[hn[oe]][at].roomID===Bt.toUpperCase()){let Je=ht[hn[oe]][at].node;console.log(Je),On(Je);return}else console.log("wala data");else console.log("wala data");On("Room not found")},bi=>{Ze(bi)})});P?e[0].toLowerCase()==="s"&&Re("Science",e).then(Ue=>{Xe=_p("enterDestination",String(Ue),r,N,me),$=yp("enterDestination",String(Ue),r,N,me),Te($)}):q&&(Xe=_p("enterFindFacility",e,ue,N,me),$=yp("enterDestination",e,r,N,me),Te($))},dr=nn.filter(se=>se.toLowerCase().indexOf(e.toLowerCase())!==-1),Yt=nn.filter(se=>se.toLowerCase().indexOf(r.toLowerCase())!==-1),[gt,it]=cn.useState(""),Tr=se=>{const{value:Re}=se.target;it(Re),Re==="Enter Destination"?(k(!0),ge(!1)):(k(!1),ge(!0))},[Ce,fr]=cn.useState(""),Fs=se=>{se=="science2ndFloor"?fr("Science Building 2nd Floor, PE Building 2nd Floor"):se=="BRS2ndFloor"&&fr("BRS Building 2nd Floor")};return Pe.jsxs("div",{style:t,ref:y,children:[Pe.jsx("div",{id:"reader",style:{display:fe?"block":"none"}}),Pe.jsx("div",{id:"result"}),Pe.jsxs("div",{className:"sticky-div",children:[Pe.jsx("div",{children:Pe.jsxs("select",{value:gt,onChange:Tr,className:"pickButton",children:[Pe.jsx("option",{defaultValue:"",children:"Choose Destination"}),Pe.jsx("option",{value:"Enter Destination",children:"Enter Destination"}),Pe.jsx("option",{value:"Find Closest Facility",children:"Find Facility/Office"})]})}),Pe.jsx("div",{style:{display:P||q?"block":"none"},children:Pe.jsx("form",{children:Pe.jsxs("div",{style:{display:"flex",borderBottom:"4px solid #0c380c"},children:[Pe.jsxs("span",{style:{flex:"70%",background:"#0c380c"},children:[Pe.jsxs("div",{style:{display:"flex"},children:[Pe.jsx("div",{style:{flex:"100%"},children:Pe.jsx("label",{children:Pe.jsx("input",{className:"InputBox",placeholder:"Enter Your Current Location",type:"text",name:"currentPost",value:e,onChange:Ni})})}),Pe.jsx("div",{children:Pe.jsx("button",{className:"qrButton",onClick:ze,children:"QR"})})]}),u&&Pe.jsx("ul",{className:"Suggestions",children:dr.map((se,Re)=>Pe.jsx("li",{onClick:()=>Zi(se,!0),children:se},Re))}),Pe.jsx("label",{children:Pe.jsx("input",{className:"InputBox",placeholder:"Enter Your Destination",type:"text",name:"destination",value:r,onChange:nt,style:{display:P?"block":"none"}})}),w&&Pe.jsx("ul",{className:"Suggestions",children:Yt.map((se,Re)=>Pe.jsx("li",{onClick:()=>Zi(se,!1),children:se},Re))}),Pe.jsxs("select",{style:{display:P?"none":"block"},className:"InputBox",id:"selectFac",value:ue,onChange:je,children:[Pe.jsx("option",{children:"Select Facility"}),Pe.jsx("option",{children:"cr"}),Pe.jsx("option",{children:"Gymnasium"}),Pe.jsx("option",{children:"CEA: Faculty Office"}),Pe.jsx("option",{children:"test"})]})]}),Pe.jsx("span",{style:{flex:"30%",background:"#0c380c",borderLeft:"2px solid #0c380c",borderRight:"2px solid #0c380c",borderTop:"1px solid #0c380c"},children:Pe.jsxs("div",{children:[Pe.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[Pe.jsxs("div",{className:`CheckboxDiv ${R?"clicked":""}`,onClick:ve,children:[Pe.jsx("input",{type:"checkbox",className:"checkbox",id:"elev",checked:N,onChange:()=>{}}),Pe.jsx("img",{src:mp,className:"checkbox-image",alt:"Elevator Logo"})]}),Pe.jsxs("div",{className:`CheckboxDiv ${me?"clicked":""}`,onClick:qe,children:[Pe.jsx("input",{type:"checkbox",className:"checkbox",id:"emer",checked:Z,onChange:()=>{}}),Pe.jsx("img",{src:Sv,className:"checkbox-image",alt:"Elevator Logo"})]})]}),Pe.jsx("div",{children:Pe.jsx("button",{title:"Locate",className:"Locatebuttons",onClick:Gn,children:" Locate"})})]})})]})})}),Pe.jsx("div",{className:"currentPosition",style:{},children:Pe.jsxs("h4",{style:{textAlign:"center",margin:"5px",opacity:"0.6",borderRadius:"60px"},children:[" ",Ce]})})]}),Pe.jsx("div",{id:"map",style:{width:"100%",height:"1000px"}})]})}Oy.propTypes={style:Ev.object};function iI(){return Pe.jsx(Pe.Fragment,{children:Pe.jsx(Oy,{})})}Jh.createRoot(document.getElementById("root")).render(Pe.jsx(ax.StrictMode,{children:Pe.jsx(iI,{})}));
